{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/vscode-languageserver-protocol/lib/common/messages.js","webpack:///./node_modules/vscode-jsonrpc/lib/node/main.js","webpack:///./node_modules/vscode-json-languageservice/node_modules/vscode-nls/lib/main.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/node/main.js","webpack:///./node_modules/vscode-jsonrpc/lib/common/ral.js","webpack:///external \"util\"","webpack:///external \"url\"","webpack:///./node_modules/vscode-uri/lib/esm/index.js","webpack:///./node_modules/vscode-jsonrpc/lib/common/is.js","webpack:///./node_modules/vscode-jsonrpc/lib/common/events.js","webpack:///external \"path\"","webpack:///external \"fs\"","webpack:///./node_modules/vscode-languageserver/lib/node/main.js","webpack:///./node_modules/vscode-languageserver/lib/common/utils/is.js","webpack:///external \"net\"","webpack:///external \"https\"","webpack:///./node_modules/vscode-languageserver/lib/common/server.js","webpack:///./node_modules/vscode-jsonrpc/node.js","webpack:///./node_modules/vscode-jsonrpc/lib/common/disposable.js","webpack:///./node_modules/vscode-jsonrpc/lib/common/api.js","webpack:///./node_modules/vscode-jsonrpc/lib/common/messages.js","webpack:///./node_modules/vscode-jsonrpc/lib/common/cancellation.js","webpack:///external \"os\"","webpack:///./node_modules/vscode-languageserver/lib/common/utils/uuid.js","webpack:///../src/github/workspace/lib/vscode/extensions/json-language-features/server/src/utils/runner.ts","webpack:///external \"tls\"","webpack:///./node_modules/es6-promisify/dist/promisify.js","webpack:///external \"events\"","webpack:///./node_modules/debug/src/index.js","webpack:///./node_modules/debug/src/debug.js","webpack:///../src/github/workspace/lib/vscode/extensions/json-language-features/server/src/node/jsonServerMain.ts","webpack:///./node_modules/vscode-languageserver/node.js","webpack:///./node_modules/vscode-jsonrpc/lib/node/ril.js","webpack:///./node_modules/vscode-jsonrpc/lib/common/messageReader.js","webpack:///./node_modules/vscode-jsonrpc/lib/common/messageWriter.js","webpack:///./node_modules/vscode-jsonrpc/lib/common/semaphore.js","webpack:///./node_modules/vscode-jsonrpc/lib/common/connection.js","webpack:///./node_modules/vscode-jsonrpc/lib/common/linkedMap.js","webpack:///external \"crypto\"","webpack:///./node_modules/vscode-languageserver-protocol/lib/common/api.js","webpack:///./node_modules/vscode-languageserver-protocol/node_modules/vscode-languageserver-types/lib/esm/main.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/common/protocol.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/common/utils/is.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/common/protocol.implementation.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/common/protocol.typeDefinition.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/common/protocol.workspaceFolders.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/common/protocol.configuration.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/common/protocol.colorProvider.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/common/protocol.foldingRange.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/common/protocol.declaration.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/common/protocol.selectionRange.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/common/protocol.progress.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/common/protocol.callHierarchy.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/common/connection.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/common/protocol.semanticTokens.proposed.js","webpack:///./node_modules/vscode-languageserver/lib/common/progress.js","webpack:///./node_modules/vscode-languageserver/lib/common/configuration.js","webpack:///./node_modules/vscode-languageserver/lib/common/workspaceFolders.js","webpack:///./node_modules/vscode-languageserver/lib/common/callHierarchy.js","webpack:///./node_modules/vscode-languageserver/lib/node/files.js","webpack:///external \"child_process\"","webpack:///./node_modules/vscode-languageserver-protocol/node.js","webpack:///./node_modules/vscode-languageserver/lib/common/api.js","webpack:///./node_modules/vscode-languageserver/lib/common/semanticTokens.proposed.js","webpack:///../src/github/workspace/lib/vscode/extensions/json-language-features/server/src/jsonServer.ts","webpack:///../src/github/workspace/lib/vscode/extensions/json-language-features/server/src/languageModelCache.ts","webpack:///../src/github/workspace/lib/vscode/extensions/json-language-features/server/src/requests.ts","webpack:///./node_modules/request-light/lib/main.js","webpack:///external \"http\"","webpack:///./node_modules/http-proxy-agent/index.js","webpack:///./node_modules/agent-base/index.js","webpack:///./node_modules/agent-base/patch-core.js","webpack:///./node_modules/es6-promisify/dist/promise.js","webpack:///./node_modules/es6-promise/dist/es6-promise.js","webpack:///./node_modules/debug/src/browser.js","webpack:///./node_modules/ms/index.js","webpack:///./node_modules/debug/src/node.js","webpack:///external \"tty\"","webpack:////github/workspace/lib/vscode/node_modules/supports-color/index.js","webpack:////github/workspace/lib/vscode/node_modules/has-flag/index.js","webpack:///./node_modules/https-proxy-agent/index.js","webpack:///external \"assert\"","webpack:///./node_modules/https-proxy-agent/node_modules/agent-base/index.js","webpack:///./node_modules/https-proxy-agent/node_modules/agent-base/patch-core.js","webpack:///external \"zlib\"","webpack:///./node_modules/vscode-nls/lib/main.js","webpack:///./node_modules/jsonc-parser/lib/esm/impl/scanner.js","webpack:///./node_modules/jsonc-parser/lib/esm/impl/format.js","webpack:///./node_modules/jsonc-parser/lib/esm/impl/parser.js","webpack:///./node_modules/jsonc-parser/lib/esm/main.js","webpack:///./node_modules/vscode-languageserver-types/lib/esm/main.js","webpack:///./node_modules/vscode-json-languageservice/lib/esm/utils/objects.js","webpack:///./node_modules/vscode-languageserver-textdocument/lib/esm/main.js","webpack:///./node_modules/vscode-json-languageservice/lib/esm/jsonLanguageTypes.js","webpack:///./node_modules/vscode-json-languageservice/lib/esm/parser/jsonParser.js","webpack:///./node_modules/vscode-json-languageservice/lib/esm/utils/strings.js","webpack:///./node_modules/vscode-json-languageservice/lib/esm/services/jsonCompletion.js","webpack:///./node_modules/vscode-json-languageservice/lib/esm/utils/json.js","webpack:///./node_modules/vscode-json-languageservice/lib/esm/services/jsonHover.js","webpack:///./node_modules/vscode-json-languageservice/lib/esm/services/jsonSchemaService.js","webpack:///./node_modules/vscode-json-languageservice/lib/esm/services/jsonValidation.js","webpack:///./node_modules/vscode-json-languageservice/lib/esm/utils/colors.js","webpack:///./node_modules/vscode-json-languageservice/lib/esm/services/jsonDocumentSymbols.js","webpack:///./node_modules/vscode-json-languageservice/lib/esm/services/configuration.js","webpack:///./node_modules/vscode-json-languageservice/lib/esm/services/jsonFolding.js","webpack:///./node_modules/vscode-json-languageservice/lib/esm/services/jsonSelectionRanges.js","webpack:///./node_modules/vscode-json-languageservice/lib/esm/services/jsonDefinition.js","webpack:///./node_modules/vscode-json-languageservice/lib/esm/jsonLanguageService.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","vscode_jsonrpc_1","ProtocolRequestType0","RequestType0","method","super","ProtocolRequestType","RequestType","ProtocolNotificationType","NotificationType","ProtocolNotificationType0","NotificationType0","ril_1","default","install","api_1","path","os","crypto_1","net_1","__export","IPCMessageReader","AbstractMessageReader","process","this","eventEmitter","on","error","fireError","fireClose","callback","Disposable","off","IPCMessageWriter","AbstractMessageWriter","errorCount","msg","send","undefined","handleError","Promise","resolve","reject","SocketMessageReader","ReadableStreamMessageReader","socket","encoding","stream","asReadableStream","SocketMessageWriter","WriteableStreamMessageWriter","options","asWritableStream","dispose","destroy","StreamMessageReader","readble","StreamMessageWriter","writable","generateRandomPipeName","randomSuffix","randomBytes","toString","platform","join","tmpdir","createClientPipeTransport","pipeName","connectResolve","connected","_reject","server","createServer","close","listen","removeListener","onConnected","createServerPipeTransport","createConnection","createClientSocketTransport","port","createServerSocketTransport","createMessageConnection","input","output","logger","NullLogger","reader","read","writer","write","end","isMessageWriter","ConnectionStrategy","is","connectionStrategy","MessageFormat","BundleFormat","LocalizeInfo","resolvedBundles","isPseudo","fs","isDefined","isNumber","isString","readJsonFileSync","filename","JSON","parse","readFileSync","format","message","args","replace","length","match","rest","index","arg","replacement","String","createScopedLocalizeFunction","messages","_i","arguments","console","Error","stack","warn","localize","cacheBundle","bundle","loadNlsBundleOrCreateFromI18n","header","bundlePath","result","file","cacheRoot","id","hash","useMemoryOnly","writeBundle","flag","Date","utimes","err","code","SyntaxError","log","unlink","metaDataPath","languagePackLocation","translationsConfig","languagePack","contents","metaData","module_2","entry","translations","outDir","resultMessages","keys","messageKey","translatedMessage","push","createNLSBundle","writeFileSync","stringify","loadDefaultNlsBundle","folder","module_1","createDefaultNlsBundle","loadNlsBundle","languagePackSupport","languagePackId","translationsConfigFile","candidate","root","language","existsSync","lastIndexOf","substring","findInTheBoxBundle","loadMessageBundle","ext","extname","substr","messageFormat","both","headerFile","dirname","parent","tryFindMetaDataHeaderFile","nlsBundle","module_3","json","resolvedLanguage","cacheLanguageResolution","locale","resolveLanguage","Array","isArray","comment","env","VSCODE_NLS_CONFIG","vscodeOptions_1","availableLanguages","toLowerCase","isBoolean","_languagePackSupport","_cacheRoot","_languagePackId","_translationsConfigFile","_corruptedFile","exists","writeFile","_a","initializeSettings","config","opts","bundleFormat","standalone","node_1","createProtocolConnection","_ral","RAL","ral","require","extendStatics","isWindows","__extends","b","setPrototypeOf","__proto__","__","constructor","navigator","userAgent","indexOf","_schemePattern","_singleSlashStart","_doubleSlashStart","_slash","_regexp","URI","schemeOrData","authority","query","fragment","_strict","scheme","_schemeFix","_referenceResolution","ret","test","_validateUri","isUri","thing","fsPath","with","uriToFsPath","configurable","change","_URI","exec","percentDecode","idx","from","components","skipEncoding","_asFormatted","toJSON","revive","data","_formatted","external","_fsPath","_sep","_pathSepMarker","_super","_this","apply","res","$mid","encodeTable","encodeURIComponentFast","uriComponent","allowSlash","nativeEncodePos","pos","charCodeAt","encodeURIComponent","charAt","escaped","encodeURIComponentMinimal","uri","keepDriveLetterCasing","encoder","userinfo","fromCharCode","_rEncodedAsHex","str","decodeURIComponentGraceful","decodeURIComponent","string","array","boolean","number","Number","func","stringArray","every","elem","ral_1","Event","_disposable","None","CallbackList","context","bucket","_callbacks","_contexts","remove","foundCallbackWithDifferentContext","len","splice","callbacks","slice","contexts","e","Emitter","_options","_event","listener","thisArgs","disposables","onFirstListenerAdd","isEmpty","add","_noop","onLastListenerRemove","event","invoke","Is","server_1","fm","Files","uriToFilePath","resolveGlobalNodePath","resolveGlobalYarnPath","resolveModulePath","_shutdownReceived","exitTimer","runTimer","processId","parseInt","isNaN","setInterval","kill","ex","exit","argv","split","setupExitTimer","watchDog","initialize","params","arg1","arg2","arg3","arg4","factories","__brand","ConnectionOptions","stdin","stdout","transport","commandLineMessage","inputStream","_createConnection","typedArray","check","thenable","then","vscode_languageserver_protocol_1","UUID","progress_1","configuration_1","workspaceFolders_1","callHierarchy_1","null2Undefined","TextDocuments","configuration","_documents","_configuration","_onDidChangeContent","_onDidOpen","_onDidClose","_onDidSave","_onWillSave","handler","_willSaveWaitUntil","map","connection","__textDocumentSync","TextDocumentSyncKind","Full","onDidOpenTextDocument","td","textDocument","document","languageId","version","text","toFire","freeze","fire","onDidChangeTextDocument","changes","contentChanges","update","onDidCloseTextDocument","onWillSaveTextDocument","reason","onWillSaveTextDocumentWaitUntil","token","onDidSaveTextDocument","ErrorMessageTracker","_messages","count","forEach","window","showErrorMessage","RemoteConsoleImpl","_rawConnection","_connection","_capabilities","MessageType","Warning","Info","Log","type","sendNotification","LogMessageNotification","RemoteWindowImpl","ProgressFeature","actions","sendRequest","ShowMessageRequest","BulkRegistration","BulkRegistrationImpl","_registrations","_registered","Set","registerOptions","has","generateUuid","registrations","BulkUnregistration","BulkUnregistrationImpl","unregistrations","_unregistrations","Map","unregistration","set","values","unregisterations","UnregistrationRequest","_error","info","delete","RemoteClientImpl","typeOrRegistrations","registerOptionsOrType","registerMany","registerSingle1","registerSingle2","isAttached","attach","RegistrationRequest","_result","unregisterSingle","asRegistrationParams","registration","RemoteWorkspaceImpl","WorkspaceFoldersFeature","ConfigurationFeature","paramOrEdit","edit","ApplyWorkspaceEditRequest","TracerImpl","_trace","Trace","Off","verbose","LogTraceNotification","Verbose","TelemetryImpl","TelemetryEventNotification","_LanguagesImpl","attachWorkDone","_type","attachPartialResult","LanguagesImpl","CallHierarchyFeature","combineConsoleFeatures","one","two","Base","combineTelemetryFeatures","combineTracerFeatures","combineClientFeatures","combineWindowFeatures","combineWorkspaceFeatures","combineLanguagesFeatures","combineFeatures","combine","tracer","telemetry","client","workspace","connectionFactory","rawAttach","remoteWindow","languages","allRemotes","asPromise","resolved","shutdownHandler","initializeHandler","exitHandler","protocolConnection","onRequest","param","onNotification","onProgress","sendProgress","onInitialize","onInitialized","InitializedNotification","onShutdown","onExit","onDidChangeConfiguration","DidChangeConfigurationNotification","onDidChangeWatchedFiles","DidChangeWatchedFilesNotification","DidOpenTextDocumentNotification","DidChangeTextDocumentNotification","DidCloseTextDocumentNotification","WillSaveTextDocumentNotification","WillSaveTextDocumentWaitUntilRequest","DidSaveTextDocumentNotification","sendDiagnostics","PublishDiagnosticsNotification","onHover","HoverRequest","cancel","onCompletion","CompletionRequest","onCompletionResolve","CompletionResolveRequest","onSignatureHelp","SignatureHelpRequest","onDeclaration","DeclarationRequest","onDefinition","DefinitionRequest","onTypeDefinition","TypeDefinitionRequest","onImplementation","ImplementationRequest","onReferences","ReferencesRequest","onDocumentHighlight","DocumentHighlightRequest","onDocumentSymbol","DocumentSymbolRequest","onWorkspaceSymbol","WorkspaceSymbolRequest","onCodeAction","CodeActionRequest","onCodeLens","CodeLensRequest","onCodeLensResolve","CodeLensResolveRequest","onDocumentFormatting","DocumentFormattingRequest","onDocumentRangeFormatting","DocumentRangeFormattingRequest","onDocumentOnTypeFormatting","DocumentOnTypeFormattingRequest","onRenameRequest","RenameRequest","onPrepareRename","PrepareRenameRequest","onDocumentLinks","DocumentLinkRequest","onDocumentLinkResolve","DocumentLinkResolveRequest","onDocumentColor","DocumentColorRequest","onColorPresentation","ColorPresentationRequest","onFoldingRanges","FoldingRangeRequest","onSelectionRanges","SelectionRangeRequest","onExecuteCommand","ExecuteCommandRequest","remote","InitializeRequest","trace","fromString","capabilities","CancellationTokenSource","ResponseError","textDocumentSync","fillServerCapabilities","ShutdownRequest","shutdownReceived","ExitNotification","SetTraceNotification","messages_1","RequestType1","RequestType2","RequestType3","RequestType4","RequestType5","RequestType6","RequestType7","RequestType8","RequestType9","ErrorCodes","NotificationType1","NotificationType2","NotificationType3","NotificationType4","NotificationType5","NotificationType6","NotificationType7","NotificationType8","NotificationType9","disposable_1","events_1","cancellation_1","CancellationToken","messageReader_1","MessageReader","messageWriter_1","MessageWriter","connection_1","ProgressType","TraceFormat","ConnectionErrors","ConnectionError","CancellationReceiverStrategy","CancellationSenderStrategy","CancellationStrategy","ParseError","InvalidRequest","MethodNotFound","InvalidParams","InternalError","serverErrorStart","serverErrorEnd","ServerNotInitialized","UnknownErrorCode","RequestCancelled","ContentModified","MessageWriteError","MessageReadError","AbstractMessageSignature","_method","_numberOfParams","_","isRequestMessage","isNotificationMessage","isResponseMessage","isCancellationRequested","onCancellationRequested","Cancelled","shortcutEvent","handle","timer","setTimeout","clearTimeout","MutableToken","_isCancelled","_emitter","_token","ValueUUID","_value","other","asHex","V4UUID","_randomHex","_oneOf","_timeHighBits","Math","floor","random","_chars","v4","empty","_UUIDPattern","isUUID","formatError","cancelValue","errorVal","errorMessage","setImmediate","ES6Promise","thatLooksLikeAPromiseToMe","catch","original","settings","_len","_key","returnMultipleArguments","multiArgs","target","thisArg","_len2","_key2","response","createDebug","namespace","prevTime","debug","enabled","self","curr","ms","diff","prev","coerce","unshift","formatter","formatters","val","formatArgs","logFn","useColors","color","colors","abs","selectColor","init","instances","disable","enable","namespaces","save","names","skips","RegExp","instance","humanize","startServer","getContent","location","readFile","buf","http","_encoding","xhr","url","followRedirects","headers","responseText","getErrorStatusDescription","status","configureHttpRequests","configure","util_1","CR","Buffer","LF","MessageBuffer","buffer","allocUnsafe","chunk","toAppend","newSize","ceil","concat","current","trim","nextStart","alloc","copy","ReadableStreamWrapper","WritableStreamWrapper","_ril","messageBuffer","applicationJson","encode","charset","decoder","decode","TextDecoder","clearImmediate","RIL","ResolvedMessageReaderOptions","onError","onClose","onPartialMessage","errorEmitter","closeEmitter","partialMessageEmitter","asError","fromOptions","contentDecoder","contentDecoders","contentTypeDecoder","contentTypeDecoders","readable","_partialMessageTimeout","nextMessageLength","messageToken","timeout","partialMessageTimer","onData","append","tryReadHeaders","contentLength","body","tryReadBody","setPartialMessageTimer","clearPartialMessageTimer","firePartialMessage","waitingTime","semaphore_1","ResolvedMessageWriterOptions","_b","contentTypeEncoder","contentEncoder","writeSemaphore","Semaphore","byteLength","doWrite","lock","async","capacity","_capacity","_active","_waiting","thunk","runNext","doRunNext","next","shift","linkedMap_1","CancelNotification","ProgressNotification","ConnectionState","Messages","Text","cancelUndispatched","Message","createCancellationTokenSource","conn","sendCancellation","cleanup","receiver","sender","cancellationStrategy","messageReader","messageWriter","_logger","sequenceNumber","notificationSquenceNumber","unknownResponseSquenceNumber","starRequestHandler","requestHandlers","starNotificationHandler","notificationHandlers","progressHandlers","messageQueue","LinkedMap","responsePromises","requestTokens","traceFormat","state","New","unhandledNotificationEmitter","unhandledProgressEmitter","disposeEmitter","createRequestQueueKey","addMessageToQueue","queue","_message","isListening","Listening","isClosed","Closed","isDisposed","Disposed","closeHandler","triggerMessageQueue","size","requestMessage","reply","resultOrError","startTime","jsonrpc","toJson","traceSendingResponse","replyError","logLSPMessage","traceReceivedRequest","element","requestHandler","now","tokenKey","cancellationSource","handlerResult","numberOfParams","promise","replySuccess","handleRequest","notificationHandler","source","traceReceivedNotification","handleNotification","responseMessage","responsePromise","timerStart","traceReceivedResponse","handleResponse","responseHandler","handleInvalidMessage","processMessageQueue","toCancel","strategy","lspMessage","isLSPMessage","timestamp","throwIfClosedOrDisposed","undefinedToNull","computeMessageParams","messageParams","notificationMessage","traceSendingNotification","onUnhandledProgress","throwIfNotListening","last","disposable","traceSendingRequest","_tracer","sendNotificationOrTraceOptions","_sendNotification","_traceFormat","onUnhandledNotification","onDispose","AlreadyListening","throwIfListening","inspect","Touch","First","AsOld","Last","AsNew","_map","_head","_tail","_size","_state","clear","touch","item","previous","addItemLast","addItemFirst","removeItem","callbackfn","iterator","done","entries","currentSize","LRUCache","limit","ratio","_limit","_ratio","min","max","checkTrim","trimOld","round","st","Proposed","SemanticTokensRequest","SemanticTokensEditsRequest","SemanticTokensRangeRequest","SemanticTokenTypes","SemanticTokenModifiers","SemanticTokens","Position","Range","Location","LocationLink","Color","ColorInformation","ColorPresentation","FoldingRangeKind","FoldingRange","DiagnosticRelatedInformation","DiagnosticSeverity","DiagnosticTag","DiagnosticCode","Diagnostic","Command","TextEdit","TextDocumentEdit","CreateFile","RenameFile","DeleteFile","WorkspaceEdit","line","character","objectLiteral","three","four","start","range","defined","targetUri","targetRange","targetSelectionRange","originSelectionRange","red","green","blue","alpha","label","textEdit","additionalTextEdits","startLine","endLine","startCharacter","endCharacter","kind","Information","Hint","Unnecessary","Deprecated","severity","relatedInformation","title","command","newText","insert","position","del","edits","VersionedTextDocumentIdentifier","overwrite","ignoreIfExists","oldUri","newUri","recursive","ignoreIfNotExists","documentChanges","TextDocumentIdentifier","TextDocumentItem","MarkupKind","MarkupContent","CompletionItemKind","InsertTextFormat","CompletionItemTag","InsertReplaceEdit","CompletionItem","CompletionList","MarkedString","Hover","ParameterInformation","SignatureInformation","DocumentHighlightKind","DocumentHighlight","SymbolKind","SymbolTag","SymbolInformation","DocumentSymbol","CodeActionKind","CodeActionContext","CodeAction","CodeLens","FormattingOptions","DocumentLink","SelectionRange","TextEditChangeImpl","all","WorkspaceChange","workspaceEdit","_textEditChanges","_workspaceEdit","textEditChange","getTextEditChange","textDocumentEdit","createFile","checkDocumentChanges","renameFile","deleteFile","PlainText","Markdown","Method","Function","Constructor","Field","Variable","Class","Interface","Module","Property","Unit","Value","Enum","Keyword","Snippet","File","Reference","Folder","EnumMember","Constant","Struct","Operator","TypeParameter","items","isIncomplete","fromPlainText","plainText","documentation","parameters","Read","Write","Namespace","Package","Boolean","Key","Null","containerName","detail","selectionRange","children","deprecated","tags","Empty","QuickFix","Refactor","RefactorExtract","RefactorInline","RefactorRewrite","Source","SourceOrganizeImports","SourceFixAll","diagnostics","only","commandOrEdit","isPreferred","tabSize","insertSpaces","TextDocument","EOL","content","FullTextDocument","lineCount","getText","positionAt","offsetAt","applyEdits","sortedEdits","mergeSort","compare","left","right","leftIdx","rightIdx","a","lastModifiedOffset","startOffset","endOffset","_uri","_languageId","_version","_content","_lineOffsets","getLineOffsets","lineOffsets","isLineStart","ch","offset","low","high","mid","lineOffset","nextLineOffset","protocol_implementation_1","protocol_typeDefinition_1","protocol_workspaceFolders_1","WorkspaceFoldersRequest","DidChangeWorkspaceFoldersNotification","protocol_configuration_1","ConfigurationRequest","protocol_colorProvider_1","protocol_foldingRange_1","protocol_declaration_1","protocol_selectionRange_1","protocol_progress_1","WorkDoneProgress","WorkDoneProgressCreateRequest","WorkDoneProgressCancelNotification","protocol_callHierarchy_1","DocumentFilter","DocumentSelector","CallHierarchyIncomingCallsRequest","CallHierarchyOutgoingCallsRequest","CallHierarchyPrepareRequest","pattern","ResourceOperationKind","Create","Rename","Delete","FailureHandlingKind","Abort","Transactional","TextOnlyTransactional","Undo","StaticRegistrationOptions","hasId","TextDocumentRegistrationOptions","documentSelector","WorkDoneProgressOptions","workDoneProgress","hasWorkDoneProgress","InitializeError","unknownProtocolVersion","ShowMessageNotification","Incremental","TextDocumentSaveReason","Manual","AfterDelay","FocusOut","FileChangeType","Created","Changed","Deleted","WatchKind","Change","CompletionTriggerKind","Invoked","TriggerCharacter","TriggerForIncompleteCompletions","resultType","SignatureHelpTriggerKind","ContentChange","resultId","uuid_1","WorkDoneProgressReporterImpl","Instances","percentage","cancellable","arg0","WorkDoneProgressServerReporterImpl","_source","NullProgressReporter","NullProgressServerReporter","ResultProgress","workDoneToken","_progressSupported","progress","ResultProgressReporterImpl","partialResultToken","_getConfiguration","section","workspaceCapabilities","workspaceFolders","_onDidChangeWorkspaceFolders","_unregistration","register","onPrepare","attachWorkDoneProgress","onIncomingCalls","attachPartialResultProgress","onOutgoingCalls","child_process_1","moduleName","nodePath","cwd","app","newEnv","delimiter","cp","fork","execArgv","pid","npmCommand","shell","spawnSync","prefix","FileSystem","parsed","protocol","segments","first","second","normalize","yarnCommand","results","stderr","lines","yarn","_isCaseSensitive","isCaseSensitive","__filename","toUpperCase","isParent","child","workspaceRoot","isAbsolute","ProposedFeatures","SemanticTokensFeature","SemanticTokensBuilder","onEdits","onRange","_prevData","_id","_prevLine","_prevChar","_data","_dataLen","char","tokenType","tokenModifiers","pushLine","pushChar","prevDataLength","dataLength","startIndex","endIndex","newData","deleteCount","build","SchemaAssociationNotification","VSCodeContentRequest","SchemaContentChangeNotification","ResultLimitReachedNotification","ForceValidateRequest","workspaceContext","resolveRelativePath","relativePath","resource","base","resolvePath","runtime","getSchemaRequestService","handledSchemas","builtInHandlers","builtInHandler","languageService","getLanguageService","contributions","clientCapabilities","ClientCapabilities","LATEST","documents","clientSnippetSupport","dynamicFormatterRegistration","hierarchicalDocumentSymbolSupport","foldingRangeLimitDefault","MAX_VALUE","foldingRangeLimit","resultLimit","formatterMaxNumberOfEdits","handledProtocols","initializationOptions","handledSchemaProtocols","getClientCapability","def","schemaRequestService","provideFormatter","customCapabilities","rangeFormatting","editLimit","completionProvider","resolveProvider","triggerCharacters","hoverProvider","documentSymbolProvider","documentRangeFormattingProvider","colorProvider","foldingRangeProvider","selectionRangeProvider","definitionProvider","limitExceededWarnings","pendingWarnings","warning","onResultLimitExceeded","features","refresh","basename","jsonConfigurationSettings","schemaAssociations","formatterRegistration","updateConfiguration","languageSettings","validate","allowComments","schemas","association","fileMatch","schema","triggerValidation","proxy","proxyStrictSSL","trunc","associations","resetSchema","validateTextDocument","onDidChangeContent","onDidClose","cleanPendingValidation","pendingValidationRequests","request","respond","jsonDocument","getJSONDocument","documentSettings","comments","trailingCommas","doValidation","currDocument","hasChanges","jsonDocuments","getLanguageModelCache","parseJSONDocument","onDocumentRemoved","textDocumentPosition","runSafeAsync","doComplete","textDocumentPositionParams","doHover","documentSymbolParams","runSafe","findDocumentSymbols2","findDocumentSymbols","formatParams","findDocumentColors","getColorPresentations","onRangeLimitExceeded","getFoldingRanges","rangeLimit","getSelectionRanges","positions","findDefinition","maxEntries","cleanupIntervalTimeInSec","languageModels","nModels","cleanupInterval","cutoffTime","uris","cTime","languageModelInfo","languageModel","oldestTime","oldestUri","clearInterval","lastIndexOfSlash","Slash","Dot","isAbsolutePath","normalizePath","parts","newParts","part","pop","joinPath","uriString","paths","url_1","https","HttpProxyAgent","HttpsProxyAgent","zlib","nls","proxyUrl","strictSSL","assign","destination","sources","_proxyUrl","_strictSSL","agent","rawRequestURL","requestURL","proxyURL","HTTP_PROXY","http_proxy","HTTPS_PROXY","https_proxy","getSystemProxyURI","proxyEndpoint","host","hostname","auth","rejectUnauthorized","getProxyAgent","req","endpoint","user","password","statusCode","isCompleted","gunzip","createGunzip","pipe","inflate","createInflate","responseType","net","tls","Agent","inherits","secureProxy","pathname","fn","absolute","setHeader","connect","_header","_implicitHeader","endOfHeaders","promisify","EventEmitter","_opts","addRequest","ownOpts","secureEndpoint","_defaultAgent","defaultPort","_last","shouldKeepAlive","timedOut","timeoutMs","onerror","_hadError","emit","callbackError","onSocket","cb","globalObject","global","P","factory","isFunction","x","vertxNext","customSchedulerFn","asap","flush","scheduleFlush","browserWindow","browserGlobal","BrowserMutationObserver","MutationObserver","WebKitMutationObserver","isNode","isWorker","Uint8ClampedArray","importScripts","MessageChannel","useSetTimeout","globalSetTimeout","channel","iterations","observer","node","onFulfillment","onRejection","_arguments","noop","PROMISE_ID","makePromise","invokeCallback","subscribe","resolve$1","nextTick","createTextNode","observe","characterData","port1","onmessage","port2","postMessage","vertx","runOnLoop","runOnContext","attemptVertx","GET_THEN_ERROR","ErrorObject","getThen","handleMaybeThenable","maybeThenable","then$$1","fulfill","handleOwnThenable","sealed","fulfillmentHandler","rejectionHandler","tryThen","_label","handleForeignThenable","TypeError","publishRejection","_onerror","publish","_subscribers","subscribers","settled","TRY_CATCH_ERROR","hasCallback","succeeded","failed","tryCatch","Enumerator$1","_instanceConstructor","_remaining","_enumerate","Promise$2","resolver","needsResolver","initializePromise","needsNew","_eachEntry","resolve$$1","_then","_settledAt","_willSettleAt","enumerator","race","_setScheduler","scheduleFn","_setAsap","asapFn","_asap","polyfill","local","promiseToString","cast","load","storage","DEBUG","lastC","documentElement","style","WebkitAppearance","firebug","exception","table","$1","chrome","localStorage","localstorage","j","v","h","plural","parseFloat","long","fmtShort","tty","util","inspectOpts","colorCode","hideDate","toISOString","isatty","fd","supportsColor","level","filter","reduce","obj","prop","k","O","hasFlag","forceColor","getSupportLevel","hasBasic","has256","has16m","translateLevel","isTTY","TERM","osRelease","release","versions","some","sign","CI_NAME","TEAMCITY_VERSION","COLORTERM","TERM_PROGRAM_VERSION","TERM_PROGRAM","FORCE_COLOR","startsWith","terminatorPos","assert","ALPNProtocols","resume","buffers","buffersLength","buffered","firstLine","sock","servername","once","Socket","onsocket","ondata","onend","onclose","listenerCount","secure","_promisifiedCallback","freeSocket","patchMarker","_url","vscodeOptions","createScanner","ignoreTrivia","tokenOffset","lineNumber","lineStartOffset","tokenLineStartOffset","prevTokenLineStartOffset","scanError","scanHexDigits","exact","digits","scanNext","isWhiteSpace","isLineBreak","ch3","scanString","safeLength","commentClosed","isDigit","scanNumber","isUnknownContentCharacter","setPosition","newPosition","getPosition","scan","getToken","getTokenValue","getTokenOffset","getTokenLength","getTokenStartLine","getTokenStartCharacter","getTokenError","documentText","initialIndentLevel","formatText","formatTextStart","rangeStart","rangeEnd","isEOL","nChars","computeIndentLevel","indentValue","eol","getEOL","lineBreak","indentLevel","repeat","scanner","hasError","newLineAndIndent","editOperations","addEdit","firstToken","firstTokenStart","firstTokenEnd","secondToken","replaceContent","ParseOptions","visit","visitor","DEFAULT","_scanner","toNoArgVisit","visitFunction","toOneArgVisit","onObjectBegin","onObjectProperty","onObjectEnd","onArrayBegin","onArrayEnd","onLiteralValue","onSeparator","onComment","disallowComments","allowTrailingComma","skipUntilAfter","skipUntil","parseString","isValue","parseValue","needsComma","parseArray","parseObject","parseLiteral","allowEmptyContent","errors","currentProperty","currentParent","previousParents","onValue","findNodeAtOffset","includeRightBound","contains","getNodePath","getNodeValue","valueNode","equals","oneKeys","sort","otherKeys","ErrorCode","changes_1","isIncremental","getWellformedRange","addedLineOffsets","computeLineOffsets","isFull","rangeLength","isAtLineStart","textOffset","getWellformedEdit","spans","sortedEdits_1","completion","completionItem","documentationFormat","commitCharactersSupport","EnumMatch","formats","ASTNodeImpl","NullASTNodeImpl","BooleanASTNodeImpl","boolValue","ArrayASTNodeImpl","NumberASTNodeImpl","isInteger","NaN","StringASTNodeImpl","PropertyASTNodeImpl","keyNode","colonOffset","ObjectASTNodeImpl","properties","asSchema","SchemaCollector","focusOffset","exclude","merge","include","newSub","NoOpSchemaCollector","ValidationResult","problems","propertiesMatches","propertiesValueMatches","primaryValueMatches","enumValueMatch","enumValues","hasProblems","mergeAll","validationResults","validationResults_1","validationResult","mergeEnumValues","EnumValueMismatch","mergePropertyMatch","propertyValidationResult","JSONDocument","syntaxErrors","getNodeFromOffset","doVisit_1","ctn","getMatchingSchemas","matchingSchemas","seenKeys","unprocessedProperties","propertyNode","required","_c","propertyName","propertyProcessed","_d","_e","propertySchema","patternProperties","_f","_g","propertyPattern","regex","_h","_j","additionalProperties","_k","unprocessedProperties_1","_l","unprocessedProperties_2","maxProperties","minProperties","dependencies","_m","_o","propertyDep","_p","propertyDep_1","requiredProp","propertyNames","_q","_r","f","_validateObjectNode","subSchemas","subSchema","itemValidationResult","additionalItems","itemSchema","containsSchema","minItems","maxItems","uniqueItems","values_1","_validateArrayNode","minLength","maxLength","patternErrorMessage","_validateStringNode","multipleOf","getExclusiveLimit","exclusive","getLimit","exclusiveMinimum","minimum","exclusiveMaximum","maximum","_validateNumberNode","matchesType","allOf","subSchemaRef","notSchema","not","subValidationResult","subMatchingSchemas","inverted","testAlternatives","alternatives","maxOneMatch","matches","bestMatch","alternatives_1","compareResult","anyOf","oneOf","testBranch","ifSchema","if","thenSchema","elseSchema","testCondition","else","enum","const","deprecationMessage","_validateNode","lastProblemOffset","commentRanges","collectComments","_scanNext","token_1","_checkScanError","_errorAtRange","_finalize","token_2","InvalidUnicode","InvalidEscapeCharacter","UnexpectedEndOfNumber","UnexpectedEndOfComment","UnexpectedEndOfString","InvalidCharacter","keyPlaceholder","_parseProperty","keysSeen","_parseString","Undefined","seen","DuplicateKey","ColonExpected","_parseValue","ValueExpected","commaOffset","TrailingComma","CommaExpected","CommaOrCloseBacketExpected","_parseArray","PropertyExpected","CommaOrCloseBraceExpected","_parseObject","tokenValue","numberValue","_parseNumber","_parseLiteral","_root","endsWith","haystack","needle","convertSimple2RegExpPattern","JSONCompletion","schemaService","promiseConstructor","doResolve","resolveCompletion","doc","isInComment","overwriteRange","currentWord","getCurrentWord","overwriteStart","proposed","collector","suggestion","existing","shortendedLabel","insertText","setAsIncomplete","getNumberOfProposals","getSchemaForResource","collectionPromises","addValue","currentKey","separatorAfter_1","evaluateSeparatorAfter","getPropertyCompletions","getSchemaLessPropertyCompletions","location_1","contribution","collectPromise","collectPropertyCompletions","getLabelForValue","getInsertTextForProperty","insertTextFormat","types","getValueCompletions","getSchemaLessValueCompletions","getContributedValueCompletions","offsetForSeparator","separatorAfter","addFillerValueCompletions","schemaProperties_1","doNotSuggest","proposal","filterText","getFilterTextForValue","fromMarkup","markdownDescription","description","suggestSortText","sortText","collectCompletionsForSimilarObject","getInsertTextForValue","parentKey_1","getSuggestionKind","collectSuggestionsForValues","getLabelTextForMatchingNode","getInsertTextForMatchingNode","addBooleanValueCompletion","parentKey_2","addDollarSchemaCompletions","parentKey_3","parentKey","valueNode_1","matchingSchemas_1","findItemAtOffset","addSchemaValueCompletions","addNullValueCompletion","parentKey_4","location_2","collectValueCompletions","collectDefaultCompletions","addEnumValueCompletions","addDefaultValueCompletions","collectTypes","arrayDepth","hasProposals","examples","example","defaultSnippets","getInsertTextForSnippetValue","getFilterTextForSnippetValue","getLabelForSnippetValue","bodyText","suffix","indent","enm","markdownEnumDescriptions","doesSupportMarkdown","enumDescriptions","getInsertTextForGuessedValue","getRegisteredSchemaIds","schemaId","getInsertTextForPlainText","stringifyObject","stringifyLiteral","newIndent","snippetValue","propertyText","resultText","nValueProposals","markupString","supportsMarkdown","doesSupportsCommitCharacters","supportsCommitCharacters","JSONHover","hoverRangeNode","hoverRange","createHover","getInfoContribution","htmlContent","title_1","markdownDescription_1","markdownEnumValueDescription_1","enumValue_1","toMarkdown","toMarkdownCodeBlock","plain","FilePatternAssociation","patternRegExps","isInclude","pattern_1","matchesPattern","fileName","getURIs","SchemaHandle","service","unresolvedSchemaContent","unresolvedSchema","UnresolvedSchema","getUnresolvedSchema","loadSchema","getResolvedSchema","resolvedSchema","unresolved","resolveSchemaContent","clearSchema","ResolvedSchema","getSection","schemaRef","getSectionRecursive","JSONSchemaService","requestService","contextService","callOnDispose","contributionSchemas","contributionAssociations","schemasById","filePatternAssociations","registeredSchemasIds","onResourceChange","toWalk","normalizeId","setSchemaContributions","schemaContributions","normalizedId","addSchemaHandle","schemaAssociations_1","schemaAssociation","addFilePatternAssociation","schemaHandle","getOrAddSchemaHandle","fpa","registerExternalSchema","filePatterns","cachedSchemaForResource","clearExternalSchemas","contributionAssociation","toDisplayString","schemaContent","jsonErrors","errorSplit","schemaToResolve","schemaURL","resolveErrors","$schema","sourceRoot","sourceURI","refSegment","findSection","resolveExternalLink","parentSchemaURL","parentSchemaDependencies","referencedHandle","loc","resolveRefs","parentSchema","openPromises","handleRef","seenRefs","$ref","ref","entries_1","collectEntries","maps","maps_1","collectMapEntries","definitions","arrays","arrays_1","array_1","collectArrayEntries","schemaProperties","schemeId","createCombinedSchema","schemaIds","combinedSchemaId","combinedSchema","JSONValidation","jsonSchemaService","validationEnabled","raw","commentSeverity","added","addProblem","problem","signature","getDiagnostics","trailingCommaSeverity","toDiagnosticSeverity","astRoot","SchemaResolveError","semanticErrors","schemaAllowsComments","allow","schemaAllowsTrailingCommas","allowTrailingCommas","deprSchemaRef","message_1","CommentNotPermitted","idCounter","severityLevel","hexDigit","charCode","colorFromHex","JSONDocumentSymbols","resourceString","result_1","getRange","toVisit","nextToVisit","limitExceeded","collectOutlineEntries","childContainerName","getKeyLabel","getSymbolKind","result_2","symbol","nodeType","visitedNode","nodeId","red256","green256","blue256","toTwoDigitHex","descriptions","$id","$comment","readOnly","contentMediaType","contentEncoding","schemaName","propertyObject","ranges","nestingLevels","prevStart","addRange","Comment","Region","counts","nestingLevels_1","maxLevel","newRange","getOffsetAfterNextToken","expectedToken","cStart","cEnd","afterCommaOffset","isRef","targetNode","tokens","parseJSONPointer","findNode","pointer","find","arrayItem","findTargetNode","definition","createRange","jsonCompletion","jsonHover","jsonDocumentSymbols","jsonValidation","newJSONDocument","findColorSymbols"],"mappings":"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","file":"jsonServerMain.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 30);\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nclass ProtocolRequestType0 extends vscode_jsonrpc_1.RequestType0 {\n    constructor(method) {\n        super(method);\n    }\n}\nexports.ProtocolRequestType0 = ProtocolRequestType0;\nclass ProtocolRequestType extends vscode_jsonrpc_1.RequestType {\n    constructor(method) {\n        super(method);\n    }\n}\nexports.ProtocolRequestType = ProtocolRequestType;\nclass ProtocolNotificationType extends vscode_jsonrpc_1.NotificationType {\n    constructor(method) {\n        super(method);\n    }\n}\nexports.ProtocolNotificationType = ProtocolNotificationType;\nclass ProtocolNotificationType0 extends vscode_jsonrpc_1.NotificationType0 {\n    constructor(method) {\n        super(method);\n    }\n}\nexports.ProtocolNotificationType0 = ProtocolNotificationType0;\n//# sourceMappingURL=messages.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\nconst ril_1 = require(\"./ril\");\n// Install the node runtime abstract.\nril_1.default.install();\nconst api_1 = require(\"../common/api\");\nconst path = require(\"path\");\nconst os = require(\"os\");\nconst crypto_1 = require(\"crypto\");\nconst net_1 = require(\"net\");\n__export(require(\"../common/api\"));\nclass IPCMessageReader extends api_1.AbstractMessageReader {\n    constructor(process) {\n        super();\n        this.process = process;\n        let eventEmitter = this.process;\n        eventEmitter.on('error', (error) => this.fireError(error));\n        eventEmitter.on('close', () => this.fireClose());\n    }\n    listen(callback) {\n        this.process.on('message', callback);\n        return api_1.Disposable.create(() => this.process.off('message', callback));\n    }\n}\nexports.IPCMessageReader = IPCMessageReader;\nclass IPCMessageWriter extends api_1.AbstractMessageWriter {\n    constructor(process) {\n        super();\n        this.process = process;\n        this.errorCount = 0;\n        let eventEmitter = this.process;\n        eventEmitter.on('error', (error) => this.fireError(error));\n        eventEmitter.on('close', () => this.fireClose);\n    }\n    write(msg) {\n        try {\n            if (typeof this.process.send === 'function') {\n                this.process.send(msg, undefined, undefined, (error) => {\n                    if (error) {\n                        this.errorCount++;\n                        this.handleError(error, msg);\n                    }\n                    else {\n                        this.errorCount = 0;\n                    }\n                });\n            }\n            return Promise.resolve();\n        }\n        catch (error) {\n            this.handleError(error, msg);\n            return Promise.reject(error);\n        }\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n}\nexports.IPCMessageWriter = IPCMessageWriter;\nclass SocketMessageReader extends api_1.ReadableStreamMessageReader {\n    constructor(socket, encoding = 'utf-8') {\n        super(ril_1.default().stream.asReadableStream(socket), encoding);\n    }\n}\nexports.SocketMessageReader = SocketMessageReader;\nclass SocketMessageWriter extends api_1.WriteableStreamMessageWriter {\n    constructor(socket, options) {\n        super(ril_1.default().stream.asWritableStream(socket), options);\n        this.socket = socket;\n    }\n    dispose() {\n        super.dispose();\n        this.socket.destroy();\n    }\n}\nexports.SocketMessageWriter = SocketMessageWriter;\nclass StreamMessageReader extends api_1.ReadableStreamMessageReader {\n    constructor(readble, encoding) {\n        super(ril_1.default().stream.asReadableStream(readble), encoding);\n    }\n}\nexports.StreamMessageReader = StreamMessageReader;\nclass StreamMessageWriter extends api_1.WriteableStreamMessageWriter {\n    constructor(writable, options) {\n        super(ril_1.default().stream.asWritableStream(writable), options);\n    }\n}\nexports.StreamMessageWriter = StreamMessageWriter;\nfunction generateRandomPipeName() {\n    const randomSuffix = crypto_1.randomBytes(21).toString('hex');\n    if (process.platform === 'win32') {\n        return `\\\\\\\\.\\\\pipe\\\\vscode-jsonrpc-${randomSuffix}-sock`;\n    }\n    else {\n        // Mac/Unix: use socket file\n        return path.join(os.tmpdir(), `vscode-${randomSuffix}.sock`);\n    }\n}\nexports.generateRandomPipeName = generateRandomPipeName;\nfunction createClientPipeTransport(pipeName, encoding = 'utf-8') {\n    let connectResolve;\n    const connected = new Promise((resolve, _reject) => {\n        connectResolve = resolve;\n    });\n    return new Promise((resolve, reject) => {\n        let server = net_1.createServer((socket) => {\n            server.close();\n            connectResolve([\n                new SocketMessageReader(socket, encoding),\n                new SocketMessageWriter(socket, encoding)\n            ]);\n        });\n        server.on('error', reject);\n        server.listen(pipeName, () => {\n            server.removeListener('error', reject);\n            resolve({\n                onConnected: () => { return connected; }\n            });\n        });\n    });\n}\nexports.createClientPipeTransport = createClientPipeTransport;\nfunction createServerPipeTransport(pipeName, encoding = 'utf-8') {\n    const socket = net_1.createConnection(pipeName);\n    return [\n        new SocketMessageReader(socket, encoding),\n        new SocketMessageWriter(socket, encoding)\n    ];\n}\nexports.createServerPipeTransport = createServerPipeTransport;\nfunction createClientSocketTransport(port, encoding = 'utf-8') {\n    let connectResolve;\n    const connected = new Promise((resolve, _reject) => {\n        connectResolve = resolve;\n    });\n    return new Promise((resolve, reject) => {\n        const server = net_1.createServer((socket) => {\n            server.close();\n            connectResolve([\n                new SocketMessageReader(socket, encoding),\n                new SocketMessageWriter(socket, encoding)\n            ]);\n        });\n        server.on('error', reject);\n        server.listen(port, '127.0.0.1', () => {\n            server.removeListener('error', reject);\n            resolve({\n                onConnected: () => { return connected; }\n            });\n        });\n    });\n}\nexports.createClientSocketTransport = createClientSocketTransport;\nfunction createServerSocketTransport(port, encoding = 'utf-8') {\n    const socket = net_1.createConnection(port, '127.0.0.1');\n    return [\n        new SocketMessageReader(socket, encoding),\n        new SocketMessageWriter(socket, encoding)\n    ];\n}\nexports.createServerSocketTransport = createServerSocketTransport;\nfunction isMessageReader(value) {\n    return value.listen !== undefined && value.read === undefined;\n}\nfunction isMessageWriter(value) {\n    return value.write !== undefined && value.end === undefined;\n}\nfunction createMessageConnection(input, output, logger, options) {\n    if (!logger) {\n        logger = api_1.NullLogger;\n    }\n    const reader = isMessageReader(input) ? input : new StreamMessageReader(input);\n    const writer = isMessageWriter(output) ? output : new StreamMessageWriter(output);\n    if (api_1.ConnectionStrategy.is(options)) {\n        options = { connectionStrategy: options };\n    }\n    return api_1.createMessageConnection(reader, writer, logger, options);\n}\nexports.createMessageConnection = createMessageConnection;\n//# sourceMappingURL=main.js.map","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar path = require(\"path\");\r\nvar fs = require(\"fs\");\r\nvar toString = Object.prototype.toString;\r\nfunction isDefined(value) {\r\n    return typeof value !== 'undefined';\r\n}\r\nfunction isNumber(value) {\r\n    return toString.call(value) === '[object Number]';\r\n}\r\nfunction isString(value) {\r\n    return toString.call(value) === '[object String]';\r\n}\r\nfunction isBoolean(value) {\r\n    return value === true || value === false;\r\n}\r\nfunction readJsonFileSync(filename) {\r\n    return JSON.parse(fs.readFileSync(filename, 'utf8'));\r\n}\r\nvar MessageFormat;\r\n(function (MessageFormat) {\r\n    MessageFormat[\"file\"] = \"file\";\r\n    MessageFormat[\"bundle\"] = \"bundle\";\r\n    MessageFormat[\"both\"] = \"both\";\r\n})(MessageFormat = exports.MessageFormat || (exports.MessageFormat = {}));\r\nvar BundleFormat;\r\n(function (BundleFormat) {\r\n    // the nls.bundle format\r\n    BundleFormat[\"standalone\"] = \"standalone\";\r\n    BundleFormat[\"languagePack\"] = \"languagePack\";\r\n})(BundleFormat = exports.BundleFormat || (exports.BundleFormat = {}));\r\nvar LocalizeInfo;\r\n(function (LocalizeInfo) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && isDefined(candidate.key) && isDefined(candidate.comment);\r\n    }\r\n    LocalizeInfo.is = is;\r\n})(LocalizeInfo || (LocalizeInfo = {}));\r\nvar resolvedLanguage;\r\nvar resolvedBundles;\r\nvar options;\r\nvar isPseudo;\r\nfunction initializeSettings() {\r\n    options = { locale: undefined, language: undefined, languagePackSupport: false, cacheLanguageResolution: true, messageFormat: MessageFormat.bundle };\r\n    if (isString(process.env.VSCODE_NLS_CONFIG)) {\r\n        try {\r\n            var vscodeOptions_1 = JSON.parse(process.env.VSCODE_NLS_CONFIG);\r\n            var language = void 0;\r\n            var locale = void 0;\r\n            if (vscodeOptions_1.availableLanguages) {\r\n                var value = vscodeOptions_1.availableLanguages['*'];\r\n                if (isString(value)) {\r\n                    language = value;\r\n                }\r\n            }\r\n            if (isString(vscodeOptions_1.locale)) {\r\n                options.locale = vscodeOptions_1.locale.toLowerCase();\r\n            }\r\n            if (language === undefined) {\r\n                options.language = options.locale;\r\n            }\r\n            else if (language !== 'en') {\r\n                options.language = language;\r\n            }\r\n            if (isBoolean(vscodeOptions_1._languagePackSupport)) {\r\n                options.languagePackSupport = vscodeOptions_1._languagePackSupport;\r\n            }\r\n            if (isString(vscodeOptions_1._cacheRoot)) {\r\n                options.cacheRoot = vscodeOptions_1._cacheRoot;\r\n            }\r\n            if (isString(vscodeOptions_1._languagePackId)) {\r\n                options.languagePackId = vscodeOptions_1._languagePackId;\r\n            }\r\n            if (isString(vscodeOptions_1._translationsConfigFile)) {\r\n                options.translationsConfigFile = vscodeOptions_1._translationsConfigFile;\r\n                try {\r\n                    options.translationsConfig = readJsonFileSync(options.translationsConfigFile);\r\n                }\r\n                catch (error) {\r\n                    // We can't read the translation config file. Mark the cache as corrupted.\r\n                    if (vscodeOptions_1._corruptedFile) {\r\n                        var dirname = path.dirname(vscodeOptions_1._corruptedFile);\r\n                        fs.exists(dirname, function (exists) {\r\n                            if (exists) {\r\n                                fs.writeFile(vscodeOptions_1._corruptedFile, 'corrupted', 'utf8', function (err) {\r\n                                    console.error(err);\r\n                                });\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        catch (_a) {\r\n            // Do nothing.\r\n        }\r\n    }\r\n    isPseudo = options.locale === 'pseudo';\r\n    resolvedLanguage = undefined;\r\n    resolvedBundles = Object.create(null);\r\n}\r\ninitializeSettings();\r\nfunction supportsLanguagePack() {\r\n    return options.languagePackSupport === true && options.cacheRoot !== undefined && options.languagePackId !== undefined && options.translationsConfigFile !== undefined\r\n        && options.translationsConfig !== undefined;\r\n}\r\nfunction format(message, args) {\r\n    var result;\r\n    if (isPseudo) {\r\n        // FF3B and FF3D is the Unicode zenkaku representation for [ and ]\r\n        message = '\\uFF3B' + message.replace(/[aouei]/g, '$&$&') + '\\uFF3D';\r\n    }\r\n    if (args.length === 0) {\r\n        result = message;\r\n    }\r\n    else {\r\n        result = message.replace(/\\{(\\d+)\\}/g, function (match, rest) {\r\n            var index = rest[0];\r\n            var arg = args[index];\r\n            var replacement = match;\r\n            if (typeof arg === 'string') {\r\n                replacement = arg;\r\n            }\r\n            else if (typeof arg === 'number' || typeof arg === 'boolean' || arg === void 0 || arg === null) {\r\n                replacement = String(arg);\r\n            }\r\n            return replacement;\r\n        });\r\n    }\r\n    return result;\r\n}\r\nfunction createScopedLocalizeFunction(messages) {\r\n    return function (key, message) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        if (isNumber(key)) {\r\n            if (key >= messages.length) {\r\n                console.error(\"Broken localize call found. Index out of bounds. Stacktrace is\\n: \" + new Error('').stack);\r\n                return;\r\n            }\r\n            return format(messages[key], args);\r\n        }\r\n        else {\r\n            if (isString(message)) {\r\n                console.warn(\"Message \" + message + \" didn't get externalized correctly.\");\r\n                return format(message, args);\r\n            }\r\n            else {\r\n                console.error(\"Broken localize call found. Stacktrace is\\n: \" + new Error('').stack);\r\n            }\r\n        }\r\n    };\r\n}\r\nfunction localize(key, message) {\r\n    var args = [];\r\n    for (var _i = 2; _i < arguments.length; _i++) {\r\n        args[_i - 2] = arguments[_i];\r\n    }\r\n    return format(message, args);\r\n}\r\nfunction resolveLanguage(file) {\r\n    var resolvedLanguage;\r\n    if (options.cacheLanguageResolution && resolvedLanguage) {\r\n        resolvedLanguage = resolvedLanguage;\r\n    }\r\n    else {\r\n        if (isPseudo || !options.language) {\r\n            resolvedLanguage = '.nls.json';\r\n        }\r\n        else {\r\n            var locale = options.language;\r\n            while (locale) {\r\n                var candidate = '.nls.' + locale + '.json';\r\n                if (fs.existsSync(file + candidate)) {\r\n                    resolvedLanguage = candidate;\r\n                    break;\r\n                }\r\n                else {\r\n                    var index = locale.lastIndexOf('-');\r\n                    if (index > 0) {\r\n                        locale = locale.substring(0, index);\r\n                    }\r\n                    else {\r\n                        resolvedLanguage = '.nls.json';\r\n                        locale = null;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (options.cacheLanguageResolution) {\r\n            resolvedLanguage = resolvedLanguage;\r\n        }\r\n    }\r\n    return file + resolvedLanguage;\r\n}\r\nfunction findInTheBoxBundle(root) {\r\n    var language = options.language;\r\n    while (language) {\r\n        var candidate = path.join(root, \"nls.bundle.\" + language + \".json\");\r\n        if (fs.existsSync(candidate)) {\r\n            return candidate;\r\n        }\r\n        else {\r\n            var index = language.lastIndexOf('-');\r\n            if (index > 0) {\r\n                language = language.substring(0, index);\r\n            }\r\n            else {\r\n                language = undefined;\r\n            }\r\n        }\r\n    }\r\n    // Test if we can reslove the default bundle.\r\n    if (language === undefined) {\r\n        var candidate = path.join(root, 'nls.bundle.json');\r\n        if (fs.existsSync(candidate)) {\r\n            return candidate;\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nfunction mkdir(directory) {\r\n    try {\r\n        fs.mkdirSync(directory);\r\n    }\r\n    catch (err) {\r\n        if (err.code === 'EEXIST') {\r\n            return;\r\n        }\r\n        else if (err.code === 'ENOENT') {\r\n            var parent = path.dirname(directory);\r\n            if (parent !== directory) {\r\n                mkdir(parent);\r\n                fs.mkdirSync(directory);\r\n            }\r\n        }\r\n        else {\r\n            throw err;\r\n        }\r\n    }\r\n}\r\nfunction createDefaultNlsBundle(folder) {\r\n    var metaData = readJsonFileSync(path.join(folder, 'nls.metadata.json'));\r\n    var result = Object.create(null);\r\n    for (var module_1 in metaData) {\r\n        var entry = metaData[module_1];\r\n        result[module_1] = entry.messages;\r\n    }\r\n    return result;\r\n}\r\nfunction createNLSBundle(header, metaDataPath) {\r\n    var languagePackLocation = options.translationsConfig[header.id];\r\n    if (!languagePackLocation) {\r\n        return undefined;\r\n    }\r\n    var languagePack = readJsonFileSync(languagePackLocation).contents;\r\n    var metaData = readJsonFileSync(path.join(metaDataPath, 'nls.metadata.json'));\r\n    var result = Object.create(null);\r\n    for (var module_2 in metaData) {\r\n        var entry = metaData[module_2];\r\n        var translations = languagePack[header.outDir + \"/\" + module_2];\r\n        if (translations) {\r\n            var resultMessages = [];\r\n            for (var i = 0; i < entry.keys.length; i++) {\r\n                var messageKey = entry.keys[i];\r\n                var key = isString(messageKey) ? messageKey : messageKey.key;\r\n                var translatedMessage = translations[key];\r\n                if (translatedMessage === undefined) {\r\n                    translatedMessage = entry.messages[i];\r\n                }\r\n                resultMessages.push(translatedMessage);\r\n            }\r\n            result[module_2] = resultMessages;\r\n        }\r\n        else {\r\n            result[module_2] = entry.messages;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction touch(file) {\r\n    var d = new Date();\r\n    fs.utimes(file, d, d, function () {\r\n        // Do nothing. Ignore\r\n    });\r\n}\r\nfunction cacheBundle(key, bundle) {\r\n    resolvedBundles[key] = bundle;\r\n    return bundle;\r\n}\r\nfunction loadNlsBundleOrCreateFromI18n(header, bundlePath) {\r\n    var result;\r\n    var bundle = path.join(options.cacheRoot, header.id + \"-\" + header.hash + \".json\");\r\n    var useMemoryOnly = false;\r\n    var writeBundle = false;\r\n    try {\r\n        result = JSON.parse(fs.readFileSync(bundle, { encoding: 'utf8', flag: 'r' }));\r\n        touch(bundle);\r\n        return result;\r\n    }\r\n    catch (err) {\r\n        if (err.code === 'ENOENT') {\r\n            writeBundle = true;\r\n        }\r\n        else if (err instanceof SyntaxError) {\r\n            // We have a syntax error. So no valid JSON. Use\r\n            console.log(\"Syntax error parsing message bundle: \" + err.message + \".\");\r\n            fs.unlink(bundle, function (err) {\r\n                if (err) {\r\n                    console.error(\"Deleting corrupted bundle \" + bundle + \" failed.\");\r\n                }\r\n            });\r\n            useMemoryOnly = true;\r\n        }\r\n        else {\r\n            throw err;\r\n        }\r\n    }\r\n    result = createNLSBundle(header, bundlePath);\r\n    if (!result || useMemoryOnly) {\r\n        return result;\r\n    }\r\n    if (writeBundle) {\r\n        try {\r\n            fs.writeFileSync(bundle, JSON.stringify(result), { encoding: 'utf8', flag: 'wx' });\r\n        }\r\n        catch (err) {\r\n            if (err.code === 'EEXIST') {\r\n                return result;\r\n            }\r\n            throw err;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction loadDefaultNlsBundle(bundlePath) {\r\n    try {\r\n        return createDefaultNlsBundle(bundlePath);\r\n    }\r\n    catch (err) {\r\n        console.log(\"Generating default bundle from meta data failed.\", err);\r\n        return undefined;\r\n    }\r\n}\r\nfunction loadNlsBundle(header, bundlePath) {\r\n    var result;\r\n    // Core decided to use a language pack. Do the same in the extension\r\n    if (supportsLanguagePack()) {\r\n        try {\r\n            result = loadNlsBundleOrCreateFromI18n(header, bundlePath);\r\n        }\r\n        catch (err) {\r\n            console.log(\"Load or create bundle failed \", err);\r\n        }\r\n    }\r\n    if (!result) {\r\n        // No language pack found, but core is running in language pack mode\r\n        // Don't try to use old in the box bundles since the might be stale\r\n        // Fall right back to the default bundle.\r\n        if (options.languagePackSupport) {\r\n            return loadDefaultNlsBundle(bundlePath);\r\n        }\r\n        var candidate = findInTheBoxBundle(bundlePath);\r\n        if (candidate) {\r\n            try {\r\n                return readJsonFileSync(candidate);\r\n            }\r\n            catch (err) {\r\n                console.log(\"Loading in the box message bundle failed.\", err);\r\n            }\r\n        }\r\n        result = loadDefaultNlsBundle(bundlePath);\r\n    }\r\n    return result;\r\n}\r\nfunction tryFindMetaDataHeaderFile(file) {\r\n    var result;\r\n    var dirname = path.dirname(file);\r\n    while (true) {\r\n        result = path.join(dirname, 'nls.metadata.header.json');\r\n        if (fs.existsSync(result)) {\r\n            break;\r\n        }\r\n        var parent = path.dirname(dirname);\r\n        if (parent === dirname) {\r\n            result = undefined;\r\n            break;\r\n        }\r\n        else {\r\n            dirname = parent;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction loadMessageBundle(file) {\r\n    if (!file) {\r\n        // No file. We are in dev mode. Return the default\r\n        // localize function.\r\n        return localize;\r\n    }\r\n    // Remove extension since we load json files.\r\n    var ext = path.extname(file);\r\n    if (ext) {\r\n        file = file.substr(0, file.length - ext.length);\r\n    }\r\n    if (options.messageFormat === MessageFormat.both || options.messageFormat === MessageFormat.bundle) {\r\n        var headerFile = tryFindMetaDataHeaderFile(file);\r\n        if (headerFile) {\r\n            var bundlePath = path.dirname(headerFile);\r\n            var bundle = resolvedBundles[bundlePath];\r\n            if (bundle === undefined) {\r\n                try {\r\n                    var header = JSON.parse(fs.readFileSync(headerFile, 'utf8'));\r\n                    try {\r\n                        var nlsBundle = loadNlsBundle(header, bundlePath);\r\n                        bundle = cacheBundle(bundlePath, nlsBundle ? { header: header, nlsBundle: nlsBundle } : null);\r\n                    }\r\n                    catch (err) {\r\n                        console.error('Failed to load nls bundle', err);\r\n                        bundle = cacheBundle(bundlePath, null);\r\n                    }\r\n                }\r\n                catch (err) {\r\n                    console.error('Failed to read header file', err);\r\n                    bundle = cacheBundle(bundlePath, null);\r\n                }\r\n            }\r\n            if (bundle) {\r\n                var module_3 = file.substr(bundlePath.length + 1).replace(/\\\\/g, '/');\r\n                var messages = bundle.nlsBundle[module_3];\r\n                if (messages === undefined) {\r\n                    console.error(\"Messages for file \" + file + \" not found. See console for details.\");\r\n                    return function () {\r\n                        return 'Messages not found.';\r\n                    };\r\n                }\r\n                return createScopedLocalizeFunction(messages);\r\n            }\r\n        }\r\n    }\r\n    if (options.messageFormat === MessageFormat.both || options.messageFormat === MessageFormat.file) {\r\n        // Try to load a single file bundle\r\n        try {\r\n            var json = readJsonFileSync(resolveLanguage(file));\r\n            if (Array.isArray(json)) {\r\n                return createScopedLocalizeFunction(json);\r\n            }\r\n            else {\r\n                if (isDefined(json.messages) && isDefined(json.keys)) {\r\n                    return createScopedLocalizeFunction(json.messages);\r\n                }\r\n                else {\r\n                    console.error(\"String bundle '\" + file + \"' uses an unsupported format.\");\r\n                    return function () {\r\n                        return 'File bundle has unsupported format. See console for details';\r\n                    };\r\n                }\r\n            }\r\n        }\r\n        catch (err) {\r\n            if (err.code !== 'ENOENT') {\r\n                console.error('Failed to load single file bundle', err);\r\n            }\r\n        }\r\n    }\r\n    console.error(\"Failed to load message bundle for file \" + file);\r\n    return function () {\r\n        return 'Failed to load message bundle. See console for details.';\r\n    };\r\n}\r\nexports.loadMessageBundle = loadMessageBundle;\r\nfunction config(opts) {\r\n    if (opts) {\r\n        if (isString(opts.locale)) {\r\n            options.locale = opts.locale.toLowerCase();\r\n            options.language = options.locale;\r\n            resolvedLanguage = undefined;\r\n            resolvedBundles = Object.create(null);\r\n        }\r\n        if (opts.messageFormat !== undefined) {\r\n            options.messageFormat = opts.messageFormat;\r\n        }\r\n        if (opts.bundleFormat === BundleFormat.standalone && options.languagePackSupport === true) {\r\n            options.languagePackSupport = false;\r\n        }\r\n    }\r\n    isPseudo = options.locale === 'pseudo';\r\n    return loadMessageBundle;\r\n}\r\nexports.config = config;\r\n//# sourceMappingURL=main.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst node_1 = require(\"vscode-jsonrpc/node\");\n__export(require(\"vscode-jsonrpc/node\"));\n__export(require(\"../common/api\"));\nfunction createProtocolConnection(input, output, logger, options) {\n    return node_1.createMessageConnection(input, output, logger, options);\n}\nexports.createProtocolConnection = createProtocolConnection;\n//# sourceMappingURL=main.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nlet _ral;\nfunction RAL() {\n    if (_ral === undefined) {\n        throw new Error(`No runtime abstraction layer installed`);\n    }\n    return _ral;\n}\n(function (RAL) {\n    function install(ral) {\n        if (ral === undefined) {\n            throw new Error(`No runtime abstraction layer provided`);\n        }\n        _ral = ral;\n    }\n    RAL.install = install;\n})(RAL || (RAL = {}));\nexports.default = RAL;\n//# sourceMappingURL=ral.js.map","module.exports = require(\"util\");","module.exports = require(\"url\");","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar _a;\nvar isWindows;\nif (typeof process === 'object') {\n    isWindows = process.platform === 'win32';\n}\nelse if (typeof navigator === 'object') {\n    var userAgent = navigator.userAgent;\n    isWindows = userAgent.indexOf('Windows') >= 0;\n}\nfunction isHighSurrogate(charCode) {\n    return (0xD800 <= charCode && charCode <= 0xDBFF);\n}\nfunction isLowSurrogate(charCode) {\n    return (0xDC00 <= charCode && charCode <= 0xDFFF);\n}\nfunction isLowerAsciiHex(code) {\n    return code >= 97 /* a */ && code <= 102 /* f */;\n}\nfunction isLowerAsciiLetter(code) {\n    return code >= 97 /* a */ && code <= 122 /* z */;\n}\nfunction isUpperAsciiLetter(code) {\n    return code >= 65 /* A */ && code <= 90 /* Z */;\n}\nfunction isAsciiLetter(code) {\n    return isLowerAsciiLetter(code) || isUpperAsciiLetter(code);\n}\n//#endregion\nvar _schemePattern = /^\\w[\\w\\d+.-]*$/;\nvar _singleSlashStart = /^\\//;\nvar _doubleSlashStart = /^\\/\\//;\nfunction _validateUri(ret, _strict) {\n    // scheme, must be set\n    if (!ret.scheme && _strict) {\n        throw new Error(\"[UriError]: Scheme is missing: {scheme: \\\"\\\", authority: \\\"\" + ret.authority + \"\\\", path: \\\"\" + ret.path + \"\\\", query: \\\"\" + ret.query + \"\\\", fragment: \\\"\" + ret.fragment + \"\\\"}\");\n    }\n    // scheme, https://tools.ietf.org/html/rfc3986#section-3.1\n    // ALPHA *( ALPHA / DIGIT / \"+\" / \"-\" / \".\" )\n    if (ret.scheme && !_schemePattern.test(ret.scheme)) {\n        throw new Error('[UriError]: Scheme contains illegal characters.');\n    }\n    // path, http://tools.ietf.org/html/rfc3986#section-3.3\n    // If a URI contains an authority component, then the path component\n    // must either be empty or begin with a slash (\"/\") character.  If a URI\n    // does not contain an authority component, then the path cannot begin\n    // with two slash characters (\"//\").\n    if (ret.path) {\n        if (ret.authority) {\n            if (!_singleSlashStart.test(ret.path)) {\n                throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash (\"/\") character');\n            }\n        }\n        else {\n            if (_doubleSlashStart.test(ret.path)) {\n                throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters (\"//\")');\n            }\n        }\n    }\n}\n// for a while we allowed uris *without* schemes and this is the migration\n// for them, e.g. an uri without scheme and without strict-mode warns and falls\n// back to the file-scheme. that should cause the least carnage and still be a\n// clear warning\nfunction _schemeFix(scheme, _strict) {\n    if (!scheme && !_strict) {\n        return 'file';\n    }\n    return scheme;\n}\n// implements a bit of https://tools.ietf.org/html/rfc3986#section-5\nfunction _referenceResolution(scheme, path) {\n    // the slash-character is our 'default base' as we don't\n    // support constructing URIs relative to other URIs. This\n    // also means that we alter and potentially break paths.\n    // see https://tools.ietf.org/html/rfc3986#section-5.1.4\n    switch (scheme) {\n        case 'https':\n        case 'http':\n        case 'file':\n            if (!path) {\n                path = _slash;\n            }\n            else if (path[0] !== _slash) {\n                path = _slash + path;\n            }\n            break;\n    }\n    return path;\n}\nvar _empty = '';\nvar _slash = '/';\nvar _regexp = /^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/;\n/**\n * Uniform Resource Identifier (URI) http://tools.ietf.org/html/rfc3986.\n * This class is a simple parser which creates the basic component parts\n * (http://tools.ietf.org/html/rfc3986#section-3) with minimal validation\n * and encoding.\n *\n * ```txt\n *       foo://example.com:8042/over/there?name=ferret#nose\n *       \\_/   \\______________/\\_________/ \\_________/ \\__/\n *        |           |            |            |        |\n *     scheme     authority       path        query   fragment\n *        |   _____________________|__\n *       / \\ /                        \\\n *       urn:example:animal:ferret:nose\n * ```\n */\nvar URI = /** @class */ (function () {\n    /**\n     * @internal\n     */\n    function URI(schemeOrData, authority, path, query, fragment, _strict) {\n        if (_strict === void 0) { _strict = false; }\n        if (typeof schemeOrData === 'object') {\n            this.scheme = schemeOrData.scheme || _empty;\n            this.authority = schemeOrData.authority || _empty;\n            this.path = schemeOrData.path || _empty;\n            this.query = schemeOrData.query || _empty;\n            this.fragment = schemeOrData.fragment || _empty;\n            // no validation because it's this URI\n            // that creates uri components.\n            // _validateUri(this);\n        }\n        else {\n            this.scheme = _schemeFix(schemeOrData, _strict);\n            this.authority = authority || _empty;\n            this.path = _referenceResolution(this.scheme, path || _empty);\n            this.query = query || _empty;\n            this.fragment = fragment || _empty;\n            _validateUri(this, _strict);\n        }\n    }\n    URI.isUri = function (thing) {\n        if (thing instanceof URI) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return typeof thing.authority === 'string'\n            && typeof thing.fragment === 'string'\n            && typeof thing.path === 'string'\n            && typeof thing.query === 'string'\n            && typeof thing.scheme === 'string'\n            && typeof thing.fsPath === 'function'\n            && typeof thing.with === 'function'\n            && typeof thing.toString === 'function';\n    };\n    Object.defineProperty(URI.prototype, \"fsPath\", {\n        // ---- filesystem path -----------------------\n        /**\n         * Returns a string representing the corresponding file system path of this URI.\n         * Will handle UNC paths, normalizes windows drive letters to lower-case, and uses the\n         * platform specific path separator.\n         *\n         * * Will *not* validate the path for invalid characters and semantics.\n         * * Will *not* look at the scheme of this URI.\n         * * The result shall *not* be used for display purposes but for accessing a file on disk.\n         *\n         *\n         * The *difference* to `URI#path` is the use of the platform specific separator and the handling\n         * of UNC paths. See the below sample of a file-uri with an authority (UNC path).\n         *\n         * ```ts\n            const u = URI.parse('file://server/c$/folder/file.txt')\n            u.authority === 'server'\n            u.path === '/shares/c$/file.txt'\n            u.fsPath === '\\\\server\\c$\\folder\\file.txt'\n        ```\n         *\n         * Using `URI#path` to read a file (using fs-apis) would not be enough because parts of the path,\n         * namely the server name, would be missing. Therefore `URI#fsPath` exists - it's sugar to ease working\n         * with URIs that represent files on disk (`file` scheme).\n         */\n        get: function () {\n            // if (this.scheme !== 'file') {\n            // \tconsole.warn(`[UriError] calling fsPath with scheme ${this.scheme}`);\n            // }\n            return uriToFsPath(this, false);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // ---- modify to new -------------------------\n    URI.prototype.with = function (change) {\n        if (!change) {\n            return this;\n        }\n        var scheme = change.scheme, authority = change.authority, path = change.path, query = change.query, fragment = change.fragment;\n        if (scheme === undefined) {\n            scheme = this.scheme;\n        }\n        else if (scheme === null) {\n            scheme = _empty;\n        }\n        if (authority === undefined) {\n            authority = this.authority;\n        }\n        else if (authority === null) {\n            authority = _empty;\n        }\n        if (path === undefined) {\n            path = this.path;\n        }\n        else if (path === null) {\n            path = _empty;\n        }\n        if (query === undefined) {\n            query = this.query;\n        }\n        else if (query === null) {\n            query = _empty;\n        }\n        if (fragment === undefined) {\n            fragment = this.fragment;\n        }\n        else if (fragment === null) {\n            fragment = _empty;\n        }\n        if (scheme === this.scheme\n            && authority === this.authority\n            && path === this.path\n            && query === this.query\n            && fragment === this.fragment) {\n            return this;\n        }\n        return new _URI(scheme, authority, path, query, fragment);\n    };\n    // ---- parse & validate ------------------------\n    /**\n     * Creates a new URI from a string, e.g. `http://www.msft.com/some/path`,\n     * `file:///usr/home`, or `scheme:with/path`.\n     *\n     * @param value A string which represents an URI (see `URI#toString`).\n     */\n    URI.parse = function (value, _strict) {\n        if (_strict === void 0) { _strict = false; }\n        var match = _regexp.exec(value);\n        if (!match) {\n            return new _URI(_empty, _empty, _empty, _empty, _empty);\n        }\n        return new _URI(match[2] || _empty, percentDecode(match[4] || _empty), percentDecode(match[5] || _empty), percentDecode(match[7] || _empty), percentDecode(match[9] || _empty), _strict);\n    };\n    /**\n     * Creates a new URI from a file system path, e.g. `c:\\my\\files`,\n     * `/usr/home`, or `\\\\server\\share\\some\\path`.\n     *\n     * The *difference* between `URI#parse` and `URI#file` is that the latter treats the argument\n     * as path, not as stringified-uri. E.g. `URI.file(path)` is **not the same as**\n     * `URI.parse('file://' + path)` because the path might contain characters that are\n     * interpreted (# and ?). See the following sample:\n     * ```ts\n    const good = URI.file('/coding/c#/project1');\n    good.scheme === 'file';\n    good.path === '/coding/c#/project1';\n    good.fragment === '';\n    const bad = URI.parse('file://' + '/coding/c#/project1');\n    bad.scheme === 'file';\n    bad.path === '/coding/c'; // path is now broken\n    bad.fragment === '/project1';\n    ```\n     *\n     * @param path A file system path (see `URI#fsPath`)\n     */\n    URI.file = function (path) {\n        var authority = _empty;\n        // normalize to fwd-slashes on windows,\n        // on other systems bwd-slashes are valid\n        // filename character, eg /f\\oo/ba\\r.txt\n        if (isWindows) {\n            path = path.replace(/\\\\/g, _slash);\n        }\n        // check for authority as used in UNC shares\n        // or use the path as given\n        if (path[0] === _slash && path[1] === _slash) {\n            var idx = path.indexOf(_slash, 2);\n            if (idx === -1) {\n                authority = path.substring(2);\n                path = _slash;\n            }\n            else {\n                authority = path.substring(2, idx);\n                path = path.substring(idx) || _slash;\n            }\n        }\n        return new _URI('file', authority, path, _empty, _empty);\n    };\n    URI.from = function (components) {\n        return new _URI(components.scheme, components.authority, components.path, components.query, components.fragment);\n    };\n    // /**\n    //  * Join a URI path with path fragments and normalizes the resulting path.\n    //  *\n    //  * @param uri The input URI.\n    //  * @param pathFragment The path fragment to add to the URI path.\n    //  * @returns The resulting URI.\n    //  */\n    // static joinPath(uri: URI, ...pathFragment: string[]): URI {\n    // \tif (!uri.path) {\n    // \t\tthrow new Error(`[UriError]: cannot call joinPaths on URI without path`);\n    // \t}\n    // \tlet newPath: string;\n    // \tif (isWindows && uri.scheme === 'file') {\n    // \t\tnewPath = URI.file(paths.win32.join(uriToFsPath(uri, true), ...pathFragment)).path;\n    // \t} else {\n    // \t\tnewPath = paths.posix.join(uri.path, ...pathFragment);\n    // \t}\n    // \treturn uri.with({ path: newPath });\n    // }\n    // ---- printing/externalize ---------------------------\n    /**\n     * Creates a string representation for this URI. It's guaranteed that calling\n     * `URI.parse` with the result of this function creates an URI which is equal\n     * to this URI.\n     *\n     * * The result shall *not* be used for display purposes but for externalization or transport.\n     * * The result will be encoded using the percentage encoding and encoding happens mostly\n     * ignore the scheme-specific encoding rules.\n     *\n     * @param skipEncoding Do not encode the result, default is `false`\n     */\n    URI.prototype.toString = function (skipEncoding) {\n        if (skipEncoding === void 0) { skipEncoding = false; }\n        return _asFormatted(this, skipEncoding);\n    };\n    URI.prototype.toJSON = function () {\n        return this;\n    };\n    URI.revive = function (data) {\n        if (!data) {\n            return data;\n        }\n        else if (data instanceof URI) {\n            return data;\n        }\n        else {\n            var result = new _URI(data);\n            result._formatted = data.external;\n            result._fsPath = data._sep === _pathSepMarker ? data.fsPath : null;\n            return result;\n        }\n    };\n    return URI;\n}());\nexport { URI };\nvar _pathSepMarker = isWindows ? 1 : undefined;\n// eslint-disable-next-line @typescript-eslint/class-name-casing\nvar _URI = /** @class */ (function (_super) {\n    __extends(_URI, _super);\n    function _URI() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._formatted = null;\n        _this._fsPath = null;\n        return _this;\n    }\n    Object.defineProperty(_URI.prototype, \"fsPath\", {\n        get: function () {\n            if (!this._fsPath) {\n                this._fsPath = uriToFsPath(this, false);\n            }\n            return this._fsPath;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    _URI.prototype.toString = function (skipEncoding) {\n        if (skipEncoding === void 0) { skipEncoding = false; }\n        if (!skipEncoding) {\n            if (!this._formatted) {\n                this._formatted = _asFormatted(this, false);\n            }\n            return this._formatted;\n        }\n        else {\n            // we don't cache that\n            return _asFormatted(this, true);\n        }\n    };\n    _URI.prototype.toJSON = function () {\n        var res = {\n            $mid: 1\n        };\n        // cached state\n        if (this._fsPath) {\n            res.fsPath = this._fsPath;\n            res._sep = _pathSepMarker;\n        }\n        if (this._formatted) {\n            res.external = this._formatted;\n        }\n        // uri components\n        if (this.path) {\n            res.path = this.path;\n        }\n        if (this.scheme) {\n            res.scheme = this.scheme;\n        }\n        if (this.authority) {\n            res.authority = this.authority;\n        }\n        if (this.query) {\n            res.query = this.query;\n        }\n        if (this.fragment) {\n            res.fragment = this.fragment;\n        }\n        return res;\n    };\n    return _URI;\n}(URI));\n// reserved characters: https://tools.ietf.org/html/rfc3986#section-2.2\nvar encodeTable = (_a = {},\n    _a[58 /* Colon */] = '%3A',\n    _a[47 /* Slash */] = '%2F',\n    _a[63 /* QuestionMark */] = '%3F',\n    _a[35 /* Hash */] = '%23',\n    _a[91 /* OpenSquareBracket */] = '%5B',\n    _a[93 /* CloseSquareBracket */] = '%5D',\n    _a[64 /* AtSign */] = '%40',\n    _a[33 /* ExclamationMark */] = '%21',\n    _a[36 /* DollarSign */] = '%24',\n    _a[38 /* Ampersand */] = '%26',\n    _a[39 /* SingleQuote */] = '%27',\n    _a[40 /* OpenParen */] = '%28',\n    _a[41 /* CloseParen */] = '%29',\n    _a[42 /* Asterisk */] = '%2A',\n    _a[43 /* Plus */] = '%2B',\n    _a[44 /* Comma */] = '%2C',\n    _a[59 /* Semicolon */] = '%3B',\n    _a[61 /* Equals */] = '%3D',\n    _a[32 /* Space */] = '%20',\n    _a);\nfunction encodeURIComponentFast(uriComponent, allowSlash) {\n    var res = undefined;\n    var nativeEncodePos = -1;\n    for (var pos = 0; pos < uriComponent.length; pos++) {\n        var code = uriComponent.charCodeAt(pos);\n        // unreserved characters: https://tools.ietf.org/html/rfc3986#section-2.3\n        if ((code >= 97 /* a */ && code <= 122 /* z */)\n            || (code >= 65 /* A */ && code <= 90 /* Z */)\n            || (code >= 48 /* Digit0 */ && code <= 57 /* Digit9 */)\n            || code === 45 /* Dash */\n            || code === 46 /* Period */\n            || code === 95 /* Underline */\n            || code === 126 /* Tilde */\n            || (allowSlash && code === 47 /* Slash */)) {\n            // check if we are delaying native encode\n            if (nativeEncodePos !== -1) {\n                res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n                nativeEncodePos = -1;\n            }\n            // check if we write into a new string (by default we try to return the param)\n            if (res !== undefined) {\n                res += uriComponent.charAt(pos);\n            }\n        }\n        else {\n            // encoding needed, we need to allocate a new string\n            if (res === undefined) {\n                res = uriComponent.substr(0, pos);\n            }\n            // check with default table first\n            var escaped = encodeTable[code];\n            if (escaped !== undefined) {\n                // check if we are delaying native encode\n                if (nativeEncodePos !== -1) {\n                    res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n                    nativeEncodePos = -1;\n                }\n                // append escaped variant to result\n                res += escaped;\n            }\n            else if (nativeEncodePos === -1) {\n                // use native encode only when needed\n                nativeEncodePos = pos;\n            }\n        }\n    }\n    if (nativeEncodePos !== -1) {\n        res += encodeURIComponent(uriComponent.substring(nativeEncodePos));\n    }\n    return res !== undefined ? res : uriComponent;\n}\nfunction encodeURIComponentMinimal(path) {\n    var res = undefined;\n    for (var pos = 0; pos < path.length; pos++) {\n        var code = path.charCodeAt(pos);\n        if (code === 35 /* Hash */ || code === 63 /* QuestionMark */) {\n            if (res === undefined) {\n                res = path.substr(0, pos);\n            }\n            res += encodeTable[code];\n        }\n        else {\n            if (res !== undefined) {\n                res += path[pos];\n            }\n        }\n    }\n    return res !== undefined ? res : path;\n}\n/**\n * Compute `fsPath` for the given uri\n */\nexport function uriToFsPath(uri, keepDriveLetterCasing) {\n    var value;\n    if (uri.authority && uri.path.length > 1 && uri.scheme === 'file') {\n        // unc path: file://shares/c$/far/boo\n        value = \"//\" + uri.authority + uri.path;\n    }\n    else if (uri.path.charCodeAt(0) === 47 /* Slash */\n        && (uri.path.charCodeAt(1) >= 65 /* A */ && uri.path.charCodeAt(1) <= 90 /* Z */ || uri.path.charCodeAt(1) >= 97 /* a */ && uri.path.charCodeAt(1) <= 122 /* z */)\n        && uri.path.charCodeAt(2) === 58 /* Colon */) {\n        if (!keepDriveLetterCasing) {\n            // windows drive letter: file:///c:/far/boo\n            value = uri.path[1].toLowerCase() + uri.path.substr(2);\n        }\n        else {\n            value = uri.path.substr(1);\n        }\n    }\n    else {\n        // other path\n        value = uri.path;\n    }\n    if (isWindows) {\n        value = value.replace(/\\//g, '\\\\');\n    }\n    return value;\n}\n/**\n * Create the external version of a uri\n */\nfunction _asFormatted(uri, skipEncoding) {\n    var encoder = !skipEncoding\n        ? encodeURIComponentFast\n        : encodeURIComponentMinimal;\n    var res = '';\n    var scheme = uri.scheme, authority = uri.authority, path = uri.path, query = uri.query, fragment = uri.fragment;\n    if (scheme) {\n        res += scheme;\n        res += ':';\n    }\n    if (authority || scheme === 'file') {\n        res += _slash;\n        res += _slash;\n    }\n    if (authority) {\n        var idx = authority.indexOf('@');\n        if (idx !== -1) {\n            // <user>@<auth>\n            var userinfo = authority.substr(0, idx);\n            authority = authority.substr(idx + 1);\n            idx = userinfo.indexOf(':');\n            if (idx === -1) {\n                res += encoder(userinfo, false);\n            }\n            else {\n                // <user>:<pass>@<auth>\n                res += encoder(userinfo.substr(0, idx), false);\n                res += ':';\n                res += encoder(userinfo.substr(idx + 1), false);\n            }\n            res += '@';\n        }\n        authority = authority.toLowerCase();\n        idx = authority.indexOf(':');\n        if (idx === -1) {\n            res += encoder(authority, false);\n        }\n        else {\n            // <auth>:<port>\n            res += encoder(authority.substr(0, idx), false);\n            res += authority.substr(idx);\n        }\n    }\n    if (path) {\n        // lower-case windows drive letters in /C:/fff or C:/fff\n        if (path.length >= 3 && path.charCodeAt(0) === 47 /* Slash */ && path.charCodeAt(2) === 58 /* Colon */) {\n            var code = path.charCodeAt(1);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = \"/\" + String.fromCharCode(code + 32) + \":\" + path.substr(3); // \"/c:\".length === 3\n            }\n        }\n        else if (path.length >= 2 && path.charCodeAt(1) === 58 /* Colon */) {\n            var code = path.charCodeAt(0);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = String.fromCharCode(code + 32) + \":\" + path.substr(2); // \"/c:\".length === 3\n            }\n        }\n        // encode the rest of the path\n        res += encoder(path, true);\n    }\n    if (query) {\n        res += '?';\n        res += encoder(query, false);\n    }\n    if (fragment) {\n        res += '#';\n        res += !skipEncoding ? encodeURIComponentFast(fragment, false) : fragment;\n    }\n    return res;\n}\n// --- decode\nfunction decodeURIComponentGraceful(str) {\n    try {\n        return decodeURIComponent(str);\n    }\n    catch (_a) {\n        if (str.length > 3) {\n            return str.substr(0, 3) + decodeURIComponentGraceful(str.substr(3));\n        }\n        else {\n            return str;\n        }\n    }\n}\nvar _rEncodedAsHex = /(%[0-9A-Za-z][0-9A-Za-z])+/g;\nfunction percentDecode(str) {\n    if (!str.match(_rEncodedAsHex)) {\n        return str;\n    }\n    return str.replace(_rEncodedAsHex, function (match) { return decodeURIComponentGraceful(match); });\n}\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction boolean(value) {\n    return value === true || value === false;\n}\nexports.boolean = boolean;\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nexports.string = string;\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nexports.number = number;\nfunction error(value) {\n    return value instanceof Error;\n}\nexports.error = error;\nfunction func(value) {\n    return typeof value === 'function';\n}\nexports.func = func;\nfunction array(value) {\n    return Array.isArray(value);\n}\nexports.array = array;\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nexports.stringArray = stringArray;\n//# sourceMappingURL=is.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ral_1 = require(\"./ral\");\nvar Event;\n(function (Event) {\n    const _disposable = { dispose() { } };\n    Event.None = function () { return _disposable; };\n})(Event = exports.Event || (exports.Event = {}));\nclass CallbackList {\n    add(callback, context = null, bucket) {\n        if (!this._callbacks) {\n            this._callbacks = [];\n            this._contexts = [];\n        }\n        this._callbacks.push(callback);\n        this._contexts.push(context);\n        if (Array.isArray(bucket)) {\n            bucket.push({ dispose: () => this.remove(callback, context) });\n        }\n    }\n    remove(callback, context = null) {\n        if (!this._callbacks) {\n            return;\n        }\n        let foundCallbackWithDifferentContext = false;\n        for (let i = 0, len = this._callbacks.length; i < len; i++) {\n            if (this._callbacks[i] === callback) {\n                if (this._contexts[i] === context) {\n                    // callback & context match => remove it\n                    this._callbacks.splice(i, 1);\n                    this._contexts.splice(i, 1);\n                    return;\n                }\n                else {\n                    foundCallbackWithDifferentContext = true;\n                }\n            }\n        }\n        if (foundCallbackWithDifferentContext) {\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\n        }\n    }\n    invoke(...args) {\n        if (!this._callbacks) {\n            return [];\n        }\n        const ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\n        for (let i = 0, len = callbacks.length; i < len; i++) {\n            try {\n                ret.push(callbacks[i].apply(contexts[i], args));\n            }\n            catch (e) {\n                // eslint-disable-next-line no-console\n                ral_1.default().console.error(e);\n            }\n        }\n        return ret;\n    }\n    isEmpty() {\n        return !this._callbacks || this._callbacks.length === 0;\n    }\n    dispose() {\n        this._callbacks = undefined;\n        this._contexts = undefined;\n    }\n}\nclass Emitter {\n    constructor(_options) {\n        this._options = _options;\n    }\n    /**\n     * For the public to allow to subscribe\n     * to events from this Emitter\n     */\n    get event() {\n        if (!this._event) {\n            this._event = (listener, thisArgs, disposables) => {\n                if (!this._callbacks) {\n                    this._callbacks = new CallbackList();\n                }\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\n                    this._options.onFirstListenerAdd(this);\n                }\n                this._callbacks.add(listener, thisArgs);\n                const result = {\n                    dispose: () => {\n                        if (!this._callbacks) {\n                            // disposable is disposed after emitter is disposed.\n                            return;\n                        }\n                        this._callbacks.remove(listener, thisArgs);\n                        result.dispose = Emitter._noop;\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\n                            this._options.onLastListenerRemove(this);\n                        }\n                    }\n                };\n                if (Array.isArray(disposables)) {\n                    disposables.push(result);\n                }\n                return result;\n            };\n        }\n        return this._event;\n    }\n    /**\n     * To be kept private to fire an event to\n     * subscribers\n     */\n    fire(event) {\n        if (this._callbacks) {\n            this._callbacks.invoke.call(this._callbacks, event);\n        }\n    }\n    dispose() {\n        if (this._callbacks) {\n            this._callbacks.dispose();\n            this._callbacks = undefined;\n        }\n    }\n}\nexports.Emitter = Emitter;\nEmitter._noop = function () { };\n//# sourceMappingURL=events.js.map","module.exports = require(\"path\");","module.exports = require(\"fs\");","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n/// <reference path=\"../../typings/thenable.d.ts\" />\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Is = require(\"../common/utils/is\");\nconst server_1 = require(\"../common/server\");\nconst fm = require(\"./files\");\nconst node_1 = require(\"vscode-languageserver-protocol/node\");\n__export(require(\"../common/api\"));\nvar Files;\n(function (Files) {\n    Files.uriToFilePath = fm.uriToFilePath;\n    Files.resolveGlobalNodePath = fm.resolveGlobalNodePath;\n    Files.resolveGlobalYarnPath = fm.resolveGlobalYarnPath;\n    Files.resolve = fm.resolve;\n    Files.resolveModulePath = fm.resolveModulePath;\n})(Files = exports.Files || (exports.Files = {}));\nlet _shutdownReceived = false;\nlet exitTimer = undefined;\nfunction setupExitTimer() {\n    const argName = '--clientProcessId';\n    function runTimer(value) {\n        try {\n            let processId = parseInt(value);\n            if (!isNaN(processId)) {\n                exitTimer = setInterval(() => {\n                    try {\n                        process.kill(processId, 0);\n                    }\n                    catch (ex) {\n                        // Parent process doesn't exist anymore. Exit the server.\n                        process.exit(_shutdownReceived ? 0 : 1);\n                    }\n                }, 3000);\n            }\n        }\n        catch (e) {\n            // Ignore errors;\n        }\n    }\n    for (let i = 2; i < process.argv.length; i++) {\n        let arg = process.argv[i];\n        if (arg === argName && i + 1 < process.argv.length) {\n            runTimer(process.argv[i + 1]);\n            return;\n        }\n        else {\n            let args = arg.split('=');\n            if (args[0] === argName) {\n                runTimer(args[1]);\n            }\n        }\n    }\n}\nsetupExitTimer();\nconst watchDog = {\n    initialize: (params) => {\n        const processId = params.processId;\n        if (Is.number(processId) && exitTimer === undefined) {\n            // We received a parent process id. Set up a timer to periodically check\n            // if the parent is still alive.\n            setInterval(() => {\n                try {\n                    process.kill(processId, 0);\n                }\n                catch (ex) {\n                    // Parent process doesn't exist anymore. Exit the server.\n                    process.exit(_shutdownReceived ? 0 : 1);\n                }\n            }, 3000);\n        }\n    },\n    get shutdownReceived() {\n        return _shutdownReceived;\n    },\n    set shutdownReceived(value) {\n        _shutdownReceived = value;\n    },\n    exit: (code) => {\n        process.exit(code);\n    }\n};\nfunction createConnection(arg1, arg2, arg3, arg4) {\n    let factories;\n    let input;\n    let output;\n    let options;\n    if (arg1 !== void 0 && arg1.__brand === 'features') {\n        factories = arg1;\n        arg1 = arg2;\n        arg2 = arg3;\n        arg3 = arg4;\n    }\n    if (node_1.ConnectionStrategy.is(arg1) || node_1.ConnectionOptions.is(arg1)) {\n        options = arg1;\n    }\n    else {\n        input = arg1;\n        output = arg2;\n        options = arg3;\n    }\n    return _createConnection(input, output, options, factories);\n}\nexports.createConnection = createConnection;\nfunction _createConnection(input, output, options, factories) {\n    if (!input && !output && process.argv.length > 2) {\n        let port = void 0;\n        let pipeName = void 0;\n        let argv = process.argv.slice(2);\n        for (let i = 0; i < argv.length; i++) {\n            let arg = argv[i];\n            if (arg === '--node-ipc') {\n                input = new node_1.IPCMessageReader(process);\n                output = new node_1.IPCMessageWriter(process);\n                break;\n            }\n            else if (arg === '--stdio') {\n                input = process.stdin;\n                output = process.stdout;\n                break;\n            }\n            else if (arg === '--socket') {\n                port = parseInt(argv[i + 1]);\n                break;\n            }\n            else if (arg === '--pipe') {\n                pipeName = argv[i + 1];\n                break;\n            }\n            else {\n                var args = arg.split('=');\n                if (args[0] === '--socket') {\n                    port = parseInt(args[1]);\n                    break;\n                }\n                else if (args[0] === '--pipe') {\n                    pipeName = args[1];\n                    break;\n                }\n            }\n        }\n        if (port) {\n            let transport = node_1.createServerSocketTransport(port);\n            input = transport[0];\n            output = transport[1];\n        }\n        else if (pipeName) {\n            let transport = node_1.createServerPipeTransport(pipeName);\n            input = transport[0];\n            output = transport[1];\n        }\n    }\n    var commandLineMessage = 'Use arguments of createConnection or set command line parameters: \\'--node-ipc\\', \\'--stdio\\' or \\'--socket={number}\\'';\n    if (!input) {\n        throw new Error('Connection input stream is not set. ' + commandLineMessage);\n    }\n    if (!output) {\n        throw new Error('Connection output stream is not set. ' + commandLineMessage);\n    }\n    // Backwards compatibility\n    if (Is.func(input.read) && Is.func(input.on)) {\n        let inputStream = input;\n        inputStream.on('end', () => {\n            process.exit(_shutdownReceived ? 0 : 1);\n        });\n        inputStream.on('close', () => {\n            process.exit(_shutdownReceived ? 0 : 1);\n        });\n    }\n    const connectionFactory = (logger) => {\n        return node_1.createProtocolConnection(input, output, logger, options);\n    };\n    return server_1.createConnection(connectionFactory, watchDog, factories);\n}\n//# sourceMappingURL=main.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction boolean(value) {\n    return value === true || value === false;\n}\nexports.boolean = boolean;\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nexports.string = string;\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nexports.number = number;\nfunction error(value) {\n    return value instanceof Error;\n}\nexports.error = error;\nfunction func(value) {\n    return typeof value === 'function';\n}\nexports.func = func;\nfunction array(value) {\n    return Array.isArray(value);\n}\nexports.array = array;\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nexports.stringArray = stringArray;\nfunction typedArray(value, check) {\n    return Array.isArray(value) && value.every(check);\n}\nexports.typedArray = typedArray;\nfunction thenable(value) {\n    return value && func(value.then);\n}\nexports.thenable = thenable;\n//# sourceMappingURL=is.js.map","module.exports = require(\"net\");","module.exports = require(\"https\");","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst Is = require(\"./utils/is\");\nconst UUID = require(\"./utils/uuid\");\nconst progress_1 = require(\"./progress\");\nconst configuration_1 = require(\"./configuration\");\nconst workspaceFolders_1 = require(\"./workspaceFolders\");\nconst callHierarchy_1 = require(\"./callHierarchy\");\nfunction null2Undefined(value) {\n    if (value === null) {\n        return undefined;\n    }\n    return value;\n}\n/**\n * A manager for simple text documents\n */\nclass TextDocuments {\n    /**\n     * Create a new text document manager.\n     */\n    constructor(configuration) {\n        this._documents = Object.create(null);\n        this._configuration = configuration;\n        this._onDidChangeContent = new vscode_languageserver_protocol_1.Emitter();\n        this._onDidOpen = new vscode_languageserver_protocol_1.Emitter();\n        this._onDidClose = new vscode_languageserver_protocol_1.Emitter();\n        this._onDidSave = new vscode_languageserver_protocol_1.Emitter();\n        this._onWillSave = new vscode_languageserver_protocol_1.Emitter();\n    }\n    /**\n     * An event that fires when a text document managed by this manager\n     * has been opened or the content changes.\n     */\n    get onDidChangeContent() {\n        return this._onDidChangeContent.event;\n    }\n    /**\n     * An event that fires when a text document managed by this manager\n     * has been opened.\n     */\n    get onDidOpen() {\n        return this._onDidOpen.event;\n    }\n    /**\n     * An event that fires when a text document managed by this manager\n     * will be saved.\n     */\n    get onWillSave() {\n        return this._onWillSave.event;\n    }\n    /**\n     * Sets a handler that will be called if a participant wants to provide\n     * edits during a text document save.\n     */\n    onWillSaveWaitUntil(handler) {\n        this._willSaveWaitUntil = handler;\n    }\n    /**\n     * An event that fires when a text document managed by this manager\n     * has been saved.\n     */\n    get onDidSave() {\n        return this._onDidSave.event;\n    }\n    /**\n     * An event that fires when a text document managed by this manager\n     * has been closed.\n     */\n    get onDidClose() {\n        return this._onDidClose.event;\n    }\n    /**\n     * Returns the document for the given URI. Returns undefined if\n     * the document is not mananged by this instance.\n     *\n     * @param uri The text document's URI to retrieve.\n     * @return the text document or `undefined`.\n     */\n    get(uri) {\n        return this._documents[uri];\n    }\n    /**\n     * Returns all text documents managed by this instance.\n     *\n     * @return all text documents.\n     */\n    all() {\n        return Object.keys(this._documents).map(key => this._documents[key]);\n    }\n    /**\n     * Returns the URIs of all text documents managed by this instance.\n     *\n     * @return the URI's of all text documents.\n     */\n    keys() {\n        return Object.keys(this._documents);\n    }\n    /**\n     * Listens for `low level` notification on the given connection to\n     * update the text documents managed by this instance.\n     *\n     * Please note that the connection only provides handlers not an event model. Therefore\n     * listening on a connection will overwrite the following handlers on a connection:\n     * `onDidOpenTextDocument`, `onDidChangeTextDocument`, `onDidCloseTextDocument`,\n     * `onWillSaveTextDocument`, `onWillSaveTextDocumentWaitUntil` and `onDidSaveTextDocument`.\n     *\n     * Use the correspnding events on the TextDocuments instance instead.\n     *\n     * @param connection The connection to listen on.\n     */\n    listen(connection) {\n        connection.__textDocumentSync = vscode_languageserver_protocol_1.TextDocumentSyncKind.Full;\n        connection.onDidOpenTextDocument((event) => {\n            let td = event.textDocument;\n            let document = this._configuration.create(td.uri, td.languageId, td.version, td.text);\n            this._documents[td.uri] = document;\n            let toFire = Object.freeze({ document });\n            this._onDidOpen.fire(toFire);\n            this._onDidChangeContent.fire(toFire);\n        });\n        connection.onDidChangeTextDocument((event) => {\n            let td = event.textDocument;\n            let changes = event.contentChanges;\n            if (changes.length === 0) {\n                return;\n            }\n            let document = this._documents[td.uri];\n            const { version } = td;\n            if (version === null || version === undefined) {\n                throw new Error(`Received document change event for ${td.uri} without valid version identifier`);\n            }\n            document = this._configuration.update(document, changes, version);\n            this._documents[td.uri] = document;\n            this._onDidChangeContent.fire(Object.freeze({ document }));\n        });\n        connection.onDidCloseTextDocument((event) => {\n            let document = this._documents[event.textDocument.uri];\n            if (document) {\n                delete this._documents[event.textDocument.uri];\n                this._onDidClose.fire(Object.freeze({ document }));\n            }\n        });\n        connection.onWillSaveTextDocument((event) => {\n            let document = this._documents[event.textDocument.uri];\n            if (document) {\n                this._onWillSave.fire(Object.freeze({ document, reason: event.reason }));\n            }\n        });\n        connection.onWillSaveTextDocumentWaitUntil((event, token) => {\n            let document = this._documents[event.textDocument.uri];\n            if (document && this._willSaveWaitUntil) {\n                return this._willSaveWaitUntil(Object.freeze({ document, reason: event.reason }), token);\n            }\n            else {\n                return [];\n            }\n        });\n        connection.onDidSaveTextDocument((event) => {\n            let document = this._documents[event.textDocument.uri];\n            if (document) {\n                this._onDidSave.fire(Object.freeze({ document }));\n            }\n        });\n    }\n}\nexports.TextDocuments = TextDocuments;\n/**\n * Helps tracking error message. Equal occurences of the same\n * message are only stored once. This class is for example\n * useful if text documents are validated in a loop and equal\n * error message should be folded into one.\n */\nclass ErrorMessageTracker {\n    constructor() {\n        this._messages = Object.create(null);\n    }\n    /**\n     * Add a message to the tracker.\n     *\n     * @param message The message to add.\n     */\n    add(message) {\n        let count = this._messages[message];\n        if (!count) {\n            count = 0;\n        }\n        count++;\n        this._messages[message] = count;\n    }\n    /**\n     * Send all tracked messages to the connection's window.\n     *\n     * @param connection The connection established between client and server.\n     */\n    sendErrors(connection) {\n        Object.keys(this._messages).forEach(message => {\n            connection.window.showErrorMessage(message);\n        });\n    }\n}\nexports.ErrorMessageTracker = ErrorMessageTracker;\nclass RemoteConsoleImpl {\n    constructor() {\n    }\n    rawAttach(connection) {\n        this._rawConnection = connection;\n    }\n    attach(connection) {\n        this._connection = connection;\n    }\n    get connection() {\n        if (!this._connection) {\n            throw new Error('Remote is not attached to a connection yet.');\n        }\n        return this._connection;\n    }\n    fillServerCapabilities(_capabilities) {\n    }\n    initialize(_capabilities) {\n    }\n    error(message) {\n        this.send(vscode_languageserver_protocol_1.MessageType.Error, message);\n    }\n    warn(message) {\n        this.send(vscode_languageserver_protocol_1.MessageType.Warning, message);\n    }\n    info(message) {\n        this.send(vscode_languageserver_protocol_1.MessageType.Info, message);\n    }\n    log(message) {\n        this.send(vscode_languageserver_protocol_1.MessageType.Log, message);\n    }\n    send(type, message) {\n        if (this._rawConnection) {\n            this._rawConnection.sendNotification(vscode_languageserver_protocol_1.LogMessageNotification.type, { type, message });\n        }\n    }\n}\nclass _RemoteWindowImpl {\n    constructor() {\n    }\n    attach(connection) {\n        this._connection = connection;\n    }\n    get connection() {\n        if (!this._connection) {\n            throw new Error('Remote is not attached to a connection yet.');\n        }\n        return this._connection;\n    }\n    initialize(_capabilities) {\n    }\n    fillServerCapabilities(_capabilities) {\n    }\n    showErrorMessage(message, ...actions) {\n        let params = { type: vscode_languageserver_protocol_1.MessageType.Error, message, actions };\n        return this.connection.sendRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, params).then(null2Undefined);\n    }\n    showWarningMessage(message, ...actions) {\n        let params = { type: vscode_languageserver_protocol_1.MessageType.Warning, message, actions };\n        return this.connection.sendRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, params).then(null2Undefined);\n    }\n    showInformationMessage(message, ...actions) {\n        let params = { type: vscode_languageserver_protocol_1.MessageType.Info, message, actions };\n        return this.connection.sendRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, params).then(null2Undefined);\n    }\n}\nconst RemoteWindowImpl = progress_1.ProgressFeature(_RemoteWindowImpl);\nvar BulkRegistration;\n(function (BulkRegistration) {\n    /**\n     * Creates a new bulk registration.\n     * @return an empty bulk registration.\n     */\n    function create() {\n        return new BulkRegistrationImpl();\n    }\n    BulkRegistration.create = create;\n})(BulkRegistration = exports.BulkRegistration || (exports.BulkRegistration = {}));\nclass BulkRegistrationImpl {\n    constructor() {\n        this._registrations = [];\n        this._registered = new Set();\n    }\n    add(type, registerOptions) {\n        const method = Is.string(type) ? type : type.method;\n        if (this._registered.has(method)) {\n            throw new Error(`${method} is already added to this registration`);\n        }\n        const id = UUID.generateUuid();\n        this._registrations.push({\n            id: id,\n            method: method,\n            registerOptions: registerOptions || {}\n        });\n        this._registered.add(method);\n    }\n    asRegistrationParams() {\n        return {\n            registrations: this._registrations\n        };\n    }\n}\nvar BulkUnregistration;\n(function (BulkUnregistration) {\n    function create() {\n        return new BulkUnregistrationImpl(undefined, []);\n    }\n    BulkUnregistration.create = create;\n})(BulkUnregistration = exports.BulkUnregistration || (exports.BulkUnregistration = {}));\nclass BulkUnregistrationImpl {\n    constructor(_connection, unregistrations) {\n        this._connection = _connection;\n        this._unregistrations = new Map();\n        unregistrations.forEach(unregistration => {\n            this._unregistrations.set(unregistration.method, unregistration);\n        });\n    }\n    get isAttached() {\n        return !!this._connection;\n    }\n    attach(connection) {\n        this._connection = connection;\n    }\n    add(unregistration) {\n        this._unregistrations.set(unregistration.method, unregistration);\n    }\n    dispose() {\n        let unregistrations = [];\n        for (let unregistration of this._unregistrations.values()) {\n            unregistrations.push(unregistration);\n        }\n        let params = {\n            unregisterations: unregistrations\n        };\n        this._connection.sendRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params).then(undefined, (_error) => {\n            this._connection.console.info(`Bulk unregistration failed.`);\n        });\n    }\n    disposeSingle(arg) {\n        const method = Is.string(arg) ? arg : arg.method;\n        const unregistration = this._unregistrations.get(method);\n        if (!unregistration) {\n            return false;\n        }\n        let params = {\n            unregisterations: [unregistration]\n        };\n        this._connection.sendRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params).then(() => {\n            this._unregistrations.delete(method);\n        }, (_error) => {\n            this._connection.console.info(`Unregistering request handler for ${unregistration.id} failed.`);\n        });\n        return true;\n    }\n}\nclass RemoteClientImpl {\n    attach(connection) {\n        this._connection = connection;\n    }\n    get connection() {\n        if (!this._connection) {\n            throw new Error('Remote is not attached to a connection yet.');\n        }\n        return this._connection;\n    }\n    initialize(_capabilities) {\n    }\n    fillServerCapabilities(_capabilities) {\n    }\n    register(typeOrRegistrations, registerOptionsOrType, registerOptions) {\n        if (typeOrRegistrations instanceof BulkRegistrationImpl) {\n            return this.registerMany(typeOrRegistrations);\n        }\n        else if (typeOrRegistrations instanceof BulkUnregistrationImpl) {\n            return this.registerSingle1(typeOrRegistrations, registerOptionsOrType, registerOptions);\n        }\n        else {\n            return this.registerSingle2(typeOrRegistrations, registerOptionsOrType);\n        }\n    }\n    registerSingle1(unregistration, type, registerOptions) {\n        const method = Is.string(type) ? type : type.method;\n        const id = UUID.generateUuid();\n        let params = {\n            registrations: [{ id, method, registerOptions: registerOptions || {} }]\n        };\n        if (!unregistration.isAttached) {\n            unregistration.attach(this.connection);\n        }\n        return this.connection.sendRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params).then((_result) => {\n            unregistration.add({ id: id, method: method });\n            return unregistration;\n        }, (_error) => {\n            this.connection.console.info(`Registering request handler for ${method} failed.`);\n            return Promise.reject(_error);\n        });\n    }\n    registerSingle2(type, registerOptions) {\n        const method = Is.string(type) ? type : type.method;\n        const id = UUID.generateUuid();\n        let params = {\n            registrations: [{ id, method, registerOptions: registerOptions || {} }]\n        };\n        return this.connection.sendRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params).then((_result) => {\n            return vscode_languageserver_protocol_1.Disposable.create(() => {\n                this.unregisterSingle(id, method);\n            });\n        }, (_error) => {\n            this.connection.console.info(`Registering request handler for ${method} failed.`);\n            return Promise.reject(_error);\n        });\n    }\n    unregisterSingle(id, method) {\n        let params = {\n            unregisterations: [{ id, method }]\n        };\n        return this.connection.sendRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params).then(undefined, (_error) => {\n            this.connection.console.info(`Unregistering request handler for ${id} failed.`);\n        });\n    }\n    registerMany(registrations) {\n        let params = registrations.asRegistrationParams();\n        return this.connection.sendRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params).then(() => {\n            return new BulkUnregistrationImpl(this._connection, params.registrations.map(registration => { return { id: registration.id, method: registration.method }; }));\n        }, (_error) => {\n            this.connection.console.info(`Bulk registration failed.`);\n            return Promise.reject(_error);\n        });\n    }\n}\nclass _RemoteWorkspaceImpl {\n    constructor() {\n    }\n    attach(connection) {\n        this._connection = connection;\n    }\n    get connection() {\n        if (!this._connection) {\n            throw new Error('Remote is not attached to a connection yet.');\n        }\n        return this._connection;\n    }\n    initialize(_capabilities) {\n    }\n    fillServerCapabilities(_capabilities) {\n    }\n    applyEdit(paramOrEdit) {\n        function isApplyWorkspaceEditParams(value) {\n            return value && !!value.edit;\n        }\n        let params = isApplyWorkspaceEditParams(paramOrEdit) ? paramOrEdit : { edit: paramOrEdit };\n        return this.connection.sendRequest(vscode_languageserver_protocol_1.ApplyWorkspaceEditRequest.type, params);\n    }\n}\nconst RemoteWorkspaceImpl = workspaceFolders_1.WorkspaceFoldersFeature(configuration_1.ConfigurationFeature(_RemoteWorkspaceImpl));\nclass TracerImpl {\n    constructor() {\n        this._trace = vscode_languageserver_protocol_1.Trace.Off;\n    }\n    attach(connection) {\n        this._connection = connection;\n    }\n    get connection() {\n        if (!this._connection) {\n            throw new Error('Remote is not attached to a connection yet.');\n        }\n        return this._connection;\n    }\n    initialize(_capabilities) {\n    }\n    fillServerCapabilities(_capabilities) {\n    }\n    set trace(value) {\n        this._trace = value;\n    }\n    log(message, verbose) {\n        if (this._trace === vscode_languageserver_protocol_1.Trace.Off) {\n            return;\n        }\n        this.connection.sendNotification(vscode_languageserver_protocol_1.LogTraceNotification.type, {\n            message: message,\n            verbose: this._trace === vscode_languageserver_protocol_1.Trace.Verbose ? verbose : undefined\n        });\n    }\n}\nclass TelemetryImpl {\n    constructor() {\n    }\n    attach(connection) {\n        this._connection = connection;\n    }\n    get connection() {\n        if (!this._connection) {\n            throw new Error('Remote is not attached to a connection yet.');\n        }\n        return this._connection;\n    }\n    initialize(_capabilities) {\n    }\n    fillServerCapabilities(_capabilities) {\n    }\n    logEvent(data) {\n        this.connection.sendNotification(vscode_languageserver_protocol_1.TelemetryEventNotification.type, data);\n    }\n}\nclass _LanguagesImpl {\n    constructor() {\n    }\n    attach(connection) {\n        this._connection = connection;\n    }\n    get connection() {\n        if (!this._connection) {\n            throw new Error('Remote is not attached to a connection yet.');\n        }\n        return this._connection;\n    }\n    initialize(_capabilities) {\n    }\n    fillServerCapabilities(_capabilities) {\n    }\n    attachWorkDoneProgress(params) {\n        return progress_1.attachWorkDone(this.connection, params);\n    }\n    attachPartialResultProgress(_type, params) {\n        return progress_1.attachPartialResult(this.connection, params);\n    }\n}\nexports._LanguagesImpl = _LanguagesImpl;\nconst LanguagesImpl = callHierarchy_1.CallHierarchyFeature(_LanguagesImpl);\nfunction combineConsoleFeatures(one, two) {\n    return function (Base) {\n        return two(one(Base));\n    };\n}\nexports.combineConsoleFeatures = combineConsoleFeatures;\nfunction combineTelemetryFeatures(one, two) {\n    return function (Base) {\n        return two(one(Base));\n    };\n}\nexports.combineTelemetryFeatures = combineTelemetryFeatures;\nfunction combineTracerFeatures(one, two) {\n    return function (Base) {\n        return two(one(Base));\n    };\n}\nexports.combineTracerFeatures = combineTracerFeatures;\nfunction combineClientFeatures(one, two) {\n    return function (Base) {\n        return two(one(Base));\n    };\n}\nexports.combineClientFeatures = combineClientFeatures;\nfunction combineWindowFeatures(one, two) {\n    return function (Base) {\n        return two(one(Base));\n    };\n}\nexports.combineWindowFeatures = combineWindowFeatures;\nfunction combineWorkspaceFeatures(one, two) {\n    return function (Base) {\n        return two(one(Base));\n    };\n}\nexports.combineWorkspaceFeatures = combineWorkspaceFeatures;\nfunction combineLanguagesFeatures(one, two) {\n    return function (Base) {\n        return two(one(Base));\n    };\n}\nexports.combineLanguagesFeatures = combineLanguagesFeatures;\nfunction combineFeatures(one, two) {\n    function combine(one, two, func) {\n        if (one && two) {\n            return func(one, two);\n        }\n        else if (one) {\n            return one;\n        }\n        else {\n            return two;\n        }\n    }\n    let result = {\n        __brand: 'features',\n        console: combine(one.console, two.console, combineConsoleFeatures),\n        tracer: combine(one.tracer, two.tracer, combineTracerFeatures),\n        telemetry: combine(one.telemetry, two.telemetry, combineTelemetryFeatures),\n        client: combine(one.client, two.client, combineClientFeatures),\n        window: combine(one.window, two.window, combineWindowFeatures),\n        workspace: combine(one.workspace, two.workspace, combineWorkspaceFeatures)\n    };\n    return result;\n}\nexports.combineFeatures = combineFeatures;\nfunction createConnection(connectionFactory, watchDog, factories) {\n    const logger = (factories && factories.console ? new (factories.console(RemoteConsoleImpl))() : new RemoteConsoleImpl());\n    const connection = connectionFactory(logger);\n    logger.rawAttach(connection);\n    const tracer = (factories && factories.tracer ? new (factories.tracer(TracerImpl))() : new TracerImpl());\n    const telemetry = (factories && factories.telemetry ? new (factories.telemetry(TelemetryImpl))() : new TelemetryImpl());\n    const client = (factories && factories.client ? new (factories.client(RemoteClientImpl))() : new RemoteClientImpl());\n    const remoteWindow = (factories && factories.window ? new (factories.window(RemoteWindowImpl))() : new RemoteWindowImpl());\n    const workspace = (factories && factories.workspace ? new (factories.workspace(RemoteWorkspaceImpl))() : new RemoteWorkspaceImpl());\n    const languages = (factories && factories.languages ? new (factories.languages(LanguagesImpl))() : new LanguagesImpl());\n    const allRemotes = [logger, tracer, telemetry, client, remoteWindow, workspace, languages];\n    function asPromise(value) {\n        if (value instanceof Promise) {\n            return value;\n        }\n        else if (Is.thenable(value)) {\n            return new Promise((resolve, reject) => {\n                value.then((resolved) => resolve(resolved), (error) => reject(error));\n            });\n        }\n        else {\n            return Promise.resolve(value);\n        }\n    }\n    let shutdownHandler = undefined;\n    let initializeHandler = undefined;\n    let exitHandler = undefined;\n    let protocolConnection = {\n        listen: () => connection.listen(),\n        sendRequest: (type, ...params) => connection.sendRequest(Is.string(type) ? type : type.method, ...params),\n        onRequest: (type, handler) => connection.onRequest(type, handler),\n        sendNotification: (type, param) => {\n            const method = Is.string(type) ? type : type.method;\n            if (arguments.length === 1) {\n                connection.sendNotification(method);\n            }\n            else {\n                connection.sendNotification(method, param);\n            }\n        },\n        onNotification: (type, handler) => connection.onNotification(type, handler),\n        onProgress: connection.onProgress,\n        sendProgress: connection.sendProgress,\n        onInitialize: (handler) => initializeHandler = handler,\n        onInitialized: (handler) => connection.onNotification(vscode_languageserver_protocol_1.InitializedNotification.type, handler),\n        onShutdown: (handler) => shutdownHandler = handler,\n        onExit: (handler) => exitHandler = handler,\n        get console() { return logger; },\n        get telemetry() { return telemetry; },\n        get tracer() { return tracer; },\n        get client() { return client; },\n        get window() { return remoteWindow; },\n        get workspace() { return workspace; },\n        get languages() { return languages; },\n        onDidChangeConfiguration: (handler) => connection.onNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, handler),\n        onDidChangeWatchedFiles: (handler) => connection.onNotification(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type, handler),\n        __textDocumentSync: undefined,\n        onDidOpenTextDocument: (handler) => connection.onNotification(vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, handler),\n        onDidChangeTextDocument: (handler) => connection.onNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, handler),\n        onDidCloseTextDocument: (handler) => connection.onNotification(vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, handler),\n        onWillSaveTextDocument: (handler) => connection.onNotification(vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type, handler),\n        onWillSaveTextDocumentWaitUntil: (handler) => connection.onRequest(vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type, handler),\n        onDidSaveTextDocument: (handler) => connection.onNotification(vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, handler),\n        sendDiagnostics: (params) => connection.sendNotification(vscode_languageserver_protocol_1.PublishDiagnosticsNotification.type, params),\n        onHover: (handler) => connection.onRequest(vscode_languageserver_protocol_1.HoverRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), undefined);\n        }),\n        onCompletion: (handler) => connection.onRequest(vscode_languageserver_protocol_1.CompletionRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), progress_1.attachPartialResult(connection, params));\n        }),\n        onCompletionResolve: (handler) => connection.onRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, handler),\n        onSignatureHelp: (handler) => connection.onRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), undefined);\n        }),\n        onDeclaration: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), progress_1.attachPartialResult(connection, params));\n        }),\n        onDefinition: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), progress_1.attachPartialResult(connection, params));\n        }),\n        onTypeDefinition: (handler) => connection.onRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), progress_1.attachPartialResult(connection, params));\n        }),\n        onImplementation: (handler) => connection.onRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), progress_1.attachPartialResult(connection, params));\n        }),\n        onReferences: (handler) => connection.onRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), progress_1.attachPartialResult(connection, params));\n        }),\n        onDocumentHighlight: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), progress_1.attachPartialResult(connection, params));\n        }),\n        onDocumentSymbol: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), progress_1.attachPartialResult(connection, params));\n        }),\n        onWorkspaceSymbol: (handler) => connection.onRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), progress_1.attachPartialResult(connection, params));\n        }),\n        onCodeAction: (handler) => connection.onRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), progress_1.attachPartialResult(connection, params));\n        }),\n        onCodeLens: (handler) => connection.onRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), progress_1.attachPartialResult(connection, params));\n        }),\n        onCodeLensResolve: (handler) => connection.onRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, (params, cancel) => {\n            return handler(params, cancel);\n        }),\n        onDocumentFormatting: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), undefined);\n        }),\n        onDocumentRangeFormatting: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), undefined);\n        }),\n        onDocumentOnTypeFormatting: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, (params, cancel) => {\n            return handler(params, cancel);\n        }),\n        onRenameRequest: (handler) => connection.onRequest(vscode_languageserver_protocol_1.RenameRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), undefined);\n        }),\n        onPrepareRename: (handler) => connection.onRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, (params, cancel) => {\n            return handler(params, cancel);\n        }),\n        onDocumentLinks: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), progress_1.attachPartialResult(connection, params));\n        }),\n        onDocumentLinkResolve: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, (params, cancel) => {\n            return handler(params, cancel);\n        }),\n        onDocumentColor: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentColorRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), progress_1.attachPartialResult(connection, params));\n        }),\n        onColorPresentation: (handler) => connection.onRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), progress_1.attachPartialResult(connection, params));\n        }),\n        onFoldingRanges: (handler) => connection.onRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), progress_1.attachPartialResult(connection, params));\n        }),\n        onSelectionRanges: (handler) => connection.onRequest(vscode_languageserver_protocol_1.SelectionRangeRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), progress_1.attachPartialResult(connection, params));\n        }),\n        onExecuteCommand: (handler) => connection.onRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, (params, cancel) => {\n            return handler(params, cancel, progress_1.attachWorkDone(connection, params), undefined);\n        }),\n        dispose: () => connection.dispose()\n    };\n    for (let remote of allRemotes) {\n        remote.attach(protocolConnection);\n    }\n    connection.onRequest(vscode_languageserver_protocol_1.InitializeRequest.type, (params) => {\n        watchDog.initialize(params);\n        if (Is.string(params.trace)) {\n            tracer.trace = vscode_languageserver_protocol_1.Trace.fromString(params.trace);\n        }\n        for (let remote of allRemotes) {\n            remote.initialize(params.capabilities);\n        }\n        if (initializeHandler) {\n            let result = initializeHandler(params, new vscode_languageserver_protocol_1.CancellationTokenSource().token, progress_1.attachWorkDone(connection, params), undefined);\n            return asPromise(result).then((value) => {\n                if (value instanceof vscode_languageserver_protocol_1.ResponseError) {\n                    return value;\n                }\n                let result = value;\n                if (!result) {\n                    result = { capabilities: {} };\n                }\n                let capabilities = result.capabilities;\n                if (!capabilities) {\n                    capabilities = {};\n                    result.capabilities = capabilities;\n                }\n                if (capabilities.textDocumentSync === undefined || capabilities.textDocumentSync === null) {\n                    capabilities.textDocumentSync = Is.number(protocolConnection.__textDocumentSync) ? protocolConnection.__textDocumentSync : vscode_languageserver_protocol_1.TextDocumentSyncKind.None;\n                }\n                else if (!Is.number(capabilities.textDocumentSync) && !Is.number(capabilities.textDocumentSync.change)) {\n                    capabilities.textDocumentSync.change = Is.number(protocolConnection.__textDocumentSync) ? protocolConnection.__textDocumentSync : vscode_languageserver_protocol_1.TextDocumentSyncKind.None;\n                }\n                for (let remote of allRemotes) {\n                    remote.fillServerCapabilities(capabilities);\n                }\n                return result;\n            });\n        }\n        else {\n            let result = { capabilities: { textDocumentSync: vscode_languageserver_protocol_1.TextDocumentSyncKind.None } };\n            for (let remote of allRemotes) {\n                remote.fillServerCapabilities(result.capabilities);\n            }\n            return result;\n        }\n    });\n    connection.onRequest(vscode_languageserver_protocol_1.ShutdownRequest.type, () => {\n        watchDog.shutdownReceived = true;\n        if (shutdownHandler) {\n            return shutdownHandler(new vscode_languageserver_protocol_1.CancellationTokenSource().token);\n        }\n        else {\n            return undefined;\n        }\n    });\n    connection.onNotification(vscode_languageserver_protocol_1.ExitNotification.type, () => {\n        try {\n            if (exitHandler) {\n                exitHandler();\n            }\n        }\n        finally {\n            if (watchDog.shutdownReceived) {\n                watchDog.exit(0);\n            }\n            else {\n                watchDog.exit(1);\n            }\n        }\n    });\n    connection.onNotification(vscode_languageserver_protocol_1.SetTraceNotification.type, (params) => {\n        tracer.trace = vscode_languageserver_protocol_1.Trace.fromString(params.value);\n    });\n    return protocolConnection;\n}\nexports.createConnection = createConnection;\n//# sourceMappingURL=server.js.map","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\n'use strict';\n\nmodule.exports = require('./lib/node/main');","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Disposable;\n(function (Disposable) {\n    function create(func) {\n        return {\n            dispose: func\n        };\n    }\n    Disposable.create = create;\n})(Disposable = exports.Disposable || (exports.Disposable = {}));\n//# sourceMappingURL=disposable.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n/// <reference path=\"../../typings/thenable.d.ts\" />\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst messages_1 = require(\"../common/messages\");\nexports.RequestType = messages_1.RequestType;\nexports.RequestType0 = messages_1.RequestType0;\nexports.RequestType1 = messages_1.RequestType1;\nexports.RequestType2 = messages_1.RequestType2;\nexports.RequestType3 = messages_1.RequestType3;\nexports.RequestType4 = messages_1.RequestType4;\nexports.RequestType5 = messages_1.RequestType5;\nexports.RequestType6 = messages_1.RequestType6;\nexports.RequestType7 = messages_1.RequestType7;\nexports.RequestType8 = messages_1.RequestType8;\nexports.RequestType9 = messages_1.RequestType9;\nexports.ResponseError = messages_1.ResponseError;\nexports.ErrorCodes = messages_1.ErrorCodes;\nexports.NotificationType = messages_1.NotificationType;\nexports.NotificationType0 = messages_1.NotificationType0;\nexports.NotificationType1 = messages_1.NotificationType1;\nexports.NotificationType2 = messages_1.NotificationType2;\nexports.NotificationType3 = messages_1.NotificationType3;\nexports.NotificationType4 = messages_1.NotificationType4;\nexports.NotificationType5 = messages_1.NotificationType5;\nexports.NotificationType6 = messages_1.NotificationType6;\nexports.NotificationType7 = messages_1.NotificationType7;\nexports.NotificationType8 = messages_1.NotificationType8;\nexports.NotificationType9 = messages_1.NotificationType9;\nconst disposable_1 = require(\"../common/disposable\");\nexports.Disposable = disposable_1.Disposable;\nconst events_1 = require(\"../common/events\");\nexports.Event = events_1.Event;\nexports.Emitter = events_1.Emitter;\nconst cancellation_1 = require(\"../common/cancellation\");\nexports.CancellationTokenSource = cancellation_1.CancellationTokenSource;\nexports.CancellationToken = cancellation_1.CancellationToken;\nconst messageReader_1 = require(\"../common/messageReader\");\nexports.MessageReader = messageReader_1.MessageReader;\nexports.AbstractMessageReader = messageReader_1.AbstractMessageReader;\nexports.ReadableStreamMessageReader = messageReader_1.ReadableStreamMessageReader;\nconst messageWriter_1 = require(\"../common/messageWriter\");\nexports.MessageWriter = messageWriter_1.MessageWriter;\nexports.AbstractMessageWriter = messageWriter_1.AbstractMessageWriter;\nexports.WriteableStreamMessageWriter = messageWriter_1.WriteableStreamMessageWriter;\nconst connection_1 = require(\"../common/connection\");\nexports.ConnectionStrategy = connection_1.ConnectionStrategy;\nexports.ConnectionOptions = connection_1.ConnectionOptions;\nexports.NullLogger = connection_1.NullLogger;\nexports.createMessageConnection = connection_1.createMessageConnection;\nexports.ProgressType = connection_1.ProgressType;\nexports.Trace = connection_1.Trace;\nexports.TraceFormat = connection_1.TraceFormat;\nexports.SetTraceNotification = connection_1.SetTraceNotification;\nexports.LogTraceNotification = connection_1.LogTraceNotification;\nexports.ConnectionErrors = connection_1.ConnectionErrors;\nexports.ConnectionError = connection_1.ConnectionError;\nexports.CancellationReceiverStrategy = connection_1.CancellationReceiverStrategy;\nexports.CancellationSenderStrategy = connection_1.CancellationSenderStrategy;\nexports.CancellationStrategy = connection_1.CancellationStrategy;\nconst ral_1 = require(\"./ral\");\nexports.RAL = ral_1.default;\n//# sourceMappingURL=api.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst is = require(\"./is\");\n/**\n * Predefined error codes.\n */\nvar ErrorCodes;\n(function (ErrorCodes) {\n    // Defined by JSON RPC\n    ErrorCodes.ParseError = -32700;\n    ErrorCodes.InvalidRequest = -32600;\n    ErrorCodes.MethodNotFound = -32601;\n    ErrorCodes.InvalidParams = -32602;\n    ErrorCodes.InternalError = -32603;\n    ErrorCodes.serverErrorStart = -32099;\n    ErrorCodes.serverErrorEnd = -32000;\n    ErrorCodes.ServerNotInitialized = -32002;\n    ErrorCodes.UnknownErrorCode = -32001;\n    // Defined by the protocol.\n    ErrorCodes.RequestCancelled = -32800;\n    ErrorCodes.ContentModified = -32801;\n    // Defined by VSCode library.\n    ErrorCodes.MessageWriteError = 1;\n    ErrorCodes.MessageReadError = 2;\n})(ErrorCodes = exports.ErrorCodes || (exports.ErrorCodes = {}));\n/**\n * An error object return in a response in case a request\n * has failed.\n */\nclass ResponseError extends Error {\n    constructor(code, message, data) {\n        super(message);\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\n        this.data = data;\n        Object.setPrototypeOf(this, ResponseError.prototype);\n    }\n    toJson() {\n        return {\n            code: this.code,\n            message: this.message,\n            data: this.data,\n        };\n    }\n}\nexports.ResponseError = ResponseError;\n/**\n * An abstract implementation of a MessageType.\n */\nclass AbstractMessageSignature {\n    constructor(_method, _numberOfParams) {\n        this._method = _method;\n        this._numberOfParams = _numberOfParams;\n    }\n    get method() {\n        return this._method;\n    }\n    get numberOfParams() {\n        return this._numberOfParams;\n    }\n}\nexports.AbstractMessageSignature = AbstractMessageSignature;\n/**\n * Classes to type request response pairs\n *\n * The type parameter RO will be removed in the next major version\n * of the JSON RPC library since it is a LSP concept and doesn't\n * belong here. For now it is tagged as default never.\n */\nclass RequestType0 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 0);\n    }\n}\nexports.RequestType0 = RequestType0;\nclass RequestType extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 1);\n    }\n}\nexports.RequestType = RequestType;\nclass RequestType1 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 1);\n    }\n}\nexports.RequestType1 = RequestType1;\nclass RequestType2 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 2);\n    }\n}\nexports.RequestType2 = RequestType2;\nclass RequestType3 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 3);\n    }\n}\nexports.RequestType3 = RequestType3;\nclass RequestType4 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 4);\n    }\n}\nexports.RequestType4 = RequestType4;\nclass RequestType5 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 5);\n    }\n}\nexports.RequestType5 = RequestType5;\nclass RequestType6 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 6);\n    }\n}\nexports.RequestType6 = RequestType6;\nclass RequestType7 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 7);\n    }\n}\nexports.RequestType7 = RequestType7;\nclass RequestType8 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 8);\n    }\n}\nexports.RequestType8 = RequestType8;\nclass RequestType9 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 9);\n    }\n}\nexports.RequestType9 = RequestType9;\n/**\n * The type parameter RO will be removed in the next major version\n * of the JSON RPC library since it is a LSP concept and doesn't\n * belong here. For now it is tagged as default never.\n */\nclass NotificationType extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 1);\n        this._ = undefined;\n    }\n}\nexports.NotificationType = NotificationType;\nclass NotificationType0 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 0);\n    }\n}\nexports.NotificationType0 = NotificationType0;\nclass NotificationType1 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 1);\n    }\n}\nexports.NotificationType1 = NotificationType1;\nclass NotificationType2 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 2);\n    }\n}\nexports.NotificationType2 = NotificationType2;\nclass NotificationType3 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 3);\n    }\n}\nexports.NotificationType3 = NotificationType3;\nclass NotificationType4 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 4);\n    }\n}\nexports.NotificationType4 = NotificationType4;\nclass NotificationType5 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 5);\n    }\n}\nexports.NotificationType5 = NotificationType5;\nclass NotificationType6 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 6);\n    }\n}\nexports.NotificationType6 = NotificationType6;\nclass NotificationType7 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 7);\n    }\n}\nexports.NotificationType7 = NotificationType7;\nclass NotificationType8 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 8);\n    }\n}\nexports.NotificationType8 = NotificationType8;\nclass NotificationType9 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 9);\n    }\n}\nexports.NotificationType9 = NotificationType9;\n/**\n * Tests if the given message is a request message\n */\nfunction isRequestMessage(message) {\n    const candidate = message;\n    return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\n}\nexports.isRequestMessage = isRequestMessage;\n/**\n * Tests if the given message is a notification message\n */\nfunction isNotificationMessage(message) {\n    const candidate = message;\n    return candidate && is.string(candidate.method) && message.id === void 0;\n}\nexports.isNotificationMessage = isNotificationMessage;\n/**\n * Tests if the given message is a response message\n */\nfunction isResponseMessage(message) {\n    const candidate = message;\n    return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\n}\nexports.isResponseMessage = isResponseMessage;\n//# sourceMappingURL=messages.js.map","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst events_1 = require(\"./events\");\nvar CancellationToken;\n(function (CancellationToken) {\n    CancellationToken.None = Object.freeze({\n        isCancellationRequested: false,\n        onCancellationRequested: events_1.Event.None\n    });\n    CancellationToken.Cancelled = Object.freeze({\n        isCancellationRequested: true,\n        onCancellationRequested: events_1.Event.None\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate === CancellationToken.None\n            || candidate === CancellationToken.Cancelled\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\n    }\n    CancellationToken.is = is;\n})(CancellationToken = exports.CancellationToken || (exports.CancellationToken = {}));\nconst shortcutEvent = Object.freeze(function (callback, context) {\n    const handle = ral_1.default().timer.setTimeout(callback.bind(context), 0);\n    return { dispose() { ral_1.default().timer.clearTimeout(handle); } };\n});\nclass MutableToken {\n    constructor() {\n        this._isCancelled = false;\n    }\n    cancel() {\n        if (!this._isCancelled) {\n            this._isCancelled = true;\n            if (this._emitter) {\n                this._emitter.fire(undefined);\n                this.dispose();\n            }\n        }\n    }\n    get isCancellationRequested() {\n        return this._isCancelled;\n    }\n    get onCancellationRequested() {\n        if (this._isCancelled) {\n            return shortcutEvent;\n        }\n        if (!this._emitter) {\n            this._emitter = new events_1.Emitter();\n        }\n        return this._emitter.event;\n    }\n    dispose() {\n        if (this._emitter) {\n            this._emitter.dispose();\n            this._emitter = undefined;\n        }\n    }\n}\nclass CancellationTokenSource {\n    get token() {\n        if (!this._token) {\n            // be lazy and create the token only when\n            // actually needed\n            this._token = new MutableToken();\n        }\n        return this._token;\n    }\n    cancel() {\n        if (!this._token) {\n            // save an object by returning the default\n            // cancelled token when cancellation happens\n            // before someone asks for the token\n            this._token = CancellationToken.Cancelled;\n        }\n        else {\n            this._token.cancel();\n        }\n    }\n    dispose() {\n        if (!this._token) {\n            // ensure to initialize with an empty token if we had none\n            this._token = CancellationToken.None;\n        }\n        else if (this._token instanceof MutableToken) {\n            // actually dispose\n            this._token.dispose();\n        }\n    }\n}\nexports.CancellationTokenSource = CancellationTokenSource;\n//# sourceMappingURL=cancellation.js.map","module.exports = require(\"os\");","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass ValueUUID {\n    constructor(_value) {\n        this._value = _value;\n        // empty\n    }\n    asHex() {\n        return this._value;\n    }\n    equals(other) {\n        return this.asHex() === other.asHex();\n    }\n}\nclass V4UUID extends ValueUUID {\n    constructor() {\n        super([\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            '4',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._oneOf(V4UUID._timeHighBits),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n        ].join(''));\n    }\n    static _oneOf(array) {\n        return array[Math.floor(array.length * Math.random())];\n    }\n    static _randomHex() {\n        return V4UUID._oneOf(V4UUID._chars);\n    }\n}\nV4UUID._chars = ['0', '1', '2', '3', '4', '5', '6', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\nV4UUID._timeHighBits = ['8', '9', 'a', 'b'];\n/**\n * An empty UUID that contains only zeros.\n */\nexports.empty = new ValueUUID('00000000-0000-0000-0000-000000000000');\nfunction v4() {\n    return new V4UUID();\n}\nexports.v4 = v4;\nconst _UUIDPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\nfunction isUUID(value) {\n    return _UUIDPattern.test(value);\n}\nexports.isUUID = isUUID;\n/**\n * Parses a UUID that is of the format xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.\n * @param value A uuid string.\n */\nfunction parse(value) {\n    if (!isUUID(value)) {\n        throw new Error('invalid uuid');\n    }\n    return new ValueUUID(value);\n}\nexports.parse = parse;\nfunction generateUuid() {\n    return v4().asHex();\n}\nexports.generateUuid = generateUuid;\n//# sourceMappingURL=uuid.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken, ResponseError, ErrorCodes } from 'vscode-languageserver';\n\nexport function formatError(message: string, err: any): string {\n\tif (err instanceof Error) {\n\t\tlet error = <Error>err;\n\t\treturn `${message}: ${error.message}\\n${error.stack}`;\n\t} else if (typeof err === 'string') {\n\t\treturn `${message}: ${err}`;\n\t} else if (err) {\n\t\treturn `${message}: ${err.toString()}`;\n\t}\n\treturn message;\n}\n\nexport function runSafeAsync<T>(func: () => Thenable<T>, errorVal: T, errorMessage: string, token: CancellationToken): Thenable<T | ResponseError<any>> {\n\treturn new Promise<T | ResponseError<any>>((resolve) => {\n\t\tsetImmediate(() => {\n\t\t\tif (token.isCancellationRequested) {\n\t\t\t\tresolve(cancelValue());\n\t\t\t}\n\t\t\treturn func().then(result => {\n\t\t\t\tif (token.isCancellationRequested) {\n\t\t\t\t\tresolve(cancelValue());\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\tresolve(result);\n\t\t\t\t}\n\t\t\t}, e => {\n\t\t\t\tconsole.error(formatError(errorMessage, e));\n\t\t\t\tresolve(errorVal);\n\t\t\t});\n\t\t});\n\t});\n}\n\nexport function runSafe<T, E>(func: () => T, errorVal: T, errorMessage: string, token: CancellationToken): Thenable<T | ResponseError<E>> {\n\treturn new Promise<T | ResponseError<E>>((resolve) => {\n\t\tsetImmediate(() => {\n\t\t\tif (token.isCancellationRequested) {\n\t\t\t\tresolve(cancelValue());\n\t\t\t} else {\n\t\t\t\ttry {\n\t\t\t\t\tlet result = func();\n\t\t\t\t\tif (token.isCancellationRequested) {\n\t\t\t\t\t\tresolve(cancelValue());\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t}\n\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(formatError(errorMessage, e));\n\t\t\t\t\tresolve(errorVal);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n}\n\nfunction cancelValue<E>() {\n\tconsole.log('cancelled');\n\treturn new ResponseError<E>(ErrorCodes.RequestCancelled, 'Request cancelled');\n}\n","module.exports = require(\"tls\");","\"use strict\";\n\n/* global module, require */\nmodule.exports = function () {\n\n    \"use strict\";\n\n    // Get a promise object. This may be native, or it may be polyfilled\n\n    var ES6Promise = require(\"./promise.js\");\n\n    /**\n     * thatLooksLikeAPromiseToMe()\n     *\n     * Duck-types a promise.\n     *\n     * @param {object} o\n     * @return {bool} True if this resembles a promise\n     */\n    function thatLooksLikeAPromiseToMe(o) {\n        return o && typeof o.then === \"function\" && typeof o.catch === \"function\";\n    }\n\n    /**\n     * promisify()\n     *\n     * Transforms callback-based function -- func(arg1, arg2 .. argN, callback) -- into\n     * an ES6-compatible Promise. Promisify provides a default callback of the form (error, result)\n     * and rejects when `error` is truthy. You can also supply settings object as the second argument.\n     *\n     * @param {function} original - The function to promisify\n     * @param {object} settings - Settings object\n     * @param {object} settings.thisArg - A `this` context to use. If not set, assume `settings` _is_ `thisArg`\n     * @param {bool} settings.multiArgs - Should multiple arguments be returned as an array?\n     * @return {function} A promisified version of `original`\n     */\n    return function promisify(original, settings) {\n\n        return function () {\n            for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n                args[_key] = arguments[_key];\n            }\n\n            var returnMultipleArguments = settings && settings.multiArgs;\n\n            var target = void 0;\n            if (settings && settings.thisArg) {\n                target = settings.thisArg;\n            } else if (settings) {\n                target = settings;\n            }\n\n            // Return the promisified function\n            return new ES6Promise(function (resolve, reject) {\n\n                // Append the callback bound to the context\n                args.push(function callback(err) {\n\n                    if (err) {\n                        return reject(err);\n                    }\n\n                    for (var _len2 = arguments.length, values = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n                        values[_key2 - 1] = arguments[_key2];\n                    }\n\n                    if (false === !!returnMultipleArguments) {\n                        return resolve(values[0]);\n                    }\n\n                    resolve(values);\n                });\n\n                // Call the function\n                var response = original.apply(target, args);\n\n                // If it looks like original already returns a promise,\n                // then just resolve with that promise. Hopefully, the callback function we added will just be ignored.\n                if (thatLooksLikeAPromiseToMe(response)) {\n                    resolve(response);\n                }\n            });\n        };\n    };\n}();","module.exports = require(\"events\");","/**\n * Detect Electron renderer process, which is node, but we should\n * treat as a browser.\n */\n\nif (typeof process === 'undefined' || process.type === 'renderer') {\n  module.exports = require('./browser.js');\n} else {\n  module.exports = require('./node.js');\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { createConnection, Connection } from 'vscode-languageserver/node';\nimport { formatError } from '../utils/runner';\nimport { startServer } from '../jsonServer';\nimport { RequestService } from '../requests';\n\nimport { xhr, XHRResponse, configure as configureHttpRequests, getErrorStatusDescription } from 'request-light';\nimport { URI as Uri } from 'vscode-uri';\nimport * as fs from 'fs';\n\n// Create a connection for the server.\nconst connection: Connection = createConnection();\n\nconsole.log = connection.console.log.bind(connection.console);\nconsole.error = connection.console.error.bind(connection.console);\n\nprocess.on('unhandledRejection', (e: any) => {\n\tconnection.console.error(formatError(`Unhandled exception`, e));\n});\n\nfunction getHTTPRequestService(): RequestService {\n\treturn {\n\t\tgetContent(uri: string, _encoding?: string) {\n\t\t\tconst headers = { 'Accept-Encoding': 'gzip, deflate' };\n\t\t\treturn xhr({ url: uri, followRedirects: 5, headers }).then(response => {\n\t\t\t\treturn response.responseText;\n\t\t\t}, (error: XHRResponse) => {\n\t\t\t\treturn Promise.reject(error.responseText || getErrorStatusDescription(error.status) || error.toString());\n\t\t\t});\n\t\t}\n\t};\n}\n\nfunction getFileRequestService(): RequestService {\n\treturn {\n\t\tgetContent(location: string, encoding?: string) {\n\t\t\treturn new Promise((c, e) => {\n\t\t\t\tconst uri = Uri.parse(location);\n\t\t\t\tfs.readFile(uri.fsPath, encoding, (err, buf) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treturn e(err);\n\t\t\t\t\t}\n\t\t\t\t\tc(buf.toString());\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t};\n}\n\n\nstartServer(connection, { file: getFileRequestService(), http: getHTTPRequestService(), configureHttpRequests });\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\n'use strict';\n\nmodule.exports = require('./lib/node/main');","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ral_1 = require(\"../common/ral\");\nconst disposable_1 = require(\"../common/disposable\");\nconst util_1 = require(\"util\");\nconst DefaultSize = 8192;\nconst CR = Buffer.from('\\r', 'ascii')[0];\nconst LF = Buffer.from('\\n', 'ascii')[0];\nconst CRLF = '\\r\\n';\nclass MessageBuffer {\n    constructor(encoding = 'utf-8') {\n        this._encoding = encoding;\n        this.index = 0;\n        this.buffer = Buffer.allocUnsafe(DefaultSize);\n    }\n    get encoding() {\n        return this._encoding;\n    }\n    append(chunk) {\n        let toAppend;\n        if (typeof chunk === 'string') {\n            toAppend = Buffer.from(chunk, this._encoding);\n        }\n        else {\n            toAppend = chunk;\n        }\n        if (this.buffer.length - this.index >= toAppend.length) {\n            this.buffer.set(toAppend, this.index);\n        }\n        else {\n            var newSize = (Math.ceil((this.index + toAppend.length) / DefaultSize) + 1) * DefaultSize;\n            if (this.index === 0) {\n                this.buffer = Buffer.allocUnsafe(newSize);\n                this.buffer.set(toAppend);\n            }\n            else {\n                this.buffer = Buffer.concat([this.buffer.slice(0, this.index), toAppend], newSize);\n            }\n        }\n        this.index += toAppend.length;\n    }\n    tryReadHeaders() {\n        let current = 0;\n        while (current + 3 < this.index && (this.buffer[current] !== CR || this.buffer[current + 1] !== LF || this.buffer[current + 2] !== CR || this.buffer[current + 3] !== LF)) {\n            current++;\n        }\n        // No header / body separator found (e.g CRLFCRLF)\n        if (current + 3 >= this.index) {\n            return undefined;\n        }\n        const result = new Map();\n        const headers = this.buffer.toString('ascii', 0, current).split(CRLF);\n        headers.forEach((header) => {\n            let index = header.indexOf(':');\n            if (index === -1) {\n                throw new Error('Message header must separate key and value using :');\n            }\n            let key = header.substr(0, index);\n            let value = header.substr(index + 1).trim();\n            result.set(key, value);\n        });\n        let nextStart = current + 4;\n        this.buffer = this.buffer.slice(nextStart);\n        this.index = this.index - nextStart;\n        return result;\n    }\n    tryReadBody(length) {\n        if (this.index < length) {\n            return undefined;\n        }\n        const result = Buffer.alloc(length);\n        this.buffer.copy(result, 0, 0, length);\n        const nextStart = length;\n        this.buffer.copy(this.buffer, 0, nextStart);\n        this.index = this.index - nextStart;\n        return result;\n    }\n    get numberOfBytes() {\n        return this.index;\n    }\n}\nclass ReadableStreamWrapper {\n    constructor(stream) {\n        this.stream = stream;\n    }\n    onClose(listener) {\n        this.stream.on('close', listener);\n        return disposable_1.Disposable.create(() => this.stream.off('close', listener));\n    }\n    onError(listener) {\n        this.stream.on('error', listener);\n        return disposable_1.Disposable.create(() => this.stream.off('error', listener));\n    }\n    onEnd(listener) {\n        this.stream.on('end', listener);\n        return disposable_1.Disposable.create(() => this.stream.off('end', listener));\n    }\n    onData(listener) {\n        this.stream.on('data', listener);\n        return disposable_1.Disposable.create(() => this.stream.off('data', listener));\n    }\n}\nclass WritableStreamWrapper {\n    constructor(stream) {\n        this.stream = stream;\n    }\n    onClose(listener) {\n        this.stream.on('close', listener);\n        return disposable_1.Disposable.create(() => this.stream.off('close', listener));\n    }\n    onError(listener) {\n        this.stream.on('error', listener);\n        return disposable_1.Disposable.create(() => this.stream.off('error', listener));\n    }\n    onEnd(listener) {\n        this.stream.on('end', listener);\n        return disposable_1.Disposable.create(() => this.stream.off('end', listener));\n    }\n    write(data, encoding) {\n        return new Promise((resolve, reject) => {\n            const callback = (error) => {\n                if (error === undefined || error === null) {\n                    resolve();\n                }\n                else {\n                    reject(error);\n                }\n            };\n            if (typeof data === 'string') {\n                this.stream.write(data, encoding, callback);\n            }\n            else {\n                this.stream.write(data, callback);\n            }\n        });\n    }\n    end() {\n        this.stream.end();\n    }\n}\nconst _ril = Object.freeze({\n    messageBuffer: Object.freeze({\n        create: (encoding) => new MessageBuffer(encoding)\n    }),\n    applicationJson: Object.freeze({\n        encoder: Object.freeze({\n            name: 'application/json',\n            encode: (msg, options) => {\n                return Promise.resolve(Buffer.from(JSON.stringify(msg, undefined, 0), options.charset));\n            }\n        }),\n        decoder: Object.freeze({\n            name: 'application/json',\n            decode: (buffer, options) => {\n                if (buffer instanceof Buffer) {\n                    return Promise.resolve(JSON.parse(buffer.toString(options.charset)));\n                }\n                else {\n                    return Promise.resolve(JSON.parse(new util_1.TextDecoder(options.charset).decode(buffer)));\n                }\n            }\n        })\n    }),\n    stream: Object.freeze({\n        asReadableStream: (socket) => new ReadableStreamWrapper(socket),\n        asWritableStream: (socket) => new WritableStreamWrapper(socket)\n    }),\n    console: console,\n    timer: Object.freeze({\n        setTimeout(callback, ms, ...args) {\n            return setTimeout(callback, ms, ...args);\n        },\n        clearTimeout(handle) {\n            clearTimeout(handle);\n        },\n        setImmediate(callback, ...args) {\n            return setImmediate(callback, ...args);\n        },\n        clearImmediate(handle) {\n            clearImmediate(handle);\n        }\n    })\n});\nfunction RIL() {\n    return _ril;\n}\n(function (RIL) {\n    function install() {\n        ral_1.default.install(_ril);\n    }\n    RIL.install = install;\n})(RIL || (RIL = {}));\nexports.default = RIL;\n//# sourceMappingURL=ril.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst events_1 = require(\"./events\");\nvar MessageReader;\n(function (MessageReader) {\n    function is(value) {\n        let candidate = value;\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\n    }\n    MessageReader.is = is;\n})(MessageReader = exports.MessageReader || (exports.MessageReader = {}));\nclass AbstractMessageReader {\n    constructor() {\n        this.errorEmitter = new events_1.Emitter();\n        this.closeEmitter = new events_1.Emitter();\n        this.partialMessageEmitter = new events_1.Emitter();\n    }\n    dispose() {\n        this.errorEmitter.dispose();\n        this.closeEmitter.dispose();\n    }\n    get onError() {\n        return this.errorEmitter.event;\n    }\n    fireError(error) {\n        this.errorEmitter.fire(this.asError(error));\n    }\n    get onClose() {\n        return this.closeEmitter.event;\n    }\n    fireClose() {\n        this.closeEmitter.fire(undefined);\n    }\n    get onPartialMessage() {\n        return this.partialMessageEmitter.event;\n    }\n    firePartialMessage(info) {\n        this.partialMessageEmitter.fire(info);\n    }\n    asError(error) {\n        if (error instanceof Error) {\n            return error;\n        }\n        else {\n            return new Error(`Reader received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\n        }\n    }\n}\nexports.AbstractMessageReader = AbstractMessageReader;\nvar ResolvedMessageReaderOptions;\n(function (ResolvedMessageReaderOptions) {\n    function fromOptions(options) {\n        var _a;\n        let charset;\n        let result;\n        let contentDecoder;\n        const contentDecoders = new Map();\n        let contentTypeDecoder;\n        const contentTypeDecoders = new Map();\n        if (options === undefined || typeof options === 'string') {\n            charset = options !== null && options !== void 0 ? options : 'utf-8';\n        }\n        else {\n            charset = (_a = options.charset) !== null && _a !== void 0 ? _a : 'utf-8';\n            if (options.contentDecoder !== undefined) {\n                contentDecoder = options.contentDecoder;\n                contentDecoders.set(contentDecoder.name, contentDecoder);\n            }\n            if (options.contentDecoders !== undefined) {\n                for (const decoder of options.contentDecoders) {\n                    contentDecoders.set(decoder.name, decoder);\n                }\n            }\n            if (options.contentTypeDecoder !== undefined) {\n                contentTypeDecoder = options.contentTypeDecoder;\n                contentTypeDecoders.set(contentTypeDecoder.name, contentTypeDecoder);\n            }\n            if (options.contentTypeDecoders !== undefined) {\n                for (const decoder of options.contentTypeDecoders) {\n                    contentTypeDecoders.set(decoder.name, decoder);\n                }\n            }\n        }\n        if (contentTypeDecoder === undefined) {\n            contentTypeDecoder = ral_1.default().applicationJson.decoder;\n            contentTypeDecoders.set(contentTypeDecoder.name, contentTypeDecoder);\n        }\n        return { charset, contentDecoder, contentDecoders, contentTypeDecoder, contentTypeDecoders };\n    }\n    ResolvedMessageReaderOptions.fromOptions = fromOptions;\n})(ResolvedMessageReaderOptions || (ResolvedMessageReaderOptions = {}));\nclass ReadableStreamMessageReader extends AbstractMessageReader {\n    constructor(readable, options) {\n        super();\n        this.readable = readable;\n        this.options = ResolvedMessageReaderOptions.fromOptions(options);\n        this.buffer = ral_1.default().messageBuffer.create(this.options.charset);\n        this._partialMessageTimeout = 10000;\n        this.nextMessageLength = -1;\n        this.messageToken = 0;\n    }\n    set partialMessageTimeout(timeout) {\n        this._partialMessageTimeout = timeout;\n    }\n    get partialMessageTimeout() {\n        return this._partialMessageTimeout;\n    }\n    listen(callback) {\n        this.nextMessageLength = -1;\n        this.messageToken = 0;\n        this.partialMessageTimer = undefined;\n        this.callback = callback;\n        const result = this.readable.onData((data) => {\n            this.onData(data);\n        });\n        this.readable.onError((error) => this.fireError(error));\n        this.readable.onClose(() => this.fireClose());\n        return result;\n    }\n    onData(data) {\n        this.buffer.append(data);\n        while (true) {\n            if (this.nextMessageLength === -1) {\n                const headers = this.buffer.tryReadHeaders();\n                if (!headers) {\n                    return;\n                }\n                const contentLength = headers.get('Content-Length');\n                if (!contentLength) {\n                    throw new Error('Header must provide a Content-Length property.');\n                }\n                const length = parseInt(contentLength);\n                if (isNaN(length)) {\n                    throw new Error('Content-Length value must be a number.');\n                }\n                this.nextMessageLength = length;\n            }\n            const body = this.buffer.tryReadBody(this.nextMessageLength);\n            if (body === undefined) {\n                /** We haven't received the full message yet. */\n                this.setPartialMessageTimer();\n                return;\n            }\n            this.clearPartialMessageTimer();\n            this.nextMessageLength = -1;\n            let p;\n            if (this.options.contentDecoder !== undefined) {\n                p = this.options.contentDecoder.decode(body);\n            }\n            else {\n                p = Promise.resolve(body);\n            }\n            p.then((value) => {\n                this.options.contentTypeDecoder.decode(value, this.options).then((msg) => {\n                    this.callback(msg);\n                }, (error) => {\n                    this.fireError(error);\n                });\n            }, (error) => {\n                this.fireError(error);\n            });\n        }\n    }\n    clearPartialMessageTimer() {\n        if (this.partialMessageTimer) {\n            ral_1.default().timer.clearTimeout(this.partialMessageTimer);\n            this.partialMessageTimer = undefined;\n        }\n    }\n    setPartialMessageTimer() {\n        this.clearPartialMessageTimer();\n        if (this._partialMessageTimeout <= 0) {\n            return;\n        }\n        this.partialMessageTimer = ral_1.default().timer.setTimeout((token, timeout) => {\n            this.partialMessageTimer = undefined;\n            if (token === this.messageToken) {\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\n                this.setPartialMessageTimer();\n            }\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\n    }\n}\nexports.ReadableStreamMessageReader = ReadableStreamMessageReader;\n//# sourceMappingURL=messageReader.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst semaphore_1 = require(\"./semaphore\");\nconst events_1 = require(\"./events\");\nconst ContentLength = 'Content-Length: ';\nconst CRLF = '\\r\\n';\nvar MessageWriter;\n(function (MessageWriter) {\n    function is(value) {\n        let candidate = value;\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\n            Is.func(candidate.onError) && Is.func(candidate.write);\n    }\n    MessageWriter.is = is;\n})(MessageWriter = exports.MessageWriter || (exports.MessageWriter = {}));\nclass AbstractMessageWriter {\n    constructor() {\n        this.errorEmitter = new events_1.Emitter();\n        this.closeEmitter = new events_1.Emitter();\n    }\n    dispose() {\n        this.errorEmitter.dispose();\n        this.closeEmitter.dispose();\n    }\n    get onError() {\n        return this.errorEmitter.event;\n    }\n    fireError(error, message, count) {\n        this.errorEmitter.fire([this.asError(error), message, count]);\n    }\n    get onClose() {\n        return this.closeEmitter.event;\n    }\n    fireClose() {\n        this.closeEmitter.fire(undefined);\n    }\n    asError(error) {\n        if (error instanceof Error) {\n            return error;\n        }\n        else {\n            return new Error(`Writer received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\n        }\n    }\n}\nexports.AbstractMessageWriter = AbstractMessageWriter;\nvar ResolvedMessageWriterOptions;\n(function (ResolvedMessageWriterOptions) {\n    function fromOptions(options) {\n        var _a, _b;\n        if (options === undefined || typeof options === 'string') {\n            return { charset: options !== null && options !== void 0 ? options : 'utf-8', contentTypeEncoder: ral_1.default().applicationJson.encoder };\n        }\n        else {\n            return { charset: (_a = options.charset) !== null && _a !== void 0 ? _a : 'utf-8', contentEncoder: options.contentEncoder, contentTypeEncoder: (_b = options.contentTypeEncoder) !== null && _b !== void 0 ? _b : ral_1.default().applicationJson.encoder };\n        }\n    }\n    ResolvedMessageWriterOptions.fromOptions = fromOptions;\n})(ResolvedMessageWriterOptions || (ResolvedMessageWriterOptions = {}));\nclass WriteableStreamMessageWriter extends AbstractMessageWriter {\n    constructor(writable, options) {\n        super();\n        this.writable = writable;\n        this.options = ResolvedMessageWriterOptions.fromOptions(options);\n        this.errorCount = 0;\n        this.writeSemaphore = new semaphore_1.Semaphore(1);\n        this.writable.onError((error) => this.fireError(error));\n        this.writable.onClose(() => this.fireClose());\n    }\n    async write(msg) {\n        const payload = this.options.contentTypeEncoder.encode(msg, this.options).then((buffer) => {\n            if (this.options.contentEncoder !== undefined) {\n                return this.options.contentEncoder.encode(buffer);\n            }\n            else {\n                return buffer;\n            }\n        });\n        return payload.then((buffer) => {\n            const headers = [];\n            headers.push(ContentLength, buffer.byteLength.toString(), CRLF);\n            headers.push(CRLF);\n            return this.doWrite(msg, headers, buffer);\n        }, (error) => {\n            this.fireError(error);\n            throw error;\n        });\n    }\n    doWrite(msg, headers, data) {\n        return this.writeSemaphore.lock(async () => {\n            try {\n                await this.writable.write(headers.join(''), 'ascii');\n                return this.writable.write(data);\n            }\n            catch (error) {\n                this.handleError(error, msg);\n            }\n        });\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n}\nexports.WriteableStreamMessageWriter = WriteableStreamMessageWriter;\n//# sourceMappingURL=messageWriter.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ral_1 = require(\"./ral\");\nclass Semaphore {\n    constructor(capacity = 1) {\n        if (capacity <= 0) {\n            throw new Error('Capacity must be greater than 0');\n        }\n        this._capacity = capacity;\n        this._active = 0;\n        this._waiting = [];\n    }\n    lock(thunk) {\n        return new Promise((resolve, reject) => {\n            this._waiting.push({ thunk, resolve, reject });\n            this.runNext();\n        });\n    }\n    get active() {\n        return this._active;\n    }\n    runNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        ral_1.default().timer.setImmediate(() => this.doRunNext());\n    }\n    doRunNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        const next = this._waiting.shift();\n        this._active++;\n        if (this._active > this._capacity) {\n            throw new Error(`To many thunks active`);\n        }\n        try {\n            const result = next.thunk();\n            if (result instanceof Promise) {\n                result.then((value) => {\n                    this._active--;\n                    next.resolve(value);\n                    this.runNext();\n                }, (err) => {\n                    this._active--;\n                    next.reject(err);\n                    this.runNext();\n                });\n            }\n            else {\n                this._active--;\n                next.resolve(result);\n                this.runNext();\n            }\n        }\n        catch (err) {\n            this._active--;\n            next.reject(err);\n            this.runNext();\n        }\n    }\n}\nexports.Semaphore = Semaphore;\n//# sourceMappingURL=semaphore.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst messages_1 = require(\"./messages\");\nconst linkedMap_1 = require(\"./linkedMap\");\nconst events_1 = require(\"./events\");\nconst cancellation_1 = require(\"./cancellation\");\nvar CancelNotification;\n(function (CancelNotification) {\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\n})(CancelNotification || (CancelNotification = {}));\nvar ProgressNotification;\n(function (ProgressNotification) {\n    ProgressNotification.type = new messages_1.NotificationType('$/progress');\n})(ProgressNotification || (ProgressNotification = {}));\nclass ProgressType {\n    constructor() {\n    }\n}\nexports.ProgressType = ProgressType;\nexports.NullLogger = Object.freeze({\n    error: () => { },\n    warn: () => { },\n    info: () => { },\n    log: () => { }\n});\nvar Trace;\n(function (Trace) {\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\n    Trace[Trace[\"Verbose\"] = 2] = \"Verbose\";\n})(Trace = exports.Trace || (exports.Trace = {}));\n(function (Trace) {\n    function fromString(value) {\n        if (!Is.string(value)) {\n            return Trace.Off;\n        }\n        value = value.toLowerCase();\n        switch (value) {\n            case 'off':\n                return Trace.Off;\n            case 'messages':\n                return Trace.Messages;\n            case 'verbose':\n                return Trace.Verbose;\n            default:\n                return Trace.Off;\n        }\n    }\n    Trace.fromString = fromString;\n    function toString(value) {\n        switch (value) {\n            case Trace.Off:\n                return 'off';\n            case Trace.Messages:\n                return 'messages';\n            case Trace.Verbose:\n                return 'verbose';\n            default:\n                return 'off';\n        }\n    }\n    Trace.toString = toString;\n})(Trace = exports.Trace || (exports.Trace = {}));\nvar TraceFormat;\n(function (TraceFormat) {\n    TraceFormat[\"Text\"] = \"text\";\n    TraceFormat[\"JSON\"] = \"json\";\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\n(function (TraceFormat) {\n    function fromString(value) {\n        value = value.toLowerCase();\n        if (value === 'json') {\n            return TraceFormat.JSON;\n        }\n        else {\n            return TraceFormat.Text;\n        }\n    }\n    TraceFormat.fromString = fromString;\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\nvar SetTraceNotification;\n(function (SetTraceNotification) {\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTraceNotification');\n})(SetTraceNotification = exports.SetTraceNotification || (exports.SetTraceNotification = {}));\nvar LogTraceNotification;\n(function (LogTraceNotification) {\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTraceNotification');\n})(LogTraceNotification = exports.LogTraceNotification || (exports.LogTraceNotification = {}));\nvar ConnectionErrors;\n(function (ConnectionErrors) {\n    /**\n     * The connection is closed.\n     */\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\n    /**\n     * The connection got disposed.\n     */\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\n    /**\n     * The connection is already in listening mode.\n     */\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\n})(ConnectionErrors = exports.ConnectionErrors || (exports.ConnectionErrors = {}));\nclass ConnectionError extends Error {\n    constructor(code, message) {\n        super(message);\n        this.code = code;\n        Object.setPrototypeOf(this, ConnectionError.prototype);\n    }\n}\nexports.ConnectionError = ConnectionError;\nvar ConnectionStrategy;\n(function (ConnectionStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.cancelUndispatched);\n    }\n    ConnectionStrategy.is = is;\n})(ConnectionStrategy = exports.ConnectionStrategy || (exports.ConnectionStrategy = {}));\nvar CancellationReceiverStrategy;\n(function (CancellationReceiverStrategy) {\n    CancellationReceiverStrategy.Message = Object.freeze({\n        createCancellationTokenSource(_) {\n            return new cancellation_1.CancellationTokenSource();\n        }\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.createCancellationTokenSource);\n    }\n    CancellationReceiverStrategy.is = is;\n})(CancellationReceiverStrategy = exports.CancellationReceiverStrategy || (exports.CancellationReceiverStrategy = {}));\nvar CancellationSenderStrategy;\n(function (CancellationSenderStrategy) {\n    CancellationSenderStrategy.Message = Object.freeze({\n        sendCancellation(conn, id) {\n            conn.sendNotification(CancelNotification.type, { id });\n        },\n        cleanup(_) { }\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.sendCancellation) && Is.func(candidate.cleanup);\n    }\n    CancellationSenderStrategy.is = is;\n})(CancellationSenderStrategy = exports.CancellationSenderStrategy || (exports.CancellationSenderStrategy = {}));\nvar CancellationStrategy;\n(function (CancellationStrategy) {\n    CancellationStrategy.Message = Object.freeze({\n        receiver: CancellationReceiverStrategy.Message,\n        sender: CancellationSenderStrategy.Message\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && CancellationReceiverStrategy.is(candidate.receiver) && CancellationSenderStrategy.is(candidate.sender);\n    }\n    CancellationStrategy.is = is;\n})(CancellationStrategy = exports.CancellationStrategy || (exports.CancellationStrategy = {}));\nvar ConnectionOptions;\n(function (ConnectionOptions) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (CancellationStrategy.is(candidate.cancellationStrategy) || ConnectionStrategy.is(candidate.connectionStrategy));\n    }\n    ConnectionOptions.is = is;\n})(ConnectionOptions = exports.ConnectionOptions || (exports.ConnectionOptions = {}));\nvar ConnectionState;\n(function (ConnectionState) {\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\n})(ConnectionState || (ConnectionState = {}));\nfunction createMessageConnection(messageReader, messageWriter, _logger, options) {\n    const logger = _logger !== undefined ? _logger : exports.NullLogger;\n    let sequenceNumber = 0;\n    let notificationSquenceNumber = 0;\n    let unknownResponseSquenceNumber = 0;\n    const version = '2.0';\n    let starRequestHandler = undefined;\n    const requestHandlers = Object.create(null);\n    let starNotificationHandler = undefined;\n    const notificationHandlers = Object.create(null);\n    const progressHandlers = new Map();\n    let timer;\n    let messageQueue = new linkedMap_1.LinkedMap();\n    let responsePromises = Object.create(null);\n    let requestTokens = Object.create(null);\n    let trace = Trace.Off;\n    let traceFormat = TraceFormat.Text;\n    let tracer;\n    let state = ConnectionState.New;\n    const errorEmitter = new events_1.Emitter();\n    const closeEmitter = new events_1.Emitter();\n    const unhandledNotificationEmitter = new events_1.Emitter();\n    const unhandledProgressEmitter = new events_1.Emitter();\n    const disposeEmitter = new events_1.Emitter();\n    const cancellationStrategy = (options && options.cancellationStrategy) ? options.cancellationStrategy : CancellationStrategy.Message;\n    function createRequestQueueKey(id) {\n        return 'req-' + id.toString();\n    }\n    function createResponseQueueKey(id) {\n        if (id === null) {\n            return 'res-unknown-' + (++unknownResponseSquenceNumber).toString();\n        }\n        else {\n            return 'res-' + id.toString();\n        }\n    }\n    function createNotificationQueueKey() {\n        return 'not-' + (++notificationSquenceNumber).toString();\n    }\n    function addMessageToQueue(queue, message) {\n        if (messages_1.isRequestMessage(message)) {\n            queue.set(createRequestQueueKey(message.id), message);\n        }\n        else if (messages_1.isResponseMessage(message)) {\n            queue.set(createResponseQueueKey(message.id), message);\n        }\n        else {\n            queue.set(createNotificationQueueKey(), message);\n        }\n    }\n    function cancelUndispatched(_message) {\n        return undefined;\n    }\n    function isListening() {\n        return state === ConnectionState.Listening;\n    }\n    function isClosed() {\n        return state === ConnectionState.Closed;\n    }\n    function isDisposed() {\n        return state === ConnectionState.Disposed;\n    }\n    function closeHandler() {\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\n            state = ConnectionState.Closed;\n            closeEmitter.fire(undefined);\n        }\n        // If the connection is disposed don't sent close events.\n    }\n    function readErrorHandler(error) {\n        errorEmitter.fire([error, undefined, undefined]);\n    }\n    function writeErrorHandler(data) {\n        errorEmitter.fire(data);\n    }\n    messageReader.onClose(closeHandler);\n    messageReader.onError(readErrorHandler);\n    messageWriter.onClose(closeHandler);\n    messageWriter.onError(writeErrorHandler);\n    function triggerMessageQueue() {\n        if (timer || messageQueue.size === 0) {\n            return;\n        }\n        timer = ral_1.default().timer.setImmediate(() => {\n            timer = undefined;\n            processMessageQueue();\n        });\n    }\n    function processMessageQueue() {\n        if (messageQueue.size === 0) {\n            return;\n        }\n        const message = messageQueue.shift();\n        try {\n            if (messages_1.isRequestMessage(message)) {\n                handleRequest(message);\n            }\n            else if (messages_1.isNotificationMessage(message)) {\n                handleNotification(message);\n            }\n            else if (messages_1.isResponseMessage(message)) {\n                handleResponse(message);\n            }\n            else {\n                handleInvalidMessage(message);\n            }\n        }\n        finally {\n            triggerMessageQueue();\n        }\n    }\n    const callback = (message) => {\n        try {\n            // We have received a cancellation message. Check if the message is still in the queue\n            // and cancel it if allowed to do so.\n            if (messages_1.isNotificationMessage(message) && message.method === CancelNotification.type.method) {\n                const key = createRequestQueueKey(message.params.id);\n                const toCancel = messageQueue.get(key);\n                if (messages_1.isRequestMessage(toCancel)) {\n                    const strategy = options === null || options === void 0 ? void 0 : options.connectionStrategy;\n                    const response = (strategy && strategy.cancelUndispatched) ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\n                    if (response && (response.error !== undefined || response.result !== undefined)) {\n                        messageQueue.delete(key);\n                        response.id = toCancel.id;\n                        traceSendingResponse(response, message.method, Date.now());\n                        messageWriter.write(response);\n                        return;\n                    }\n                }\n            }\n            addMessageToQueue(messageQueue, message);\n        }\n        finally {\n            triggerMessageQueue();\n        }\n    };\n    function handleRequest(requestMessage) {\n        if (isDisposed()) {\n            // we return here silently since we fired an event when the\n            // connection got disposed.\n            return;\n        }\n        function reply(resultOrError, method, startTime) {\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id\n            };\n            if (resultOrError instanceof messages_1.ResponseError) {\n                message.error = resultOrError.toJson();\n            }\n            else {\n                message.result = resultOrError === undefined ? null : resultOrError;\n            }\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message);\n        }\n        function replyError(error, method, startTime) {\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id,\n                error: error.toJson()\n            };\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message);\n        }\n        function replySuccess(result, method, startTime) {\n            // The JSON RPC defines that a response must either have a result or an error\n            // So we can't treat undefined as a valid response result.\n            if (result === undefined) {\n                result = null;\n            }\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id,\n                result: result\n            };\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message);\n        }\n        traceReceivedRequest(requestMessage);\n        const element = requestHandlers[requestMessage.method];\n        let type;\n        let requestHandler;\n        if (element) {\n            type = element.type;\n            requestHandler = element.handler;\n        }\n        const startTime = Date.now();\n        if (requestHandler || starRequestHandler) {\n            const tokenKey = String(requestMessage.id);\n            const cancellationSource = cancellationStrategy.receiver.createCancellationTokenSource(tokenKey);\n            requestTokens[tokenKey] = cancellationSource;\n            try {\n                let handlerResult;\n                if (requestMessage.params === undefined || (type !== undefined && type.numberOfParams === 0)) {\n                    handlerResult = requestHandler\n                        ? requestHandler(cancellationSource.token)\n                        : starRequestHandler(requestMessage.method, cancellationSource.token);\n                }\n                else if (Is.array(requestMessage.params) && (type === undefined || type.numberOfParams > 1)) {\n                    handlerResult = requestHandler\n                        ? requestHandler(...requestMessage.params, cancellationSource.token)\n                        : starRequestHandler(requestMessage.method, ...requestMessage.params, cancellationSource.token);\n                }\n                else {\n                    handlerResult = requestHandler\n                        ? requestHandler(requestMessage.params, cancellationSource.token)\n                        : starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\n                }\n                const promise = handlerResult;\n                if (!handlerResult) {\n                    delete requestTokens[tokenKey];\n                    replySuccess(handlerResult, requestMessage.method, startTime);\n                }\n                else if (promise.then) {\n                    promise.then((resultOrError) => {\n                        delete requestTokens[tokenKey];\n                        reply(resultOrError, requestMessage.method, startTime);\n                    }, error => {\n                        delete requestTokens[tokenKey];\n                        if (error instanceof messages_1.ResponseError) {\n                            replyError(error, requestMessage.method, startTime);\n                        }\n                        else if (error && Is.string(error.message)) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\n                        }\n                        else {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\n                        }\n                    });\n                }\n                else {\n                    delete requestTokens[tokenKey];\n                    reply(handlerResult, requestMessage.method, startTime);\n                }\n            }\n            catch (error) {\n                delete requestTokens[tokenKey];\n                if (error instanceof messages_1.ResponseError) {\n                    reply(error, requestMessage.method, startTime);\n                }\n                else if (error && Is.string(error.message)) {\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\n                }\n                else {\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\n                }\n            }\n        }\n        else {\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\n        }\n    }\n    function handleResponse(responseMessage) {\n        if (isDisposed()) {\n            // See handle request.\n            return;\n        }\n        if (responseMessage.id === null) {\n            if (responseMessage.error) {\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\n            }\n            else {\n                logger.error(`Received response message without id. No further error information provided.`);\n            }\n        }\n        else {\n            const key = String(responseMessage.id);\n            const responsePromise = responsePromises[key];\n            traceReceivedResponse(responseMessage, responsePromise);\n            if (responsePromise) {\n                delete responsePromises[key];\n                try {\n                    if (responseMessage.error) {\n                        const error = responseMessage.error;\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\n                    }\n                    else if (responseMessage.result !== undefined) {\n                        responsePromise.resolve(responseMessage.result);\n                    }\n                    else {\n                        throw new Error('Should never happen.');\n                    }\n                }\n                catch (error) {\n                    if (error.message) {\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\n                    }\n                    else {\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\n                    }\n                }\n            }\n        }\n    }\n    function handleNotification(message) {\n        if (isDisposed()) {\n            // See handle request.\n            return;\n        }\n        let type = undefined;\n        let notificationHandler;\n        if (message.method === CancelNotification.type.method) {\n            notificationHandler = (params) => {\n                const id = params.id;\n                const source = requestTokens[String(id)];\n                if (source) {\n                    source.cancel();\n                }\n            };\n        }\n        else {\n            const element = notificationHandlers[message.method];\n            if (element) {\n                notificationHandler = element.handler;\n                type = element.type;\n            }\n        }\n        if (notificationHandler || starNotificationHandler) {\n            try {\n                traceReceivedNotification(message);\n                if (message.params === undefined || (type !== undefined && type.numberOfParams === 0)) {\n                    notificationHandler ? notificationHandler() : starNotificationHandler(message.method);\n                }\n                else if (Is.array(message.params) && (type === undefined || type.numberOfParams > 1)) {\n                    notificationHandler ? notificationHandler(...message.params) : starNotificationHandler(message.method, ...message.params);\n                }\n                else {\n                    notificationHandler ? notificationHandler(message.params) : starNotificationHandler(message.method, message.params);\n                }\n            }\n            catch (error) {\n                if (error.message) {\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\n                }\n                else {\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\n                }\n            }\n        }\n        else {\n            unhandledNotificationEmitter.fire(message);\n        }\n    }\n    function handleInvalidMessage(message) {\n        if (!message) {\n            logger.error('Received empty message.');\n            return;\n        }\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\n        // Test whether we find an id to reject the promise\n        const responseMessage = message;\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\n            const key = String(responseMessage.id);\n            const responseHandler = responsePromises[key];\n            if (responseHandler) {\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\n            }\n        }\n    }\n    function traceSendingRequest(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose && message.params) {\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\n            }\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\n        }\n        else {\n            logLSPMessage('send-request', message);\n        }\n    }\n    function traceSendingNotification(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose) {\n                if (message.params) {\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\n                }\n                else {\n                    data = 'No parameters provided.\\n\\n';\n                }\n            }\n            tracer.log(`Sending notification '${message.method}'.`, data);\n        }\n        else {\n            logLSPMessage('send-notification', message);\n        }\n    }\n    function traceSendingResponse(message, method, startTime) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose) {\n                if (message.error && message.error.data) {\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\n                }\n                else {\n                    if (message.result) {\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\n                    }\n                    else if (message.error === undefined) {\n                        data = 'No result returned.\\n\\n';\n                    }\n                }\n            }\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\n        }\n        else {\n            logLSPMessage('send-response', message);\n        }\n    }\n    function traceReceivedRequest(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose && message.params) {\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\n            }\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\n        }\n        else {\n            logLSPMessage('receive-request', message);\n        }\n    }\n    function traceReceivedNotification(message) {\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose) {\n                if (message.params) {\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\n                }\n                else {\n                    data = 'No parameters provided.\\n\\n';\n                }\n            }\n            tracer.log(`Received notification '${message.method}'.`, data);\n        }\n        else {\n            logLSPMessage('receive-notification', message);\n        }\n    }\n    function traceReceivedResponse(message, responsePromise) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose) {\n                if (message.error && message.error.data) {\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\n                }\n                else {\n                    if (message.result) {\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\n                    }\n                    else if (message.error === undefined) {\n                        data = 'No result returned.\\n\\n';\n                    }\n                }\n            }\n            if (responsePromise) {\n                const error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\n            }\n            else {\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\n            }\n        }\n        else {\n            logLSPMessage('receive-response', message);\n        }\n    }\n    function logLSPMessage(type, message) {\n        if (!tracer || trace === Trace.Off) {\n            return;\n        }\n        const lspMessage = {\n            isLSPMessage: true,\n            type,\n            message,\n            timestamp: Date.now()\n        };\n        tracer.log(lspMessage);\n    }\n    function throwIfClosedOrDisposed() {\n        if (isClosed()) {\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\n        }\n        if (isDisposed()) {\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\n        }\n    }\n    function throwIfListening() {\n        if (isListening()) {\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\n        }\n    }\n    function throwIfNotListening() {\n        if (!isListening()) {\n            throw new Error('Call listen() first.');\n        }\n    }\n    function undefinedToNull(param) {\n        if (param === undefined) {\n            return null;\n        }\n        else {\n            return param;\n        }\n    }\n    function computeMessageParams(type, params) {\n        let result;\n        const numberOfParams = type.numberOfParams;\n        switch (numberOfParams) {\n            case 0:\n                result = null;\n                break;\n            case 1:\n                result = undefinedToNull(params[0]);\n                break;\n            default:\n                result = [];\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\n                    result.push(undefinedToNull(params[i]));\n                }\n                if (params.length < numberOfParams) {\n                    for (let i = params.length; i < numberOfParams; i++) {\n                        result.push(null);\n                    }\n                }\n                break;\n        }\n        return result;\n    }\n    const connection = {\n        sendNotification: (type, ...params) => {\n            throwIfClosedOrDisposed();\n            let method;\n            let messageParams;\n            if (Is.string(type)) {\n                method = type;\n                switch (params.length) {\n                    case 0:\n                        messageParams = null;\n                        break;\n                    case 1:\n                        messageParams = params[0];\n                        break;\n                    default:\n                        messageParams = params;\n                        break;\n                }\n            }\n            else {\n                method = type.method;\n                messageParams = computeMessageParams(type, params);\n            }\n            const notificationMessage = {\n                jsonrpc: version,\n                method: method,\n                params: messageParams\n            };\n            traceSendingNotification(notificationMessage);\n            messageWriter.write(notificationMessage);\n        },\n        onNotification: (type, handler) => {\n            throwIfClosedOrDisposed();\n            if (Is.func(type)) {\n                starNotificationHandler = type;\n            }\n            else if (handler) {\n                if (Is.string(type)) {\n                    notificationHandlers[type] = { type: undefined, handler };\n                }\n                else {\n                    notificationHandlers[type.method] = { type, handler };\n                }\n            }\n        },\n        onProgress: (_type, token, handler) => {\n            if (progressHandlers.has(token)) {\n                throw new Error(`Progress handler for token ${token} already registered`);\n            }\n            progressHandlers.set(token, handler);\n            return {\n                dispose: () => {\n                    progressHandlers.delete(token);\n                }\n            };\n        },\n        sendProgress: (_type, token, value) => {\n            connection.sendNotification(ProgressNotification.type, { token, value });\n        },\n        onUnhandledProgress: unhandledProgressEmitter.event,\n        sendRequest: (type, ...params) => {\n            throwIfClosedOrDisposed();\n            throwIfNotListening();\n            let method;\n            let messageParams;\n            let token = undefined;\n            if (Is.string(type)) {\n                method = type;\n                switch (params.length) {\n                    case 0:\n                        messageParams = null;\n                        break;\n                    case 1:\n                        // The cancellation token is optional so it can also be undefined.\n                        if (cancellation_1.CancellationToken.is(params[0])) {\n                            messageParams = null;\n                            token = params[0];\n                        }\n                        else {\n                            messageParams = undefinedToNull(params[0]);\n                        }\n                        break;\n                    default:\n                        const last = params.length - 1;\n                        if (cancellation_1.CancellationToken.is(params[last])) {\n                            token = params[last];\n                            if (params.length === 2) {\n                                messageParams = undefinedToNull(params[0]);\n                            }\n                            else {\n                                messageParams = params.slice(0, last).map(value => undefinedToNull(value));\n                            }\n                        }\n                        else {\n                            messageParams = params.map(value => undefinedToNull(value));\n                        }\n                        break;\n                }\n            }\n            else {\n                method = type.method;\n                messageParams = computeMessageParams(type, params);\n                const numberOfParams = type.numberOfParams;\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\n            }\n            const id = sequenceNumber++;\n            let disposable;\n            if (token) {\n                disposable = token.onCancellationRequested(() => {\n                    cancellationStrategy.sender.sendCancellation(connection, id);\n                });\n            }\n            const result = new Promise((resolve, reject) => {\n                const requestMessage = {\n                    jsonrpc: version,\n                    id: id,\n                    method: method,\n                    params: messageParams\n                };\n                const resolveWithCleanup = (r) => {\n                    resolve(r);\n                    cancellationStrategy.sender.cleanup(id);\n                    disposable === null || disposable === void 0 ? void 0 : disposable.dispose();\n                };\n                const rejectWithCleanup = (r) => {\n                    reject(r);\n                    cancellationStrategy.sender.cleanup(id);\n                    disposable === null || disposable === void 0 ? void 0 : disposable.dispose();\n                };\n                let responsePromise = { method: method, timerStart: Date.now(), resolve: resolveWithCleanup, reject: rejectWithCleanup };\n                traceSendingRequest(requestMessage);\n                try {\n                    messageWriter.write(requestMessage);\n                }\n                catch (e) {\n                    // Writing the message failed. So we need to reject the promise.\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, e.message ? e.message : 'Unknown reason'));\n                    responsePromise = null;\n                }\n                if (responsePromise) {\n                    responsePromises[String(id)] = responsePromise;\n                }\n            });\n            return result;\n        },\n        onRequest: (type, handler) => {\n            throwIfClosedOrDisposed();\n            if (Is.func(type)) {\n                starRequestHandler = type;\n            }\n            else if (handler) {\n                if (Is.string(type)) {\n                    requestHandlers[type] = { type: undefined, handler };\n                }\n                else {\n                    requestHandlers[type.method] = { type, handler };\n                }\n            }\n        },\n        trace: (_value, _tracer, sendNotificationOrTraceOptions) => {\n            let _sendNotification = false;\n            let _traceFormat = TraceFormat.Text;\n            if (sendNotificationOrTraceOptions !== undefined) {\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\n                    _sendNotification = sendNotificationOrTraceOptions;\n                }\n                else {\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\n                }\n            }\n            trace = _value;\n            traceFormat = _traceFormat;\n            if (trace === Trace.Off) {\n                tracer = undefined;\n            }\n            else {\n                tracer = _tracer;\n            }\n            if (_sendNotification && !isClosed() && !isDisposed()) {\n                connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\n            }\n        },\n        onError: errorEmitter.event,\n        onClose: closeEmitter.event,\n        onUnhandledNotification: unhandledNotificationEmitter.event,\n        onDispose: disposeEmitter.event,\n        dispose: () => {\n            if (isDisposed()) {\n                return;\n            }\n            state = ConnectionState.Disposed;\n            disposeEmitter.fire(undefined);\n            const error = new Error('Connection got disposed.');\n            Object.keys(responsePromises).forEach((key) => {\n                responsePromises[key].reject(error);\n            });\n            responsePromises = Object.create(null);\n            requestTokens = Object.create(null);\n            messageQueue = new linkedMap_1.LinkedMap();\n            // Test for backwards compatibility\n            if (Is.func(messageWriter.dispose)) {\n                messageWriter.dispose();\n            }\n            if (Is.func(messageReader.dispose)) {\n                messageReader.dispose();\n            }\n        },\n        listen: () => {\n            throwIfClosedOrDisposed();\n            throwIfListening();\n            state = ConnectionState.Listening;\n            messageReader.listen(callback);\n        },\n        inspect: () => {\n            // eslint-disable-next-line no-console\n            ral_1.default().console.log('inspect');\n        }\n    };\n    connection.onNotification(LogTraceNotification.type, (params) => {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        tracer.log(params.message, trace === Trace.Verbose ? params.verbose : undefined);\n    });\n    connection.onNotification(ProgressNotification.type, (params) => {\n        const handler = progressHandlers.get(params.token);\n        if (handler) {\n            handler(params.value);\n        }\n        else {\n            unhandledProgressEmitter.fire(params);\n        }\n    });\n    return connection;\n}\nexports.createMessageConnection = createMessageConnection;\n//# sourceMappingURL=connection.js.map","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Touch;\n(function (Touch) {\n    Touch.None = 0;\n    Touch.First = 1;\n    Touch.AsOld = Touch.First;\n    Touch.Last = 2;\n    Touch.AsNew = Touch.Last;\n})(Touch = exports.Touch || (exports.Touch = {}));\nclass LinkedMap {\n    constructor() {\n        this[Symbol.toStringTag] = 'LinkedMap';\n        this._map = new Map();\n        this._head = undefined;\n        this._tail = undefined;\n        this._size = 0;\n        this._state = 0;\n    }\n    clear() {\n        this._map.clear();\n        this._head = undefined;\n        this._tail = undefined;\n        this._size = 0;\n        this._state++;\n    }\n    isEmpty() {\n        return !this._head && !this._tail;\n    }\n    get size() {\n        return this._size;\n    }\n    get first() {\n        var _a;\n        return (_a = this._head) === null || _a === void 0 ? void 0 : _a.value;\n    }\n    get last() {\n        var _a;\n        return (_a = this._tail) === null || _a === void 0 ? void 0 : _a.value;\n    }\n    has(key) {\n        return this._map.has(key);\n    }\n    get(key, touch = Touch.None) {\n        const item = this._map.get(key);\n        if (!item) {\n            return undefined;\n        }\n        if (touch !== Touch.None) {\n            this.touch(item, touch);\n        }\n        return item.value;\n    }\n    set(key, value, touch = Touch.None) {\n        let item = this._map.get(key);\n        if (item) {\n            item.value = value;\n            if (touch !== Touch.None) {\n                this.touch(item, touch);\n            }\n        }\n        else {\n            item = { key, value, next: undefined, previous: undefined };\n            switch (touch) {\n                case Touch.None:\n                    this.addItemLast(item);\n                    break;\n                case Touch.First:\n                    this.addItemFirst(item);\n                    break;\n                case Touch.Last:\n                    this.addItemLast(item);\n                    break;\n                default:\n                    this.addItemLast(item);\n                    break;\n            }\n            this._map.set(key, item);\n            this._size++;\n        }\n        return this;\n    }\n    delete(key) {\n        return !!this.remove(key);\n    }\n    remove(key) {\n        const item = this._map.get(key);\n        if (!item) {\n            return undefined;\n        }\n        this._map.delete(key);\n        this.removeItem(item);\n        this._size--;\n        return item.value;\n    }\n    shift() {\n        if (!this._head && !this._tail) {\n            return undefined;\n        }\n        if (!this._head || !this._tail) {\n            throw new Error('Invalid list');\n        }\n        const item = this._head;\n        this._map.delete(item.key);\n        this.removeItem(item);\n        this._size--;\n        return item.value;\n    }\n    forEach(callbackfn, thisArg) {\n        const state = this._state;\n        let current = this._head;\n        while (current) {\n            if (thisArg) {\n                callbackfn.bind(thisArg)(current.value, current.key, this);\n            }\n            else {\n                callbackfn(current.value, current.key, this);\n            }\n            if (this._state !== state) {\n                throw new Error(`LinkedMap got modified during iteration.`);\n            }\n            current = current.next;\n        }\n    }\n    keys() {\n        const map = this;\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]() {\n                return iterator;\n            },\n            next() {\n                if (map._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: current.key, done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    values() {\n        const map = this;\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]() {\n                return iterator;\n            },\n            next() {\n                if (map._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: current.value, done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    entries() {\n        const map = this;\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]() {\n                return iterator;\n            },\n            next() {\n                if (map._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: [current.key, current.value], done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n    trimOld(newSize) {\n        if (newSize >= this.size) {\n            return;\n        }\n        if (newSize === 0) {\n            this.clear();\n            return;\n        }\n        let current = this._head;\n        let currentSize = this.size;\n        while (current && currentSize > newSize) {\n            this._map.delete(current.key);\n            current = current.next;\n            currentSize--;\n        }\n        this._head = current;\n        this._size = currentSize;\n        if (current) {\n            current.previous = undefined;\n        }\n        this._state++;\n    }\n    addItemFirst(item) {\n        // First time Insert\n        if (!this._head && !this._tail) {\n            this._tail = item;\n        }\n        else if (!this._head) {\n            throw new Error('Invalid list');\n        }\n        else {\n            item.next = this._head;\n            this._head.previous = item;\n        }\n        this._head = item;\n        this._state++;\n    }\n    addItemLast(item) {\n        // First time Insert\n        if (!this._head && !this._tail) {\n            this._head = item;\n        }\n        else if (!this._tail) {\n            throw new Error('Invalid list');\n        }\n        else {\n            item.previous = this._tail;\n            this._tail.next = item;\n        }\n        this._tail = item;\n        this._state++;\n    }\n    removeItem(item) {\n        if (item === this._head && item === this._tail) {\n            this._head = undefined;\n            this._tail = undefined;\n        }\n        else if (item === this._head) {\n            // This can only happend if size === 1 which is handle\n            // by the case above.\n            if (!item.next) {\n                throw new Error('Invalid list');\n            }\n            item.next.previous = undefined;\n            this._head = item.next;\n        }\n        else if (item === this._tail) {\n            // This can only happend if size === 1 which is handle\n            // by the case above.\n            if (!item.previous) {\n                throw new Error('Invalid list');\n            }\n            item.previous.next = undefined;\n            this._tail = item.previous;\n        }\n        else {\n            const next = item.next;\n            const previous = item.previous;\n            if (!next || !previous) {\n                throw new Error('Invalid list');\n            }\n            next.previous = previous;\n            previous.next = next;\n        }\n        item.next = undefined;\n        item.previous = undefined;\n        this._state++;\n    }\n    touch(item, touch) {\n        if (!this._head || !this._tail) {\n            throw new Error('Invalid list');\n        }\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\n            return;\n        }\n        if (touch === Touch.First) {\n            if (item === this._head) {\n                return;\n            }\n            const next = item.next;\n            const previous = item.previous;\n            // Unlink the item\n            if (item === this._tail) {\n                // previous must be defined since item was not head but is tail\n                // So there are more than on item in the map\n                previous.next = undefined;\n                this._tail = previous;\n            }\n            else {\n                // Both next and previous are not undefined since item was neither head nor tail.\n                next.previous = previous;\n                previous.next = next;\n            }\n            // Insert the node at head\n            item.previous = undefined;\n            item.next = this._head;\n            this._head.previous = item;\n            this._head = item;\n            this._state++;\n        }\n        else if (touch === Touch.Last) {\n            if (item === this._tail) {\n                return;\n            }\n            const next = item.next;\n            const previous = item.previous;\n            // Unlink the item.\n            if (item === this._head) {\n                // next must be defined since item was not tail but is head\n                // So there are more than on item in the map\n                next.previous = undefined;\n                this._head = next;\n            }\n            else {\n                // Both next and previous are not undefined since item was neither head nor tail.\n                next.previous = previous;\n                previous.next = next;\n            }\n            item.next = undefined;\n            item.previous = this._tail;\n            this._tail.next = item;\n            this._tail = item;\n            this._state++;\n        }\n    }\n    toJSON() {\n        const data = [];\n        this.forEach((value, key) => {\n            data.push([key, value]);\n        });\n        return data;\n    }\n    fromJSON(data) {\n        this.clear();\n        for (const [key, value] of data) {\n            this.set(key, value);\n        }\n    }\n}\nexports.LinkedMap = LinkedMap;\nclass LRUCache extends LinkedMap {\n    constructor(limit, ratio = 1) {\n        super();\n        this._limit = limit;\n        this._ratio = Math.min(Math.max(0, ratio), 1);\n    }\n    get limit() {\n        return this._limit;\n    }\n    set limit(limit) {\n        this._limit = limit;\n        this.checkTrim();\n    }\n    get ratio() {\n        return this._ratio;\n    }\n    set ratio(ratio) {\n        this._ratio = Math.min(Math.max(0, ratio), 1);\n        this.checkTrim();\n    }\n    get(key, touch = Touch.AsNew) {\n        return super.get(key, touch);\n    }\n    peek(key) {\n        return super.get(key, Touch.None);\n    }\n    set(key, value) {\n        super.set(key, value, Touch.Last);\n        this.checkTrim();\n        return this;\n    }\n    checkTrim() {\n        if (this.size > this._limit) {\n            this.trimOld(Math.round(this._limit * this._ratio));\n        }\n    }\n}\nexports.LRUCache = LRUCache;\n//# sourceMappingURL=linkedMap.js.map","module.exports = require(\"crypto\");","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"vscode-jsonrpc\"));\n__export(require(\"vscode-languageserver-types\"));\n__export(require(\"./messages\"));\n__export(require(\"./protocol\"));\nvar connection_1 = require(\"./connection\");\nexports.createProtocolConnection = connection_1.createProtocolConnection;\nconst st = require(\"./protocol.semanticTokens.proposed\");\nvar Proposed;\n(function (Proposed) {\n    Proposed.SemanticTokenTypes = st.SemanticTokenTypes;\n    Proposed.SemanticTokenModifiers = st.SemanticTokenModifiers;\n    Proposed.SemanticTokens = st.SemanticTokens;\n    let SemanticTokensRequest;\n    (function (SemanticTokensRequest) {\n        SemanticTokensRequest.method = st.SemanticTokensRequest.method;\n        SemanticTokensRequest.type = st.SemanticTokensRequest.type;\n    })(SemanticTokensRequest = Proposed.SemanticTokensRequest || (Proposed.SemanticTokensRequest = {}));\n    let SemanticTokensEditsRequest;\n    (function (SemanticTokensEditsRequest) {\n        SemanticTokensEditsRequest.method = st.SemanticTokensEditsRequest.method;\n        SemanticTokensEditsRequest.type = st.SemanticTokensEditsRequest.type;\n    })(SemanticTokensEditsRequest = Proposed.SemanticTokensEditsRequest || (Proposed.SemanticTokensEditsRequest = {}));\n    let SemanticTokensRangeRequest;\n    (function (SemanticTokensRangeRequest) {\n        SemanticTokensRangeRequest.method = st.SemanticTokensRangeRequest.method;\n        SemanticTokensRangeRequest.type = st.SemanticTokensRangeRequest.type;\n    })(SemanticTokensRangeRequest = Proposed.SemanticTokensRangeRequest || (Proposed.SemanticTokensRangeRequest = {}));\n})(Proposed = exports.Proposed || (exports.Proposed = {}));\n//# sourceMappingURL=api.js.map","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\n/**\n * The Position namespace provides helper functions to work with\n * [Position](#Position) literals.\n */\nexport var Position;\n(function (Position) {\n    /**\n     * Creates a new Position literal from the given line and character.\n     * @param line The position's line.\n     * @param character The position's character.\n     */\n    function create(line, character) {\n        return { line: line, character: character };\n    }\n    Position.create = create;\n    /**\n     * Checks whether the given liternal conforms to the [Position](#Position) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(candidate) && Is.number(candidate.line) && Is.number(candidate.character);\n    }\n    Position.is = is;\n})(Position || (Position = {}));\n/**\n * The Range namespace provides helper functions to work with\n * [Range](#Range) literals.\n */\nexport var Range;\n(function (Range) {\n    function create(one, two, three, four) {\n        if (Is.number(one) && Is.number(two) && Is.number(three) && Is.number(four)) {\n            return { start: Position.create(one, two), end: Position.create(three, four) };\n        }\n        else if (Position.is(one) && Position.is(two)) {\n            return { start: one, end: two };\n        }\n        else {\n            throw new Error(\"Range#create called with invalid arguments[\" + one + \", \" + two + \", \" + three + \", \" + four + \"]\");\n        }\n    }\n    Range.create = create;\n    /**\n     * Checks whether the given literal conforms to the [Range](#Range) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\n    }\n    Range.is = is;\n})(Range || (Range = {}));\n/**\n * The Location namespace provides helper functions to work with\n * [Location](#Location) literals.\n */\nexport var Location;\n(function (Location) {\n    /**\n     * Creates a Location literal.\n     * @param uri The location's uri.\n     * @param range The location's range.\n     */\n    function create(uri, range) {\n        return { uri: uri, range: range };\n    }\n    Location.create = create;\n    /**\n     * Checks whether the given literal conforms to the [Location](#Location) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\n    }\n    Location.is = is;\n})(Location || (Location = {}));\n/**\n * The LocationLink namespace provides helper functions to work with\n * [LocationLink](#LocationLink) literals.\n */\nexport var LocationLink;\n(function (LocationLink) {\n    /**\n     * Creates a LocationLink literal.\n     * @param targetUri The definition's uri.\n     * @param targetRange The full range of the definition.\n     * @param targetSelectionRange The span of the symbol definition at the target.\n     * @param originSelectionRange The span of the symbol being defined in the originating source file.\n     */\n    function create(targetUri, targetRange, targetSelectionRange, originSelectionRange) {\n        return { targetUri: targetUri, targetRange: targetRange, targetSelectionRange: targetSelectionRange, originSelectionRange: originSelectionRange };\n    }\n    LocationLink.create = create;\n    /**\n     * Checks whether the given literal conforms to the [LocationLink](#LocationLink) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Range.is(candidate.targetRange) && Is.string(candidate.targetUri)\n            && (Range.is(candidate.targetSelectionRange) || Is.undefined(candidate.targetSelectionRange))\n            && (Range.is(candidate.originSelectionRange) || Is.undefined(candidate.originSelectionRange));\n    }\n    LocationLink.is = is;\n})(LocationLink || (LocationLink = {}));\n/**\n * The Color namespace provides helper functions to work with\n * [Color](#Color) literals.\n */\nexport var Color;\n(function (Color) {\n    /**\n     * Creates a new Color literal.\n     */\n    function create(red, green, blue, alpha) {\n        return {\n            red: red,\n            green: green,\n            blue: blue,\n            alpha: alpha,\n        };\n    }\n    Color.create = create;\n    /**\n     * Checks whether the given literal conforms to the [Color](#Color) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.number(candidate.red)\n            && Is.number(candidate.green)\n            && Is.number(candidate.blue)\n            && Is.number(candidate.alpha);\n    }\n    Color.is = is;\n})(Color || (Color = {}));\n/**\n * The ColorInformation namespace provides helper functions to work with\n * [ColorInformation](#ColorInformation) literals.\n */\nexport var ColorInformation;\n(function (ColorInformation) {\n    /**\n     * Creates a new ColorInformation literal.\n     */\n    function create(range, color) {\n        return {\n            range: range,\n            color: color,\n        };\n    }\n    ColorInformation.create = create;\n    /**\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Range.is(candidate.range) && Color.is(candidate.color);\n    }\n    ColorInformation.is = is;\n})(ColorInformation || (ColorInformation = {}));\n/**\n * The Color namespace provides helper functions to work with\n * [ColorPresentation](#ColorPresentation) literals.\n */\nexport var ColorPresentation;\n(function (ColorPresentation) {\n    /**\n     * Creates a new ColorInformation literal.\n     */\n    function create(label, textEdit, additionalTextEdits) {\n        return {\n            label: label,\n            textEdit: textEdit,\n            additionalTextEdits: additionalTextEdits,\n        };\n    }\n    ColorPresentation.create = create;\n    /**\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.string(candidate.label)\n            && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate))\n            && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\n    }\n    ColorPresentation.is = is;\n})(ColorPresentation || (ColorPresentation = {}));\n/**\n * Enum of known range kinds\n */\nexport var FoldingRangeKind;\n(function (FoldingRangeKind) {\n    /**\n     * Folding range for a comment\n     */\n    FoldingRangeKind[\"Comment\"] = \"comment\";\n    /**\n     * Folding range for a imports or includes\n     */\n    FoldingRangeKind[\"Imports\"] = \"imports\";\n    /**\n     * Folding range for a region (e.g. `#region`)\n     */\n    FoldingRangeKind[\"Region\"] = \"region\";\n})(FoldingRangeKind || (FoldingRangeKind = {}));\n/**\n * The folding range namespace provides helper functions to work with\n * [FoldingRange](#FoldingRange) literals.\n */\nexport var FoldingRange;\n(function (FoldingRange) {\n    /**\n     * Creates a new FoldingRange literal.\n     */\n    function create(startLine, endLine, startCharacter, endCharacter, kind) {\n        var result = {\n            startLine: startLine,\n            endLine: endLine\n        };\n        if (Is.defined(startCharacter)) {\n            result.startCharacter = startCharacter;\n        }\n        if (Is.defined(endCharacter)) {\n            result.endCharacter = endCharacter;\n        }\n        if (Is.defined(kind)) {\n            result.kind = kind;\n        }\n        return result;\n    }\n    FoldingRange.create = create;\n    /**\n     * Checks whether the given literal conforms to the [FoldingRange](#FoldingRange) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.number(candidate.startLine) && Is.number(candidate.startLine)\n            && (Is.undefined(candidate.startCharacter) || Is.number(candidate.startCharacter))\n            && (Is.undefined(candidate.endCharacter) || Is.number(candidate.endCharacter))\n            && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\n    }\n    FoldingRange.is = is;\n})(FoldingRange || (FoldingRange = {}));\n/**\n * The DiagnosticRelatedInformation namespace provides helper functions to work with\n * [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) literals.\n */\nexport var DiagnosticRelatedInformation;\n(function (DiagnosticRelatedInformation) {\n    /**\n     * Creates a new DiagnosticRelatedInformation literal.\n     */\n    function create(location, message) {\n        return {\n            location: location,\n            message: message\n        };\n    }\n    DiagnosticRelatedInformation.create = create;\n    /**\n     * Checks whether the given literal conforms to the [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\n    }\n    DiagnosticRelatedInformation.is = is;\n})(DiagnosticRelatedInformation || (DiagnosticRelatedInformation = {}));\n/**\n * The diagnostic's severity.\n */\nexport var DiagnosticSeverity;\n(function (DiagnosticSeverity) {\n    /**\n     * Reports an error.\n     */\n    DiagnosticSeverity.Error = 1;\n    /**\n     * Reports a warning.\n     */\n    DiagnosticSeverity.Warning = 2;\n    /**\n     * Reports an information.\n     */\n    DiagnosticSeverity.Information = 3;\n    /**\n     * Reports a hint.\n     */\n    DiagnosticSeverity.Hint = 4;\n})(DiagnosticSeverity || (DiagnosticSeverity = {}));\n/**\n * The diagnostic tags.\n *\n * @since 3.15.0\n */\nexport var DiagnosticTag;\n(function (DiagnosticTag) {\n    /**\n     * Unused or unnecessary code.\n     *\n     * Clients are allowed to render diagnostics with this tag faded out instead of having\n     * an error squiggle.\n     */\n    DiagnosticTag.Unnecessary = 1;\n    /**\n     * Deprecated or obsolete code.\n     *\n     * Clients are allowed to rendered diagnostics with this tag strike through.\n     */\n    DiagnosticTag.Deprecated = 2;\n})(DiagnosticTag || (DiagnosticTag = {}));\n/**\n * The DiagnosticCode namespace provides functions to deal with complex diagnostic codes.\n *\n * @since 3.16.0 - Proposed state\n */\nexport var DiagnosticCode;\n(function (DiagnosticCode) {\n    /**\n     * Checks whether the given liternal conforms to the [DiagnosticCode](#DiagnosticCode) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return candidate !== undefined && candidate !== null && (Is.number(candidate.value) || Is.string(candidate.value)) && Is.string(candidate.target);\n    }\n    DiagnosticCode.is = is;\n})(DiagnosticCode || (DiagnosticCode = {}));\n/**\n * The Diagnostic namespace provides helper functions to work with\n * [Diagnostic](#Diagnostic) literals.\n */\nexport var Diagnostic;\n(function (Diagnostic) {\n    /**\n     * Creates a new Diagnostic literal.\n     */\n    function create(range, message, severity, code, source, relatedInformation) {\n        var result = { range: range, message: message };\n        if (Is.defined(severity)) {\n            result.severity = severity;\n        }\n        if (Is.defined(code)) {\n            result.code = code;\n        }\n        if (Is.defined(source)) {\n            result.source = source;\n        }\n        if (Is.defined(relatedInformation)) {\n            result.relatedInformation = relatedInformation;\n        }\n        return result;\n    }\n    Diagnostic.create = create;\n    /**\n     * Checks whether the given literal conforms to the [Diagnostic](#Diagnostic) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate)\n            && Range.is(candidate.range)\n            && Is.string(candidate.message)\n            && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\n            && (Is.number(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\n            && (Is.string(candidate.source) || Is.undefined(candidate.source))\n            && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\n    }\n    Diagnostic.is = is;\n})(Diagnostic || (Diagnostic = {}));\n/**\n * The Command namespace provides helper functions to work with\n * [Command](#Command) literals.\n */\nexport var Command;\n(function (Command) {\n    /**\n     * Creates a new Command literal.\n     */\n    function create(title, command) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        var result = { title: title, command: command };\n        if (Is.defined(args) && args.length > 0) {\n            result.arguments = args;\n        }\n        return result;\n    }\n    Command.create = create;\n    /**\n     * Checks whether the given literal conforms to the [Command](#Command) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.command);\n    }\n    Command.is = is;\n})(Command || (Command = {}));\n/**\n * The TextEdit namespace provides helper function to create replace,\n * insert and delete edits more easily.\n */\nexport var TextEdit;\n(function (TextEdit) {\n    /**\n     * Creates a replace text edit.\n     * @param range The range of text to be replaced.\n     * @param newText The new text.\n     */\n    function replace(range, newText) {\n        return { range: range, newText: newText };\n    }\n    TextEdit.replace = replace;\n    /**\n     * Creates a insert text edit.\n     * @param position The position to insert the text at.\n     * @param newText The text to be inserted.\n     */\n    function insert(position, newText) {\n        return { range: { start: position, end: position }, newText: newText };\n    }\n    TextEdit.insert = insert;\n    /**\n     * Creates a delete text edit.\n     * @param range The range of text to be deleted.\n     */\n    function del(range) {\n        return { range: range, newText: '' };\n    }\n    TextEdit.del = del;\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(candidate)\n            && Is.string(candidate.newText)\n            && Range.is(candidate.range);\n    }\n    TextEdit.is = is;\n})(TextEdit || (TextEdit = {}));\n/**\n * The TextDocumentEdit namespace provides helper function to create\n * an edit that manipulates a text document.\n */\nexport var TextDocumentEdit;\n(function (TextDocumentEdit) {\n    /**\n     * Creates a new `TextDocumentEdit`\n     */\n    function create(textDocument, edits) {\n        return { textDocument: textDocument, edits: edits };\n    }\n    TextDocumentEdit.create = create;\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate)\n            && VersionedTextDocumentIdentifier.is(candidate.textDocument)\n            && Array.isArray(candidate.edits);\n    }\n    TextDocumentEdit.is = is;\n})(TextDocumentEdit || (TextDocumentEdit = {}));\nexport var CreateFile;\n(function (CreateFile) {\n    function create(uri, options) {\n        var result = {\n            kind: 'create',\n            uri: uri\n        };\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\n            result.options = options;\n        }\n        return result;\n    }\n    CreateFile.create = create;\n    function is(value) {\n        var candidate = value;\n        return candidate && candidate.kind === 'create' && Is.string(candidate.uri) &&\n            (candidate.options === void 0 ||\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\n    }\n    CreateFile.is = is;\n})(CreateFile || (CreateFile = {}));\nexport var RenameFile;\n(function (RenameFile) {\n    function create(oldUri, newUri, options) {\n        var result = {\n            kind: 'rename',\n            oldUri: oldUri,\n            newUri: newUri\n        };\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\n            result.options = options;\n        }\n        return result;\n    }\n    RenameFile.create = create;\n    function is(value) {\n        var candidate = value;\n        return candidate && candidate.kind === 'rename' && Is.string(candidate.oldUri) && Is.string(candidate.newUri) &&\n            (candidate.options === void 0 ||\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\n    }\n    RenameFile.is = is;\n})(RenameFile || (RenameFile = {}));\nexport var DeleteFile;\n(function (DeleteFile) {\n    function create(uri, options) {\n        var result = {\n            kind: 'delete',\n            uri: uri\n        };\n        if (options !== void 0 && (options.recursive !== void 0 || options.ignoreIfNotExists !== void 0)) {\n            result.options = options;\n        }\n        return result;\n    }\n    DeleteFile.create = create;\n    function is(value) {\n        var candidate = value;\n        return candidate && candidate.kind === 'delete' && Is.string(candidate.uri) &&\n            (candidate.options === void 0 ||\n                ((candidate.options.recursive === void 0 || Is.boolean(candidate.options.recursive)) && (candidate.options.ignoreIfNotExists === void 0 || Is.boolean(candidate.options.ignoreIfNotExists))));\n    }\n    DeleteFile.is = is;\n})(DeleteFile || (DeleteFile = {}));\nexport var WorkspaceEdit;\n(function (WorkspaceEdit) {\n    function is(value) {\n        var candidate = value;\n        return candidate &&\n            (candidate.changes !== void 0 || candidate.documentChanges !== void 0) &&\n            (candidate.documentChanges === void 0 || candidate.documentChanges.every(function (change) {\n                if (Is.string(change.kind)) {\n                    return CreateFile.is(change) || RenameFile.is(change) || DeleteFile.is(change);\n                }\n                else {\n                    return TextDocumentEdit.is(change);\n                }\n            }));\n    }\n    WorkspaceEdit.is = is;\n})(WorkspaceEdit || (WorkspaceEdit = {}));\nvar TextEditChangeImpl = /** @class */ (function () {\n    function TextEditChangeImpl(edits) {\n        this.edits = edits;\n    }\n    TextEditChangeImpl.prototype.insert = function (position, newText) {\n        this.edits.push(TextEdit.insert(position, newText));\n    };\n    TextEditChangeImpl.prototype.replace = function (range, newText) {\n        this.edits.push(TextEdit.replace(range, newText));\n    };\n    TextEditChangeImpl.prototype.delete = function (range) {\n        this.edits.push(TextEdit.del(range));\n    };\n    TextEditChangeImpl.prototype.add = function (edit) {\n        this.edits.push(edit);\n    };\n    TextEditChangeImpl.prototype.all = function () {\n        return this.edits;\n    };\n    TextEditChangeImpl.prototype.clear = function () {\n        this.edits.splice(0, this.edits.length);\n    };\n    return TextEditChangeImpl;\n}());\n/**\n * A workspace change helps constructing changes to a workspace.\n */\nvar WorkspaceChange = /** @class */ (function () {\n    function WorkspaceChange(workspaceEdit) {\n        var _this = this;\n        this._textEditChanges = Object.create(null);\n        if (workspaceEdit) {\n            this._workspaceEdit = workspaceEdit;\n            if (workspaceEdit.documentChanges) {\n                workspaceEdit.documentChanges.forEach(function (change) {\n                    if (TextDocumentEdit.is(change)) {\n                        var textEditChange = new TextEditChangeImpl(change.edits);\n                        _this._textEditChanges[change.textDocument.uri] = textEditChange;\n                    }\n                });\n            }\n            else if (workspaceEdit.changes) {\n                Object.keys(workspaceEdit.changes).forEach(function (key) {\n                    var textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\n                    _this._textEditChanges[key] = textEditChange;\n                });\n            }\n        }\n    }\n    Object.defineProperty(WorkspaceChange.prototype, \"edit\", {\n        /**\n         * Returns the underlying [WorkspaceEdit](#WorkspaceEdit) literal\n         * use to be returned from a workspace edit operation like rename.\n         */\n        get: function () {\n            if (this._workspaceEdit === undefined) {\n                return { documentChanges: [] };\n            }\n            return this._workspaceEdit;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    WorkspaceChange.prototype.getTextEditChange = function (key) {\n        if (VersionedTextDocumentIdentifier.is(key)) {\n            if (!this._workspaceEdit) {\n                this._workspaceEdit = {\n                    documentChanges: []\n                };\n            }\n            if (!this._workspaceEdit.documentChanges) {\n                throw new Error('Workspace edit is not configured for document changes.');\n            }\n            var textDocument = key;\n            var result = this._textEditChanges[textDocument.uri];\n            if (!result) {\n                var edits = [];\n                var textDocumentEdit = {\n                    textDocument: textDocument,\n                    edits: edits\n                };\n                this._workspaceEdit.documentChanges.push(textDocumentEdit);\n                result = new TextEditChangeImpl(edits);\n                this._textEditChanges[textDocument.uri] = result;\n            }\n            return result;\n        }\n        else {\n            if (!this._workspaceEdit) {\n                this._workspaceEdit = {\n                    changes: Object.create(null)\n                };\n            }\n            if (!this._workspaceEdit.changes) {\n                throw new Error('Workspace edit is not configured for normal text edit changes.');\n            }\n            var result = this._textEditChanges[key];\n            if (!result) {\n                var edits = [];\n                this._workspaceEdit.changes[key] = edits;\n                result = new TextEditChangeImpl(edits);\n                this._textEditChanges[key] = result;\n            }\n            return result;\n        }\n    };\n    WorkspaceChange.prototype.createFile = function (uri, options) {\n        this.checkDocumentChanges();\n        this._workspaceEdit.documentChanges.push(CreateFile.create(uri, options));\n    };\n    WorkspaceChange.prototype.renameFile = function (oldUri, newUri, options) {\n        this.checkDocumentChanges();\n        this._workspaceEdit.documentChanges.push(RenameFile.create(oldUri, newUri, options));\n    };\n    WorkspaceChange.prototype.deleteFile = function (uri, options) {\n        this.checkDocumentChanges();\n        this._workspaceEdit.documentChanges.push(DeleteFile.create(uri, options));\n    };\n    WorkspaceChange.prototype.checkDocumentChanges = function () {\n        if (!this._workspaceEdit || !this._workspaceEdit.documentChanges) {\n            throw new Error('Workspace edit is not configured for document changes.');\n        }\n    };\n    return WorkspaceChange;\n}());\nexport { WorkspaceChange };\n/**\n * The TextDocumentIdentifier namespace provides helper functions to work with\n * [TextDocumentIdentifier](#TextDocumentIdentifier) literals.\n */\nexport var TextDocumentIdentifier;\n(function (TextDocumentIdentifier) {\n    /**\n     * Creates a new TextDocumentIdentifier literal.\n     * @param uri The document's uri.\n     */\n    function create(uri) {\n        return { uri: uri };\n    }\n    TextDocumentIdentifier.create = create;\n    /**\n     * Checks whether the given literal conforms to the [TextDocumentIdentifier](#TextDocumentIdentifier) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri);\n    }\n    TextDocumentIdentifier.is = is;\n})(TextDocumentIdentifier || (TextDocumentIdentifier = {}));\n/**\n * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\n * [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) literals.\n */\nexport var VersionedTextDocumentIdentifier;\n(function (VersionedTextDocumentIdentifier) {\n    /**\n     * Creates a new VersionedTextDocumentIdentifier literal.\n     * @param uri The document's uri.\n     * @param uri The document's text.\n     */\n    function create(uri, version) {\n        return { uri: uri, version: version };\n    }\n    VersionedTextDocumentIdentifier.create = create;\n    /**\n     * Checks whether the given literal conforms to the [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && (candidate.version === null || Is.number(candidate.version));\n    }\n    VersionedTextDocumentIdentifier.is = is;\n})(VersionedTextDocumentIdentifier || (VersionedTextDocumentIdentifier = {}));\n/**\n * The TextDocumentItem namespace provides helper functions to work with\n * [TextDocumentItem](#TextDocumentItem) literals.\n */\nexport var TextDocumentItem;\n(function (TextDocumentItem) {\n    /**\n     * Creates a new TextDocumentItem literal.\n     * @param uri The document's uri.\n     * @param languageId The document's language identifier.\n     * @param version The document's version number.\n     * @param text The document's text.\n     */\n    function create(uri, languageId, version, text) {\n        return { uri: uri, languageId: languageId, version: version, text: text };\n    }\n    TextDocumentItem.create = create;\n    /**\n     * Checks whether the given literal conforms to the [TextDocumentItem](#TextDocumentItem) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.number(candidate.version) && Is.string(candidate.text);\n    }\n    TextDocumentItem.is = is;\n})(TextDocumentItem || (TextDocumentItem = {}));\n/**\n * Describes the content type that a client supports in various\n * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\n *\n * Please note that `MarkupKinds` must not start with a `$`. This kinds\n * are reserved for internal usage.\n */\nexport var MarkupKind;\n(function (MarkupKind) {\n    /**\n     * Plain text is supported as a content format\n     */\n    MarkupKind.PlainText = 'plaintext';\n    /**\n     * Markdown is supported as a content format\n     */\n    MarkupKind.Markdown = 'markdown';\n})(MarkupKind || (MarkupKind = {}));\n(function (MarkupKind) {\n    /**\n     * Checks whether the given value is a value of the [MarkupKind](#MarkupKind) type.\n     */\n    function is(value) {\n        var candidate = value;\n        return candidate === MarkupKind.PlainText || candidate === MarkupKind.Markdown;\n    }\n    MarkupKind.is = is;\n})(MarkupKind || (MarkupKind = {}));\nexport var MarkupContent;\n(function (MarkupContent) {\n    /**\n     * Checks whether the given value conforms to the [MarkupContent](#MarkupContent) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\n    }\n    MarkupContent.is = is;\n})(MarkupContent || (MarkupContent = {}));\n/**\n * The kind of a completion entry.\n */\nexport var CompletionItemKind;\n(function (CompletionItemKind) {\n    CompletionItemKind.Text = 1;\n    CompletionItemKind.Method = 2;\n    CompletionItemKind.Function = 3;\n    CompletionItemKind.Constructor = 4;\n    CompletionItemKind.Field = 5;\n    CompletionItemKind.Variable = 6;\n    CompletionItemKind.Class = 7;\n    CompletionItemKind.Interface = 8;\n    CompletionItemKind.Module = 9;\n    CompletionItemKind.Property = 10;\n    CompletionItemKind.Unit = 11;\n    CompletionItemKind.Value = 12;\n    CompletionItemKind.Enum = 13;\n    CompletionItemKind.Keyword = 14;\n    CompletionItemKind.Snippet = 15;\n    CompletionItemKind.Color = 16;\n    CompletionItemKind.File = 17;\n    CompletionItemKind.Reference = 18;\n    CompletionItemKind.Folder = 19;\n    CompletionItemKind.EnumMember = 20;\n    CompletionItemKind.Constant = 21;\n    CompletionItemKind.Struct = 22;\n    CompletionItemKind.Event = 23;\n    CompletionItemKind.Operator = 24;\n    CompletionItemKind.TypeParameter = 25;\n})(CompletionItemKind || (CompletionItemKind = {}));\n/**\n * Defines whether the insert text in a completion item should be interpreted as\n * plain text or a snippet.\n */\nexport var InsertTextFormat;\n(function (InsertTextFormat) {\n    /**\n     * The primary text to be inserted is treated as a plain string.\n     */\n    InsertTextFormat.PlainText = 1;\n    /**\n     * The primary text to be inserted is treated as a snippet.\n     *\n     * A snippet can define tab stops and placeholders with `$1`, `$2`\n     * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\n     * the end of the snippet. Placeholders with equal identifiers are linked,\n     * that is typing in one will update others too.\n     *\n     * See also: https://microsoft.github.io/language-server-protocol/specifications/specification-current/#snippet_syntax\n     */\n    InsertTextFormat.Snippet = 2;\n})(InsertTextFormat || (InsertTextFormat = {}));\n/**\n * Completion item tags are extra annotations that tweak the rendering of a completion\n * item.\n *\n * @since 3.15.0\n */\nexport var CompletionItemTag;\n(function (CompletionItemTag) {\n    /**\n     * Render a completion as obsolete, usually using a strike-out.\n     */\n    CompletionItemTag.Deprecated = 1;\n})(CompletionItemTag || (CompletionItemTag = {}));\n/**\n * The InsertReplaceEdit namespace provides functions to deal with insert / replace edits.\n *\n * @since 3.16.0 - Proposed state\n */\nexport var InsertReplaceEdit;\n(function (InsertReplaceEdit) {\n    /**\n     * Creates a new insert / replace edit\n     */\n    function create(newText, insert, replace) {\n        return { newText: newText, insert: insert, replace: replace };\n    }\n    InsertReplaceEdit.create = create;\n    /**\n     * Checks whether the given liternal conforms to the [InsertReplaceEdit](#InsertReplaceEdit) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return candidate && Is.string(candidate.newText) && Range.is(candidate.insert) && Range.is(candidate.replace);\n    }\n    InsertReplaceEdit.is = is;\n})(InsertReplaceEdit || (InsertReplaceEdit = {}));\n/**\n * The CompletionItem namespace provides functions to deal with\n * completion items.\n */\nexport var CompletionItem;\n(function (CompletionItem) {\n    /**\n     * Create a completion item and seed it with a label.\n     * @param label The completion item's label\n     */\n    function create(label) {\n        return { label: label };\n    }\n    CompletionItem.create = create;\n})(CompletionItem || (CompletionItem = {}));\n/**\n * The CompletionList namespace provides functions to deal with\n * completion lists.\n */\nexport var CompletionList;\n(function (CompletionList) {\n    /**\n     * Creates a new completion list.\n     *\n     * @param items The completion items.\n     * @param isIncomplete The list is not complete.\n     */\n    function create(items, isIncomplete) {\n        return { items: items ? items : [], isIncomplete: !!isIncomplete };\n    }\n    CompletionList.create = create;\n})(CompletionList || (CompletionList = {}));\nexport var MarkedString;\n(function (MarkedString) {\n    /**\n     * Creates a marked string from plain text.\n     *\n     * @param plainText The plain text.\n     */\n    function fromPlainText(plainText) {\n        return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&'); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\n    }\n    MarkedString.fromPlainText = fromPlainText;\n    /**\n     * Checks whether the given value conforms to the [MarkedString](#MarkedString) type.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.string(candidate) || (Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value));\n    }\n    MarkedString.is = is;\n})(MarkedString || (MarkedString = {}));\nexport var Hover;\n(function (Hover) {\n    /**\n     * Checks whether the given value conforms to the [Hover](#Hover) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return !!candidate && Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) ||\n            MarkedString.is(candidate.contents) ||\n            Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === void 0 || Range.is(value.range));\n    }\n    Hover.is = is;\n})(Hover || (Hover = {}));\n/**\n * The ParameterInformation namespace provides helper functions to work with\n * [ParameterInformation](#ParameterInformation) literals.\n */\nexport var ParameterInformation;\n(function (ParameterInformation) {\n    /**\n     * Creates a new parameter information literal.\n     *\n     * @param label A label string.\n     * @param documentation A doc string.\n     */\n    function create(label, documentation) {\n        return documentation ? { label: label, documentation: documentation } : { label: label };\n    }\n    ParameterInformation.create = create;\n})(ParameterInformation || (ParameterInformation = {}));\n/**\n * The SignatureInformation namespace provides helper functions to work with\n * [SignatureInformation](#SignatureInformation) literals.\n */\nexport var SignatureInformation;\n(function (SignatureInformation) {\n    function create(label, documentation) {\n        var parameters = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            parameters[_i - 2] = arguments[_i];\n        }\n        var result = { label: label };\n        if (Is.defined(documentation)) {\n            result.documentation = documentation;\n        }\n        if (Is.defined(parameters)) {\n            result.parameters = parameters;\n        }\n        else {\n            result.parameters = [];\n        }\n        return result;\n    }\n    SignatureInformation.create = create;\n})(SignatureInformation || (SignatureInformation = {}));\n/**\n * A document highlight kind.\n */\nexport var DocumentHighlightKind;\n(function (DocumentHighlightKind) {\n    /**\n     * A textual occurrence.\n     */\n    DocumentHighlightKind.Text = 1;\n    /**\n     * Read-access of a symbol, like reading a variable.\n     */\n    DocumentHighlightKind.Read = 2;\n    /**\n     * Write-access of a symbol, like writing to a variable.\n     */\n    DocumentHighlightKind.Write = 3;\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\n/**\n * DocumentHighlight namespace to provide helper functions to work with\n * [DocumentHighlight](#DocumentHighlight) literals.\n */\nexport var DocumentHighlight;\n(function (DocumentHighlight) {\n    /**\n     * Create a DocumentHighlight object.\n     * @param range The range the highlight applies to.\n     */\n    function create(range, kind) {\n        var result = { range: range };\n        if (Is.number(kind)) {\n            result.kind = kind;\n        }\n        return result;\n    }\n    DocumentHighlight.create = create;\n})(DocumentHighlight || (DocumentHighlight = {}));\n/**\n * A symbol kind.\n */\nexport var SymbolKind;\n(function (SymbolKind) {\n    SymbolKind.File = 1;\n    SymbolKind.Module = 2;\n    SymbolKind.Namespace = 3;\n    SymbolKind.Package = 4;\n    SymbolKind.Class = 5;\n    SymbolKind.Method = 6;\n    SymbolKind.Property = 7;\n    SymbolKind.Field = 8;\n    SymbolKind.Constructor = 9;\n    SymbolKind.Enum = 10;\n    SymbolKind.Interface = 11;\n    SymbolKind.Function = 12;\n    SymbolKind.Variable = 13;\n    SymbolKind.Constant = 14;\n    SymbolKind.String = 15;\n    SymbolKind.Number = 16;\n    SymbolKind.Boolean = 17;\n    SymbolKind.Array = 18;\n    SymbolKind.Object = 19;\n    SymbolKind.Key = 20;\n    SymbolKind.Null = 21;\n    SymbolKind.EnumMember = 22;\n    SymbolKind.Struct = 23;\n    SymbolKind.Event = 24;\n    SymbolKind.Operator = 25;\n    SymbolKind.TypeParameter = 26;\n})(SymbolKind || (SymbolKind = {}));\n/**\n * Symbol tags are extra annotations that tweak the rendering of a symbol.\n * @since 3.15\n */\nexport var SymbolTag;\n(function (SymbolTag) {\n    /**\n     * Render a symbol as obsolete, usually using a strike-out.\n     */\n    SymbolTag.Deprecated = 1;\n})(SymbolTag || (SymbolTag = {}));\nexport var SymbolInformation;\n(function (SymbolInformation) {\n    /**\n     * Creates a new symbol information literal.\n     *\n     * @param name The name of the symbol.\n     * @param kind The kind of the symbol.\n     * @param range The range of the location of the symbol.\n     * @param uri The resource of the location of symbol, defaults to the current document.\n     * @param containerName The name of the symbol containing the symbol.\n     */\n    function create(name, kind, range, uri, containerName) {\n        var result = {\n            name: name,\n            kind: kind,\n            location: { uri: uri, range: range }\n        };\n        if (containerName) {\n            result.containerName = containerName;\n        }\n        return result;\n    }\n    SymbolInformation.create = create;\n})(SymbolInformation || (SymbolInformation = {}));\nexport var DocumentSymbol;\n(function (DocumentSymbol) {\n    /**\n     * Creates a new symbol information literal.\n     *\n     * @param name The name of the symbol.\n     * @param detail The detail of the symbol.\n     * @param kind The kind of the symbol.\n     * @param range The range of the symbol.\n     * @param selectionRange The selectionRange of the symbol.\n     * @param children Children of the symbol.\n     */\n    function create(name, detail, kind, range, selectionRange, children) {\n        var result = {\n            name: name,\n            detail: detail,\n            kind: kind,\n            range: range,\n            selectionRange: selectionRange\n        };\n        if (children !== void 0) {\n            result.children = children;\n        }\n        return result;\n    }\n    DocumentSymbol.create = create;\n    /**\n     * Checks whether the given literal conforms to the [DocumentSymbol](#DocumentSymbol) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return candidate &&\n            Is.string(candidate.name) && Is.number(candidate.kind) &&\n            Range.is(candidate.range) && Range.is(candidate.selectionRange) &&\n            (candidate.detail === void 0 || Is.string(candidate.detail)) &&\n            (candidate.deprecated === void 0 || Is.boolean(candidate.deprecated)) &&\n            (candidate.children === void 0 || Array.isArray(candidate.children)) &&\n            (candidate.tags === void 0 || Array.isArray(candidate.tags));\n    }\n    DocumentSymbol.is = is;\n})(DocumentSymbol || (DocumentSymbol = {}));\n/**\n * A set of predefined code action kinds\n */\nexport var CodeActionKind;\n(function (CodeActionKind) {\n    /**\n     * Empty kind.\n     */\n    CodeActionKind.Empty = '';\n    /**\n     * Base kind for quickfix actions: 'quickfix'\n     */\n    CodeActionKind.QuickFix = 'quickfix';\n    /**\n     * Base kind for refactoring actions: 'refactor'\n     */\n    CodeActionKind.Refactor = 'refactor';\n    /**\n     * Base kind for refactoring extraction actions: 'refactor.extract'\n     *\n     * Example extract actions:\n     *\n     * - Extract method\n     * - Extract function\n     * - Extract variable\n     * - Extract interface from class\n     * - ...\n     */\n    CodeActionKind.RefactorExtract = 'refactor.extract';\n    /**\n     * Base kind for refactoring inline actions: 'refactor.inline'\n     *\n     * Example inline actions:\n     *\n     * - Inline function\n     * - Inline variable\n     * - Inline constant\n     * - ...\n     */\n    CodeActionKind.RefactorInline = 'refactor.inline';\n    /**\n     * Base kind for refactoring rewrite actions: 'refactor.rewrite'\n     *\n     * Example rewrite actions:\n     *\n     * - Convert JavaScript function to class\n     * - Add or remove parameter\n     * - Encapsulate field\n     * - Make method static\n     * - Move method to base class\n     * - ...\n     */\n    CodeActionKind.RefactorRewrite = 'refactor.rewrite';\n    /**\n     * Base kind for source actions: `source`\n     *\n     * Source code actions apply to the entire file.\n     */\n    CodeActionKind.Source = 'source';\n    /**\n     * Base kind for an organize imports source action: `source.organizeImports`\n     */\n    CodeActionKind.SourceOrganizeImports = 'source.organizeImports';\n    /**\n     * Base kind for auto-fix source actions: `source.fixAll`.\n     *\n     * Fix all actions automatically fix errors that have a clear fix that do not require user input.\n     * They should not suppress errors or perform unsafe fixes such as generating new types or classes.\n     *\n     * @since 3.15.0\n     */\n    CodeActionKind.SourceFixAll = 'source.fixAll';\n})(CodeActionKind || (CodeActionKind = {}));\n/**\n * The CodeActionContext namespace provides helper functions to work with\n * [CodeActionContext](#CodeActionContext) literals.\n */\nexport var CodeActionContext;\n(function (CodeActionContext) {\n    /**\n     * Creates a new CodeActionContext literal.\n     */\n    function create(diagnostics, only) {\n        var result = { diagnostics: diagnostics };\n        if (only !== void 0 && only !== null) {\n            result.only = only;\n        }\n        return result;\n    }\n    CodeActionContext.create = create;\n    /**\n     * Checks whether the given literal conforms to the [CodeActionContext](#CodeActionContext) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is) && (candidate.only === void 0 || Is.typedArray(candidate.only, Is.string));\n    }\n    CodeActionContext.is = is;\n})(CodeActionContext || (CodeActionContext = {}));\nexport var CodeAction;\n(function (CodeAction) {\n    function create(title, commandOrEdit, kind) {\n        var result = { title: title };\n        if (Command.is(commandOrEdit)) {\n            result.command = commandOrEdit;\n        }\n        else {\n            result.edit = commandOrEdit;\n        }\n        if (kind !== void 0) {\n            result.kind = kind;\n        }\n        return result;\n    }\n    CodeAction.create = create;\n    function is(value) {\n        var candidate = value;\n        return candidate && Is.string(candidate.title) &&\n            (candidate.diagnostics === void 0 || Is.typedArray(candidate.diagnostics, Diagnostic.is)) &&\n            (candidate.kind === void 0 || Is.string(candidate.kind)) &&\n            (candidate.edit !== void 0 || candidate.command !== void 0) &&\n            (candidate.command === void 0 || Command.is(candidate.command)) &&\n            (candidate.isPreferred === void 0 || Is.boolean(candidate.isPreferred)) &&\n            (candidate.edit === void 0 || WorkspaceEdit.is(candidate.edit));\n    }\n    CodeAction.is = is;\n})(CodeAction || (CodeAction = {}));\n/**\n * The CodeLens namespace provides helper functions to work with\n * [CodeLens](#CodeLens) literals.\n */\nexport var CodeLens;\n(function (CodeLens) {\n    /**\n     * Creates a new CodeLens literal.\n     */\n    function create(range, data) {\n        var result = { range: range };\n        if (Is.defined(data)) {\n            result.data = data;\n        }\n        return result;\n    }\n    CodeLens.create = create;\n    /**\n     * Checks whether the given literal conforms to the [CodeLens](#CodeLens) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\n    }\n    CodeLens.is = is;\n})(CodeLens || (CodeLens = {}));\n/**\n * The FormattingOptions namespace provides helper functions to work with\n * [FormattingOptions](#FormattingOptions) literals.\n */\nexport var FormattingOptions;\n(function (FormattingOptions) {\n    /**\n     * Creates a new FormattingOptions literal.\n     */\n    function create(tabSize, insertSpaces) {\n        return { tabSize: tabSize, insertSpaces: insertSpaces };\n    }\n    FormattingOptions.create = create;\n    /**\n     * Checks whether the given literal conforms to the [FormattingOptions](#FormattingOptions) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.number(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\n    }\n    FormattingOptions.is = is;\n})(FormattingOptions || (FormattingOptions = {}));\n/**\n * The DocumentLink namespace provides helper functions to work with\n * [DocumentLink](#DocumentLink) literals.\n */\nexport var DocumentLink;\n(function (DocumentLink) {\n    /**\n     * Creates a new DocumentLink literal.\n     */\n    function create(range, target, data) {\n        return { range: range, target: target, data: data };\n    }\n    DocumentLink.create = create;\n    /**\n     * Checks whether the given literal conforms to the [DocumentLink](#DocumentLink) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\n    }\n    DocumentLink.is = is;\n})(DocumentLink || (DocumentLink = {}));\n/**\n * The SelectionRange namespace provides helper function to work with\n * SelectionRange literals.\n */\nexport var SelectionRange;\n(function (SelectionRange) {\n    /**\n     * Creates a new SelectionRange\n     * @param range the range.\n     * @param parent an optional parent.\n     */\n    function create(range, parent) {\n        return { range: range, parent: parent };\n    }\n    SelectionRange.create = create;\n    function is(value) {\n        var candidate = value;\n        return candidate !== undefined && Range.is(candidate.range) && (candidate.parent === undefined || SelectionRange.is(candidate.parent));\n    }\n    SelectionRange.is = is;\n})(SelectionRange || (SelectionRange = {}));\nexport var EOL = ['\\n', '\\r\\n', '\\r'];\n/**\n * @deprecated Use the text document from the new vscode-languageserver-textdocument package.\n */\nexport var TextDocument;\n(function (TextDocument) {\n    /**\n     * Creates a new ITextDocument literal from the given uri and content.\n     * @param uri The document's uri.\n     * @param languageId  The document's language Id.\n     * @param content The document's content.\n     */\n    function create(uri, languageId, version, content) {\n        return new FullTextDocument(uri, languageId, version, content);\n    }\n    TextDocument.create = create;\n    /**\n     * Checks whether the given literal conforms to the [ITextDocument](#ITextDocument) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.number(candidate.lineCount)\n            && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\n    }\n    TextDocument.is = is;\n    function applyEdits(document, edits) {\n        var text = document.getText();\n        var sortedEdits = mergeSort(edits, function (a, b) {\n            var diff = a.range.start.line - b.range.start.line;\n            if (diff === 0) {\n                return a.range.start.character - b.range.start.character;\n            }\n            return diff;\n        });\n        var lastModifiedOffset = text.length;\n        for (var i = sortedEdits.length - 1; i >= 0; i--) {\n            var e = sortedEdits[i];\n            var startOffset = document.offsetAt(e.range.start);\n            var endOffset = document.offsetAt(e.range.end);\n            if (endOffset <= lastModifiedOffset) {\n                text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\n            }\n            else {\n                throw new Error('Overlapping edit');\n            }\n            lastModifiedOffset = startOffset;\n        }\n        return text;\n    }\n    TextDocument.applyEdits = applyEdits;\n    function mergeSort(data, compare) {\n        if (data.length <= 1) {\n            // sorted\n            return data;\n        }\n        var p = (data.length / 2) | 0;\n        var left = data.slice(0, p);\n        var right = data.slice(p);\n        mergeSort(left, compare);\n        mergeSort(right, compare);\n        var leftIdx = 0;\n        var rightIdx = 0;\n        var i = 0;\n        while (leftIdx < left.length && rightIdx < right.length) {\n            var ret = compare(left[leftIdx], right[rightIdx]);\n            if (ret <= 0) {\n                // smaller_equal -> take left to preserve order\n                data[i++] = left[leftIdx++];\n            }\n            else {\n                // greater -> take right\n                data[i++] = right[rightIdx++];\n            }\n        }\n        while (leftIdx < left.length) {\n            data[i++] = left[leftIdx++];\n        }\n        while (rightIdx < right.length) {\n            data[i++] = right[rightIdx++];\n        }\n        return data;\n    }\n})(TextDocument || (TextDocument = {}));\nvar FullTextDocument = /** @class */ (function () {\n    function FullTextDocument(uri, languageId, version, content) {\n        this._uri = uri;\n        this._languageId = languageId;\n        this._version = version;\n        this._content = content;\n        this._lineOffsets = undefined;\n    }\n    Object.defineProperty(FullTextDocument.prototype, \"uri\", {\n        get: function () {\n            return this._uri;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\n        get: function () {\n            return this._languageId;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FullTextDocument.prototype, \"version\", {\n        get: function () {\n            return this._version;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    FullTextDocument.prototype.getText = function (range) {\n        if (range) {\n            var start = this.offsetAt(range.start);\n            var end = this.offsetAt(range.end);\n            return this._content.substring(start, end);\n        }\n        return this._content;\n    };\n    FullTextDocument.prototype.update = function (event, version) {\n        this._content = event.text;\n        this._version = version;\n        this._lineOffsets = undefined;\n    };\n    FullTextDocument.prototype.getLineOffsets = function () {\n        if (this._lineOffsets === undefined) {\n            var lineOffsets = [];\n            var text = this._content;\n            var isLineStart = true;\n            for (var i = 0; i < text.length; i++) {\n                if (isLineStart) {\n                    lineOffsets.push(i);\n                    isLineStart = false;\n                }\n                var ch = text.charAt(i);\n                isLineStart = (ch === '\\r' || ch === '\\n');\n                if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\n                    i++;\n                }\n            }\n            if (isLineStart && text.length > 0) {\n                lineOffsets.push(text.length);\n            }\n            this._lineOffsets = lineOffsets;\n        }\n        return this._lineOffsets;\n    };\n    FullTextDocument.prototype.positionAt = function (offset) {\n        offset = Math.max(Math.min(offset, this._content.length), 0);\n        var lineOffsets = this.getLineOffsets();\n        var low = 0, high = lineOffsets.length;\n        if (high === 0) {\n            return Position.create(0, offset);\n        }\n        while (low < high) {\n            var mid = Math.floor((low + high) / 2);\n            if (lineOffsets[mid] > offset) {\n                high = mid;\n            }\n            else {\n                low = mid + 1;\n            }\n        }\n        // low is the least x for which the line offset is larger than the current offset\n        // or array.length if no line offset is larger than the current offset\n        var line = low - 1;\n        return Position.create(line, offset - lineOffsets[line]);\n    };\n    FullTextDocument.prototype.offsetAt = function (position) {\n        var lineOffsets = this.getLineOffsets();\n        if (position.line >= lineOffsets.length) {\n            return this._content.length;\n        }\n        else if (position.line < 0) {\n            return 0;\n        }\n        var lineOffset = lineOffsets[position.line];\n        var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\n    };\n    Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\n        get: function () {\n            return this.getLineOffsets().length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return FullTextDocument;\n}());\nvar Is;\n(function (Is) {\n    var toString = Object.prototype.toString;\n    function defined(value) {\n        return typeof value !== 'undefined';\n    }\n    Is.defined = defined;\n    function undefined(value) {\n        return typeof value === 'undefined';\n    }\n    Is.undefined = undefined;\n    function boolean(value) {\n        return value === true || value === false;\n    }\n    Is.boolean = boolean;\n    function string(value) {\n        return toString.call(value) === '[object String]';\n    }\n    Is.string = string;\n    function number(value) {\n        return toString.call(value) === '[object Number]';\n    }\n    Is.number = number;\n    function func(value) {\n        return toString.call(value) === '[object Function]';\n    }\n    Is.func = func;\n    function objectLiteral(value) {\n        // Strictly speaking class instances pass this check as well. Since the LSP\n        // doesn't use classes we ignore this for now. If we do we need to add something\n        // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\n        return value !== null && typeof value === 'object';\n    }\n    Is.objectLiteral = objectLiteral;\n    function typedArray(value, check) {\n        return Array.isArray(value) && value.every(check);\n    }\n    Is.typedArray = typedArray;\n})(Is || (Is = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Is = require(\"./utils/is\");\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst messages_1 = require(\"./messages\");\nconst protocol_implementation_1 = require(\"./protocol.implementation\");\nexports.ImplementationRequest = protocol_implementation_1.ImplementationRequest;\nconst protocol_typeDefinition_1 = require(\"./protocol.typeDefinition\");\nexports.TypeDefinitionRequest = protocol_typeDefinition_1.TypeDefinitionRequest;\nconst protocol_workspaceFolders_1 = require(\"./protocol.workspaceFolders\");\nexports.WorkspaceFoldersRequest = protocol_workspaceFolders_1.WorkspaceFoldersRequest;\nexports.DidChangeWorkspaceFoldersNotification = protocol_workspaceFolders_1.DidChangeWorkspaceFoldersNotification;\nconst protocol_configuration_1 = require(\"./protocol.configuration\");\nexports.ConfigurationRequest = protocol_configuration_1.ConfigurationRequest;\nconst protocol_colorProvider_1 = require(\"./protocol.colorProvider\");\nexports.DocumentColorRequest = protocol_colorProvider_1.DocumentColorRequest;\nexports.ColorPresentationRequest = protocol_colorProvider_1.ColorPresentationRequest;\nconst protocol_foldingRange_1 = require(\"./protocol.foldingRange\");\nexports.FoldingRangeRequest = protocol_foldingRange_1.FoldingRangeRequest;\nconst protocol_declaration_1 = require(\"./protocol.declaration\");\nexports.DeclarationRequest = protocol_declaration_1.DeclarationRequest;\nconst protocol_selectionRange_1 = require(\"./protocol.selectionRange\");\nexports.SelectionRangeRequest = protocol_selectionRange_1.SelectionRangeRequest;\nconst protocol_progress_1 = require(\"./protocol.progress\");\nexports.WorkDoneProgress = protocol_progress_1.WorkDoneProgress;\nexports.WorkDoneProgressCreateRequest = protocol_progress_1.WorkDoneProgressCreateRequest;\nexports.WorkDoneProgressCancelNotification = protocol_progress_1.WorkDoneProgressCancelNotification;\nconst protocol_callHierarchy_1 = require(\"./protocol.callHierarchy\");\nexports.CallHierarchyIncomingCallsRequest = protocol_callHierarchy_1.CallHierarchyIncomingCallsRequest;\nexports.CallHierarchyOutgoingCallsRequest = protocol_callHierarchy_1.CallHierarchyOutgoingCallsRequest;\nexports.CallHierarchyPrepareRequest = protocol_callHierarchy_1.CallHierarchyPrepareRequest;\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\nlet __noDynamicImport;\n/**\n * The DocumentFilter namespace provides helper functions to work with\n * [DocumentFilter](#DocumentFilter) literals.\n */\nvar DocumentFilter;\n(function (DocumentFilter) {\n    function is(value) {\n        const candidate = value;\n        return Is.string(candidate.language) || Is.string(candidate.scheme) || Is.string(candidate.pattern);\n    }\n    DocumentFilter.is = is;\n})(DocumentFilter = exports.DocumentFilter || (exports.DocumentFilter = {}));\n/**\n * The DocumentSelector namespace provides helper functions to work with\n * [DocumentSelector](#DocumentSelector)s.\n */\nvar DocumentSelector;\n(function (DocumentSelector) {\n    function is(value) {\n        if (!Array.isArray(value)) {\n            return false;\n        }\n        for (let elem of value) {\n            if (!Is.string(elem) && !DocumentFilter.is(elem)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    DocumentSelector.is = is;\n})(DocumentSelector = exports.DocumentSelector || (exports.DocumentSelector = {}));\n/**\n * The `client/registerCapability` request is sent from the server to the client to register a new capability\n * handler on the client side.\n */\nvar RegistrationRequest;\n(function (RegistrationRequest) {\n    RegistrationRequest.type = new messages_1.ProtocolRequestType('client/registerCapability');\n})(RegistrationRequest = exports.RegistrationRequest || (exports.RegistrationRequest = {}));\n/**\n * The `client/unregisterCapability` request is sent from the server to the client to unregister a previously registered capability\n * handler on the client side.\n */\nvar UnregistrationRequest;\n(function (UnregistrationRequest) {\n    UnregistrationRequest.type = new messages_1.ProtocolRequestType('client/unregisterCapability');\n})(UnregistrationRequest = exports.UnregistrationRequest || (exports.UnregistrationRequest = {}));\nvar ResourceOperationKind;\n(function (ResourceOperationKind) {\n    /**\n     * Supports creating new files and folders.\n     */\n    ResourceOperationKind.Create = 'create';\n    /**\n     * Supports renaming existing files and folders.\n     */\n    ResourceOperationKind.Rename = 'rename';\n    /**\n     * Supports deleting existing files and folders.\n     */\n    ResourceOperationKind.Delete = 'delete';\n})(ResourceOperationKind = exports.ResourceOperationKind || (exports.ResourceOperationKind = {}));\nvar FailureHandlingKind;\n(function (FailureHandlingKind) {\n    /**\n     * Applying the workspace change is simply aborted if one of the changes provided\n     * fails. All operations executed before the failing operation stay executed.\n     */\n    FailureHandlingKind.Abort = 'abort';\n    /**\n     * All operations are executed transactional. That means they either all\n     * succeed or no changes at all are applied to the workspace.\n     */\n    FailureHandlingKind.Transactional = 'transactional';\n    /**\n     * If the workspace edit contains only textual file changes they are executed transactional.\n     * If resource changes (create, rename or delete file) are part of the change the failure\n     * handling startegy is abort.\n     */\n    FailureHandlingKind.TextOnlyTransactional = 'textOnlyTransactional';\n    /**\n     * The client tries to undo the operations already executed. But there is no\n     * guarantee that this is succeeding.\n     */\n    FailureHandlingKind.Undo = 'undo';\n})(FailureHandlingKind = exports.FailureHandlingKind || (exports.FailureHandlingKind = {}));\n/**\n * The StaticRegistrationOptions namespace provides helper functions to work with\n * [StaticRegistrationOptions](#StaticRegistrationOptions) literals.\n */\nvar StaticRegistrationOptions;\n(function (StaticRegistrationOptions) {\n    function hasId(value) {\n        const candidate = value;\n        return candidate && Is.string(candidate.id) && candidate.id.length > 0;\n    }\n    StaticRegistrationOptions.hasId = hasId;\n})(StaticRegistrationOptions = exports.StaticRegistrationOptions || (exports.StaticRegistrationOptions = {}));\n/**\n * The TextDocumentRegistrationOptions namespace provides helper functions to work with\n * [TextDocumentRegistrationOptions](#TextDocumentRegistrationOptions) literals.\n */\nvar TextDocumentRegistrationOptions;\n(function (TextDocumentRegistrationOptions) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate.documentSelector === null || DocumentSelector.is(candidate.documentSelector));\n    }\n    TextDocumentRegistrationOptions.is = is;\n})(TextDocumentRegistrationOptions = exports.TextDocumentRegistrationOptions || (exports.TextDocumentRegistrationOptions = {}));\n/**\n * The WorkDoneProgressOptions namespace provides helper functions to work with\n * [WorkDoneProgressOptions](#WorkDoneProgressOptions) literals.\n */\nvar WorkDoneProgressOptions;\n(function (WorkDoneProgressOptions) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && (candidate.workDoneProgress === undefined || Is.boolean(candidate.workDoneProgress));\n    }\n    WorkDoneProgressOptions.is = is;\n    function hasWorkDoneProgress(value) {\n        const candidate = value;\n        return candidate && Is.boolean(candidate.workDoneProgress);\n    }\n    WorkDoneProgressOptions.hasWorkDoneProgress = hasWorkDoneProgress;\n})(WorkDoneProgressOptions = exports.WorkDoneProgressOptions || (exports.WorkDoneProgressOptions = {}));\n/**\n * The initialize request is sent from the client to the server.\n * It is sent once as the request after starting up the server.\n * The requests parameter is of type [InitializeParams](#InitializeParams)\n * the response if of type [InitializeResult](#InitializeResult) of a Thenable that\n * resolves to such.\n */\nvar InitializeRequest;\n(function (InitializeRequest) {\n    InitializeRequest.type = new messages_1.ProtocolRequestType('initialize');\n})(InitializeRequest = exports.InitializeRequest || (exports.InitializeRequest = {}));\n/**\n * Known error codes for an `InitializeError`;\n */\nvar InitializeError;\n(function (InitializeError) {\n    /**\n     * If the protocol version provided by the client can't be handled by the server.\n     * @deprecated This initialize error got replaced by client capabilities. There is\n     * no version handshake in version 3.0x\n     */\n    InitializeError.unknownProtocolVersion = 1;\n})(InitializeError = exports.InitializeError || (exports.InitializeError = {}));\n/**\n * The intialized notification is sent from the client to the\n * server after the client is fully initialized and the server\n * is allowed to send requests from the server to the client.\n */\nvar InitializedNotification;\n(function (InitializedNotification) {\n    InitializedNotification.type = new messages_1.ProtocolNotificationType('initialized');\n})(InitializedNotification = exports.InitializedNotification || (exports.InitializedNotification = {}));\n//---- Shutdown Method ----\n/**\n * A shutdown request is sent from the client to the server.\n * It is sent once when the client decides to shutdown the\n * server. The only notification that is sent after a shutdown request\n * is the exit event.\n */\nvar ShutdownRequest;\n(function (ShutdownRequest) {\n    ShutdownRequest.type = new messages_1.ProtocolRequestType0('shutdown');\n})(ShutdownRequest = exports.ShutdownRequest || (exports.ShutdownRequest = {}));\n//---- Exit Notification ----\n/**\n * The exit event is sent from the client to the server to\n * ask the server to exit its process.\n */\nvar ExitNotification;\n(function (ExitNotification) {\n    ExitNotification.type = new messages_1.ProtocolNotificationType0('exit');\n})(ExitNotification = exports.ExitNotification || (exports.ExitNotification = {}));\n/**\n * The configuration change notification is sent from the client to the server\n * when the client's configuration has changed. The notification contains\n * the changed configuration as defined by the language client.\n */\nvar DidChangeConfigurationNotification;\n(function (DidChangeConfigurationNotification) {\n    DidChangeConfigurationNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeConfiguration');\n})(DidChangeConfigurationNotification = exports.DidChangeConfigurationNotification || (exports.DidChangeConfigurationNotification = {}));\n//---- Message show and log notifications ----\n/**\n * The message type\n */\nvar MessageType;\n(function (MessageType) {\n    /**\n     * An error message.\n     */\n    MessageType.Error = 1;\n    /**\n     * A warning message.\n     */\n    MessageType.Warning = 2;\n    /**\n     * An information message.\n     */\n    MessageType.Info = 3;\n    /**\n     * A log message.\n     */\n    MessageType.Log = 4;\n})(MessageType = exports.MessageType || (exports.MessageType = {}));\n/**\n * The show message notification is sent from a server to a client to ask\n * the client to display a particular message in the user interface.\n */\nvar ShowMessageNotification;\n(function (ShowMessageNotification) {\n    ShowMessageNotification.type = new messages_1.ProtocolNotificationType('window/showMessage');\n})(ShowMessageNotification = exports.ShowMessageNotification || (exports.ShowMessageNotification = {}));\n/**\n * The show message request is sent from the server to the client to show a message\n * and a set of options actions to the user.\n */\nvar ShowMessageRequest;\n(function (ShowMessageRequest) {\n    ShowMessageRequest.type = new messages_1.ProtocolRequestType('window/showMessageRequest');\n})(ShowMessageRequest = exports.ShowMessageRequest || (exports.ShowMessageRequest = {}));\n/**\n * The log message notification is sent from the server to the client to ask\n * the client to log a particular message.\n */\nvar LogMessageNotification;\n(function (LogMessageNotification) {\n    LogMessageNotification.type = new messages_1.ProtocolNotificationType('window/logMessage');\n})(LogMessageNotification = exports.LogMessageNotification || (exports.LogMessageNotification = {}));\n//---- Telemetry notification\n/**\n * The telemetry event notification is sent from the server to the client to ask\n * the client to log telemetry data.\n */\nvar TelemetryEventNotification;\n(function (TelemetryEventNotification) {\n    TelemetryEventNotification.type = new messages_1.ProtocolNotificationType('telemetry/event');\n})(TelemetryEventNotification = exports.TelemetryEventNotification || (exports.TelemetryEventNotification = {}));\n/**\n * Defines how the host (editor) should sync\n * document changes to the language server.\n */\nvar TextDocumentSyncKind;\n(function (TextDocumentSyncKind) {\n    /**\n     * Documents should not be synced at all.\n     */\n    TextDocumentSyncKind.None = 0;\n    /**\n     * Documents are synced by always sending the full content\n     * of the document.\n     */\n    TextDocumentSyncKind.Full = 1;\n    /**\n     * Documents are synced by sending the full content on open.\n     * After that only incremental updates to the document are\n     * send.\n     */\n    TextDocumentSyncKind.Incremental = 2;\n})(TextDocumentSyncKind = exports.TextDocumentSyncKind || (exports.TextDocumentSyncKind = {}));\n/**\n * The document open notification is sent from the client to the server to signal\n * newly opened text documents. The document's truth is now managed by the client\n * and the server must not try to read the document's truth using the document's\n * uri. Open in this sense means it is managed by the client. It doesn't necessarily\n * mean that its content is presented in an editor. An open notification must not\n * be sent more than once without a corresponding close notification send before.\n * This means open and close notification must be balanced and the max open count\n * is one.\n */\nvar DidOpenTextDocumentNotification;\n(function (DidOpenTextDocumentNotification) {\n    DidOpenTextDocumentNotification.method = 'textDocument/didOpen';\n    DidOpenTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidOpenTextDocumentNotification.method);\n})(DidOpenTextDocumentNotification = exports.DidOpenTextDocumentNotification || (exports.DidOpenTextDocumentNotification = {}));\n/**\n * The document change notification is sent from the client to the server to signal\n * changes to a text document.\n */\nvar DidChangeTextDocumentNotification;\n(function (DidChangeTextDocumentNotification) {\n    DidChangeTextDocumentNotification.method = 'textDocument/didChange';\n    DidChangeTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidChangeTextDocumentNotification.method);\n})(DidChangeTextDocumentNotification = exports.DidChangeTextDocumentNotification || (exports.DidChangeTextDocumentNotification = {}));\n/**\n * The document close notification is sent from the client to the server when\n * the document got closed in the client. The document's truth now exists where\n * the document's uri points to (e.g. if the document's uri is a file uri the\n * truth now exists on disk). As with the open notification the close notification\n * is about managing the document's content. Receiving a close notification\n * doesn't mean that the document was open in an editor before. A close\n * notification requires a previous open notification to be sent.\n */\nvar DidCloseTextDocumentNotification;\n(function (DidCloseTextDocumentNotification) {\n    DidCloseTextDocumentNotification.method = 'textDocument/didClose';\n    DidCloseTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidCloseTextDocumentNotification.method);\n})(DidCloseTextDocumentNotification = exports.DidCloseTextDocumentNotification || (exports.DidCloseTextDocumentNotification = {}));\n/**\n * The document save notification is sent from the client to the server when\n * the document got saved in the client.\n */\nvar DidSaveTextDocumentNotification;\n(function (DidSaveTextDocumentNotification) {\n    DidSaveTextDocumentNotification.method = 'textDocument/didSave';\n    DidSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidSaveTextDocumentNotification.method);\n})(DidSaveTextDocumentNotification = exports.DidSaveTextDocumentNotification || (exports.DidSaveTextDocumentNotification = {}));\n/**\n * Represents reasons why a text document is saved.\n */\nvar TextDocumentSaveReason;\n(function (TextDocumentSaveReason) {\n    /**\n     * Manually triggered, e.g. by the user pressing save, by starting debugging,\n     * or by an API call.\n     */\n    TextDocumentSaveReason.Manual = 1;\n    /**\n     * Automatic after a delay.\n     */\n    TextDocumentSaveReason.AfterDelay = 2;\n    /**\n     * When the editor lost focus.\n     */\n    TextDocumentSaveReason.FocusOut = 3;\n})(TextDocumentSaveReason = exports.TextDocumentSaveReason || (exports.TextDocumentSaveReason = {}));\n/**\n * A document will save notification is sent from the client to the server before\n * the document is actually saved.\n */\nvar WillSaveTextDocumentNotification;\n(function (WillSaveTextDocumentNotification) {\n    WillSaveTextDocumentNotification.method = 'textDocument/willSave';\n    WillSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(WillSaveTextDocumentNotification.method);\n})(WillSaveTextDocumentNotification = exports.WillSaveTextDocumentNotification || (exports.WillSaveTextDocumentNotification = {}));\n/**\n * A document will save request is sent from the client to the server before\n * the document is actually saved. The request can return an array of TextEdits\n * which will be applied to the text document before it is saved. Please note that\n * clients might drop results if computing the text edits took too long or if a\n * server constantly fails on this request. This is done to keep the save fast and\n * reliable.\n */\nvar WillSaveTextDocumentWaitUntilRequest;\n(function (WillSaveTextDocumentWaitUntilRequest) {\n    WillSaveTextDocumentWaitUntilRequest.method = 'textDocument/willSaveWaitUntil';\n    WillSaveTextDocumentWaitUntilRequest.type = new messages_1.ProtocolRequestType(WillSaveTextDocumentWaitUntilRequest.method);\n})(WillSaveTextDocumentWaitUntilRequest = exports.WillSaveTextDocumentWaitUntilRequest || (exports.WillSaveTextDocumentWaitUntilRequest = {}));\n/**\n * The watched files notification is sent from the client to the server when\n * the client detects changes to file watched by the language client.\n */\nvar DidChangeWatchedFilesNotification;\n(function (DidChangeWatchedFilesNotification) {\n    DidChangeWatchedFilesNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeWatchedFiles');\n})(DidChangeWatchedFilesNotification = exports.DidChangeWatchedFilesNotification || (exports.DidChangeWatchedFilesNotification = {}));\n/**\n * The file event type\n */\nvar FileChangeType;\n(function (FileChangeType) {\n    /**\n     * The file got created.\n     */\n    FileChangeType.Created = 1;\n    /**\n     * The file got changed.\n     */\n    FileChangeType.Changed = 2;\n    /**\n     * The file got deleted.\n     */\n    FileChangeType.Deleted = 3;\n})(FileChangeType = exports.FileChangeType || (exports.FileChangeType = {}));\nvar WatchKind;\n(function (WatchKind) {\n    /**\n     * Interested in create events.\n     */\n    WatchKind.Create = 1;\n    /**\n     * Interested in change events\n     */\n    WatchKind.Change = 2;\n    /**\n     * Interested in delete events\n     */\n    WatchKind.Delete = 4;\n})(WatchKind = exports.WatchKind || (exports.WatchKind = {}));\n/**\n * Diagnostics notification are sent from the server to the client to signal\n * results of validation runs.\n */\nvar PublishDiagnosticsNotification;\n(function (PublishDiagnosticsNotification) {\n    PublishDiagnosticsNotification.type = new messages_1.ProtocolNotificationType('textDocument/publishDiagnostics');\n})(PublishDiagnosticsNotification = exports.PublishDiagnosticsNotification || (exports.PublishDiagnosticsNotification = {}));\n/**\n * How a completion was triggered\n */\nvar CompletionTriggerKind;\n(function (CompletionTriggerKind) {\n    /**\n     * Completion was triggered by typing an identifier (24x7 code\n     * complete), manual invocation (e.g Ctrl+Space) or via API.\n     */\n    CompletionTriggerKind.Invoked = 1;\n    /**\n     * Completion was triggered by a trigger character specified by\n     * the `triggerCharacters` properties of the `CompletionRegistrationOptions`.\n     */\n    CompletionTriggerKind.TriggerCharacter = 2;\n    /**\n     * Completion was re-triggered as current completion list is incomplete\n     */\n    CompletionTriggerKind.TriggerForIncompleteCompletions = 3;\n})(CompletionTriggerKind = exports.CompletionTriggerKind || (exports.CompletionTriggerKind = {}));\n/**\n * Request to request completion at a given text document position. The request's\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response\n * is of type [CompletionItem[]](#CompletionItem) or [CompletionList](#CompletionList)\n * or a Thenable that resolves to such.\n *\n * The request can delay the computation of the [`detail`](#CompletionItem.detail)\n * and [`documentation`](#CompletionItem.documentation) properties to the `completionItem/resolve`\n * request. However, properties that are needed for the initial sorting and filtering, like `sortText`,\n * `filterText`, `insertText`, and `textEdit`, must not be changed during resolve.\n */\nvar CompletionRequest;\n(function (CompletionRequest) {\n    CompletionRequest.method = 'textDocument/completion';\n    CompletionRequest.type = new messages_1.ProtocolRequestType(CompletionRequest.method);\n    /** @deprecated Use CompletionRequest.type */\n    CompletionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(CompletionRequest = exports.CompletionRequest || (exports.CompletionRequest = {}));\n/**\n * Request to resolve additional information for a given completion item.The request's\n * parameter is of type [CompletionItem](#CompletionItem) the response\n * is of type [CompletionItem](#CompletionItem) or a Thenable that resolves to such.\n */\nvar CompletionResolveRequest;\n(function (CompletionResolveRequest) {\n    CompletionResolveRequest.method = 'completionItem/resolve';\n    CompletionResolveRequest.type = new messages_1.ProtocolRequestType(CompletionResolveRequest.method);\n})(CompletionResolveRequest = exports.CompletionResolveRequest || (exports.CompletionResolveRequest = {}));\n/**\n * Request to request hover information at a given text document position. The request's\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response is of\n * type [Hover](#Hover) or a Thenable that resolves to such.\n */\nvar HoverRequest;\n(function (HoverRequest) {\n    HoverRequest.method = 'textDocument/hover';\n    HoverRequest.type = new messages_1.ProtocolRequestType(HoverRequest.method);\n})(HoverRequest = exports.HoverRequest || (exports.HoverRequest = {}));\n/**\n * How a signature help was triggered.\n *\n * @since 3.15.0\n */\nvar SignatureHelpTriggerKind;\n(function (SignatureHelpTriggerKind) {\n    /**\n     * Signature help was invoked manually by the user or by a command.\n     */\n    SignatureHelpTriggerKind.Invoked = 1;\n    /**\n     * Signature help was triggered by a trigger character.\n     */\n    SignatureHelpTriggerKind.TriggerCharacter = 2;\n    /**\n     * Signature help was triggered by the cursor moving or by the document content changing.\n     */\n    SignatureHelpTriggerKind.ContentChange = 3;\n})(SignatureHelpTriggerKind = exports.SignatureHelpTriggerKind || (exports.SignatureHelpTriggerKind = {}));\nvar SignatureHelpRequest;\n(function (SignatureHelpRequest) {\n    SignatureHelpRequest.method = 'textDocument/signatureHelp';\n    SignatureHelpRequest.type = new messages_1.ProtocolRequestType(SignatureHelpRequest.method);\n})(SignatureHelpRequest = exports.SignatureHelpRequest || (exports.SignatureHelpRequest = {}));\n/**\n * A request to resolve the definition location of a symbol at a given text\n * document position. The request's parameter is of type [TextDocumentPosition]\n * (#TextDocumentPosition) the response is of either type [Definition](#Definition)\n * or a typed array of [DefinitionLink](#DefinitionLink) or a Thenable that resolves\n * to such.\n */\nvar DefinitionRequest;\n(function (DefinitionRequest) {\n    DefinitionRequest.method = 'textDocument/definition';\n    DefinitionRequest.type = new messages_1.ProtocolRequestType(DefinitionRequest.method);\n    /** @deprecated Use DefinitionRequest.type */\n    DefinitionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(DefinitionRequest = exports.DefinitionRequest || (exports.DefinitionRequest = {}));\n/**\n * A request to resolve project-wide references for the symbol denoted\n * by the given text document position. The request's parameter is of\n * type [ReferenceParams](#ReferenceParams) the response is of type\n * [Location[]](#Location) or a Thenable that resolves to such.\n */\nvar ReferencesRequest;\n(function (ReferencesRequest) {\n    ReferencesRequest.method = 'textDocument/references';\n    ReferencesRequest.type = new messages_1.ProtocolRequestType(ReferencesRequest.method);\n    /** @deprecated Use ReferencesRequest.type */\n    ReferencesRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(ReferencesRequest = exports.ReferencesRequest || (exports.ReferencesRequest = {}));\n/**\n * Request to resolve a [DocumentHighlight](#DocumentHighlight) for a given\n * text document position. The request's parameter is of type [TextDocumentPosition]\n * (#TextDocumentPosition) the request response is of type [DocumentHighlight[]]\n * (#DocumentHighlight) or a Thenable that resolves to such.\n */\nvar DocumentHighlightRequest;\n(function (DocumentHighlightRequest) {\n    DocumentHighlightRequest.method = 'textDocument/documentHighlight';\n    DocumentHighlightRequest.type = new messages_1.ProtocolRequestType(DocumentHighlightRequest.method);\n    /** @deprecated Use DocumentHighlightRequest.type */\n    DocumentHighlightRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(DocumentHighlightRequest = exports.DocumentHighlightRequest || (exports.DocumentHighlightRequest = {}));\n/**\n * A request to list all symbols found in a given text document. The request's\n * parameter is of type [TextDocumentIdentifier](#TextDocumentIdentifier) the\n * response is of type [SymbolInformation[]](#SymbolInformation) or a Thenable\n * that resolves to such.\n */\nvar DocumentSymbolRequest;\n(function (DocumentSymbolRequest) {\n    DocumentSymbolRequest.method = 'textDocument/documentSymbol';\n    DocumentSymbolRequest.type = new messages_1.ProtocolRequestType(DocumentSymbolRequest.method);\n    /** @deprecated Use DocumentSymbolRequest.type */\n    DocumentSymbolRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(DocumentSymbolRequest = exports.DocumentSymbolRequest || (exports.DocumentSymbolRequest = {}));\n/**\n * A request to provide commands for the given text document and range.\n */\nvar CodeActionRequest;\n(function (CodeActionRequest) {\n    CodeActionRequest.method = 'textDocument/codeAction';\n    CodeActionRequest.type = new messages_1.ProtocolRequestType(CodeActionRequest.method);\n    /** @deprecated Use CodeActionRequest.type */\n    CodeActionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(CodeActionRequest = exports.CodeActionRequest || (exports.CodeActionRequest = {}));\n/**\n * A request to list project-wide symbols matching the query string given\n * by the [WorkspaceSymbolParams](#WorkspaceSymbolParams). The response is\n * of type [SymbolInformation[]](#SymbolInformation) or a Thenable that\n * resolves to such.\n */\nvar WorkspaceSymbolRequest;\n(function (WorkspaceSymbolRequest) {\n    WorkspaceSymbolRequest.method = 'workspace/symbol';\n    WorkspaceSymbolRequest.type = new messages_1.ProtocolRequestType(WorkspaceSymbolRequest.method);\n    /** @deprecated Use WorkspaceSymbolRequest.type */\n    WorkspaceSymbolRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(WorkspaceSymbolRequest = exports.WorkspaceSymbolRequest || (exports.WorkspaceSymbolRequest = {}));\n/**\n * A request to provide code lens for the given text document.\n */\nvar CodeLensRequest;\n(function (CodeLensRequest) {\n    CodeLensRequest.type = new messages_1.ProtocolRequestType('textDocument/codeLens');\n    /** @deprecated Use CodeLensRequest.type */\n    CodeLensRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(CodeLensRequest = exports.CodeLensRequest || (exports.CodeLensRequest = {}));\n/**\n * A request to resolve a command for a given code lens.\n */\nvar CodeLensResolveRequest;\n(function (CodeLensResolveRequest) {\n    CodeLensResolveRequest.type = new messages_1.ProtocolRequestType('codeLens/resolve');\n})(CodeLensResolveRequest = exports.CodeLensResolveRequest || (exports.CodeLensResolveRequest = {}));\n/**\n * A request to provide document links\n */\nvar DocumentLinkRequest;\n(function (DocumentLinkRequest) {\n    DocumentLinkRequest.method = 'textDocument/documentLink';\n    DocumentLinkRequest.type = new messages_1.ProtocolRequestType(DocumentLinkRequest.method);\n    /** @deprecated Use DocumentLinkRequest.type */\n    DocumentLinkRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(DocumentLinkRequest = exports.DocumentLinkRequest || (exports.DocumentLinkRequest = {}));\n/**\n * Request to resolve additional information for a given document link. The request's\n * parameter is of type [DocumentLink](#DocumentLink) the response\n * is of type [DocumentLink](#DocumentLink) or a Thenable that resolves to such.\n */\nvar DocumentLinkResolveRequest;\n(function (DocumentLinkResolveRequest) {\n    DocumentLinkResolveRequest.type = new messages_1.ProtocolRequestType('documentLink/resolve');\n})(DocumentLinkResolveRequest = exports.DocumentLinkResolveRequest || (exports.DocumentLinkResolveRequest = {}));\n/**\n * A request to to format a whole document.\n */\nvar DocumentFormattingRequest;\n(function (DocumentFormattingRequest) {\n    DocumentFormattingRequest.method = 'textDocument/formatting';\n    DocumentFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentFormattingRequest.method);\n})(DocumentFormattingRequest = exports.DocumentFormattingRequest || (exports.DocumentFormattingRequest = {}));\n/**\n * A request to to format a range in a document.\n */\nvar DocumentRangeFormattingRequest;\n(function (DocumentRangeFormattingRequest) {\n    DocumentRangeFormattingRequest.method = 'textDocument/rangeFormatting';\n    DocumentRangeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentRangeFormattingRequest.method);\n})(DocumentRangeFormattingRequest = exports.DocumentRangeFormattingRequest || (exports.DocumentRangeFormattingRequest = {}));\n/**\n * A request to format a document on type.\n */\nvar DocumentOnTypeFormattingRequest;\n(function (DocumentOnTypeFormattingRequest) {\n    DocumentOnTypeFormattingRequest.method = 'textDocument/onTypeFormatting';\n    DocumentOnTypeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentOnTypeFormattingRequest.method);\n})(DocumentOnTypeFormattingRequest = exports.DocumentOnTypeFormattingRequest || (exports.DocumentOnTypeFormattingRequest = {}));\n/**\n * A request to rename a symbol.\n */\nvar RenameRequest;\n(function (RenameRequest) {\n    RenameRequest.method = 'textDocument/rename';\n    RenameRequest.type = new messages_1.ProtocolRequestType(RenameRequest.method);\n})(RenameRequest = exports.RenameRequest || (exports.RenameRequest = {}));\n/**\n * A request to test and perform the setup necessary for a rename.\n */\nvar PrepareRenameRequest;\n(function (PrepareRenameRequest) {\n    PrepareRenameRequest.method = 'textDocument/prepareRename';\n    PrepareRenameRequest.type = new messages_1.ProtocolRequestType(PrepareRenameRequest.method);\n})(PrepareRenameRequest = exports.PrepareRenameRequest || (exports.PrepareRenameRequest = {}));\n/**\n * A request send from the client to the server to execute a command. The request might return\n * a workspace edit which the client will apply to the workspace.\n */\nvar ExecuteCommandRequest;\n(function (ExecuteCommandRequest) {\n    ExecuteCommandRequest.type = new messages_1.ProtocolRequestType('workspace/executeCommand');\n})(ExecuteCommandRequest = exports.ExecuteCommandRequest || (exports.ExecuteCommandRequest = {}));\n/**\n * A request sent from the server to the client to modified certain resources.\n */\nvar ApplyWorkspaceEditRequest;\n(function (ApplyWorkspaceEditRequest) {\n    ApplyWorkspaceEditRequest.type = new messages_1.ProtocolRequestType('workspace/applyEdit');\n})(ApplyWorkspaceEditRequest = exports.ApplyWorkspaceEditRequest || (exports.ApplyWorkspaceEditRequest = {}));\n//# sourceMappingURL=protocol.js.map","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction boolean(value) {\n    return value === true || value === false;\n}\nexports.boolean = boolean;\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nexports.string = string;\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nexports.number = number;\nfunction error(value) {\n    return value instanceof Error;\n}\nexports.error = error;\nfunction func(value) {\n    return typeof value === 'function';\n}\nexports.func = func;\nfunction array(value) {\n    return Array.isArray(value);\n}\nexports.array = array;\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nexports.stringArray = stringArray;\nfunction typedArray(value, check) {\n    return Array.isArray(value) && value.every(check);\n}\nexports.typedArray = typedArray;\nfunction objectLiteral(value) {\n    // Strictly speaking class instances pass this check as well. Since the LSP\n    // doesn't use classes we ignore this for now. If we do we need to add something\n    // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\n    return value !== null && typeof value === 'object';\n}\nexports.objectLiteral = objectLiteral;\n//# sourceMappingURL=is.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the implementation locations of a symbol at a given text\n * document position. The request's parameter is of type [TextDocumentPositioParams]\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\n * Thenable that resolves to such.\n */\nvar ImplementationRequest;\n(function (ImplementationRequest) {\n    ImplementationRequest.method = 'textDocument/implementation';\n    ImplementationRequest.type = new messages_1.ProtocolRequestType(ImplementationRequest.method);\n    /** @deprecated Use ImplementationRequest.type */\n    ImplementationRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(ImplementationRequest = exports.ImplementationRequest || (exports.ImplementationRequest = {}));\n//# sourceMappingURL=protocol.implementation.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the type definition locations of a symbol at a given text\n * document position. The request's parameter is of type [TextDocumentPositioParams]\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\n * Thenable that resolves to such.\n */\nvar TypeDefinitionRequest;\n(function (TypeDefinitionRequest) {\n    TypeDefinitionRequest.method = 'textDocument/typeDefinition';\n    TypeDefinitionRequest.type = new messages_1.ProtocolRequestType(TypeDefinitionRequest.method);\n    /** @deprecated Use TypeDefinitionRequest.type */\n    TypeDefinitionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(TypeDefinitionRequest = exports.TypeDefinitionRequest || (exports.TypeDefinitionRequest = {}));\n//# sourceMappingURL=protocol.typeDefinition.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst messages_1 = require(\"./messages\");\n/**\n * The `workspace/workspaceFolders` is sent from the server to the client to fetch the open workspace folders.\n */\nvar WorkspaceFoldersRequest;\n(function (WorkspaceFoldersRequest) {\n    WorkspaceFoldersRequest.type = new messages_1.ProtocolRequestType0('workspace/workspaceFolders');\n})(WorkspaceFoldersRequest = exports.WorkspaceFoldersRequest || (exports.WorkspaceFoldersRequest = {}));\n/**\n * The `workspace/didChangeWorkspaceFolders` notification is sent from the client to the server when the workspace\n * folder configuration changes.\n */\nvar DidChangeWorkspaceFoldersNotification;\n(function (DidChangeWorkspaceFoldersNotification) {\n    DidChangeWorkspaceFoldersNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeWorkspaceFolders');\n})(DidChangeWorkspaceFoldersNotification = exports.DidChangeWorkspaceFoldersNotification || (exports.DidChangeWorkspaceFoldersNotification = {}));\n//# sourceMappingURL=protocol.workspaceFolders.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst messages_1 = require(\"./messages\");\n/**\n * The 'workspace/configuration' request is sent from the server to the client to fetch a certain\n * configuration setting.\n *\n * This pull model replaces the old push model were the client signaled configuration change via an\n * event. If the server still needs to react to configuration changes (since the server caches the\n * result of `workspace/configuration` requests) the server should register for an empty configuration\n * change event and empty the cache if such an event is received.\n */\nvar ConfigurationRequest;\n(function (ConfigurationRequest) {\n    ConfigurationRequest.type = new messages_1.ProtocolRequestType('workspace/configuration');\n})(ConfigurationRequest = exports.ConfigurationRequest || (exports.ConfigurationRequest = {}));\n//# sourceMappingURL=protocol.configuration.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst messages_1 = require(\"./messages\");\n/**\n * A request to list all color symbols found in a given text document. The request's\n * parameter is of type [DocumentColorParams](#DocumentColorParams) the\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\n * that resolves to such.\n */\nvar DocumentColorRequest;\n(function (DocumentColorRequest) {\n    DocumentColorRequest.method = 'textDocument/documentColor';\n    DocumentColorRequest.type = new messages_1.ProtocolRequestType(DocumentColorRequest.method);\n    /** @deprecated Use DocumentColorRequest.type */\n    DocumentColorRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(DocumentColorRequest = exports.DocumentColorRequest || (exports.DocumentColorRequest = {}));\n/**\n * A request to list all presentation for a color. The request's\n * parameter is of type [ColorPresentationParams](#ColorPresentationParams) the\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\n * that resolves to such.\n */\nvar ColorPresentationRequest;\n(function (ColorPresentationRequest) {\n    ColorPresentationRequest.type = new messages_1.ProtocolRequestType('textDocument/colorPresentation');\n})(ColorPresentationRequest = exports.ColorPresentationRequest || (exports.ColorPresentationRequest = {}));\n//# sourceMappingURL=protocol.colorProvider.js.map","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst messages_1 = require(\"./messages\");\n/**\n * Enum of known range kinds\n */\nvar FoldingRangeKind;\n(function (FoldingRangeKind) {\n    /**\n     * Folding range for a comment\n     */\n    FoldingRangeKind[\"Comment\"] = \"comment\";\n    /**\n     * Folding range for a imports or includes\n     */\n    FoldingRangeKind[\"Imports\"] = \"imports\";\n    /**\n     * Folding range for a region (e.g. `#region`)\n     */\n    FoldingRangeKind[\"Region\"] = \"region\";\n})(FoldingRangeKind = exports.FoldingRangeKind || (exports.FoldingRangeKind = {}));\n/**\n * A request to provide folding ranges in a document. The request's\n * parameter is of type [FoldingRangeParams](#FoldingRangeParams), the\n * response is of type [FoldingRangeList](#FoldingRangeList) or a Thenable\n * that resolves to such.\n */\nvar FoldingRangeRequest;\n(function (FoldingRangeRequest) {\n    FoldingRangeRequest.method = 'textDocument/foldingRange';\n    FoldingRangeRequest.type = new messages_1.ProtocolRequestType(FoldingRangeRequest.method);\n    /** @deprecated Use FoldingRangeRequest.type */\n    FoldingRangeRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(FoldingRangeRequest = exports.FoldingRangeRequest || (exports.FoldingRangeRequest = {}));\n//# sourceMappingURL=protocol.foldingRange.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the type definition locations of a symbol at a given text\n * document position. The request's parameter is of type [TextDocumentPositioParams]\n * (#TextDocumentPositionParams) the response is of type [Declaration](#Declaration)\n * or a typed array of [DeclarationLink](#DeclarationLink) or a Thenable that resolves\n * to such.\n */\nvar DeclarationRequest;\n(function (DeclarationRequest) {\n    DeclarationRequest.method = 'textDocument/declaration';\n    DeclarationRequest.type = new messages_1.ProtocolRequestType(DeclarationRequest.method);\n    /** @deprecated Use DeclarationRequest.type */\n    DeclarationRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(DeclarationRequest = exports.DeclarationRequest || (exports.DeclarationRequest = {}));\n//# sourceMappingURL=protocol.declaration.js.map","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide selection ranges in a document. The request's\n * parameter is of type [SelectionRangeParams](#SelectionRangeParams), the\n * response is of type [SelectionRange[]](#SelectionRange[]) or a Thenable\n * that resolves to such.\n */\nvar SelectionRangeRequest;\n(function (SelectionRangeRequest) {\n    SelectionRangeRequest.method = 'textDocument/selectionRange';\n    SelectionRangeRequest.type = new messages_1.ProtocolRequestType(SelectionRangeRequest.method);\n    /** @deprecated  Use SelectionRangeRequest.type */\n    SelectionRangeRequest.resultType = new vscode_jsonrpc_1.ProgressType();\n})(SelectionRangeRequest = exports.SelectionRangeRequest || (exports.SelectionRangeRequest = {}));\n//# sourceMappingURL=protocol.selectionRange.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst messages_1 = require(\"./messages\");\nvar WorkDoneProgress;\n(function (WorkDoneProgress) {\n    WorkDoneProgress.type = new vscode_jsonrpc_1.ProgressType();\n})(WorkDoneProgress = exports.WorkDoneProgress || (exports.WorkDoneProgress = {}));\n/**\n * The `window/workDoneProgress/create` request is sent from the server to the client to initiate progress\n * reporting from the server.\n */\nvar WorkDoneProgressCreateRequest;\n(function (WorkDoneProgressCreateRequest) {\n    WorkDoneProgressCreateRequest.type = new messages_1.ProtocolRequestType('window/workDoneProgress/create');\n})(WorkDoneProgressCreateRequest = exports.WorkDoneProgressCreateRequest || (exports.WorkDoneProgressCreateRequest = {}));\n/**\n * The `window/workDoneProgress/cancel` notification is sent from  the client to the server to cancel a progress\n * initiated on the server side.\n */\nvar WorkDoneProgressCancelNotification;\n(function (WorkDoneProgressCancelNotification) {\n    WorkDoneProgressCancelNotification.type = new messages_1.ProtocolNotificationType('window/workDoneProgress/cancel');\n})(WorkDoneProgressCancelNotification = exports.WorkDoneProgressCancelNotification || (exports.WorkDoneProgressCancelNotification = {}));\n//# sourceMappingURL=protocol.progress.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) TypeFox and others. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst messages_1 = require(\"./messages\");\n/**\n * A request to result a `CallHierarchyItem` in a document at a given position.\n * Can be used as an input to a incoming or outgoing call hierarchy.\n *\n * @since 3.16.0\n */\nvar CallHierarchyPrepareRequest;\n(function (CallHierarchyPrepareRequest) {\n    CallHierarchyPrepareRequest.method = 'textDocument/prepareCallHierarchy';\n    CallHierarchyPrepareRequest.type = new messages_1.ProtocolRequestType(CallHierarchyPrepareRequest.method);\n})(CallHierarchyPrepareRequest = exports.CallHierarchyPrepareRequest || (exports.CallHierarchyPrepareRequest = {}));\n/**\n * A request to resolve the incoming calls for a given `CallHierarchyItem`.\n *\n * @since 3.16.0\n */\nvar CallHierarchyIncomingCallsRequest;\n(function (CallHierarchyIncomingCallsRequest) {\n    CallHierarchyIncomingCallsRequest.method = 'callHierarchy/incomingCalls';\n    CallHierarchyIncomingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyIncomingCallsRequest.method);\n})(CallHierarchyIncomingCallsRequest = exports.CallHierarchyIncomingCallsRequest || (exports.CallHierarchyIncomingCallsRequest = {}));\n/**\n * A request to resolve the outgoing calls for a given `CallHierarchyItem`.\n *\n * @since 3.16.0\n */\nvar CallHierarchyOutgoingCallsRequest;\n(function (CallHierarchyOutgoingCallsRequest) {\n    CallHierarchyOutgoingCallsRequest.method = 'callHierarchy/outgoingCalls';\n    CallHierarchyOutgoingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyOutgoingCallsRequest.method);\n})(CallHierarchyOutgoingCallsRequest = exports.CallHierarchyOutgoingCallsRequest || (exports.CallHierarchyOutgoingCallsRequest = {}));\n//# sourceMappingURL=protocol.callHierarchy.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nfunction createProtocolConnection(input, output, logger, options) {\n    if (vscode_jsonrpc_1.ConnectionStrategy.is(options)) {\n        options = { connectionStrategy: options };\n    }\n    return vscode_jsonrpc_1.createMessageConnection(input, output, logger, options);\n}\nexports.createProtocolConnection = createProtocolConnection;\n//# sourceMappingURL=connection.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst messages_1 = require(\"./messages\");\n/**\n * A set of predefined token types. This set is not fixed\n * an clients can specify additional token types via the\n * corresponding client capabilities.\n *\n * @since 3.16.0 - Proposed state\n */\nvar SemanticTokenTypes;\n(function (SemanticTokenTypes) {\n    SemanticTokenTypes[\"namespace\"] = \"namespace\";\n    SemanticTokenTypes[\"type\"] = \"type\";\n    SemanticTokenTypes[\"class\"] = \"class\";\n    SemanticTokenTypes[\"enum\"] = \"enum\";\n    SemanticTokenTypes[\"interface\"] = \"interface\";\n    SemanticTokenTypes[\"struct\"] = \"struct\";\n    SemanticTokenTypes[\"typeParameter\"] = \"typeParameter\";\n    SemanticTokenTypes[\"parameter\"] = \"parameter\";\n    SemanticTokenTypes[\"variable\"] = \"variable\";\n    SemanticTokenTypes[\"property\"] = \"property\";\n    SemanticTokenTypes[\"enumMember\"] = \"enumMember\";\n    SemanticTokenTypes[\"event\"] = \"event\";\n    SemanticTokenTypes[\"function\"] = \"function\";\n    SemanticTokenTypes[\"member\"] = \"member\";\n    SemanticTokenTypes[\"macro\"] = \"macro\";\n    SemanticTokenTypes[\"keyword\"] = \"keyword\";\n    SemanticTokenTypes[\"modifier\"] = \"modifier\";\n    SemanticTokenTypes[\"comment\"] = \"comment\";\n    SemanticTokenTypes[\"string\"] = \"string\";\n    SemanticTokenTypes[\"number\"] = \"number\";\n    SemanticTokenTypes[\"regexp\"] = \"regexp\";\n    SemanticTokenTypes[\"operator\"] = \"operator\";\n})(SemanticTokenTypes = exports.SemanticTokenTypes || (exports.SemanticTokenTypes = {}));\n/**\n * A set of predefined token modifiers. This set is not fixed\n * an clients can specify additional token types via the\n * corresponding client capabilities.\n *\n * @since 3.16.0 - Proposed state\n */\nvar SemanticTokenModifiers;\n(function (SemanticTokenModifiers) {\n    SemanticTokenModifiers[\"declaration\"] = \"declaration\";\n    SemanticTokenModifiers[\"definition\"] = \"definition\";\n    SemanticTokenModifiers[\"readonly\"] = \"readonly\";\n    SemanticTokenModifiers[\"static\"] = \"static\";\n    SemanticTokenModifiers[\"deprecated\"] = \"deprecated\";\n    SemanticTokenModifiers[\"abstract\"] = \"abstract\";\n    SemanticTokenModifiers[\"async\"] = \"async\";\n    SemanticTokenModifiers[\"modification\"] = \"modification\";\n    SemanticTokenModifiers[\"documentation\"] = \"documentation\";\n    SemanticTokenModifiers[\"defaultLibrary\"] = \"defaultLibrary\";\n})(SemanticTokenModifiers = exports.SemanticTokenModifiers || (exports.SemanticTokenModifiers = {}));\n/**\n * @since 3.16.0 - Proposed state\n */\nvar SemanticTokens;\n(function (SemanticTokens) {\n    function is(value) {\n        const candidate = value;\n        return candidate !== undefined && (candidate.resultId === undefined || typeof candidate.resultId === 'string') &&\n            Array.isArray(candidate.data) && (candidate.data.length === 0 || typeof candidate.data[0] === 'number');\n    }\n    SemanticTokens.is = is;\n})(SemanticTokens = exports.SemanticTokens || (exports.SemanticTokens = {}));\n/**\n * @since 3.16.0 - Proposed state\n */\nvar SemanticTokensRequest;\n(function (SemanticTokensRequest) {\n    SemanticTokensRequest.method = 'textDocument/semanticTokens';\n    SemanticTokensRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRequest.method);\n})(SemanticTokensRequest = exports.SemanticTokensRequest || (exports.SemanticTokensRequest = {}));\n/**\n * @since 3.16.0 - Proposed state\n */\nvar SemanticTokensEditsRequest;\n(function (SemanticTokensEditsRequest) {\n    SemanticTokensEditsRequest.method = 'textDocument/semanticTokens/edits';\n    SemanticTokensEditsRequest.type = new messages_1.ProtocolRequestType(SemanticTokensEditsRequest.method);\n})(SemanticTokensEditsRequest = exports.SemanticTokensEditsRequest || (exports.SemanticTokensEditsRequest = {}));\n/**\n * @since 3.16.0 - Proposed state\n */\nvar SemanticTokensRangeRequest;\n(function (SemanticTokensRangeRequest) {\n    SemanticTokensRangeRequest.method = 'textDocument/semanticTokens/range';\n    SemanticTokensRangeRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRangeRequest.method);\n})(SemanticTokensRangeRequest = exports.SemanticTokensRangeRequest || (exports.SemanticTokensRangeRequest = {}));\n//# sourceMappingURL=protocol.semanticTokens.proposed.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst uuid_1 = require(\"./utils/uuid\");\nclass WorkDoneProgressReporterImpl {\n    constructor(_connection, _token) {\n        this._connection = _connection;\n        this._token = _token;\n        WorkDoneProgressReporterImpl.Instances.set(this._token, this);\n    }\n    begin(title, percentage, message, cancellable) {\n        let param = {\n            kind: 'begin',\n            title,\n            percentage,\n            message,\n            cancellable\n        };\n        this._connection.sendProgress(vscode_languageserver_protocol_1.WorkDoneProgress.type, this._token, param);\n    }\n    report(arg0, arg1) {\n        let param = {\n            kind: 'report'\n        };\n        if (typeof arg0 === 'number') {\n            param.percentage = arg0;\n            if (arg1 !== undefined) {\n                param.message = arg1;\n            }\n        }\n        else {\n            param.message = arg0;\n        }\n        this._connection.sendProgress(vscode_languageserver_protocol_1.WorkDoneProgress.type, this._token, param);\n    }\n    done() {\n        WorkDoneProgressReporterImpl.Instances.delete(this._token);\n        this._connection.sendProgress(vscode_languageserver_protocol_1.WorkDoneProgress.type, this._token, { kind: 'end' });\n    }\n}\nWorkDoneProgressReporterImpl.Instances = new Map();\nclass WorkDoneProgressServerReporterImpl extends WorkDoneProgressReporterImpl {\n    constructor(connection, token) {\n        super(connection, token);\n        this._source = new vscode_languageserver_protocol_1.CancellationTokenSource();\n    }\n    get token() {\n        return this._source.token;\n    }\n    done() {\n        this._source.dispose();\n        super.done();\n    }\n    cancel() {\n        this._source.cancel();\n    }\n}\nclass NullProgressReporter {\n    constructor() {\n    }\n    begin() {\n    }\n    report() {\n    }\n    done() {\n    }\n}\nclass NullProgressServerReporter extends NullProgressReporter {\n    constructor() {\n        super();\n        this._source = new vscode_languageserver_protocol_1.CancellationTokenSource();\n    }\n    get token() {\n        return this._source.token;\n    }\n    done() {\n        this._source.dispose();\n    }\n    cancel() {\n        this._source.cancel();\n    }\n}\nfunction attachWorkDone(connection, params) {\n    if (params === undefined || params.workDoneToken === undefined) {\n        return new NullProgressReporter();\n    }\n    const token = params.workDoneToken;\n    delete params.workDoneToken;\n    return new WorkDoneProgressReporterImpl(connection, token);\n}\nexports.attachWorkDone = attachWorkDone;\nexports.ProgressFeature = (Base) => {\n    return class extends Base {\n        constructor() {\n            super();\n            this._progressSupported = false;\n        }\n        initialize(capabilities) {\n            var _a;\n            if (((_a = capabilities === null || capabilities === void 0 ? void 0 : capabilities.window) === null || _a === void 0 ? void 0 : _a.workDoneProgress) === true) {\n                this._progressSupported = true;\n                this.connection.onNotification(vscode_languageserver_protocol_1.WorkDoneProgressCancelNotification.type, (params) => {\n                    let progress = WorkDoneProgressReporterImpl.Instances.get(params.token);\n                    if (progress instanceof WorkDoneProgressServerReporterImpl || progress instanceof NullProgressServerReporter) {\n                        progress.cancel();\n                    }\n                });\n            }\n        }\n        attachWorkDoneProgress(token) {\n            if (token === undefined) {\n                return new NullProgressReporter();\n            }\n            else {\n                return new WorkDoneProgressReporterImpl(this.connection, token);\n            }\n        }\n        createWorkDoneProgress() {\n            if (this._progressSupported) {\n                const token = uuid_1.generateUuid();\n                return this.connection.sendRequest(vscode_languageserver_protocol_1.WorkDoneProgressCreateRequest.type, { token }).then(() => {\n                    const result = new WorkDoneProgressServerReporterImpl(this.connection, token);\n                    return result;\n                });\n            }\n            else {\n                return Promise.resolve(new NullProgressServerReporter());\n            }\n        }\n    };\n};\nvar ResultProgress;\n(function (ResultProgress) {\n    ResultProgress.type = new vscode_languageserver_protocol_1.ProgressType();\n})(ResultProgress || (ResultProgress = {}));\nclass ResultProgressReporterImpl {\n    constructor(_connection, _token) {\n        this._connection = _connection;\n        this._token = _token;\n    }\n    report(data) {\n        this._connection.sendProgress(ResultProgress.type, this._token, data);\n    }\n}\nfunction attachPartialResult(connection, params) {\n    if (params === undefined || params.partialResultToken === undefined) {\n        return undefined;\n    }\n    const token = params.partialResultToken;\n    delete params.partialResultToken;\n    return new ResultProgressReporterImpl(connection, token);\n}\nexports.attachPartialResult = attachPartialResult;\n//# sourceMappingURL=progress.js.map","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst Is = require(\"./utils/is\");\nexports.ConfigurationFeature = (Base) => {\n    return class extends Base {\n        getConfiguration(arg) {\n            if (!arg) {\n                return this._getConfiguration({});\n            }\n            else if (Is.string(arg)) {\n                return this._getConfiguration({ section: arg });\n            }\n            else {\n                return this._getConfiguration(arg);\n            }\n        }\n        _getConfiguration(arg) {\n            let params = {\n                items: Array.isArray(arg) ? arg : [arg]\n            };\n            return this.connection.sendRequest(vscode_languageserver_protocol_1.ConfigurationRequest.type, params).then((result) => {\n                return Array.isArray(arg) ? result : result[0];\n            });\n        }\n    };\n};\n//# sourceMappingURL=configuration.js.map","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nexports.WorkspaceFoldersFeature = (Base) => {\n    return class extends Base {\n        initialize(capabilities) {\n            let workspaceCapabilities = capabilities.workspace;\n            if (workspaceCapabilities && workspaceCapabilities.workspaceFolders) {\n                this._onDidChangeWorkspaceFolders = new vscode_languageserver_protocol_1.Emitter();\n                this.connection.onNotification(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type, (params) => {\n                    this._onDidChangeWorkspaceFolders.fire(params.event);\n                });\n            }\n        }\n        getWorkspaceFolders() {\n            return this.connection.sendRequest(vscode_languageserver_protocol_1.WorkspaceFoldersRequest.type);\n        }\n        get onDidChangeWorkspaceFolders() {\n            if (!this._onDidChangeWorkspaceFolders) {\n                throw new Error('Client doesn\\'t support sending workspace folder change events.');\n            }\n            if (!this._unregistration) {\n                this._unregistration = this.connection.client.register(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type);\n            }\n            return this._onDidChangeWorkspaceFolders.event;\n        }\n    };\n};\n//# sourceMappingURL=workspaceFolders.js.map","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nexports.CallHierarchyFeature = (Base) => {\n    return class extends Base {\n        get callHierarchy() {\n            return {\n                onPrepare: (handler) => {\n                    this.connection.onRequest(vscode_languageserver_protocol_1.CallHierarchyPrepareRequest.type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), undefined);\n                    });\n                },\n                onIncomingCalls: (handler) => {\n                    const type = vscode_languageserver_protocol_1.CallHierarchyIncomingCallsRequest.type;\n                    this.connection.onRequest(type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), this.attachPartialResultProgress(type, params));\n                    });\n                },\n                onOutgoingCalls: (handler) => {\n                    const type = vscode_languageserver_protocol_1.CallHierarchyOutgoingCallsRequest.type;\n                    this.connection.onRequest(type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), this.attachPartialResultProgress(type, params));\n                    });\n                }\n            };\n        }\n    };\n};\n//# sourceMappingURL=callHierarchy.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst url = require(\"url\");\nconst path = require(\"path\");\nconst fs = require(\"fs\");\nconst child_process_1 = require(\"child_process\");\n/**\n * @deprecated Use the `vscode-uri` npm module which provides a more\n * complete implementation of handling VS Code URIs.\n */\nfunction uriToFilePath(uri) {\n    let parsed = url.parse(uri);\n    if (parsed.protocol !== 'file:' || !parsed.path) {\n        return undefined;\n    }\n    let segments = parsed.path.split('/');\n    for (var i = 0, len = segments.length; i < len; i++) {\n        segments[i] = decodeURIComponent(segments[i]);\n    }\n    if (process.platform === 'win32' && segments.length > 1) {\n        let first = segments[0];\n        let second = segments[1];\n        // Do we have a drive letter and we started with a / which is the\n        // case if the first segement is empty (see split above)\n        if (first.length === 0 && second.length > 1 && second[1] === ':') {\n            // Remove first slash\n            segments.shift();\n        }\n    }\n    return path.normalize(segments.join('/'));\n}\nexports.uriToFilePath = uriToFilePath;\nfunction isWindows() {\n    return process.platform === 'win32';\n}\nfunction resolve(moduleName, nodePath, cwd, tracer) {\n    const nodePathKey = 'NODE_PATH';\n    const app = [\n        'var p = process;',\n        'p.on(\\'message\\',function(m){',\n        'if(m.c===\\'e\\'){',\n        'p.exit(0);',\n        '}',\n        'else if(m.c===\\'rs\\'){',\n        'try{',\n        'var r=require.resolve(m.a);',\n        'p.send({c:\\'r\\',s:true,r:r});',\n        '}',\n        'catch(err){',\n        'p.send({c:\\'r\\',s:false});',\n        '}',\n        '}',\n        '});'\n    ].join('');\n    return new Promise((resolve, reject) => {\n        let env = process.env;\n        let newEnv = Object.create(null);\n        Object.keys(env).forEach(key => newEnv[key] = env[key]);\n        if (nodePath && fs.existsSync(nodePath) /* see issue 545 */) {\n            if (newEnv[nodePathKey]) {\n                newEnv[nodePathKey] = nodePath + path.delimiter + newEnv[nodePathKey];\n            }\n            else {\n                newEnv[nodePathKey] = nodePath;\n            }\n            if (tracer) {\n                tracer(`NODE_PATH value is: ${newEnv[nodePathKey]}`);\n            }\n        }\n        newEnv['ELECTRON_RUN_AS_NODE'] = '1';\n        try {\n            let cp = child_process_1.fork('', [], {\n                cwd: cwd,\n                env: newEnv,\n                execArgv: ['-e', app]\n            });\n            if (cp.pid === void 0) {\n                reject(new Error(`Starting process to resolve node module  ${moduleName} failed`));\n                return;\n            }\n            cp.on('error', (error) => {\n                reject(error);\n            });\n            cp.on('message', (message) => {\n                if (message.c === 'r') {\n                    cp.send({ c: 'e' });\n                    if (message.s) {\n                        resolve(message.r);\n                    }\n                    else {\n                        reject(new Error(`Failed to resolve module: ${moduleName}`));\n                    }\n                }\n            });\n            let message = {\n                c: 'rs',\n                a: moduleName\n            };\n            cp.send(message);\n        }\n        catch (error) {\n            reject(error);\n        }\n    });\n}\nexports.resolve = resolve;\n/**\n * Resolve the global npm package path.\n * @deprecated Since this depends on the used package manager and their version the best is that servers\n * implement this themselves since they know best what kind of package managers to support.\n * @param tracer the tracer to use\n */\nfunction resolveGlobalNodePath(tracer) {\n    let npmCommand = 'npm';\n    const env = Object.create(null);\n    Object.keys(process.env).forEach(key => env[key] = process.env[key]);\n    env['NO_UPDATE_NOTIFIER'] = 'true';\n    const options = {\n        encoding: 'utf8',\n        env\n    };\n    if (isWindows()) {\n        npmCommand = 'npm.cmd';\n        options.shell = true;\n    }\n    let handler = () => { };\n    try {\n        process.on('SIGPIPE', handler);\n        let stdout = child_process_1.spawnSync(npmCommand, ['config', 'get', 'prefix'], options).stdout;\n        if (!stdout) {\n            if (tracer) {\n                tracer(`'npm config get prefix' didn't return a value.`);\n            }\n            return undefined;\n        }\n        let prefix = stdout.trim();\n        if (tracer) {\n            tracer(`'npm config get prefix' value is: ${prefix}`);\n        }\n        if (prefix.length > 0) {\n            if (isWindows()) {\n                return path.join(prefix, 'node_modules');\n            }\n            else {\n                return path.join(prefix, 'lib', 'node_modules');\n            }\n        }\n        return undefined;\n    }\n    catch (err) {\n        return undefined;\n    }\n    finally {\n        process.removeListener('SIGPIPE', handler);\n    }\n}\nexports.resolveGlobalNodePath = resolveGlobalNodePath;\n/*\n * Resolve the global yarn pakage path.\n * @deprecated Since this depends on the used package manager and their version the best is that servers\n * implement this themselves since they know best what kind of package managers to support.\n * @param tracer the tracer to use\n */\nfunction resolveGlobalYarnPath(tracer) {\n    let yarnCommand = 'yarn';\n    let options = {\n        encoding: 'utf8'\n    };\n    if (isWindows()) {\n        yarnCommand = 'yarn.cmd';\n        options.shell = true;\n    }\n    let handler = () => { };\n    try {\n        process.on('SIGPIPE', handler);\n        let results = child_process_1.spawnSync(yarnCommand, ['global', 'dir', '--json'], options);\n        let stdout = results.stdout;\n        if (!stdout) {\n            if (tracer) {\n                tracer(`'yarn global dir' didn't return a value.`);\n                if (results.stderr) {\n                    tracer(results.stderr);\n                }\n            }\n            return undefined;\n        }\n        let lines = stdout.trim().split(/\\r?\\n/);\n        for (let line of lines) {\n            try {\n                let yarn = JSON.parse(line);\n                if (yarn.type === 'log') {\n                    return path.join(yarn.data, 'node_modules');\n                }\n            }\n            catch (e) {\n                // Do nothing. Ignore the line\n            }\n        }\n        return undefined;\n    }\n    catch (err) {\n        return undefined;\n    }\n    finally {\n        process.removeListener('SIGPIPE', handler);\n    }\n}\nexports.resolveGlobalYarnPath = resolveGlobalYarnPath;\nvar FileSystem;\n(function (FileSystem) {\n    let _isCaseSensitive = undefined;\n    function isCaseSensitive() {\n        if (_isCaseSensitive !== void 0) {\n            return _isCaseSensitive;\n        }\n        if (process.platform === 'win32') {\n            _isCaseSensitive = false;\n        }\n        else {\n            // convert current file name to upper case / lower case and check if file exists\n            // (guards against cases when name is already all uppercase or lowercase)\n            _isCaseSensitive = !fs.existsSync(__filename.toUpperCase()) || !fs.existsSync(__filename.toLowerCase());\n        }\n        return _isCaseSensitive;\n    }\n    FileSystem.isCaseSensitive = isCaseSensitive;\n    function isParent(parent, child) {\n        if (isCaseSensitive()) {\n            return path.normalize(child).indexOf(path.normalize(parent)) === 0;\n        }\n        else {\n            return path.normalize(child).toLowerCase().indexOf(path.normalize(parent).toLowerCase()) === 0;\n        }\n    }\n    FileSystem.isParent = isParent;\n})(FileSystem = exports.FileSystem || (exports.FileSystem = {}));\nfunction resolveModulePath(workspaceRoot, moduleName, nodePath, tracer) {\n    if (nodePath) {\n        if (!path.isAbsolute(nodePath)) {\n            nodePath = path.join(workspaceRoot, nodePath);\n        }\n        return resolve(moduleName, nodePath, nodePath, tracer).then((value) => {\n            if (FileSystem.isParent(nodePath, value)) {\n                return value;\n            }\n            else {\n                return Promise.reject(new Error(`Failed to load ${moduleName} from node path location.`));\n            }\n        }).then(undefined, (_error) => {\n            return resolve(moduleName, resolveGlobalNodePath(tracer), workspaceRoot, tracer);\n        });\n    }\n    else {\n        return resolve(moduleName, resolveGlobalNodePath(tracer), workspaceRoot, tracer);\n    }\n}\nexports.resolveModulePath = resolveModulePath;\n//# sourceMappingURL=files.js.map","module.exports = require(\"child_process\");","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\n'use strict';\n\nmodule.exports = require('./lib/node/main');","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst st = require(\"./semanticTokens.proposed\");\n__export(require(\"vscode-languageserver-protocol/\"));\n__export(require(\"./server\"));\nvar ProposedFeatures;\n(function (ProposedFeatures) {\n    ProposedFeatures.all = {\n        __brand: 'features',\n        languages: st.SemanticTokensFeature\n    };\n    ProposedFeatures.SemanticTokensBuilder = st.SemanticTokensBuilder;\n})(ProposedFeatures = exports.ProposedFeatures || (exports.ProposedFeatures = {}));\n//# sourceMappingURL=api.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nexports.SemanticTokensFeature = (Base) => {\n    return class extends Base {\n        get semanticTokens() {\n            return {\n                on: (handler) => {\n                    const type = vscode_languageserver_protocol_1.Proposed.SemanticTokensRequest.type;\n                    this.connection.onRequest(type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), this.attachPartialResultProgress(type, params));\n                    });\n                },\n                onEdits: (handler) => {\n                    const type = vscode_languageserver_protocol_1.Proposed.SemanticTokensEditsRequest.type;\n                    this.connection.onRequest(type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), this.attachPartialResultProgress(type, params));\n                    });\n                },\n                onRange: (handler) => {\n                    const type = vscode_languageserver_protocol_1.Proposed.SemanticTokensRangeRequest.type;\n                    this.connection.onRequest(type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), this.attachPartialResultProgress(type, params));\n                    });\n                }\n            };\n        }\n    };\n};\nclass SemanticTokensBuilder {\n    constructor() {\n        this._prevData = undefined;\n        this.initialize();\n    }\n    initialize() {\n        this._id = Date.now();\n        this._prevLine = 0;\n        this._prevChar = 0;\n        this._data = [];\n        this._dataLen = 0;\n    }\n    push(line, char, length, tokenType, tokenModifiers) {\n        let pushLine = line;\n        let pushChar = char;\n        if (this._dataLen > 0) {\n            pushLine -= this._prevLine;\n            if (pushLine === 0) {\n                pushChar -= this._prevChar;\n            }\n        }\n        this._data[this._dataLen++] = pushLine;\n        this._data[this._dataLen++] = pushChar;\n        this._data[this._dataLen++] = length;\n        this._data[this._dataLen++] = tokenType;\n        this._data[this._dataLen++] = tokenModifiers;\n        this._prevLine = line;\n        this._prevChar = char;\n    }\n    get id() {\n        return this._id.toString();\n    }\n    previousResult(id) {\n        if (this.id === id) {\n            this._prevData = this._data;\n        }\n        this.initialize();\n    }\n    build() {\n        this._prevData = undefined;\n        return {\n            resultId: this.id,\n            data: this._data\n        };\n    }\n    canBuildEdits() {\n        return this._prevData !== undefined;\n    }\n    buildEdits() {\n        if (this._prevData !== undefined) {\n            const prevDataLength = this._prevData.length;\n            const dataLength = this._data.length;\n            let startIndex = 0;\n            while (startIndex < dataLength && startIndex < prevDataLength && this._prevData[startIndex] === this._data[startIndex]) {\n                startIndex++;\n            }\n            if (startIndex < dataLength && startIndex < prevDataLength) {\n                // Find end index\n                let endIndex = 0;\n                while (endIndex < dataLength && endIndex < prevDataLength && this._prevData[prevDataLength - 1 - endIndex] === this._data[dataLength - 1 - endIndex]) {\n                    endIndex++;\n                }\n                const newData = this._data.slice(startIndex, dataLength - endIndex);\n                const result = {\n                    resultId: this.id,\n                    edits: [\n                        { start: startIndex, deleteCount: prevDataLength - endIndex - startIndex, data: newData }\n                    ]\n                };\n                return result;\n            }\n            else if (startIndex < dataLength) {\n                return { resultId: this.id, edits: [\n                        { start: startIndex, deleteCount: 0, data: this._data.slice(startIndex) }\n                    ] };\n            }\n            else if (startIndex < prevDataLength) {\n                return { resultId: this.id, edits: [\n                        { start: startIndex, deleteCount: prevDataLength - startIndex }\n                    ] };\n            }\n            else {\n                return { resultId: this.id, edits: [] };\n            }\n        }\n        else {\n            return this.build();\n        }\n    }\n}\nexports.SemanticTokensBuilder = SemanticTokensBuilder;\n//# sourceMappingURL=semanticTokens.proposed.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport {\n\tConnection,\n\tTextDocuments, InitializeParams, InitializeResult, NotificationType, RequestType,\n\tDocumentRangeFormattingRequest, Disposable, ServerCapabilities, TextDocumentSyncKind, TextEdit\n} from 'vscode-languageserver';\n\nimport { formatError, runSafe, runSafeAsync } from './utils/runner';\nimport { TextDocument, JSONDocument, JSONSchema, getLanguageService, DocumentLanguageSettings, SchemaConfiguration, ClientCapabilities, Diagnostic, Range, Position } from 'vscode-json-languageservice';\nimport { getLanguageModelCache } from './languageModelCache';\nimport { RequestService, basename, resolvePath } from './requests';\n\ninterface ISchemaAssociations {\n\t[pattern: string]: string[];\n}\n\ninterface ISchemaAssociation {\n\tfileMatch: string[];\n\turi: string;\n}\n\nnamespace SchemaAssociationNotification {\n\texport const type: NotificationType<ISchemaAssociations | ISchemaAssociation[], any> = new NotificationType('json/schemaAssociations');\n}\n\nnamespace VSCodeContentRequest {\n\texport const type: RequestType<string, string, any, any> = new RequestType('vscode/content');\n}\n\nnamespace SchemaContentChangeNotification {\n\texport const type: NotificationType<string, any> = new NotificationType('json/schemaContent');\n}\n\nnamespace ResultLimitReachedNotification {\n\texport const type: NotificationType<string, any> = new NotificationType('json/resultLimitReached');\n}\n\nnamespace ForceValidateRequest {\n\texport const type: RequestType<string, Diagnostic[], any, any> = new RequestType('json/validate');\n}\n\n\nconst workspaceContext = {\n\tresolveRelativePath: (relativePath: string, resource: string) => {\n\t\tconst base = resource.substr(0, resource.lastIndexOf('/') + 1);\n\t\treturn resolvePath(base, relativePath);\n\t}\n};\n\nexport interface RuntimeEnvironment {\n\tfile?: RequestService;\n\thttp?: RequestService\n\tconfigureHttpRequests?(proxy: string, strictSSL: boolean): void;\n}\n\nexport function startServer(connection: Connection, runtime: RuntimeEnvironment) {\n\n\tfunction getSchemaRequestService(handledSchemas: string[] = ['https', 'http', 'file']) {\n\t\tconst builtInHandlers: { [protocol: string]: RequestService | undefined } = {};\n\t\tfor (let protocol of handledSchemas) {\n\t\t\tif (protocol === 'file') {\n\t\t\t\tbuiltInHandlers[protocol] = runtime.file;\n\t\t\t} else if (protocol === 'http' || protocol === 'https') {\n\t\t\t\tbuiltInHandlers[protocol] = runtime.http;\n\t\t\t}\n\t\t}\n\t\treturn (uri: string): Thenable<string> => {\n\t\t\tconst protocol = uri.substr(0, uri.indexOf(':'));\n\n\t\t\tconst builtInHandler = builtInHandlers[protocol];\n\t\t\tif (builtInHandler) {\n\t\t\t\treturn builtInHandler.getContent(uri);\n\t\t\t}\n\t\t\treturn connection.sendRequest(VSCodeContentRequest.type, uri).then(responseText => {\n\t\t\t\treturn responseText;\n\t\t\t}, error => {\n\t\t\t\treturn Promise.reject(error.message);\n\t\t\t});\n\t\t};\n\t}\n\n\t// create the JSON language service\n\tlet languageService = getLanguageService({\n\t\tworkspaceContext,\n\t\tcontributions: [],\n\t\tclientCapabilities: ClientCapabilities.LATEST\n\t});\n\n\t// Create a text document manager.\n\tconst documents = new TextDocuments(TextDocument);\n\n\t// Make the text document manager listen on the connection\n\t// for open, change and close text document events\n\tdocuments.listen(connection);\n\n\tlet clientSnippetSupport = false;\n\tlet dynamicFormatterRegistration = false;\n\tlet hierarchicalDocumentSymbolSupport = false;\n\n\tlet foldingRangeLimitDefault = Number.MAX_VALUE;\n\tlet foldingRangeLimit = Number.MAX_VALUE;\n\tlet resultLimit = Number.MAX_VALUE;\n\tlet formatterMaxNumberOfEdits = Number.MAX_VALUE;\n\n\t// After the server has started the client sends an initialize request. The server receives\n\t// in the passed params the rootPath of the workspace plus the client capabilities.\n\tconnection.onInitialize((params: InitializeParams): InitializeResult => {\n\n\t\tconst handledProtocols = params.initializationOptions?.handledSchemaProtocols;\n\n\t\tlanguageService = getLanguageService({\n\t\t\tschemaRequestService: getSchemaRequestService(handledProtocols),\n\t\t\tworkspaceContext,\n\t\t\tcontributions: [],\n\t\t\tclientCapabilities: params.capabilities\n\t\t});\n\n\t\tfunction getClientCapability<T>(name: string, def: T) {\n\t\t\tconst keys = name.split('.');\n\t\t\tlet c: any = params.capabilities;\n\t\t\tfor (let i = 0; c && i < keys.length; i++) {\n\t\t\t\tif (!c.hasOwnProperty(keys[i])) {\n\t\t\t\t\treturn def;\n\t\t\t\t}\n\t\t\t\tc = c[keys[i]];\n\t\t\t}\n\t\t\treturn c;\n\t\t}\n\n\t\tclientSnippetSupport = getClientCapability('textDocument.completion.completionItem.snippetSupport', false);\n\t\tdynamicFormatterRegistration = getClientCapability('textDocument.rangeFormatting.dynamicRegistration', false) && (typeof params.initializationOptions?.provideFormatter !== 'boolean');\n\t\tfoldingRangeLimitDefault = getClientCapability('textDocument.foldingRange.rangeLimit', Number.MAX_VALUE);\n\t\thierarchicalDocumentSymbolSupport = getClientCapability('textDocument.documentSymbol.hierarchicalDocumentSymbolSupport', false);\n\t\tformatterMaxNumberOfEdits = params.initializationOptions?.customCapabilities?.rangeFormatting?.editLimit || Number.MAX_VALUE;\n\t\tconst capabilities: ServerCapabilities = {\n\t\t\ttextDocumentSync: TextDocumentSyncKind.Incremental,\n\t\t\tcompletionProvider: clientSnippetSupport ? {\n\t\t\t\tresolveProvider: false, // turn off resolving as the current language service doesn't do anything on resolve. Also fixes #91747\n\t\t\t\ttriggerCharacters: ['\"', ':']\n\t\t\t} : undefined,\n\t\t\thoverProvider: true,\n\t\t\tdocumentSymbolProvider: true,\n\t\t\tdocumentRangeFormattingProvider: params.initializationOptions.provideFormatter === true,\n\t\t\tcolorProvider: {},\n\t\t\tfoldingRangeProvider: true,\n\t\t\tselectionRangeProvider: true,\n\t\t\tdefinitionProvider: true\n\t\t};\n\n\t\treturn { capabilities };\n\t});\n\n\n\n\t// The settings interface describes the server relevant settings part\n\tinterface Settings {\n\t\tjson: {\n\t\t\tschemas: JSONSchemaSettings[];\n\t\t\tformat: { enable: boolean; };\n\t\t\tresultLimit?: number;\n\t\t};\n\t\thttp: {\n\t\t\tproxy: string;\n\t\t\tproxyStrictSSL: boolean;\n\t\t};\n\t}\n\n\tinterface JSONSchemaSettings {\n\t\tfileMatch?: string[];\n\t\turl?: string;\n\t\tschema?: JSONSchema;\n\t}\n\n\n\tconst limitExceededWarnings = function () {\n\t\tconst pendingWarnings: { [uri: string]: { features: { [name: string]: string }; timeout?: NodeJS.Timeout; } } = {};\n\n\t\treturn {\n\t\t\tcancel(uri: string) {\n\t\t\t\tconst warning = pendingWarnings[uri];\n\t\t\t\tif (warning && warning.timeout) {\n\t\t\t\t\tclearTimeout(warning.timeout);\n\t\t\t\t\tdelete pendingWarnings[uri];\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonResultLimitExceeded(uri: string, resultLimit: number, name: string) {\n\t\t\t\treturn () => {\n\t\t\t\t\tlet warning = pendingWarnings[uri];\n\t\t\t\t\tif (warning) {\n\t\t\t\t\t\tif (!warning.timeout) {\n\t\t\t\t\t\t\t// already shown\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\twarning.features[name] = name;\n\t\t\t\t\t\twarning.timeout.refresh();\n\t\t\t\t\t} else {\n\t\t\t\t\t\twarning = { features: { [name]: name } };\n\t\t\t\t\t\twarning.timeout = setTimeout(() => {\n\t\t\t\t\t\t\tconnection.sendNotification(ResultLimitReachedNotification.type, `${basename(uri)}: For performance reasons, ${Object.keys(warning.features).join(' and ')} have been limited to ${resultLimit} items.`);\n\t\t\t\t\t\t\twarning.timeout = undefined;\n\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\tpendingWarnings[uri] = warning;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t}();\n\n\tlet jsonConfigurationSettings: JSONSchemaSettings[] | undefined = undefined;\n\tlet schemaAssociations: ISchemaAssociations | ISchemaAssociation[] | undefined = undefined;\n\tlet formatterRegistration: Thenable<Disposable> | null = null;\n\n\t// The settings have changed. Is send on server activation as well.\n\tconnection.onDidChangeConfiguration((change) => {\n\t\tlet settings = <Settings>change.settings;\n\t\tif (runtime.configureHttpRequests) {\n\t\t\truntime.configureHttpRequests(settings.http && settings.http.proxy, settings.http && settings.http.proxyStrictSSL);\n\t\t}\n\t\tjsonConfigurationSettings = settings.json && settings.json.schemas;\n\t\tupdateConfiguration();\n\n\t\tfoldingRangeLimit = Math.trunc(Math.max(settings.json && settings.json.resultLimit || foldingRangeLimitDefault, 0));\n\t\tresultLimit = Math.trunc(Math.max(settings.json && settings.json.resultLimit || Number.MAX_VALUE, 0));\n\n\t\t// dynamically enable & disable the formatter\n\t\tif (dynamicFormatterRegistration) {\n\t\t\tconst enableFormatter = settings && settings.json && settings.json.format && settings.json.format.enable;\n\t\t\tif (enableFormatter) {\n\t\t\t\tif (!formatterRegistration) {\n\t\t\t\t\tformatterRegistration = connection.client.register(DocumentRangeFormattingRequest.type, { documentSelector: [{ language: 'json' }, { language: 'jsonc' }] });\n\t\t\t\t}\n\t\t\t} else if (formatterRegistration) {\n\t\t\t\tformatterRegistration.then(r => r.dispose());\n\t\t\t\tformatterRegistration = null;\n\t\t\t}\n\t\t}\n\t});\n\n\t// The jsonValidation extension configuration has changed\n\tconnection.onNotification(SchemaAssociationNotification.type, associations => {\n\t\tschemaAssociations = associations;\n\t\tupdateConfiguration();\n\t});\n\n\t// A schema has changed\n\tconnection.onNotification(SchemaContentChangeNotification.type, uri => {\n\t\tlanguageService.resetSchema(uri);\n\t});\n\n\t// Retry schema validation on all open documents\n\tconnection.onRequest(ForceValidateRequest.type, uri => {\n\t\treturn new Promise<Diagnostic[]>(resolve => {\n\t\t\tconst document = documents.get(uri);\n\t\t\tif (document) {\n\t\t\t\tupdateConfiguration();\n\t\t\t\tvalidateTextDocument(document, diagnostics => {\n\t\t\t\t\tresolve(diagnostics);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tresolve([]);\n\t\t\t}\n\t\t});\n\t});\n\n\tfunction updateConfiguration() {\n\t\tconst languageSettings = {\n\t\t\tvalidate: true,\n\t\t\tallowComments: true,\n\t\t\tschemas: new Array<SchemaConfiguration>()\n\t\t};\n\t\tif (schemaAssociations) {\n\t\t\tif (Array.isArray(schemaAssociations)) {\n\t\t\t\tArray.prototype.push.apply(languageSettings.schemas, schemaAssociations);\n\t\t\t} else {\n\t\t\t\tfor (const pattern in schemaAssociations) {\n\t\t\t\t\tconst association = schemaAssociations[pattern];\n\t\t\t\t\tif (Array.isArray(association)) {\n\t\t\t\t\t\tassociation.forEach(uri => {\n\t\t\t\t\t\t\tlanguageSettings.schemas.push({ uri, fileMatch: [pattern] });\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (jsonConfigurationSettings) {\n\t\t\tjsonConfigurationSettings.forEach((schema, index) => {\n\t\t\t\tlet uri = schema.url;\n\t\t\t\tif (!uri && schema.schema) {\n\t\t\t\t\turi = schema.schema.id || `vscode://schemas/custom/${index}`;\n\t\t\t\t}\n\t\t\t\tif (uri) {\n\t\t\t\t\tlanguageSettings.schemas.push({ uri, fileMatch: schema.fileMatch, schema: schema.schema });\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tlanguageService.configure(languageSettings);\n\n\t\t// Revalidate any open text documents\n\t\tdocuments.all().forEach(triggerValidation);\n\t}\n\n\t// The content of a text document has changed. This event is emitted\n\t// when the text document first opened or when its content has changed.\n\tdocuments.onDidChangeContent((change) => {\n\t\tlimitExceededWarnings.cancel(change.document.uri);\n\t\ttriggerValidation(change.document);\n\t});\n\n\t// a document has closed: clear all diagnostics\n\tdocuments.onDidClose(event => {\n\t\tlimitExceededWarnings.cancel(event.document.uri);\n\t\tcleanPendingValidation(event.document);\n\t\tconnection.sendDiagnostics({ uri: event.document.uri, diagnostics: [] });\n\t});\n\n\tconst pendingValidationRequests: { [uri: string]: NodeJS.Timer; } = {};\n\tconst validationDelayMs = 300;\n\n\tfunction cleanPendingValidation(textDocument: TextDocument): void {\n\t\tconst request = pendingValidationRequests[textDocument.uri];\n\t\tif (request) {\n\t\t\tclearTimeout(request);\n\t\t\tdelete pendingValidationRequests[textDocument.uri];\n\t\t}\n\t}\n\n\tfunction triggerValidation(textDocument: TextDocument): void {\n\t\tcleanPendingValidation(textDocument);\n\t\tpendingValidationRequests[textDocument.uri] = setTimeout(() => {\n\t\t\tdelete pendingValidationRequests[textDocument.uri];\n\t\t\tvalidateTextDocument(textDocument);\n\t\t}, validationDelayMs);\n\t}\n\n\tfunction validateTextDocument(textDocument: TextDocument, callback?: (diagnostics: Diagnostic[]) => void): void {\n\t\tconst respond = (diagnostics: Diagnostic[]) => {\n\t\t\tconnection.sendDiagnostics({ uri: textDocument.uri, diagnostics });\n\t\t\tif (callback) {\n\t\t\t\tcallback(diagnostics);\n\t\t\t}\n\t\t};\n\t\tif (textDocument.getText().length === 0) {\n\t\t\trespond([]); // ignore empty documents\n\t\t\treturn;\n\t\t}\n\t\tconst jsonDocument = getJSONDocument(textDocument);\n\t\tconst version = textDocument.version;\n\n\t\tconst documentSettings: DocumentLanguageSettings = textDocument.languageId === 'jsonc' ? { comments: 'ignore', trailingCommas: 'warning' } : { comments: 'error', trailingCommas: 'error' };\n\t\tlanguageService.doValidation(textDocument, jsonDocument, documentSettings).then(diagnostics => {\n\t\t\tsetImmediate(() => {\n\t\t\t\tconst currDocument = documents.get(textDocument.uri);\n\t\t\t\tif (currDocument && currDocument.version === version) {\n\t\t\t\t\trespond(diagnostics); // Send the computed diagnostics to VSCode.\n\t\t\t\t}\n\t\t\t});\n\t\t}, error => {\n\t\t\tconnection.console.error(formatError(`Error while validating ${textDocument.uri}`, error));\n\t\t});\n\t}\n\n\tconnection.onDidChangeWatchedFiles((change) => {\n\t\t// Monitored files have changed in VSCode\n\t\tlet hasChanges = false;\n\t\tchange.changes.forEach(c => {\n\t\t\tif (languageService.resetSchema(c.uri)) {\n\t\t\t\thasChanges = true;\n\t\t\t}\n\t\t});\n\t\tif (hasChanges) {\n\t\t\tdocuments.all().forEach(triggerValidation);\n\t\t}\n\t});\n\n\tconst jsonDocuments = getLanguageModelCache<JSONDocument>(10, 60, document => languageService.parseJSONDocument(document));\n\tdocuments.onDidClose(e => {\n\t\tjsonDocuments.onDocumentRemoved(e.document);\n\t});\n\tconnection.onShutdown(() => {\n\t\tjsonDocuments.dispose();\n\t});\n\n\tfunction getJSONDocument(document: TextDocument): JSONDocument {\n\t\treturn jsonDocuments.get(document);\n\t}\n\n\tconnection.onCompletion((textDocumentPosition, token) => {\n\t\treturn runSafeAsync(async () => {\n\t\t\tconst document = documents.get(textDocumentPosition.textDocument.uri);\n\t\t\tif (document) {\n\t\t\t\tconst jsonDocument = getJSONDocument(document);\n\t\t\t\treturn languageService.doComplete(document, textDocumentPosition.position, jsonDocument);\n\t\t\t}\n\t\t\treturn null;\n\t\t}, null, `Error while computing completions for ${textDocumentPosition.textDocument.uri}`, token);\n\t});\n\n\tconnection.onHover((textDocumentPositionParams, token) => {\n\t\treturn runSafeAsync(async () => {\n\t\t\tconst document = documents.get(textDocumentPositionParams.textDocument.uri);\n\t\t\tif (document) {\n\t\t\t\tconst jsonDocument = getJSONDocument(document);\n\t\t\t\treturn languageService.doHover(document, textDocumentPositionParams.position, jsonDocument);\n\t\t\t}\n\t\t\treturn null;\n\t\t}, null, `Error while computing hover for ${textDocumentPositionParams.textDocument.uri}`, token);\n\t});\n\n\tconnection.onDocumentSymbol((documentSymbolParams, token) => {\n\t\treturn runSafe(() => {\n\t\t\tconst document = documents.get(documentSymbolParams.textDocument.uri);\n\t\t\tif (document) {\n\t\t\t\tconst jsonDocument = getJSONDocument(document);\n\t\t\t\tconst onResultLimitExceeded = limitExceededWarnings.onResultLimitExceeded(document.uri, resultLimit, 'document symbols');\n\t\t\t\tif (hierarchicalDocumentSymbolSupport) {\n\t\t\t\t\treturn languageService.findDocumentSymbols2(document, jsonDocument, { resultLimit, onResultLimitExceeded });\n\t\t\t\t} else {\n\t\t\t\t\treturn languageService.findDocumentSymbols(document, jsonDocument, { resultLimit, onResultLimitExceeded });\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn [];\n\t\t}, [], `Error while computing document symbols for ${documentSymbolParams.textDocument.uri}`, token);\n\t});\n\n\tconnection.onDocumentRangeFormatting((formatParams, token) => {\n\t\treturn runSafe(() => {\n\t\t\tconst document = documents.get(formatParams.textDocument.uri);\n\t\t\tif (document) {\n\t\t\t\tconst edits = languageService.format(document, formatParams.range, formatParams.options);\n\t\t\t\tif (edits.length > formatterMaxNumberOfEdits) {\n\t\t\t\t\tconst newText = TextDocument.applyEdits(document, edits);\n\t\t\t\t\treturn [TextEdit.replace(Range.create(Position.create(0, 0), document.positionAt(document.getText().length)), newText)];\n\t\t\t\t}\n\t\t\t\treturn edits;\n\t\t\t}\n\t\t\treturn [];\n\t\t}, [], `Error while formatting range for ${formatParams.textDocument.uri}`, token);\n\t});\n\n\tconnection.onDocumentColor((params, token) => {\n\t\treturn runSafeAsync(async () => {\n\t\t\tconst document = documents.get(params.textDocument.uri);\n\t\t\tif (document) {\n\t\t\t\tconst onResultLimitExceeded = limitExceededWarnings.onResultLimitExceeded(document.uri, resultLimit, 'document colors');\n\t\t\t\tconst jsonDocument = getJSONDocument(document);\n\t\t\t\treturn languageService.findDocumentColors(document, jsonDocument, { resultLimit, onResultLimitExceeded });\n\t\t\t}\n\t\t\treturn [];\n\t\t}, [], `Error while computing document colors for ${params.textDocument.uri}`, token);\n\t});\n\n\tconnection.onColorPresentation((params, token) => {\n\t\treturn runSafe(() => {\n\t\t\tconst document = documents.get(params.textDocument.uri);\n\t\t\tif (document) {\n\t\t\t\tconst jsonDocument = getJSONDocument(document);\n\t\t\t\treturn languageService.getColorPresentations(document, jsonDocument, params.color, params.range);\n\t\t\t}\n\t\t\treturn [];\n\t\t}, [], `Error while computing color presentations for ${params.textDocument.uri}`, token);\n\t});\n\n\tconnection.onFoldingRanges((params, token) => {\n\t\treturn runSafe(() => {\n\t\t\tconst document = documents.get(params.textDocument.uri);\n\t\t\tif (document) {\n\t\t\t\tconst onRangeLimitExceeded = limitExceededWarnings.onResultLimitExceeded(document.uri, foldingRangeLimit, 'folding ranges');\n\t\t\t\treturn languageService.getFoldingRanges(document, { rangeLimit: foldingRangeLimit, onRangeLimitExceeded });\n\t\t\t}\n\t\t\treturn null;\n\t\t}, null, `Error while computing folding ranges for ${params.textDocument.uri}`, token);\n\t});\n\n\n\tconnection.onSelectionRanges((params, token) => {\n\t\treturn runSafe(() => {\n\t\t\tconst document = documents.get(params.textDocument.uri);\n\t\t\tif (document) {\n\t\t\t\tconst jsonDocument = getJSONDocument(document);\n\t\t\t\treturn languageService.getSelectionRanges(document, params.positions, jsonDocument);\n\t\t\t}\n\t\t\treturn [];\n\t\t}, [], `Error while computing selection ranges for ${params.textDocument.uri}`, token);\n\t});\n\n\tconnection.onDefinition((params, token) => {\n\t\treturn runSafeAsync(async () => {\n\t\t\tconst document = documents.get(params.textDocument.uri);\n\t\t\tif (document) {\n\t\t\t\tconst jsonDocument = getJSONDocument(document);\n\t\t\t\treturn languageService.findDefinition(document, params.position, jsonDocument);\n\t\t\t}\n\t\t\treturn [];\n\t\t}, [], `Error while computing definitions for ${params.textDocument.uri}`, token);\n\t});\n\n\t// Listen on the connection\n\tconnection.listen();\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { TextDocument } from 'vscode-languageserver';\n\nexport interface LanguageModelCache<T> {\n\tget(document: TextDocument): T;\n\tonDocumentRemoved(document: TextDocument): void;\n\tdispose(): void;\n}\n\nexport function getLanguageModelCache<T>(maxEntries: number, cleanupIntervalTimeInSec: number, parse: (document: TextDocument) => T): LanguageModelCache<T> {\n\tlet languageModels: { [uri: string]: { version: number, languageId: string, cTime: number, languageModel: T } } = {};\n\tlet nModels = 0;\n\n\tlet cleanupInterval: NodeJS.Timer | undefined = undefined;\n\tif (cleanupIntervalTimeInSec > 0) {\n\t\tcleanupInterval = setInterval(() => {\n\t\t\tlet cutoffTime = Date.now() - cleanupIntervalTimeInSec * 1000;\n\t\t\tlet uris = Object.keys(languageModels);\n\t\t\tfor (let uri of uris) {\n\t\t\t\tlet languageModelInfo = languageModels[uri];\n\t\t\t\tif (languageModelInfo.cTime < cutoffTime) {\n\t\t\t\t\tdelete languageModels[uri];\n\t\t\t\t\tnModels--;\n\t\t\t\t}\n\t\t\t}\n\t\t}, cleanupIntervalTimeInSec * 1000);\n\t}\n\n\treturn {\n\t\tget(document: TextDocument): T {\n\t\t\tlet version = document.version;\n\t\t\tlet languageId = document.languageId;\n\t\t\tlet languageModelInfo = languageModels[document.uri];\n\t\t\tif (languageModelInfo && languageModelInfo.version === version && languageModelInfo.languageId === languageId) {\n\t\t\t\tlanguageModelInfo.cTime = Date.now();\n\t\t\t\treturn languageModelInfo.languageModel;\n\t\t\t}\n\t\t\tlet languageModel = parse(document);\n\t\t\tlanguageModels[document.uri] = { languageModel, version, languageId, cTime: Date.now() };\n\t\t\tif (!languageModelInfo) {\n\t\t\t\tnModels++;\n\t\t\t}\n\n\t\t\tif (nModels === maxEntries) {\n\t\t\t\tlet oldestTime = Number.MAX_VALUE;\n\t\t\t\tlet oldestUri = null;\n\t\t\t\tfor (let uri in languageModels) {\n\t\t\t\t\tlet languageModelInfo = languageModels[uri];\n\t\t\t\t\tif (languageModelInfo.cTime < oldestTime) {\n\t\t\t\t\t\toldestUri = uri;\n\t\t\t\t\t\toldestTime = languageModelInfo.cTime;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (oldestUri) {\n\t\t\t\t\tdelete languageModels[oldestUri];\n\t\t\t\t\tnModels--;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn languageModel;\n\n\t\t},\n\t\tonDocumentRemoved(document: TextDocument) {\n\t\t\tlet uri = document.uri;\n\t\t\tif (languageModels[uri]) {\n\t\t\t\tdelete languageModels[uri];\n\t\t\t\tnModels--;\n\t\t\t}\n\t\t},\n\t\tdispose() {\n\t\t\tif (typeof cleanupInterval !== 'undefined') {\n\t\t\t\tclearInterval(cleanupInterval);\n\t\t\t\tcleanupInterval = undefined;\n\t\t\t\tlanguageModels = {};\n\t\t\t\tnModels = 0;\n\t\t\t}\n\t\t}\n\t};\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI } from 'vscode-uri';\n\nexport interface RequestService {\n\tgetContent(uri: string, encoding?: string): Promise<string>;\n}\n\nexport function getScheme(uri: string) {\n\treturn uri.substr(0, uri.indexOf(':'));\n}\n\nexport function dirname(uri: string) {\n\tconst lastIndexOfSlash = uri.lastIndexOf('/');\n\treturn lastIndexOfSlash !== -1 ? uri.substr(0, lastIndexOfSlash) : '';\n}\n\nexport function basename(uri: string) {\n\tconst lastIndexOfSlash = uri.lastIndexOf('/');\n\treturn uri.substr(lastIndexOfSlash + 1);\n}\n\n\nconst Slash = '/'.charCodeAt(0);\nconst Dot = '.'.charCodeAt(0);\n\nexport function extname(uri: string) {\n\tfor (let i = uri.length - 1; i >= 0; i--) {\n\t\tconst ch = uri.charCodeAt(i);\n\t\tif (ch === Dot) {\n\t\t\tif (i > 0 && uri.charCodeAt(i - 1) !== Slash) {\n\t\t\t\treturn uri.substr(i);\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t} else if (ch === Slash) {\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn '';\n}\n\nexport function isAbsolutePath(path: string) {\n\treturn path.charCodeAt(0) === Slash;\n}\n\nexport function resolvePath(uriString: string, path: string): string {\n\tif (isAbsolutePath(path)) {\n\t\tconst uri = URI.parse(uriString);\n\t\tconst parts = path.split('/');\n\t\treturn uri.with({ path: normalizePath(parts) }).toString();\n\t}\n\treturn joinPath(uriString, path);\n}\n\nexport function normalizePath(parts: string[]): string {\n\tconst newParts: string[] = [];\n\tfor (const part of parts) {\n\t\tif (part.length === 0 || part.length === 1 && part.charCodeAt(0) === Dot) {\n\t\t\t// ignore\n\t\t} else if (part.length === 2 && part.charCodeAt(0) === Dot && part.charCodeAt(1) === Dot) {\n\t\t\tnewParts.pop();\n\t\t} else {\n\t\t\tnewParts.push(part);\n\t\t}\n\t}\n\tif (parts.length > 1 && parts[parts.length - 1].length === 0) {\n\t\tnewParts.push('');\n\t}\n\tlet res = newParts.join('/');\n\tif (parts[0].length === 0) {\n\t\tres = '/' + res;\n\t}\n\treturn res;\n}\n\nexport function joinPath(uriString: string, ...paths: string[]): string {\n\tconst uri = URI.parse(uriString);\n\tconst parts = uri.path.split('/');\n\tfor (let path of paths) {\n\t\tparts.push(...path.split('/'));\n\t}\n\treturn uri.with({ path: normalizePath(parts) }).toString();\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar url_1 = require(\"url\");\nvar https = require(\"https\");\nvar http = require(\"http\");\nvar HttpProxyAgent = require(\"http-proxy-agent\");\nvar HttpsProxyAgent = require(\"https-proxy-agent\");\nvar zlib = require(\"zlib\");\nvar nls = require(\"vscode-nls\");\nif (process.env.VSCODE_NLS_CONFIG) {\n    var VSCODE_NLS_CONFIG = process.env.VSCODE_NLS_CONFIG;\n    nls.config(JSON.parse(VSCODE_NLS_CONFIG));\n}\nvar localize = nls.loadMessageBundle();\nvar proxyUrl = null;\nvar strictSSL = true;\nfunction configure(_proxyUrl, _strictSSL) {\n    proxyUrl = _proxyUrl;\n    strictSSL = _strictSSL;\n}\nexports.configure = configure;\nfunction xhr(options) {\n    var agent = getProxyAgent(options.url, { proxyUrl: proxyUrl, strictSSL: strictSSL });\n    options = assign({}, options);\n    options = assign(options, { agent: agent, strictSSL: strictSSL });\n    if (typeof options.followRedirects !== 'number') {\n        options.followRedirects = 5;\n    }\n    return request(options).then(function (result) { return new Promise(function (c, e) {\n        var res = result.res;\n        var readable = res;\n        var encoding = res.headers && res.headers['content-encoding'];\n        var isCompleted = false;\n        if (encoding === 'gzip') {\n            var gunzip = zlib.createGunzip();\n            res.pipe(gunzip);\n            readable = gunzip;\n        }\n        else if (encoding === 'deflate') {\n            var inflate = zlib.createInflate();\n            res.pipe(inflate);\n            readable = inflate;\n        }\n        var data = [];\n        readable.on('data', function (c) { return data.push(c); });\n        readable.on('end', function () {\n            if (isCompleted) {\n                return;\n            }\n            isCompleted = true;\n            if (options.followRedirects > 0 && (res.statusCode >= 300 && res.statusCode <= 303 || res.statusCode === 307)) {\n                var location = res.headers['location'];\n                if (location) {\n                    var newOptions = {\n                        type: options.type, url: location, user: options.user, password: options.password, responseType: options.responseType, headers: options.headers,\n                        timeout: options.timeout, followRedirects: options.followRedirects - 1, data: options.data\n                    };\n                    xhr(newOptions).then(c, e);\n                    return;\n                }\n            }\n            var response = {\n                responseText: data.join(''),\n                status: res.statusCode,\n                headers: res.headers || {}\n            };\n            if ((res.statusCode >= 200 && res.statusCode < 300) || res.statusCode === 1223) {\n                c(response);\n            }\n            else {\n                e(response);\n            }\n        });\n        readable.on('error', function (err) {\n            var response = {\n                responseText: localize('error', 'Unable to access {0}. Error: {1}', options.url, err.message),\n                status: 500,\n                headers: undefined,\n            };\n            isCompleted = true;\n            e(response);\n        });\n    }); }, function (err) {\n        var message;\n        if (agent) {\n            message = localize('error.cannot.connect.proxy', 'Unable to connect to {0} through a proxy . Error: {1}', options.url, err.message);\n        }\n        else {\n            message = localize('error.cannot.connect', 'Unable to connect to {0}. Error: {1}', options.url, err.message);\n        }\n        return Promise.reject({\n            responseText: message,\n            status: 404\n        });\n    });\n}\nexports.xhr = xhr;\nfunction assign(destination) {\n    var sources = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        sources[_i - 1] = arguments[_i];\n    }\n    sources.forEach(function (source) { return Object.keys(source).forEach(function (key) { return destination[key] = source[key]; }); });\n    return destination;\n}\nfunction request(options) {\n    var req;\n    return new Promise(function (c, e) {\n        var endpoint = url_1.parse(options.url);\n        var opts = {\n            hostname: endpoint.hostname,\n            port: endpoint.port ? parseInt(endpoint.port) : (endpoint.protocol === 'https:' ? 443 : 80),\n            path: endpoint.path,\n            method: options.type || 'GET',\n            headers: options.headers,\n            agent: options.agent,\n            rejectUnauthorized: (typeof options.strictSSL === 'boolean') ? options.strictSSL : true\n        };\n        if (options.user && options.password) {\n            opts.auth = options.user + ':' + options.password;\n        }\n        var handler = function (res) {\n            if (res.statusCode >= 300 && res.statusCode < 400 && options.followRedirects && options.followRedirects > 0 && res.headers['location']) {\n                c(request(assign({}, options, {\n                    url: res.headers['location'],\n                    followRedirects: options.followRedirects - 1\n                })));\n            }\n            else {\n                c({ req: req, res: res });\n            }\n        };\n        if (endpoint.protocol === 'https:') {\n            req = https.request(opts, handler);\n        }\n        else {\n            req = http.request(opts, handler);\n        }\n        req.on('error', e);\n        if (options.timeout) {\n            req.setTimeout(options.timeout);\n        }\n        if (options.data) {\n            req.write(options.data);\n        }\n        req.end();\n    });\n}\nfunction getErrorStatusDescription(status) {\n    if (status < 400) {\n        return void 0;\n    }\n    switch (status) {\n        case 400: return localize('status.400', 'Bad request. The request cannot be fulfilled due to bad syntax.');\n        case 401: return localize('status.401', 'Unauthorized. The server is refusing to respond.');\n        case 403: return localize('status.403', 'Forbidden. The server is refusing to respond.');\n        case 404: return localize('status.404', 'Not Found. The requested location could not be found.');\n        case 405: return localize('status.405', 'Method not allowed. A request was made using a request method not supported by that location.');\n        case 406: return localize('status.406', 'Not Acceptable. The server can only generate a response that is not accepted by the client.');\n        case 407: return localize('status.407', 'Proxy Authentication Required. The client must first authenticate itself with the proxy.');\n        case 408: return localize('status.408', 'Request Timeout. The server timed out waiting for the request.');\n        case 409: return localize('status.409', 'Conflict. The request could not be completed because of a conflict in the request.');\n        case 410: return localize('status.410', 'Gone. The requested page is no longer available.');\n        case 411: return localize('status.411', 'Length Required. The \"Content-Length\" is not defined.');\n        case 412: return localize('status.412', 'Precondition Failed. The precondition given in the request evaluated to false by the server.');\n        case 413: return localize('status.413', 'Request Entity Too Large. The server will not accept the request, because the request entity is too large.');\n        case 414: return localize('status.414', 'Request-URI Too Long. The server will not accept the request, because the URL is too long.');\n        case 415: return localize('status.415', 'Unsupported Media Type. The server will not accept the request, because the media type is not supported.');\n        case 500: return localize('status.500', 'Internal Server Error.');\n        case 501: return localize('status.501', 'Not Implemented. The server either does not recognize the request method, or it lacks the ability to fulfill the request.');\n        case 503: return localize('status.503', 'Service Unavailable. The server is currently unavailable (overloaded or down).');\n        default: return localize('status.416', 'HTTP status code {0}', status);\n    }\n}\nexports.getErrorStatusDescription = getErrorStatusDescription;\n// proxy handling\nfunction getSystemProxyURI(requestURL) {\n    if (requestURL.protocol === 'http:') {\n        return process.env.HTTP_PROXY || process.env.http_proxy || null;\n    }\n    else if (requestURL.protocol === 'https:') {\n        return process.env.HTTPS_PROXY || process.env.https_proxy || process.env.HTTP_PROXY || process.env.http_proxy || null;\n    }\n    return null;\n}\nfunction getProxyAgent(rawRequestURL, options) {\n    if (options === void 0) { options = {}; }\n    var requestURL = url_1.parse(rawRequestURL);\n    var proxyURL = options.proxyUrl || getSystemProxyURI(requestURL);\n    if (!proxyURL) {\n        return null;\n    }\n    var proxyEndpoint = url_1.parse(proxyURL);\n    if (!/^https?:$/.test(proxyEndpoint.protocol)) {\n        return null;\n    }\n    var opts = {\n        host: proxyEndpoint.hostname,\n        port: Number(proxyEndpoint.port),\n        auth: proxyEndpoint.auth,\n        rejectUnauthorized: (typeof options.strictSSL === 'boolean') ? options.strictSSL : true\n    };\n    return requestURL.protocol === 'http:' ? new HttpProxyAgent(opts) : new HttpsProxyAgent(opts);\n}\n","module.exports = require(\"http\");","\n/**\n * Module dependencies.\n */\n\nvar net = require('net');\nvar tls = require('tls');\nvar url = require('url');\nvar Agent = require('agent-base');\nvar inherits = require('util').inherits;\nvar debug = require('debug')('http-proxy-agent');\n\n/**\n * Module exports.\n */\n\nmodule.exports = HttpProxyAgent;\n\n/**\n * The `HttpProxyAgent` implements an HTTP Agent subclass that connects to the\n * specified \"HTTP proxy server\" in order to proxy HTTP requests.\n *\n * @api public\n */\n\nfunction HttpProxyAgent (opts) {\n  if (!(this instanceof HttpProxyAgent)) return new HttpProxyAgent(opts);\n  if ('string' == typeof opts) opts = url.parse(opts);\n  if (!opts) throw new Error('an HTTP(S) proxy server `host` and `port` must be specified!');\n  debug('creating new HttpProxyAgent instance: %o', opts);\n  Agent.call(this, opts);\n\n  var proxy = Object.assign({}, opts);\n\n  // if `true`, then connect to the proxy server over TLS. defaults to `false`.\n  this.secureProxy = proxy.protocol ? /^https:?$/i.test(proxy.protocol) : false;\n\n  // prefer `hostname` over `host`, and set the `port` if needed\n  proxy.host = proxy.hostname || proxy.host;\n  proxy.port = +proxy.port || (this.secureProxy ? 443 : 80);\n\n  if (proxy.host && proxy.path) {\n    // if both a `host` and `path` are specified then it's most likely the\n    // result of a `url.parse()` call... we need to remove the `path` portion so\n    // that `net.connect()` doesn't attempt to open that as a unix socket file.\n    delete proxy.path;\n    delete proxy.pathname;\n  }\n\n  this.proxy = proxy;\n}\ninherits(HttpProxyAgent, Agent);\n\n/**\n * Called when the node-core HTTP client library is creating a new HTTP request.\n *\n * @api public\n */\n\nHttpProxyAgent.prototype.callback = function connect (req, opts, fn) {\n  var proxy = this.proxy;\n\n  // change the `http.ClientRequest` instance's \"path\" field\n  // to the absolute path of the URL that will be requested\n  var parsed = url.parse(req.path);\n  if (null == parsed.protocol) parsed.protocol = 'http:';\n  if (null == parsed.hostname) parsed.hostname = opts.hostname || opts.host;\n  if (null == parsed.port) parsed.port = opts.port;\n  if (parsed.port == 80) {\n    // if port is 80, then we can remove the port so that the\n    // \":80\" portion is not on the produced URL\n    delete parsed.port;\n  }\n  var absolute = url.format(parsed);\n  req.path = absolute;\n\n  // inject the `Proxy-Authorization` header if necessary\n  if (proxy.auth) {\n    req.setHeader(\n      'Proxy-Authorization',\n      'Basic ' + Buffer.from(proxy.auth).toString('base64')\n    );\n  }\n\n  // create a socket connection to the proxy server\n  var socket;\n  if (this.secureProxy) {\n    socket = tls.connect(proxy);\n  } else {\n    socket = net.connect(proxy);\n  }\n\n  // at this point, the http ClientRequest's internal `_header` field might have\n  // already been set. If this is the case then we'll need to re-generate the\n  // string since we just changed the `req.path`\n  if (req._header) {\n    debug('regenerating stored HTTP header string for request');\n    req._header = null;\n    req._implicitHeader();\n    if (req.output && req.output.length > 0) {\n      debug('patching connection write() output buffer with updated header');\n      // the _header has already been queued to be written to the socket\n      var first = req.output[0];\n      var endOfHeaders = first.indexOf('\\r\\n\\r\\n') + 4;\n      req.output[0] = req._header + first.substring(endOfHeaders);\n      debug('output buffer: %o', req.output);\n    }\n  }\n\n  fn(null, socket);\n};\n","'use strict';\n\n/**\n * Module dependencies.\n */\n\nrequire('./patch-core');\nconst inherits = require('util').inherits;\nconst promisify = require('es6-promisify');\nconst EventEmitter = require('events').EventEmitter;\n\n/**\n * Module exports.\n */\n\nmodule.exports = Agent;\n\n/**\n * Base `http.Agent` implementation.\n * No pooling/keep-alive is implemented by default.\n *\n * @param {Function} callback\n * @api public\n */\n\nfunction Agent(callback, _opts) {\n  if (!(this instanceof Agent)) {\n    return new Agent(callback, _opts);\n  }\n\n  EventEmitter.call(this);\n\n  let opts = _opts;\n  if ('function' === typeof callback) {\n    this.callback = callback;\n  } else if (callback) {\n    opts = callback;\n  }\n\n  // timeout for the socket to be returned from the callback\n  this.timeout = (opts && opts.timeout) || null;\n\n  this.options = opts;\n}\ninherits(Agent, EventEmitter);\n\n/**\n * Override this function in your subclass!\n */\nAgent.prototype.callback = function callback(req, opts) {\n  throw new Error(\n    '\"agent-base\" has no default implementation, you must subclass and override `callback()`'\n  );\n};\n\n/**\n * Called by node-core's \"_http_client.js\" module when creating\n * a new HTTP request with this Agent instance.\n *\n * @api public\n */\n\nAgent.prototype.addRequest = function addRequest(\n  req,\n  _opts\n) {\n  const ownOpts = Object.assign({}, _opts);\n\n  // set default `host` for HTTP to localhost\n  if (null == ownOpts.host) {\n    ownOpts.host = 'localhost';\n  }\n\n  // set default `port` for HTTP if none was explicitly specified\n  if (null == ownOpts.port) {\n    ownOpts.port = ownOpts.secureEndpoint ? 443 : 80;\n  }\n\n  const opts = Object.assign({}, this.options, ownOpts);\n\n  if (opts.host && opts.path) {\n    // if both a `host` and `path` are specified then it's most likely the\n    // result of a `url.parse()` call... we need to remove the `path` portion so\n    // that `net.connect()` doesn't attempt to open that as a unix socket file.\n    delete opts.path;\n  }\n\n  delete opts.agent;\n  delete opts.hostname;\n  delete opts._defaultAgent;\n  delete opts.defaultPort;\n  delete opts.createConnection;\n\n  // hint to use \"Connection: close\"\n  // XXX: non-documented `http` module API :(\n  req._last = true;\n  req.shouldKeepAlive = false;\n\n  // create the `stream.Duplex` instance\n  let timeout;\n  let timedOut = false;\n  const timeoutMs = this.timeout;\n\n  function onerror(err) {\n    if (req._hadError) return;\n    req.emit('error', err);\n    // For Safety. Some additional errors might fire later on\n    // and we need to make sure we don't double-fire the error event.\n    req._hadError = true;\n  }\n\n  function ontimeout() {\n    timedOut = true;\n    const err = new Error(\n      'A \"socket\" was not created for HTTP request before ' + timeoutMs + 'ms'\n    );\n    err.code = 'ETIMEOUT';\n    onerror(err);\n  }\n\n  function callbackError(err) {\n    if (timedOut) return;\n    if (timeout != null) {\n      clearTimeout(timeout);\n    }\n    onerror(err);\n  }\n\n  function onsocket(socket) {\n    if (timedOut) return;\n    if (timeout != null) {\n      clearTimeout(timeout);\n    }\n    if (socket) {\n      req.onSocket(socket);\n    } else {\n      const err = new Error(`no Duplex stream was returned to agent-base for \\`${req.method} ${req.path}\\``);\n      onerror(err);\n    }\n  }\n\n  if (this.callback.length >= 3) {\n    // legacy callback function, convert to Promise\n    this.callback = promisify(this.callback, this);\n  }\n\n  if (timeoutMs > 0) {\n    timeout = setTimeout(ontimeout, timeoutMs);\n  }\n\n  try {\n    Promise.resolve(this.callback(req, opts))\n      .then(onsocket, callbackError);\n  } catch (err) {\n    Promise.reject(err)\n      .catch(callbackError);\n  }\n};\n","'use strict';\n\nconst url = require('url');\nconst https = require('https');\n\n/**\n * This currently needs to be applied to all Node.js versions\n * in order to determine if the `req` is an HTTP or HTTPS request.\n *\n * There is currently no PR attempting to move this property upstream.\n */\nhttps.request = (function(request) {\n  return function(_options, cb) {\n    let options;\n    if (typeof _options === 'string') {\n      options = url.parse(_options);\n    } else {\n      options = Object.assign({}, _options);\n    }\n    if (null == options.port) {\n      options.port = 443;\n    }\n    options.secureEndpoint = true;\n    return request.call(https, options, cb);\n  };\n})(https.request);\n\n/**\n * This is needed for Node.js >= 9.0.0 to make sure `https.get()` uses the\n * patched `https.request()`.\n *\n * Ref: https://github.com/nodejs/node/commit/5118f31\n */\nhttps.get = function(options, cb) {\n  const req = https.request(options, cb);\n  req.end();\n  return req;\n};\n","\"use strict\";\n\n/* global self, window, module, global, require */\nmodule.exports = function () {\n\n    \"use strict\";\n\n    var globalObject = void 0;\n\n    function isFunction(x) {\n        return typeof x === \"function\";\n    }\n\n    // Seek the global object\n    if (global !== undefined) {\n        globalObject = global;\n    } else if (window !== undefined && window.document) {\n        globalObject = window;\n    } else {\n        globalObject = self;\n    }\n\n    // Test for any native promise implementation, and if that\n    // implementation appears to conform to the specificaton.\n    // This code mostly nicked from the es6-promise module polyfill\n    // and then fooled with.\n    var hasPromiseSupport = function () {\n\n        // No promise object at all, and it's a non-starter\n        if (!globalObject.hasOwnProperty(\"Promise\")) {\n            return false;\n        }\n\n        // There is a Promise object. Does it conform to the spec?\n        var P = globalObject.Promise;\n\n        // Some of these methods are missing from\n        // Firefox/Chrome experimental implementations\n        if (!P.hasOwnProperty(\"resolve\") || !P.hasOwnProperty(\"reject\")) {\n            return false;\n        }\n\n        if (!P.hasOwnProperty(\"all\") || !P.hasOwnProperty(\"race\")) {\n            return false;\n        }\n\n        // Older version of the spec had a resolver object\n        // as the arg rather than a function\n        return function () {\n\n            var resolve = void 0;\n\n            var p = new globalObject.Promise(function (r) {\n                resolve = r;\n            });\n\n            if (p) {\n                return isFunction(resolve);\n            }\n\n            return false;\n        }();\n    }();\n\n    // Export the native Promise implementation if it\n    // looks like it matches the spec\n    if (hasPromiseSupport) {\n        return globalObject.Promise;\n    }\n\n    //  Otherwise, return the es6-promise polyfill by @jaffathecake.\n    return require(\"es6-promise\").Promise;\n}();","/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\n * @version   4.1.1\n */\n\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.ES6Promise = factory());\n}(this, (function () { 'use strict';\n\nfunction objectOrFunction(x) {\n  var type = typeof x;\n  return x !== null && (type === 'object' || type === 'function');\n}\n\nfunction isFunction(x) {\n  return typeof x === 'function';\n}\n\nvar _isArray = undefined;\nif (Array.isArray) {\n  _isArray = Array.isArray;\n} else {\n  _isArray = function (x) {\n    return Object.prototype.toString.call(x) === '[object Array]';\n  };\n}\n\nvar isArray = _isArray;\n\nvar len = 0;\nvar vertxNext = undefined;\nvar customSchedulerFn = undefined;\n\nvar asap = function asap(callback, arg) {\n  queue[len] = callback;\n  queue[len + 1] = arg;\n  len += 2;\n  if (len === 2) {\n    // If len is 2, that means that we need to schedule an async flush.\n    // If additional callbacks are queued before the queue is flushed, they\n    // will be processed by this flush that we are scheduling.\n    if (customSchedulerFn) {\n      customSchedulerFn(flush);\n    } else {\n      scheduleFlush();\n    }\n  }\n};\n\nfunction setScheduler(scheduleFn) {\n  customSchedulerFn = scheduleFn;\n}\n\nfunction setAsap(asapFn) {\n  asap = asapFn;\n}\n\nvar browserWindow = typeof window !== 'undefined' ? window : undefined;\nvar browserGlobal = browserWindow || {};\nvar BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\nvar isNode = typeof self === 'undefined' && typeof process !== 'undefined' && ({}).toString.call(process) === '[object process]';\n\n// test for web worker but not in IE10\nvar isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\n// node\nfunction useNextTick() {\n  // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n  // see https://github.com/cujojs/when/issues/410 for details\n  return function () {\n    return process.nextTick(flush);\n  };\n}\n\n// vertx\nfunction useVertxTimer() {\n  if (typeof vertxNext !== 'undefined') {\n    return function () {\n      vertxNext(flush);\n    };\n  }\n\n  return useSetTimeout();\n}\n\nfunction useMutationObserver() {\n  var iterations = 0;\n  var observer = new BrowserMutationObserver(flush);\n  var node = document.createTextNode('');\n  observer.observe(node, { characterData: true });\n\n  return function () {\n    node.data = iterations = ++iterations % 2;\n  };\n}\n\n// web worker\nfunction useMessageChannel() {\n  var channel = new MessageChannel();\n  channel.port1.onmessage = flush;\n  return function () {\n    return channel.port2.postMessage(0);\n  };\n}\n\nfunction useSetTimeout() {\n  // Store setTimeout reference so es6-promise will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var globalSetTimeout = setTimeout;\n  return function () {\n    return globalSetTimeout(flush, 1);\n  };\n}\n\nvar queue = new Array(1000);\nfunction flush() {\n  for (var i = 0; i < len; i += 2) {\n    var callback = queue[i];\n    var arg = queue[i + 1];\n\n    callback(arg);\n\n    queue[i] = undefined;\n    queue[i + 1] = undefined;\n  }\n\n  len = 0;\n}\n\nfunction attemptVertx() {\n  try {\n    var r = require;\n    var vertx = r('vertx');\n    vertxNext = vertx.runOnLoop || vertx.runOnContext;\n    return useVertxTimer();\n  } catch (e) {\n    return useSetTimeout();\n  }\n}\n\nvar scheduleFlush = undefined;\n// Decide what async method to use to triggering processing of queued callbacks:\nif (isNode) {\n  scheduleFlush = useNextTick();\n} else if (BrowserMutationObserver) {\n  scheduleFlush = useMutationObserver();\n} else if (isWorker) {\n  scheduleFlush = useMessageChannel();\n} else if (browserWindow === undefined && typeof require === 'function') {\n  scheduleFlush = attemptVertx();\n} else {\n  scheduleFlush = useSetTimeout();\n}\n\nfunction then(onFulfillment, onRejection) {\n  var _arguments = arguments;\n\n  var parent = this;\n\n  var child = new this.constructor(noop);\n\n  if (child[PROMISE_ID] === undefined) {\n    makePromise(child);\n  }\n\n  var _state = parent._state;\n\n  if (_state) {\n    (function () {\n      var callback = _arguments[_state - 1];\n      asap(function () {\n        return invokeCallback(_state, child, callback, parent._result);\n      });\n    })();\n  } else {\n    subscribe(parent, child, onFulfillment, onRejection);\n  }\n\n  return child;\n}\n\n/**\n  `Promise.resolve` returns a promise that will become resolved with the\n  passed `value`. It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    resolve(1);\n  });\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.resolve(1);\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  @method resolve\n  @static\n  @param {Any} value value that the returned promise will be resolved with\n  Useful for tooling.\n  @return {Promise} a promise that will become fulfilled with the given\n  `value`\n*/\nfunction resolve$1(object) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (object && typeof object === 'object' && object.constructor === Constructor) {\n    return object;\n  }\n\n  var promise = new Constructor(noop);\n  resolve(promise, object);\n  return promise;\n}\n\nvar PROMISE_ID = Math.random().toString(36).substring(16);\n\nfunction noop() {}\n\nvar PENDING = void 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\n\nvar GET_THEN_ERROR = new ErrorObject();\n\nfunction selfFulfillment() {\n  return new TypeError(\"You cannot resolve a promise with itself\");\n}\n\nfunction cannotReturnOwn() {\n  return new TypeError('A promises callback cannot return that same promise.');\n}\n\nfunction getThen(promise) {\n  try {\n    return promise.then;\n  } catch (error) {\n    GET_THEN_ERROR.error = error;\n    return GET_THEN_ERROR;\n  }\n}\n\nfunction tryThen(then$$1, value, fulfillmentHandler, rejectionHandler) {\n  try {\n    then$$1.call(value, fulfillmentHandler, rejectionHandler);\n  } catch (e) {\n    return e;\n  }\n}\n\nfunction handleForeignThenable(promise, thenable, then$$1) {\n  asap(function (promise) {\n    var sealed = false;\n    var error = tryThen(then$$1, thenable, function (value) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n      if (thenable !== value) {\n        resolve(promise, value);\n      } else {\n        fulfill(promise, value);\n      }\n    }, function (reason) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n\n      reject(promise, reason);\n    }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n    if (!sealed && error) {\n      sealed = true;\n      reject(promise, error);\n    }\n  }, promise);\n}\n\nfunction handleOwnThenable(promise, thenable) {\n  if (thenable._state === FULFILLED) {\n    fulfill(promise, thenable._result);\n  } else if (thenable._state === REJECTED) {\n    reject(promise, thenable._result);\n  } else {\n    subscribe(thenable, undefined, function (value) {\n      return resolve(promise, value);\n    }, function (reason) {\n      return reject(promise, reason);\n    });\n  }\n}\n\nfunction handleMaybeThenable(promise, maybeThenable, then$$1) {\n  if (maybeThenable.constructor === promise.constructor && then$$1 === then && maybeThenable.constructor.resolve === resolve$1) {\n    handleOwnThenable(promise, maybeThenable);\n  } else {\n    if (then$$1 === GET_THEN_ERROR) {\n      reject(promise, GET_THEN_ERROR.error);\n      GET_THEN_ERROR.error = null;\n    } else if (then$$1 === undefined) {\n      fulfill(promise, maybeThenable);\n    } else if (isFunction(then$$1)) {\n      handleForeignThenable(promise, maybeThenable, then$$1);\n    } else {\n      fulfill(promise, maybeThenable);\n    }\n  }\n}\n\nfunction resolve(promise, value) {\n  if (promise === value) {\n    reject(promise, selfFulfillment());\n  } else if (objectOrFunction(value)) {\n    handleMaybeThenable(promise, value, getThen(value));\n  } else {\n    fulfill(promise, value);\n  }\n}\n\nfunction publishRejection(promise) {\n  if (promise._onerror) {\n    promise._onerror(promise._result);\n  }\n\n  publish(promise);\n}\n\nfunction fulfill(promise, value) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n\n  promise._result = value;\n  promise._state = FULFILLED;\n\n  if (promise._subscribers.length !== 0) {\n    asap(publish, promise);\n  }\n}\n\nfunction reject(promise, reason) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n  promise._state = REJECTED;\n  promise._result = reason;\n\n  asap(publishRejection, promise);\n}\n\nfunction subscribe(parent, child, onFulfillment, onRejection) {\n  var _subscribers = parent._subscribers;\n  var length = _subscribers.length;\n\n  parent._onerror = null;\n\n  _subscribers[length] = child;\n  _subscribers[length + FULFILLED] = onFulfillment;\n  _subscribers[length + REJECTED] = onRejection;\n\n  if (length === 0 && parent._state) {\n    asap(publish, parent);\n  }\n}\n\nfunction publish(promise) {\n  var subscribers = promise._subscribers;\n  var settled = promise._state;\n\n  if (subscribers.length === 0) {\n    return;\n  }\n\n  var child = undefined,\n      callback = undefined,\n      detail = promise._result;\n\n  for (var i = 0; i < subscribers.length; i += 3) {\n    child = subscribers[i];\n    callback = subscribers[i + settled];\n\n    if (child) {\n      invokeCallback(settled, child, callback, detail);\n    } else {\n      callback(detail);\n    }\n  }\n\n  promise._subscribers.length = 0;\n}\n\nfunction ErrorObject() {\n  this.error = null;\n}\n\nvar TRY_CATCH_ERROR = new ErrorObject();\n\nfunction tryCatch(callback, detail) {\n  try {\n    return callback(detail);\n  } catch (e) {\n    TRY_CATCH_ERROR.error = e;\n    return TRY_CATCH_ERROR;\n  }\n}\n\nfunction invokeCallback(settled, promise, callback, detail) {\n  var hasCallback = isFunction(callback),\n      value = undefined,\n      error = undefined,\n      succeeded = undefined,\n      failed = undefined;\n\n  if (hasCallback) {\n    value = tryCatch(callback, detail);\n\n    if (value === TRY_CATCH_ERROR) {\n      failed = true;\n      error = value.error;\n      value.error = null;\n    } else {\n      succeeded = true;\n    }\n\n    if (promise === value) {\n      reject(promise, cannotReturnOwn());\n      return;\n    }\n  } else {\n    value = detail;\n    succeeded = true;\n  }\n\n  if (promise._state !== PENDING) {\n    // noop\n  } else if (hasCallback && succeeded) {\n      resolve(promise, value);\n    } else if (failed) {\n      reject(promise, error);\n    } else if (settled === FULFILLED) {\n      fulfill(promise, value);\n    } else if (settled === REJECTED) {\n      reject(promise, value);\n    }\n}\n\nfunction initializePromise(promise, resolver) {\n  try {\n    resolver(function resolvePromise(value) {\n      resolve(promise, value);\n    }, function rejectPromise(reason) {\n      reject(promise, reason);\n    });\n  } catch (e) {\n    reject(promise, e);\n  }\n}\n\nvar id = 0;\nfunction nextId() {\n  return id++;\n}\n\nfunction makePromise(promise) {\n  promise[PROMISE_ID] = id++;\n  promise._state = undefined;\n  promise._result = undefined;\n  promise._subscribers = [];\n}\n\nfunction Enumerator$1(Constructor, input) {\n  this._instanceConstructor = Constructor;\n  this.promise = new Constructor(noop);\n\n  if (!this.promise[PROMISE_ID]) {\n    makePromise(this.promise);\n  }\n\n  if (isArray(input)) {\n    this.length = input.length;\n    this._remaining = input.length;\n\n    this._result = new Array(this.length);\n\n    if (this.length === 0) {\n      fulfill(this.promise, this._result);\n    } else {\n      this.length = this.length || 0;\n      this._enumerate(input);\n      if (this._remaining === 0) {\n        fulfill(this.promise, this._result);\n      }\n    }\n  } else {\n    reject(this.promise, validationError());\n  }\n}\n\nfunction validationError() {\n  return new Error('Array Methods must be provided an Array');\n}\n\nEnumerator$1.prototype._enumerate = function (input) {\n  for (var i = 0; this._state === PENDING && i < input.length; i++) {\n    this._eachEntry(input[i], i);\n  }\n};\n\nEnumerator$1.prototype._eachEntry = function (entry, i) {\n  var c = this._instanceConstructor;\n  var resolve$$1 = c.resolve;\n\n  if (resolve$$1 === resolve$1) {\n    var _then = getThen(entry);\n\n    if (_then === then && entry._state !== PENDING) {\n      this._settledAt(entry._state, i, entry._result);\n    } else if (typeof _then !== 'function') {\n      this._remaining--;\n      this._result[i] = entry;\n    } else if (c === Promise$2) {\n      var promise = new c(noop);\n      handleMaybeThenable(promise, entry, _then);\n      this._willSettleAt(promise, i);\n    } else {\n      this._willSettleAt(new c(function (resolve$$1) {\n        return resolve$$1(entry);\n      }), i);\n    }\n  } else {\n    this._willSettleAt(resolve$$1(entry), i);\n  }\n};\n\nEnumerator$1.prototype._settledAt = function (state, i, value) {\n  var promise = this.promise;\n\n  if (promise._state === PENDING) {\n    this._remaining--;\n\n    if (state === REJECTED) {\n      reject(promise, value);\n    } else {\n      this._result[i] = value;\n    }\n  }\n\n  if (this._remaining === 0) {\n    fulfill(promise, this._result);\n  }\n};\n\nEnumerator$1.prototype._willSettleAt = function (promise, i) {\n  var enumerator = this;\n\n  subscribe(promise, undefined, function (value) {\n    return enumerator._settledAt(FULFILLED, i, value);\n  }, function (reason) {\n    return enumerator._settledAt(REJECTED, i, reason);\n  });\n};\n\n/**\n  `Promise.all` accepts an array of promises, and returns a new promise which\n  is fulfilled with an array of fulfillment values for the passed promises, or\n  rejected with the reason of the first passed promise to be rejected. It casts all\n  elements of the passed iterable to promises as it runs this algorithm.\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = resolve(2);\n  let promise3 = resolve(3);\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // The array here would be [ 1, 2, 3 ];\n  });\n  ```\n\n  If any of the `promises` given to `all` are rejected, the first promise\n  that is rejected will be given as an argument to the returned promises's\n  rejection handler. For example:\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = reject(new Error(\"2\"));\n  let promise3 = reject(new Error(\"3\"));\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // Code here never runs because there are rejected promises!\n  }, function(error) {\n    // error.message === \"2\"\n  });\n  ```\n\n  @method all\n  @static\n  @param {Array} entries array of promises\n  @param {String} label optional string for labeling the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled when all `promises` have been\n  fulfilled, or rejected if any of them become rejected.\n  @static\n*/\nfunction all$1(entries) {\n  return new Enumerator$1(this, entries).promise;\n}\n\n/**\n  `Promise.race` returns a new promise which is settled in the same way as the\n  first passed promise to settle.\n\n  Example:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 2');\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // result === 'promise 2' because it was resolved before promise1\n    // was resolved.\n  });\n  ```\n\n  `Promise.race` is deterministic in that only the state of the first\n  settled promise matters. For example, even if other promises given to the\n  `promises` array argument are resolved, but the first settled promise has\n  become rejected before the other promises became fulfilled, the returned\n  promise will become rejected:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      reject(new Error('promise 2'));\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // Code here never runs\n  }, function(reason){\n    // reason.message === 'promise 2' because promise 2 became rejected before\n    // promise 1 became fulfilled\n  });\n  ```\n\n  An example real-world use case is implementing timeouts:\n\n  ```javascript\n  Promise.race([ajax('foo.json'), timeout(5000)])\n  ```\n\n  @method race\n  @static\n  @param {Array} promises array of promises to observe\n  Useful for tooling.\n  @return {Promise} a promise which settles in the same way as the first passed\n  promise to settle.\n*/\nfunction race$1(entries) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (!isArray(entries)) {\n    return new Constructor(function (_, reject) {\n      return reject(new TypeError('You must pass an array to race.'));\n    });\n  } else {\n    return new Constructor(function (resolve, reject) {\n      var length = entries.length;\n      for (var i = 0; i < length; i++) {\n        Constructor.resolve(entries[i]).then(resolve, reject);\n      }\n    });\n  }\n}\n\n/**\n  `Promise.reject` returns a promise rejected with the passed `reason`.\n  It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    reject(new Error('WHOOPS'));\n  });\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.reject(new Error('WHOOPS'));\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  @method reject\n  @static\n  @param {Any} reason value that the returned promise will be rejected with.\n  Useful for tooling.\n  @return {Promise} a promise rejected with the given `reason`.\n*/\nfunction reject$1(reason) {\n  /*jshint validthis:true */\n  var Constructor = this;\n  var promise = new Constructor(noop);\n  reject(promise, reason);\n  return promise;\n}\n\nfunction needsResolver() {\n  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n}\n\nfunction needsNew() {\n  throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n}\n\n/**\n  Promise objects represent the eventual result of an asynchronous operation. The\n  primary way of interacting with a promise is through its `then` method, which\n  registers callbacks to receive either a promise's eventual value or the reason\n  why the promise cannot be fulfilled.\n\n  Terminology\n  -----------\n\n  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n  - `thenable` is an object or function that defines a `then` method.\n  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n  - `exception` is a value that is thrown using the throw statement.\n  - `reason` is a value that indicates why a promise was rejected.\n  - `settled` the final resting state of a promise, fulfilled or rejected.\n\n  A promise can be in one of three states: pending, fulfilled, or rejected.\n\n  Promises that are fulfilled have a fulfillment value and are in the fulfilled\n  state.  Promises that are rejected have a rejection reason and are in the\n  rejected state.  A fulfillment value is never a thenable.\n\n  Promises can also be said to *resolve* a value.  If this value is also a\n  promise, then the original promise's settled state will match the value's\n  settled state.  So a promise that *resolves* a promise that rejects will\n  itself reject, and a promise that *resolves* a promise that fulfills will\n  itself fulfill.\n\n\n  Basic Usage:\n  ------------\n\n  ```js\n  let promise = new Promise(function(resolve, reject) {\n    // on success\n    resolve(value);\n\n    // on failure\n    reject(reason);\n  });\n\n  promise.then(function(value) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Advanced Usage:\n  ---------------\n\n  Promises shine when abstracting away asynchronous interactions such as\n  `XMLHttpRequest`s.\n\n  ```js\n  function getJSON(url) {\n    return new Promise(function(resolve, reject){\n      let xhr = new XMLHttpRequest();\n\n      xhr.open('GET', url);\n      xhr.onreadystatechange = handler;\n      xhr.responseType = 'json';\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send();\n\n      function handler() {\n        if (this.readyState === this.DONE) {\n          if (this.status === 200) {\n            resolve(this.response);\n          } else {\n            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n          }\n        }\n      };\n    });\n  }\n\n  getJSON('/posts.json').then(function(json) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Unlike callbacks, promises are great composable primitives.\n\n  ```js\n  Promise.all([\n    getJSON('/posts'),\n    getJSON('/comments')\n  ]).then(function(values){\n    values[0] // => postsJSON\n    values[1] // => commentsJSON\n\n    return values;\n  });\n  ```\n\n  @class Promise\n  @param {function} resolver\n  Useful for tooling.\n  @constructor\n*/\nfunction Promise$2(resolver) {\n  this[PROMISE_ID] = nextId();\n  this._result = this._state = undefined;\n  this._subscribers = [];\n\n  if (noop !== resolver) {\n    typeof resolver !== 'function' && needsResolver();\n    this instanceof Promise$2 ? initializePromise(this, resolver) : needsNew();\n  }\n}\n\nPromise$2.all = all$1;\nPromise$2.race = race$1;\nPromise$2.resolve = resolve$1;\nPromise$2.reject = reject$1;\nPromise$2._setScheduler = setScheduler;\nPromise$2._setAsap = setAsap;\nPromise$2._asap = asap;\n\nPromise$2.prototype = {\n  constructor: Promise$2,\n\n  /**\n    The primary way of interacting with a promise is through its `then` method,\n    which registers callbacks to receive either a promise's eventual value or the\n    reason why the promise cannot be fulfilled.\n  \n    ```js\n    findUser().then(function(user){\n      // user is available\n    }, function(reason){\n      // user is unavailable, and you are given the reason why\n    });\n    ```\n  \n    Chaining\n    --------\n  \n    The return value of `then` is itself a promise.  This second, 'downstream'\n    promise is resolved with the return value of the first promise's fulfillment\n    or rejection handler, or rejected if the handler throws an exception.\n  \n    ```js\n    findUser().then(function (user) {\n      return user.name;\n    }, function (reason) {\n      return 'default name';\n    }).then(function (userName) {\n      // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n      // will be `'default name'`\n    });\n  \n    findUser().then(function (user) {\n      throw new Error('Found user, but still unhappy');\n    }, function (reason) {\n      throw new Error('`findUser` rejected and we're unhappy');\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n      // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n    });\n    ```\n    If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n  \n    ```js\n    findUser().then(function (user) {\n      throw new PedagogicalException('Upstream error');\n    }).then(function (value) {\n      // never reached\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // The `PedgagocialException` is propagated all the way down to here\n    });\n    ```\n  \n    Assimilation\n    ------------\n  \n    Sometimes the value you want to propagate to a downstream promise can only be\n    retrieved asynchronously. This can be achieved by returning a promise in the\n    fulfillment or rejection handler. The downstream promise will then be pending\n    until the returned promise is settled. This is called *assimilation*.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // The user's comments are now available\n    });\n    ```\n  \n    If the assimliated promise rejects, then the downstream promise will also reject.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // If `findCommentsByAuthor` fulfills, we'll have the value here\n    }, function (reason) {\n      // If `findCommentsByAuthor` rejects, we'll have the reason here\n    });\n    ```\n  \n    Simple Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let result;\n  \n    try {\n      result = findResult();\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n    findResult(function(result, err){\n      if (err) {\n        // failure\n      } else {\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findResult().then(function(result){\n      // success\n    }, function(reason){\n      // failure\n    });\n    ```\n  \n    Advanced Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let author, books;\n  \n    try {\n      author = findAuthor();\n      books  = findBooksByAuthor(author);\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n  \n    function foundBooks(books) {\n  \n    }\n  \n    function failure(reason) {\n  \n    }\n  \n    findAuthor(function(author, err){\n      if (err) {\n        failure(err);\n        // failure\n      } else {\n        try {\n          findBoooksByAuthor(author, function(books, err) {\n            if (err) {\n              failure(err);\n            } else {\n              try {\n                foundBooks(books);\n              } catch(reason) {\n                failure(reason);\n              }\n            }\n          });\n        } catch(error) {\n          failure(err);\n        }\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findAuthor().\n      then(findBooksByAuthor).\n      then(function(books){\n        // found books\n    }).catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method then\n    @param {Function} onFulfilled\n    @param {Function} onRejected\n    Useful for tooling.\n    @return {Promise}\n  */\n  then: then,\n\n  /**\n    `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n    as the catch block of a try/catch statement.\n  \n    ```js\n    function findAuthor(){\n      throw new Error('couldn't find that author');\n    }\n  \n    // synchronous\n    try {\n      findAuthor();\n    } catch(reason) {\n      // something went wrong\n    }\n  \n    // async with promises\n    findAuthor().catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method catch\n    @param {Function} onRejection\n    Useful for tooling.\n    @return {Promise}\n  */\n  'catch': function _catch(onRejection) {\n    return this.then(null, onRejection);\n  }\n};\n\n/*global self*/\nfunction polyfill$1() {\n    var local = undefined;\n\n    if (typeof global !== 'undefined') {\n        local = global;\n    } else if (typeof self !== 'undefined') {\n        local = self;\n    } else {\n        try {\n            local = Function('return this')();\n        } catch (e) {\n            throw new Error('polyfill failed because global object is unavailable in this environment');\n        }\n    }\n\n    var P = local.Promise;\n\n    if (P) {\n        var promiseToString = null;\n        try {\n            promiseToString = Object.prototype.toString.call(P.resolve());\n        } catch (e) {\n            // silently ignored\n        }\n\n        if (promiseToString === '[object Promise]' && !P.cast) {\n            return;\n        }\n    }\n\n    local.Promise = Promise$2;\n}\n\n// Strange compat..\nPromise$2.polyfill = polyfill$1;\nPromise$2.Promise = Promise$2;\n\nreturn Promise$2;\n\n})));\n\n//# sourceMappingURL=es6-promise.map\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","/**\n * Module dependencies.\n */\n\nvar tty = require('tty');\nvar util = require('util');\n\n/**\n * This is the Node.js implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.init = init;\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\n\n/**\n * Colors.\n */\n\nexports.colors = [ 6, 2, 3, 4, 5, 1 ];\n\ntry {\n  var supportsColor = require('supports-color');\n  if (supportsColor && supportsColor.level >= 2) {\n    exports.colors = [\n      20, 21, 26, 27, 32, 33, 38, 39, 40, 41, 42, 43, 44, 45, 56, 57, 62, 63, 68,\n      69, 74, 75, 76, 77, 78, 79, 80, 81, 92, 93, 98, 99, 112, 113, 128, 129, 134,\n      135, 148, 149, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171,\n      172, 173, 178, 179, 184, 185, 196, 197, 198, 199, 200, 201, 202, 203, 204,\n      205, 206, 207, 208, 209, 214, 215, 220, 221\n    ];\n  }\n} catch (err) {\n  // swallow - we only care if `supports-color` is available; it doesn't have to be.\n}\n\n/**\n * Build up the default `inspectOpts` object from the environment variables.\n *\n *   $ DEBUG_COLORS=no DEBUG_DEPTH=10 DEBUG_SHOW_HIDDEN=enabled node script.js\n */\n\nexports.inspectOpts = Object.keys(process.env).filter(function (key) {\n  return /^debug_/i.test(key);\n}).reduce(function (obj, key) {\n  // camel-case\n  var prop = key\n    .substring(6)\n    .toLowerCase()\n    .replace(/_([a-z])/g, function (_, k) { return k.toUpperCase() });\n\n  // coerce string value into JS value\n  var val = process.env[key];\n  if (/^(yes|on|true|enabled)$/i.test(val)) val = true;\n  else if (/^(no|off|false|disabled)$/i.test(val)) val = false;\n  else if (val === 'null') val = null;\n  else val = Number(val);\n\n  obj[prop] = val;\n  return obj;\n}, {});\n\n/**\n * Is stdout a TTY? Colored output is enabled when `true`.\n */\n\nfunction useColors() {\n  return 'colors' in exports.inspectOpts\n    ? Boolean(exports.inspectOpts.colors)\n    : tty.isatty(process.stderr.fd);\n}\n\n/**\n * Map %o to `util.inspect()`, all on a single line.\n */\n\nexports.formatters.o = function(v) {\n  this.inspectOpts.colors = this.useColors;\n  return util.inspect(v, this.inspectOpts)\n    .split('\\n').map(function(str) {\n      return str.trim()\n    }).join(' ');\n};\n\n/**\n * Map %o to `util.inspect()`, allowing multiple lines if needed.\n */\n\nexports.formatters.O = function(v) {\n  this.inspectOpts.colors = this.useColors;\n  return util.inspect(v, this.inspectOpts);\n};\n\n/**\n * Adds ANSI color escape codes if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var name = this.namespace;\n  var useColors = this.useColors;\n\n  if (useColors) {\n    var c = this.color;\n    var colorCode = '\\u001b[3' + (c < 8 ? c : '8;5;' + c);\n    var prefix = '  ' + colorCode + ';1m' + name + ' ' + '\\u001b[0m';\n\n    args[0] = prefix + args[0].split('\\n').join('\\n' + prefix);\n    args.push(colorCode + 'm+' + exports.humanize(this.diff) + '\\u001b[0m');\n  } else {\n    args[0] = getDate() + name + ' ' + args[0];\n  }\n}\n\nfunction getDate() {\n  if (exports.inspectOpts.hideDate) {\n    return '';\n  } else {\n    return new Date().toISOString() + ' ';\n  }\n}\n\n/**\n * Invokes `util.format()` with the specified arguments and writes to stderr.\n */\n\nfunction log() {\n  return process.stderr.write(util.format.apply(util, arguments) + '\\n');\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  if (null == namespaces) {\n    // If you set a process.env field to null or undefined, it gets cast to the\n    // string 'null' or 'undefined'. Just delete instead.\n    delete process.env.DEBUG;\n  } else {\n    process.env.DEBUG = namespaces;\n  }\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  return process.env.DEBUG;\n}\n\n/**\n * Init logic for `debug` instances.\n *\n * Create a new `inspectOpts` object in case `useColors` is set\n * differently for a particular `debug` instance.\n */\n\nfunction init (debug) {\n  debug.inspectOpts = {};\n\n  var keys = Object.keys(exports.inspectOpts);\n  for (var i = 0; i < keys.length; i++) {\n    debug.inspectOpts[keys[i]] = exports.inspectOpts[keys[i]];\n  }\n}\n\n/**\n * Enable namespaces listed in `process.env.DEBUG` initially.\n */\n\nexports.enable(load());\n","module.exports = require(\"tty\");","'use strict';\nconst os = require('os');\nconst hasFlag = require('has-flag');\n\nconst {env} = process;\n\nlet forceColor;\nif (hasFlag('no-color') ||\n\thasFlag('no-colors') ||\n\thasFlag('color=false') ||\n\thasFlag('color=never')) {\n\tforceColor = 0;\n} else if (hasFlag('color') ||\n\thasFlag('colors') ||\n\thasFlag('color=true') ||\n\thasFlag('color=always')) {\n\tforceColor = 1;\n}\nif ('FORCE_COLOR' in env) {\n\tif (env.FORCE_COLOR === true || env.FORCE_COLOR === 'true') {\n\t\tforceColor = 1;\n\t} else if (env.FORCE_COLOR === false || env.FORCE_COLOR === 'false') {\n\t\tforceColor = 0;\n\t} else {\n\t\tforceColor = env.FORCE_COLOR.length === 0 ? 1 : Math.min(parseInt(env.FORCE_COLOR, 10), 3);\n\t}\n}\n\nfunction translateLevel(level) {\n\tif (level === 0) {\n\t\treturn false;\n\t}\n\n\treturn {\n\t\tlevel,\n\t\thasBasic: true,\n\t\thas256: level >= 2,\n\t\thas16m: level >= 3\n\t};\n}\n\nfunction supportsColor(stream) {\n\tif (forceColor === 0) {\n\t\treturn 0;\n\t}\n\n\tif (hasFlag('color=16m') ||\n\t\thasFlag('color=full') ||\n\t\thasFlag('color=truecolor')) {\n\t\treturn 3;\n\t}\n\n\tif (hasFlag('color=256')) {\n\t\treturn 2;\n\t}\n\n\tif (stream && !stream.isTTY && forceColor === undefined) {\n\t\treturn 0;\n\t}\n\n\tconst min = forceColor || 0;\n\n\tif (env.TERM === 'dumb') {\n\t\treturn min;\n\t}\n\n\tif (process.platform === 'win32') {\n\t\t// Node.js 7.5.0 is the first version of Node.js to include a patch to\n\t\t// libuv that enables 256 color output on Windows. Anything earlier and it\n\t\t// won't work. However, here we target Node.js 8 at minimum as it is an LTS\n\t\t// release, and Node.js 7 is not. Windows 10 build 10586 is the first Windows\n\t\t// release that supports 256 colors. Windows 10 build 14931 is the first release\n\t\t// that supports 16m/TrueColor.\n\t\tconst osRelease = os.release().split('.');\n\t\tif (\n\t\t\tNumber(process.versions.node.split('.')[0]) >= 8 &&\n\t\t\tNumber(osRelease[0]) >= 10 &&\n\t\t\tNumber(osRelease[2]) >= 10586\n\t\t) {\n\t\t\treturn Number(osRelease[2]) >= 14931 ? 3 : 2;\n\t\t}\n\n\t\treturn 1;\n\t}\n\n\tif ('CI' in env) {\n\t\tif (['TRAVIS', 'CIRCLECI', 'APPVEYOR', 'GITLAB_CI'].some(sign => sign in env) || env.CI_NAME === 'codeship') {\n\t\t\treturn 1;\n\t\t}\n\n\t\treturn min;\n\t}\n\n\tif ('TEAMCITY_VERSION' in env) {\n\t\treturn /^(9\\.(0*[1-9]\\d*)\\.|\\d{2,}\\.)/.test(env.TEAMCITY_VERSION) ? 1 : 0;\n\t}\n\n\tif (env.COLORTERM === 'truecolor') {\n\t\treturn 3;\n\t}\n\n\tif ('TERM_PROGRAM' in env) {\n\t\tconst version = parseInt((env.TERM_PROGRAM_VERSION || '').split('.')[0], 10);\n\n\t\tswitch (env.TERM_PROGRAM) {\n\t\t\tcase 'iTerm.app':\n\t\t\t\treturn version >= 3 ? 3 : 2;\n\t\t\tcase 'Apple_Terminal':\n\t\t\t\treturn 2;\n\t\t\t// No default\n\t\t}\n\t}\n\n\tif (/-256(color)?$/i.test(env.TERM)) {\n\t\treturn 2;\n\t}\n\n\tif (/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)) {\n\t\treturn 1;\n\t}\n\n\tif ('COLORTERM' in env) {\n\t\treturn 1;\n\t}\n\n\treturn min;\n}\n\nfunction getSupportLevel(stream) {\n\tconst level = supportsColor(stream);\n\treturn translateLevel(level);\n}\n\nmodule.exports = {\n\tsupportsColor: getSupportLevel,\n\tstdout: getSupportLevel(process.stdout),\n\tstderr: getSupportLevel(process.stderr)\n};\n","'use strict';\nmodule.exports = (flag, argv) => {\n\targv = argv || process.argv;\n\tconst prefix = flag.startsWith('-') ? '' : (flag.length === 1 ? '-' : '--');\n\tconst pos = argv.indexOf(prefix + flag);\n\tconst terminatorPos = argv.indexOf('--');\n\treturn pos !== -1 && (terminatorPos === -1 ? true : pos < terminatorPos);\n};\n","/**\n * Module dependencies.\n */\n\nvar net = require('net');\nvar tls = require('tls');\nvar url = require('url');\nvar assert = require('assert');\nvar Agent = require('agent-base');\nvar inherits = require('util').inherits;\nvar debug = require('debug')('https-proxy-agent');\n\n/**\n * Module exports.\n */\n\nmodule.exports = HttpsProxyAgent;\n\n/**\n * The `HttpsProxyAgent` implements an HTTP Agent subclass that connects to the\n * specified \"HTTP(s) proxy server\" in order to proxy HTTPS requests.\n *\n * @api public\n */\n\nfunction HttpsProxyAgent(opts) {\n\tif (!(this instanceof HttpsProxyAgent)) return new HttpsProxyAgent(opts);\n\tif ('string' == typeof opts) opts = url.parse(opts);\n\tif (!opts)\n\t\tthrow new Error(\n\t\t\t'an HTTP(S) proxy server `host` and `port` must be specified!'\n\t\t);\n\tdebug('creating new HttpsProxyAgent instance: %o', opts);\n\tAgent.call(this, opts);\n\n\tvar proxy = Object.assign({}, opts);\n\n\t// if `true`, then connect to the proxy server over TLS. defaults to `false`.\n\tthis.secureProxy = proxy.protocol\n\t\t? /^https:?$/i.test(proxy.protocol)\n\t\t: false;\n\n\t// prefer `hostname` over `host`, and set the `port` if needed\n\tproxy.host = proxy.hostname || proxy.host;\n\tproxy.port = +proxy.port || (this.secureProxy ? 443 : 80);\n\n\t// ALPN is supported by Node.js >= v5.\n\t// attempt to negotiate http/1.1 for proxy servers that support http/2\n\tif (this.secureProxy && !('ALPNProtocols' in proxy)) {\n\t\tproxy.ALPNProtocols = ['http 1.1'];\n\t}\n\n\tif (proxy.host && proxy.path) {\n\t\t// if both a `host` and `path` are specified then it's most likely the\n\t\t// result of a `url.parse()` call... we need to remove the `path` portion so\n\t\t// that `net.connect()` doesn't attempt to open that as a unix socket file.\n\t\tdelete proxy.path;\n\t\tdelete proxy.pathname;\n\t}\n\n\tthis.proxy = proxy;\n\tthis.defaultPort = 443;\n}\ninherits(HttpsProxyAgent, Agent);\n\n/**\n * Called when the node-core HTTP client library is creating a new HTTP request.\n *\n * @api public\n */\n\nHttpsProxyAgent.prototype.callback = function connect(req, opts, fn) {\n\tvar proxy = this.proxy;\n\n\t// create a socket connection to the proxy server\n\tvar socket;\n\tif (this.secureProxy) {\n\t\tsocket = tls.connect(proxy);\n\t} else {\n\t\tsocket = net.connect(proxy);\n\t}\n\n\t// we need to buffer any HTTP traffic that happens with the proxy before we get\n\t// the CONNECT response, so that if the response is anything other than an \"200\"\n\t// response code, then we can re-play the \"data\" events on the socket once the\n\t// HTTP parser is hooked up...\n\tvar buffers = [];\n\tvar buffersLength = 0;\n\n\tfunction read() {\n\t\tvar b = socket.read();\n\t\tif (b) ondata(b);\n\t\telse socket.once('readable', read);\n\t}\n\n\tfunction cleanup() {\n\t\tsocket.removeListener('end', onend);\n\t\tsocket.removeListener('error', onerror);\n\t\tsocket.removeListener('close', onclose);\n\t\tsocket.removeListener('readable', read);\n\t}\n\n\tfunction onclose(err) {\n\t\tdebug('onclose had error %o', err);\n\t}\n\n\tfunction onend() {\n\t\tdebug('onend');\n\t}\n\n\tfunction onerror(err) {\n\t\tcleanup();\n\t\tfn(err);\n\t}\n\n\tfunction ondata(b) {\n\t\tbuffers.push(b);\n\t\tbuffersLength += b.length;\n\t\tvar buffered = Buffer.concat(buffers, buffersLength);\n\t\tvar str = buffered.toString('ascii');\n\n\t\tif (!~str.indexOf('\\r\\n\\r\\n')) {\n\t\t\t// keep buffering\n\t\t\tdebug('have not received end of HTTP headers yet...');\n\t\t\tread();\n\t\t\treturn;\n\t\t}\n\n\t\tvar firstLine = str.substring(0, str.indexOf('\\r\\n'));\n\t\tvar statusCode = +firstLine.split(' ')[1];\n\t\tdebug('got proxy server response: %o', firstLine);\n\n\t\tif (200 == statusCode) {\n\t\t\t// 200 Connected status code!\n\t\t\tvar sock = socket;\n\n\t\t\t// nullify the buffered data since we won't be needing it\n\t\t\tbuffers = buffered = null;\n\n\t\t\tif (opts.secureEndpoint) {\n\t\t\t\t// since the proxy is connecting to an SSL server, we have\n\t\t\t\t// to upgrade this socket connection to an SSL connection\n\t\t\t\tdebug(\n\t\t\t\t\t'upgrading proxy-connected socket to TLS connection: %o',\n\t\t\t\t\topts.host\n\t\t\t\t);\n\t\t\t\topts.socket = socket;\n\t\t\t\topts.servername = opts.servername || opts.host;\n\t\t\t\topts.host = null;\n\t\t\t\topts.hostname = null;\n\t\t\t\topts.port = null;\n\t\t\t\tsock = tls.connect(opts);\n\t\t\t}\n\n\t\t\tcleanup();\n\t\t\treq.once('socket', resume);\n\t\t\tfn(null, sock);\n\t\t} else {\n\t\t\t// some other status code that's not 200... need to re-play the HTTP header\n\t\t\t// \"data\" events onto the socket once the HTTP machinery is attached so\n\t\t\t// that the node core `http` can parse and handle the error status code\n\t\t\tcleanup();\n\n\t\t\t// the original socket is closed, and a new closed socket is\n\t\t\t// returned instead, so that the proxy doesn't get the HTTP request\n\t\t\t// written to it (which may contain `Authorization` headers or other\n\t\t\t// sensitive data).\n\t\t\t//\n\t\t\t// See: https://hackerone.com/reports/541502\n\t\t\tsocket.destroy();\n\t\t\tsocket = new net.Socket();\n\t\t\tsocket.readable = true;\n\n\n\t\t\t// save a reference to the concat'd Buffer for the `onsocket` callback\n\t\t\tbuffers = buffered;\n\n\t\t\t// need to wait for the \"socket\" event to re-play the \"data\" events\n\t\t\treq.once('socket', onsocket);\n\n\t\t\tfn(null, socket);\n\t\t}\n\t}\n\n\tfunction onsocket(socket) {\n\t\tdebug('replaying proxy buffer for failed request');\n\t\tassert(socket.listenerCount('data') > 0);\n\n\t\t// replay the \"buffers\" Buffer onto the `socket`, since at this point\n\t\t// the HTTP module machinery has been hooked up for the user\n\t\tsocket.push(buffers);\n\n\t\t// nullify the cached Buffer instance\n\t\tbuffers = null;\n\t}\n\n\tsocket.on('error', onerror);\n\tsocket.on('close', onclose);\n\tsocket.on('end', onend);\n\n\tread();\n\n\tvar hostname = opts.host + ':' + opts.port;\n\tvar msg = 'CONNECT ' + hostname + ' HTTP/1.1\\r\\n';\n\n\tvar headers = Object.assign({}, proxy.headers);\n\tif (proxy.auth) {\n\t\theaders['Proxy-Authorization'] =\n\t\t\t'Basic ' + Buffer.from(proxy.auth).toString('base64');\n\t}\n\n\t// the Host header should only include the port\n\t// number when it is a non-standard port\n\tvar host = opts.host;\n\tif (!isDefaultPort(opts.port, opts.secureEndpoint)) {\n\t\thost += ':' + opts.port;\n\t}\n\theaders['Host'] = host;\n\n\theaders['Connection'] = 'close';\n\tObject.keys(headers).forEach(function(name) {\n\t\tmsg += name + ': ' + headers[name] + '\\r\\n';\n\t});\n\n\tsocket.write(msg + '\\r\\n');\n};\n\n/**\n * Resumes a socket.\n *\n * @param {(net.Socket|tls.Socket)} socket The socket to resume\n * @api public\n */\n\nfunction resume(socket) {\n\tsocket.resume();\n}\n\nfunction isDefaultPort(port, secure) {\n\treturn Boolean((!secure && port === 80) || (secure && port === 443));\n}\n","module.exports = require(\"assert\");","'use strict';\nrequire('./patch-core');\nconst inherits = require('util').inherits;\nconst promisify = require('es6-promisify');\nconst EventEmitter = require('events').EventEmitter;\n\nmodule.exports = Agent;\n\nfunction isAgent(v) {\n  return v && typeof v.addRequest === 'function';\n}\n\n/**\n * Base `http.Agent` implementation.\n * No pooling/keep-alive is implemented by default.\n *\n * @param {Function} callback\n * @api public\n */\nfunction Agent(callback, _opts) {\n  if (!(this instanceof Agent)) {\n    return new Agent(callback, _opts);\n  }\n\n  EventEmitter.call(this);\n\n  // The callback gets promisified if it has 3 parameters\n  // (i.e. it has a callback function) lazily\n  this._promisifiedCallback = false;\n\n  let opts = _opts;\n  if ('function' === typeof callback) {\n    this.callback = callback;\n  } else if (callback) {\n    opts = callback;\n  }\n\n  // timeout for the socket to be returned from the callback\n  this.timeout = (opts && opts.timeout) || null;\n\n  this.options = opts;\n}\ninherits(Agent, EventEmitter);\n\n/**\n * Override this function in your subclass!\n */\nAgent.prototype.callback = function callback(req, opts) {\n  throw new Error(\n    '\"agent-base\" has no default implementation, you must subclass and override `callback()`'\n  );\n};\n\n/**\n * Called by node-core's \"_http_client.js\" module when creating\n * a new HTTP request with this Agent instance.\n *\n * @api public\n */\nAgent.prototype.addRequest = function addRequest(req, _opts) {\n  const ownOpts = Object.assign({}, _opts);\n\n  // Set default `host` for HTTP to localhost\n  if (null == ownOpts.host) {\n    ownOpts.host = 'localhost';\n  }\n\n  // Set default `port` for HTTP if none was explicitly specified\n  if (null == ownOpts.port) {\n    ownOpts.port = ownOpts.secureEndpoint ? 443 : 80;\n  }\n\n  const opts = Object.assign({}, this.options, ownOpts);\n\n  if (opts.host && opts.path) {\n    // If both a `host` and `path` are specified then it's most likely the\n    // result of a `url.parse()` call... we need to remove the `path` portion so\n    // that `net.connect()` doesn't attempt to open that as a unix socket file.\n    delete opts.path;\n  }\n\n  delete opts.agent;\n  delete opts.hostname;\n  delete opts._defaultAgent;\n  delete opts.defaultPort;\n  delete opts.createConnection;\n\n  // Hint to use \"Connection: close\"\n  // XXX: non-documented `http` module API :(\n  req._last = true;\n  req.shouldKeepAlive = false;\n\n  // Create the `stream.Duplex` instance\n  let timeout;\n  let timedOut = false;\n  const timeoutMs = this.timeout;\n  const freeSocket = this.freeSocket;\n\n  function onerror(err) {\n    if (req._hadError) return;\n    req.emit('error', err);\n    // For Safety. Some additional errors might fire later on\n    // and we need to make sure we don't double-fire the error event.\n    req._hadError = true;\n  }\n\n  function ontimeout() {\n    timeout = null;\n    timedOut = true;\n    const err = new Error(\n      'A \"socket\" was not created for HTTP request before ' + timeoutMs + 'ms'\n    );\n    err.code = 'ETIMEOUT';\n    onerror(err);\n  }\n\n  function callbackError(err) {\n    if (timedOut) return;\n    if (timeout != null) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n    onerror(err);\n  }\n\n  function onsocket(socket) {\n    if (timedOut) return;\n    if (timeout != null) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n    if (isAgent(socket)) {\n      // `socket` is actually an http.Agent instance, so relinquish\n      // responsibility for this `req` to the Agent from here on\n      socket.addRequest(req, opts);\n    } else if (socket) {\n      function onfree() {\n        freeSocket(socket, opts);\n      }\n      socket.on('free', onfree);\n      req.onSocket(socket);\n    } else {\n      const err = new Error(\n        'no Duplex stream was returned to agent-base for `' + req.method + ' ' + req.path + '`'\n      );\n      onerror(err);\n    }\n  }\n\n  if (!this._promisifiedCallback && this.callback.length >= 3) {\n    // Legacy callback function - convert to a Promise\n    this.callback = promisify(this.callback, this);\n    this._promisifiedCallback = true;\n  }\n\n  if (timeoutMs > 0) {\n    timeout = setTimeout(ontimeout, timeoutMs);\n  }\n\n  try {\n    Promise.resolve(this.callback(req, opts)).then(onsocket, callbackError);\n  } catch (err) {\n    Promise.reject(err).catch(callbackError);\n  }\n};\n\nAgent.prototype.freeSocket = function freeSocket(socket, opts) {\n  // TODO reuse sockets\n  socket.destroy();\n};\n","'use strict';\nconst url = require('url');\nconst https = require('https');\n\n/**\n * This currently needs to be applied to all Node.js versions\n * in order to determine if the `req` is an HTTP or HTTPS request.\n *\n * There is currently no PR attempting to move this property upstream.\n */\nconst patchMarker = \"__agent_base_https_request_patched__\";\nif (!https.request[patchMarker]) {\n  https.request = (function(request) {\n    return function(_options, cb) {\n      let options;\n      if (typeof _options === 'string') {\n        options = url.parse(_options);\n      } else {\n        options = Object.assign({}, _options);\n      }\n      if (null == options.port) {\n        options.port = 443;\n      }\n      options.secureEndpoint = true;\n      return request.call(https, options, cb);\n    };\n  })(https.request);\n  https.request[patchMarker] = true;\n}\n\n/**\n * This is needed for Node.js >= 9.0.0 to make sure `https.get()` uses the\n * patched `https.request()`.\n *\n * Ref: https://github.com/nodejs/node/commit/5118f31\n */\nhttps.get = function (_url, _options, cb) {\n    let options;\n    if (typeof _url === 'string' && _options && typeof _options !== 'function') {\n      options = Object.assign({}, url.parse(_url), _options);\n    } else if (!_options && !cb) {\n      options = _url;\n    } else if (!cb) {\n      options = _url;\n      cb = _options;\n    }\n\n  const req = https.request(options, cb);\n  req.end();\n  return req;\n};\n","module.exports = require(\"zlib\");","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar path = require(\"path\");\r\nvar fs = require(\"fs\");\r\nvar toString = Object.prototype.toString;\r\nfunction isDefined(value) {\r\n    return typeof value !== 'undefined';\r\n}\r\nfunction isNumber(value) {\r\n    return toString.call(value) === '[object Number]';\r\n}\r\nfunction isString(value) {\r\n    return toString.call(value) === '[object String]';\r\n}\r\nfunction isBoolean(value) {\r\n    return value === true || value === false;\r\n}\r\nfunction readJsonFileSync(filename) {\r\n    return JSON.parse(fs.readFileSync(filename, 'utf8'));\r\n}\r\nvar MessageFormat;\r\n(function (MessageFormat) {\r\n    MessageFormat[\"file\"] = \"file\";\r\n    MessageFormat[\"bundle\"] = \"bundle\";\r\n    MessageFormat[\"both\"] = \"both\";\r\n})(MessageFormat = exports.MessageFormat || (exports.MessageFormat = {}));\r\nvar BundleFormat;\r\n(function (BundleFormat) {\r\n    // the nls.bundle format\r\n    BundleFormat[\"standalone\"] = \"standalone\";\r\n    BundleFormat[\"languagePack\"] = \"languagePack\";\r\n})(BundleFormat = exports.BundleFormat || (exports.BundleFormat = {}));\r\nvar LocalizeInfo;\r\n(function (LocalizeInfo) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && isDefined(candidate.key) && isDefined(candidate.comment);\r\n    }\r\n    LocalizeInfo.is = is;\r\n})(LocalizeInfo || (LocalizeInfo = {}));\r\nvar resolvedLanguage;\r\nvar resolvedBundles;\r\nvar options;\r\nvar isPseudo;\r\nfunction initializeSettings() {\r\n    options = { locale: undefined, language: undefined, languagePackSupport: false, cacheLanguageResolution: true, messageFormat: MessageFormat.bundle };\r\n    if (isString(process.env.VSCODE_NLS_CONFIG)) {\r\n        try {\r\n            var vscodeOptions = JSON.parse(process.env.VSCODE_NLS_CONFIG);\r\n            var language = void 0;\r\n            var locale = void 0;\r\n            if (vscodeOptions.availableLanguages) {\r\n                var value = vscodeOptions.availableLanguages['*'];\r\n                if (isString(value)) {\r\n                    language = value;\r\n                }\r\n            }\r\n            if (isString(vscodeOptions.locale)) {\r\n                options.locale = vscodeOptions.locale.toLowerCase();\r\n            }\r\n            if (language === undefined) {\r\n                options.language = options.locale;\r\n            }\r\n            else if (language !== 'en') {\r\n                options.language = language;\r\n            }\r\n            if (isBoolean(vscodeOptions._languagePackSupport)) {\r\n                options.languagePackSupport = vscodeOptions._languagePackSupport;\r\n            }\r\n            if (isString(vscodeOptions._cacheRoot)) {\r\n                options.cacheRoot = vscodeOptions._cacheRoot;\r\n            }\r\n            if (isString(vscodeOptions._languagePackId)) {\r\n                options.languagePackId = vscodeOptions._languagePackId;\r\n            }\r\n            if (isString(vscodeOptions._translationsConfigFile)) {\r\n                options.translationsConfigFile = vscodeOptions._translationsConfigFile;\r\n                try {\r\n                    options.translationsConfig = readJsonFileSync(options.translationsConfigFile);\r\n                }\r\n                catch (error) {\r\n                    // We can't read the translation config file. Mark the cache as corrupted.\r\n                    if (vscodeOptions._corruptedFile) {\r\n                        fs.writeFile(vscodeOptions._corruptedFile, 'corrupted', 'utf8', function (err) {\r\n                            console.error(err);\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        catch (_a) {\r\n            // Do nothing.\r\n        }\r\n    }\r\n    isPseudo = options.locale === 'pseudo';\r\n    resolvedLanguage = undefined;\r\n    resolvedBundles = Object.create(null);\r\n}\r\ninitializeSettings();\r\nfunction supportsLanguagePack() {\r\n    return options.languagePackSupport === true && options.cacheRoot !== undefined && options.languagePackId !== undefined && options.translationsConfigFile !== undefined\r\n        && options.translationsConfig !== undefined;\r\n}\r\nfunction format(message, args) {\r\n    var result;\r\n    if (isPseudo) {\r\n        // FF3B and FF3D is the Unicode zenkaku representation for [ and ]\r\n        message = '\\uFF3B' + message.replace(/[aouei]/g, '$&$&') + '\\uFF3D';\r\n    }\r\n    if (args.length === 0) {\r\n        result = message;\r\n    }\r\n    else {\r\n        result = message.replace(/\\{(\\d+)\\}/g, function (match, rest) {\r\n            var index = rest[0];\r\n            var arg = args[index];\r\n            var replacement = match;\r\n            if (typeof arg === 'string') {\r\n                replacement = arg;\r\n            }\r\n            else if (typeof arg === 'number' || typeof arg === 'boolean' || arg === void 0 || arg === null) {\r\n                replacement = String(arg);\r\n            }\r\n            return replacement;\r\n        });\r\n    }\r\n    return result;\r\n}\r\nfunction createScopedLocalizeFunction(messages) {\r\n    return function (key, message) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        if (isNumber(key)) {\r\n            if (key >= messages.length) {\r\n                console.error(\"Broken localize call found. Index out of bounds. Stacktrace is\\n: \" + new Error('').stack);\r\n                return;\r\n            }\r\n            return format(messages[key], args);\r\n        }\r\n        else {\r\n            if (isString(message)) {\r\n                console.warn(\"Message \" + message + \" didn't get externalized correctly.\");\r\n                return format(message, args);\r\n            }\r\n            else {\r\n                console.error(\"Broken localize call found. Stacktrace is\\n: \" + new Error('').stack);\r\n            }\r\n        }\r\n    };\r\n}\r\nfunction localize(key, message) {\r\n    var args = [];\r\n    for (var _i = 2; _i < arguments.length; _i++) {\r\n        args[_i - 2] = arguments[_i];\r\n    }\r\n    return format(message, args);\r\n}\r\nfunction resolveLanguage(file) {\r\n    var resolvedLanguage;\r\n    if (options.cacheLanguageResolution && resolvedLanguage) {\r\n        resolvedLanguage = resolvedLanguage;\r\n    }\r\n    else {\r\n        if (isPseudo || !options.language) {\r\n            resolvedLanguage = '.nls.json';\r\n        }\r\n        else {\r\n            var locale = options.language;\r\n            while (locale) {\r\n                var candidate = '.nls.' + locale + '.json';\r\n                if (fs.existsSync(file + candidate)) {\r\n                    resolvedLanguage = candidate;\r\n                    break;\r\n                }\r\n                else {\r\n                    var index = locale.lastIndexOf('-');\r\n                    if (index > 0) {\r\n                        locale = locale.substring(0, index);\r\n                    }\r\n                    else {\r\n                        resolvedLanguage = '.nls.json';\r\n                        locale = null;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (options.cacheLanguageResolution) {\r\n            resolvedLanguage = resolvedLanguage;\r\n        }\r\n    }\r\n    return file + resolvedLanguage;\r\n}\r\nfunction findInTheBoxBundle(root) {\r\n    var language = options.language;\r\n    while (language) {\r\n        var candidate = path.join(root, \"nls.bundle.\" + language + \".json\");\r\n        if (fs.existsSync(candidate)) {\r\n            return candidate;\r\n        }\r\n        else {\r\n            var index = language.lastIndexOf('-');\r\n            if (index > 0) {\r\n                language = language.substring(0, index);\r\n            }\r\n            else {\r\n                language = undefined;\r\n            }\r\n        }\r\n    }\r\n    // Test if we can reslove the default bundle.\r\n    if (language === undefined) {\r\n        var candidate = path.join(root, 'nls.bundle.json');\r\n        if (fs.existsSync(candidate)) {\r\n            return candidate;\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nfunction mkdir(directory) {\r\n    try {\r\n        fs.mkdirSync(directory);\r\n    }\r\n    catch (err) {\r\n        if (err.code === 'EEXIST') {\r\n            return;\r\n        }\r\n        else if (err.code === 'ENOENT') {\r\n            var parent = path.dirname(directory);\r\n            if (parent !== directory) {\r\n                mkdir(parent);\r\n                fs.mkdirSync(directory);\r\n            }\r\n        }\r\n        else {\r\n            throw err;\r\n        }\r\n    }\r\n}\r\nfunction createDefaultNlsBundle(folder) {\r\n    var metaData = readJsonFileSync(path.join(folder, 'nls.metadata.json'));\r\n    var result = Object.create(null);\r\n    for (var module_1 in metaData) {\r\n        var entry = metaData[module_1];\r\n        result[module_1] = entry.messages;\r\n    }\r\n    return result;\r\n}\r\nfunction createNLSBundle(header, metaDataPath) {\r\n    var languagePackLocation = options.translationsConfig[header.id];\r\n    if (!languagePackLocation) {\r\n        return undefined;\r\n    }\r\n    var languagePack = readJsonFileSync(languagePackLocation).contents;\r\n    var metaData = readJsonFileSync(path.join(metaDataPath, 'nls.metadata.json'));\r\n    var result = Object.create(null);\r\n    for (var module_2 in metaData) {\r\n        var entry = metaData[module_2];\r\n        var translations = languagePack[header.outDir + \"/\" + module_2];\r\n        if (translations) {\r\n            var resultMessages = [];\r\n            for (var i = 0; i < entry.keys.length; i++) {\r\n                var messageKey = entry.keys[i];\r\n                var key = isString(messageKey) ? messageKey : messageKey.key;\r\n                var translatedMessage = translations[key];\r\n                if (translatedMessage === undefined) {\r\n                    translatedMessage = entry.messages[i];\r\n                }\r\n                resultMessages.push(translatedMessage);\r\n            }\r\n            result[module_2] = resultMessages;\r\n        }\r\n        else {\r\n            result[module_2] = entry.messages;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction touch(file) {\r\n    var d = new Date();\r\n    fs.utimes(file, d, d, function () {\r\n        // Do nothing. Ignore\r\n    });\r\n}\r\nfunction cacheBundle(key, bundle) {\r\n    resolvedBundles[key] = bundle;\r\n    return bundle;\r\n}\r\nfunction loadNlsBundleOrCreateFromI18n(header, bundlePath) {\r\n    var result;\r\n    var bundle = path.join(options.cacheRoot, header.id + \"-\" + header.hash + \".json\");\r\n    var useMemoryOnly = false;\r\n    var writeBundle = false;\r\n    try {\r\n        result = JSON.parse(fs.readFileSync(bundle, { encoding: 'utf8', flag: 'r' }));\r\n        touch(bundle);\r\n        return result;\r\n    }\r\n    catch (err) {\r\n        if (err.code === 'ENOENT') {\r\n            writeBundle = true;\r\n        }\r\n        else if (err instanceof SyntaxError) {\r\n            // We have a syntax error. So no valid JSON. Use\r\n            console.log(\"Syntax error parsing message bundle: \" + err.message + \".\");\r\n            fs.unlink(bundle, function (err) {\r\n                if (err) {\r\n                    console.error(\"Deleting corrupted bundle \" + bundle + \" failed.\");\r\n                }\r\n            });\r\n            useMemoryOnly = true;\r\n        }\r\n        else {\r\n            throw err;\r\n        }\r\n    }\r\n    result = createNLSBundle(header, bundlePath);\r\n    if (!result || useMemoryOnly) {\r\n        return result;\r\n    }\r\n    if (writeBundle) {\r\n        try {\r\n            fs.writeFileSync(bundle, JSON.stringify(result), { encoding: 'utf8', flag: 'wx' });\r\n        }\r\n        catch (err) {\r\n            if (err.code === 'EEXIST') {\r\n                return result;\r\n            }\r\n            throw err;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction loadDefaultNlsBundle(bundlePath) {\r\n    try {\r\n        return createDefaultNlsBundle(bundlePath);\r\n    }\r\n    catch (err) {\r\n        console.log(\"Generating default bundle from meta data failed.\", err);\r\n        return undefined;\r\n    }\r\n}\r\nfunction loadNlsBundle(header, bundlePath) {\r\n    var result;\r\n    // Core decided to use a language pack. Do the same in the extension\r\n    if (supportsLanguagePack()) {\r\n        try {\r\n            result = loadNlsBundleOrCreateFromI18n(header, bundlePath);\r\n        }\r\n        catch (err) {\r\n            console.log(\"Load or create bundle failed \", err);\r\n        }\r\n    }\r\n    if (!result) {\r\n        // No language pack found, but core is running in language pack mode\r\n        // Don't try to use old in the box bundles since the might be stale\r\n        // Fall right back to the default bundle.\r\n        if (options.languagePackSupport) {\r\n            return loadDefaultNlsBundle(bundlePath);\r\n        }\r\n        var candidate = findInTheBoxBundle(bundlePath);\r\n        if (candidate) {\r\n            try {\r\n                return readJsonFileSync(candidate);\r\n            }\r\n            catch (err) {\r\n                console.log(\"Loading in the box message bundle failed.\", err);\r\n            }\r\n        }\r\n        result = loadDefaultNlsBundle(bundlePath);\r\n    }\r\n    return result;\r\n}\r\nfunction tryFindMetaDataHeaderFile(file) {\r\n    var result;\r\n    var dirname = path.dirname(file);\r\n    while (true) {\r\n        result = path.join(dirname, 'nls.metadata.header.json');\r\n        if (fs.existsSync(result)) {\r\n            break;\r\n        }\r\n        var parent = path.dirname(dirname);\r\n        if (parent === dirname) {\r\n            result = undefined;\r\n            break;\r\n        }\r\n        else {\r\n            dirname = parent;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction loadMessageBundle(file) {\r\n    if (!file) {\r\n        // No file. We are in dev mode. Return the default\r\n        // localize function.\r\n        return localize;\r\n    }\r\n    // Remove extension since we load json files.\r\n    var ext = path.extname(file);\r\n    if (ext) {\r\n        file = file.substr(0, file.length - ext.length);\r\n    }\r\n    if (options.messageFormat === MessageFormat.both || options.messageFormat === MessageFormat.bundle) {\r\n        var headerFile = tryFindMetaDataHeaderFile(file);\r\n        if (headerFile) {\r\n            var bundlePath = path.dirname(headerFile);\r\n            var bundle = resolvedBundles[bundlePath];\r\n            if (bundle === undefined) {\r\n                try {\r\n                    var header = JSON.parse(fs.readFileSync(headerFile, 'utf8'));\r\n                    try {\r\n                        var nlsBundle = loadNlsBundle(header, bundlePath);\r\n                        bundle = cacheBundle(bundlePath, nlsBundle ? { header: header, nlsBundle: nlsBundle } : null);\r\n                    }\r\n                    catch (err) {\r\n                        console.error('Failed to load nls bundle', err);\r\n                        bundle = cacheBundle(bundlePath, null);\r\n                    }\r\n                }\r\n                catch (err) {\r\n                    console.error('Failed to read header file', err);\r\n                    bundle = cacheBundle(bundlePath, null);\r\n                }\r\n            }\r\n            if (bundle) {\r\n                var module_3 = file.substr(bundlePath.length + 1).replace(/\\\\/g, '/');\r\n                var messages = bundle.nlsBundle[module_3];\r\n                if (messages === undefined) {\r\n                    console.error(\"Messages for file \" + file + \" not found. See console for details.\");\r\n                    return function () {\r\n                        return 'Messages not found.';\r\n                    };\r\n                }\r\n                return createScopedLocalizeFunction(messages);\r\n            }\r\n        }\r\n    }\r\n    if (options.messageFormat === MessageFormat.both || options.messageFormat === MessageFormat.file) {\r\n        // Try to load a single file bundle\r\n        try {\r\n            var json = readJsonFileSync(resolveLanguage(file));\r\n            if (Array.isArray(json)) {\r\n                return createScopedLocalizeFunction(json);\r\n            }\r\n            else {\r\n                if (isDefined(json.messages) && isDefined(json.keys)) {\r\n                    return createScopedLocalizeFunction(json.messages);\r\n                }\r\n                else {\r\n                    console.error(\"String bundle '\" + file + \"' uses an unsupported format.\");\r\n                    return function () {\r\n                        return 'File bundle has unsupported format. See console for details';\r\n                    };\r\n                }\r\n            }\r\n        }\r\n        catch (err) {\r\n            if (err.code !== 'ENOENT') {\r\n                console.error('Failed to load single file bundle', err);\r\n            }\r\n        }\r\n    }\r\n    console.error(\"Failed to load message bundle for file \" + file);\r\n    return function () {\r\n        return 'Failed to load message bundle. See console for details.';\r\n    };\r\n}\r\nexports.loadMessageBundle = loadMessageBundle;\r\nfunction config(opts) {\r\n    if (opts) {\r\n        if (isString(opts.locale)) {\r\n            options.locale = opts.locale.toLowerCase();\r\n            options.language = options.locale;\r\n            resolvedLanguage = undefined;\r\n            resolvedBundles = Object.create(null);\r\n        }\r\n        if (opts.messageFormat !== undefined) {\r\n            options.messageFormat = opts.messageFormat;\r\n        }\r\n        if (opts.bundleFormat === BundleFormat.standalone && options.languagePackSupport === true) {\r\n            options.languagePackSupport = false;\r\n        }\r\n    }\r\n    isPseudo = options.locale === 'pseudo';\r\n    return loadMessageBundle;\r\n}\r\nexports.config = config;\r\n//# sourceMappingURL=main.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n/**\n * Creates a JSON scanner on the given text.\n * If ignoreTrivia is set, whitespaces or comments are ignored.\n */\nexport function createScanner(text, ignoreTrivia) {\n    if (ignoreTrivia === void 0) { ignoreTrivia = false; }\n    var len = text.length;\n    var pos = 0, value = '', tokenOffset = 0, token = 16 /* Unknown */, lineNumber = 0, lineStartOffset = 0, tokenLineStartOffset = 0, prevTokenLineStartOffset = 0, scanError = 0 /* None */;\n    function scanHexDigits(count, exact) {\n        var digits = 0;\n        var value = 0;\n        while (digits < count || !exact) {\n            var ch = text.charCodeAt(pos);\n            if (ch >= 48 /* _0 */ && ch <= 57 /* _9 */) {\n                value = value * 16 + ch - 48 /* _0 */;\n            }\n            else if (ch >= 65 /* A */ && ch <= 70 /* F */) {\n                value = value * 16 + ch - 65 /* A */ + 10;\n            }\n            else if (ch >= 97 /* a */ && ch <= 102 /* f */) {\n                value = value * 16 + ch - 97 /* a */ + 10;\n            }\n            else {\n                break;\n            }\n            pos++;\n            digits++;\n        }\n        if (digits < count) {\n            value = -1;\n        }\n        return value;\n    }\n    function setPosition(newPosition) {\n        pos = newPosition;\n        value = '';\n        tokenOffset = 0;\n        token = 16 /* Unknown */;\n        scanError = 0 /* None */;\n    }\n    function scanNumber() {\n        var start = pos;\n        if (text.charCodeAt(pos) === 48 /* _0 */) {\n            pos++;\n        }\n        else {\n            pos++;\n            while (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                pos++;\n            }\n        }\n        if (pos < text.length && text.charCodeAt(pos) === 46 /* dot */) {\n            pos++;\n            if (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                pos++;\n                while (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                    pos++;\n                }\n            }\n            else {\n                scanError = 3 /* UnexpectedEndOfNumber */;\n                return text.substring(start, pos);\n            }\n        }\n        var end = pos;\n        if (pos < text.length && (text.charCodeAt(pos) === 69 /* E */ || text.charCodeAt(pos) === 101 /* e */)) {\n            pos++;\n            if (pos < text.length && text.charCodeAt(pos) === 43 /* plus */ || text.charCodeAt(pos) === 45 /* minus */) {\n                pos++;\n            }\n            if (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                pos++;\n                while (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                    pos++;\n                }\n                end = pos;\n            }\n            else {\n                scanError = 3 /* UnexpectedEndOfNumber */;\n            }\n        }\n        return text.substring(start, end);\n    }\n    function scanString() {\n        var result = '', start = pos;\n        while (true) {\n            if (pos >= len) {\n                result += text.substring(start, pos);\n                scanError = 2 /* UnexpectedEndOfString */;\n                break;\n            }\n            var ch = text.charCodeAt(pos);\n            if (ch === 34 /* doubleQuote */) {\n                result += text.substring(start, pos);\n                pos++;\n                break;\n            }\n            if (ch === 92 /* backslash */) {\n                result += text.substring(start, pos);\n                pos++;\n                if (pos >= len) {\n                    scanError = 2 /* UnexpectedEndOfString */;\n                    break;\n                }\n                var ch2 = text.charCodeAt(pos++);\n                switch (ch2) {\n                    case 34 /* doubleQuote */:\n                        result += '\\\"';\n                        break;\n                    case 92 /* backslash */:\n                        result += '\\\\';\n                        break;\n                    case 47 /* slash */:\n                        result += '/';\n                        break;\n                    case 98 /* b */:\n                        result += '\\b';\n                        break;\n                    case 102 /* f */:\n                        result += '\\f';\n                        break;\n                    case 110 /* n */:\n                        result += '\\n';\n                        break;\n                    case 114 /* r */:\n                        result += '\\r';\n                        break;\n                    case 116 /* t */:\n                        result += '\\t';\n                        break;\n                    case 117 /* u */:\n                        var ch3 = scanHexDigits(4, true);\n                        if (ch3 >= 0) {\n                            result += String.fromCharCode(ch3);\n                        }\n                        else {\n                            scanError = 4 /* InvalidUnicode */;\n                        }\n                        break;\n                    default:\n                        scanError = 5 /* InvalidEscapeCharacter */;\n                }\n                start = pos;\n                continue;\n            }\n            if (ch >= 0 && ch <= 0x1f) {\n                if (isLineBreak(ch)) {\n                    result += text.substring(start, pos);\n                    scanError = 2 /* UnexpectedEndOfString */;\n                    break;\n                }\n                else {\n                    scanError = 6 /* InvalidCharacter */;\n                    // mark as error but continue with string\n                }\n            }\n            pos++;\n        }\n        return result;\n    }\n    function scanNext() {\n        value = '';\n        scanError = 0 /* None */;\n        tokenOffset = pos;\n        lineStartOffset = lineNumber;\n        prevTokenLineStartOffset = tokenLineStartOffset;\n        if (pos >= len) {\n            // at the end\n            tokenOffset = len;\n            return token = 17 /* EOF */;\n        }\n        var code = text.charCodeAt(pos);\n        // trivia: whitespace\n        if (isWhiteSpace(code)) {\n            do {\n                pos++;\n                value += String.fromCharCode(code);\n                code = text.charCodeAt(pos);\n            } while (isWhiteSpace(code));\n            return token = 15 /* Trivia */;\n        }\n        // trivia: newlines\n        if (isLineBreak(code)) {\n            pos++;\n            value += String.fromCharCode(code);\n            if (code === 13 /* carriageReturn */ && text.charCodeAt(pos) === 10 /* lineFeed */) {\n                pos++;\n                value += '\\n';\n            }\n            lineNumber++;\n            tokenLineStartOffset = pos;\n            return token = 14 /* LineBreakTrivia */;\n        }\n        switch (code) {\n            // tokens: []{}:,\n            case 123 /* openBrace */:\n                pos++;\n                return token = 1 /* OpenBraceToken */;\n            case 125 /* closeBrace */:\n                pos++;\n                return token = 2 /* CloseBraceToken */;\n            case 91 /* openBracket */:\n                pos++;\n                return token = 3 /* OpenBracketToken */;\n            case 93 /* closeBracket */:\n                pos++;\n                return token = 4 /* CloseBracketToken */;\n            case 58 /* colon */:\n                pos++;\n                return token = 6 /* ColonToken */;\n            case 44 /* comma */:\n                pos++;\n                return token = 5 /* CommaToken */;\n            // strings\n            case 34 /* doubleQuote */:\n                pos++;\n                value = scanString();\n                return token = 10 /* StringLiteral */;\n            // comments\n            case 47 /* slash */:\n                var start = pos - 1;\n                // Single-line comment\n                if (text.charCodeAt(pos + 1) === 47 /* slash */) {\n                    pos += 2;\n                    while (pos < len) {\n                        if (isLineBreak(text.charCodeAt(pos))) {\n                            break;\n                        }\n                        pos++;\n                    }\n                    value = text.substring(start, pos);\n                    return token = 12 /* LineCommentTrivia */;\n                }\n                // Multi-line comment\n                if (text.charCodeAt(pos + 1) === 42 /* asterisk */) {\n                    pos += 2;\n                    var safeLength = len - 1; // For lookahead.\n                    var commentClosed = false;\n                    while (pos < safeLength) {\n                        var ch = text.charCodeAt(pos);\n                        if (ch === 42 /* asterisk */ && text.charCodeAt(pos + 1) === 47 /* slash */) {\n                            pos += 2;\n                            commentClosed = true;\n                            break;\n                        }\n                        pos++;\n                        if (isLineBreak(ch)) {\n                            if (ch === 13 /* carriageReturn */ && text.charCodeAt(pos) === 10 /* lineFeed */) {\n                                pos++;\n                            }\n                            lineNumber++;\n                            tokenLineStartOffset = pos;\n                        }\n                    }\n                    if (!commentClosed) {\n                        pos++;\n                        scanError = 1 /* UnexpectedEndOfComment */;\n                    }\n                    value = text.substring(start, pos);\n                    return token = 13 /* BlockCommentTrivia */;\n                }\n                // just a single slash\n                value += String.fromCharCode(code);\n                pos++;\n                return token = 16 /* Unknown */;\n            // numbers\n            case 45 /* minus */:\n                value += String.fromCharCode(code);\n                pos++;\n                if (pos === len || !isDigit(text.charCodeAt(pos))) {\n                    return token = 16 /* Unknown */;\n                }\n            // found a minus, followed by a number so\n            // we fall through to proceed with scanning\n            // numbers\n            case 48 /* _0 */:\n            case 49 /* _1 */:\n            case 50 /* _2 */:\n            case 51 /* _3 */:\n            case 52 /* _4 */:\n            case 53 /* _5 */:\n            case 54 /* _6 */:\n            case 55 /* _7 */:\n            case 56 /* _8 */:\n            case 57 /* _9 */:\n                value += scanNumber();\n                return token = 11 /* NumericLiteral */;\n            // literals and unknown symbols\n            default:\n                // is a literal? Read the full word.\n                while (pos < len && isUnknownContentCharacter(code)) {\n                    pos++;\n                    code = text.charCodeAt(pos);\n                }\n                if (tokenOffset !== pos) {\n                    value = text.substring(tokenOffset, pos);\n                    // keywords: true, false, null\n                    switch (value) {\n                        case 'true': return token = 8 /* TrueKeyword */;\n                        case 'false': return token = 9 /* FalseKeyword */;\n                        case 'null': return token = 7 /* NullKeyword */;\n                    }\n                    return token = 16 /* Unknown */;\n                }\n                // some\n                value += String.fromCharCode(code);\n                pos++;\n                return token = 16 /* Unknown */;\n        }\n    }\n    function isUnknownContentCharacter(code) {\n        if (isWhiteSpace(code) || isLineBreak(code)) {\n            return false;\n        }\n        switch (code) {\n            case 125 /* closeBrace */:\n            case 93 /* closeBracket */:\n            case 123 /* openBrace */:\n            case 91 /* openBracket */:\n            case 34 /* doubleQuote */:\n            case 58 /* colon */:\n            case 44 /* comma */:\n            case 47 /* slash */:\n                return false;\n        }\n        return true;\n    }\n    function scanNextNonTrivia() {\n        var result;\n        do {\n            result = scanNext();\n        } while (result >= 12 /* LineCommentTrivia */ && result <= 15 /* Trivia */);\n        return result;\n    }\n    return {\n        setPosition: setPosition,\n        getPosition: function () { return pos; },\n        scan: ignoreTrivia ? scanNextNonTrivia : scanNext,\n        getToken: function () { return token; },\n        getTokenValue: function () { return value; },\n        getTokenOffset: function () { return tokenOffset; },\n        getTokenLength: function () { return pos - tokenOffset; },\n        getTokenStartLine: function () { return lineStartOffset; },\n        getTokenStartCharacter: function () { return tokenOffset - prevTokenLineStartOffset; },\n        getTokenError: function () { return scanError; },\n    };\n}\nfunction isWhiteSpace(ch) {\n    return ch === 32 /* space */ || ch === 9 /* tab */ || ch === 11 /* verticalTab */ || ch === 12 /* formFeed */ ||\n        ch === 160 /* nonBreakingSpace */ || ch === 5760 /* ogham */ || ch >= 8192 /* enQuad */ && ch <= 8203 /* zeroWidthSpace */ ||\n        ch === 8239 /* narrowNoBreakSpace */ || ch === 8287 /* mathematicalSpace */ || ch === 12288 /* ideographicSpace */ || ch === 65279 /* byteOrderMark */;\n}\nfunction isLineBreak(ch) {\n    return ch === 10 /* lineFeed */ || ch === 13 /* carriageReturn */ || ch === 8232 /* lineSeparator */ || ch === 8233 /* paragraphSeparator */;\n}\nfunction isDigit(ch) {\n    return ch >= 48 /* _0 */ && ch <= 57 /* _9 */;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { createScanner } from './scanner';\nexport function format(documentText, range, options) {\n    var initialIndentLevel;\n    var formatText;\n    var formatTextStart;\n    var rangeStart;\n    var rangeEnd;\n    if (range) {\n        rangeStart = range.offset;\n        rangeEnd = rangeStart + range.length;\n        formatTextStart = rangeStart;\n        while (formatTextStart > 0 && !isEOL(documentText, formatTextStart - 1)) {\n            formatTextStart--;\n        }\n        var endOffset = rangeEnd;\n        while (endOffset < documentText.length && !isEOL(documentText, endOffset)) {\n            endOffset++;\n        }\n        formatText = documentText.substring(formatTextStart, endOffset);\n        initialIndentLevel = computeIndentLevel(formatText, options);\n    }\n    else {\n        formatText = documentText;\n        initialIndentLevel = 0;\n        formatTextStart = 0;\n        rangeStart = 0;\n        rangeEnd = documentText.length;\n    }\n    var eol = getEOL(options, documentText);\n    var lineBreak = false;\n    var indentLevel = 0;\n    var indentValue;\n    if (options.insertSpaces) {\n        indentValue = repeat(' ', options.tabSize || 4);\n    }\n    else {\n        indentValue = '\\t';\n    }\n    var scanner = createScanner(formatText, false);\n    var hasError = false;\n    function newLineAndIndent() {\n        return eol + repeat(indentValue, initialIndentLevel + indentLevel);\n    }\n    function scanNext() {\n        var token = scanner.scan();\n        lineBreak = false;\n        while (token === 15 /* Trivia */ || token === 14 /* LineBreakTrivia */) {\n            lineBreak = lineBreak || (token === 14 /* LineBreakTrivia */);\n            token = scanner.scan();\n        }\n        hasError = token === 16 /* Unknown */ || scanner.getTokenError() !== 0 /* None */;\n        return token;\n    }\n    var editOperations = [];\n    function addEdit(text, startOffset, endOffset) {\n        if (!hasError && startOffset < rangeEnd && endOffset > rangeStart && documentText.substring(startOffset, endOffset) !== text) {\n            editOperations.push({ offset: startOffset, length: endOffset - startOffset, content: text });\n        }\n    }\n    var firstToken = scanNext();\n    if (firstToken !== 17 /* EOF */) {\n        var firstTokenStart = scanner.getTokenOffset() + formatTextStart;\n        var initialIndent = repeat(indentValue, initialIndentLevel);\n        addEdit(initialIndent, formatTextStart, firstTokenStart);\n    }\n    while (firstToken !== 17 /* EOF */) {\n        var firstTokenEnd = scanner.getTokenOffset() + scanner.getTokenLength() + formatTextStart;\n        var secondToken = scanNext();\n        var replaceContent = '';\n        while (!lineBreak && (secondToken === 12 /* LineCommentTrivia */ || secondToken === 13 /* BlockCommentTrivia */)) {\n            // comments on the same line: keep them on the same line, but ignore them otherwise\n            var commentTokenStart = scanner.getTokenOffset() + formatTextStart;\n            addEdit(' ', firstTokenEnd, commentTokenStart);\n            firstTokenEnd = scanner.getTokenOffset() + scanner.getTokenLength() + formatTextStart;\n            replaceContent = secondToken === 12 /* LineCommentTrivia */ ? newLineAndIndent() : '';\n            secondToken = scanNext();\n        }\n        if (secondToken === 2 /* CloseBraceToken */) {\n            if (firstToken !== 1 /* OpenBraceToken */) {\n                indentLevel--;\n                replaceContent = newLineAndIndent();\n            }\n        }\n        else if (secondToken === 4 /* CloseBracketToken */) {\n            if (firstToken !== 3 /* OpenBracketToken */) {\n                indentLevel--;\n                replaceContent = newLineAndIndent();\n            }\n        }\n        else {\n            switch (firstToken) {\n                case 3 /* OpenBracketToken */:\n                case 1 /* OpenBraceToken */:\n                    indentLevel++;\n                    replaceContent = newLineAndIndent();\n                    break;\n                case 5 /* CommaToken */:\n                case 12 /* LineCommentTrivia */:\n                    replaceContent = newLineAndIndent();\n                    break;\n                case 13 /* BlockCommentTrivia */:\n                    if (lineBreak) {\n                        replaceContent = newLineAndIndent();\n                    }\n                    else {\n                        // symbol following comment on the same line: keep on same line, separate with ' '\n                        replaceContent = ' ';\n                    }\n                    break;\n                case 6 /* ColonToken */:\n                    replaceContent = ' ';\n                    break;\n                case 10 /* StringLiteral */:\n                    if (secondToken === 6 /* ColonToken */) {\n                        replaceContent = '';\n                        break;\n                    }\n                // fall through\n                case 7 /* NullKeyword */:\n                case 8 /* TrueKeyword */:\n                case 9 /* FalseKeyword */:\n                case 11 /* NumericLiteral */:\n                case 2 /* CloseBraceToken */:\n                case 4 /* CloseBracketToken */:\n                    if (secondToken === 12 /* LineCommentTrivia */ || secondToken === 13 /* BlockCommentTrivia */) {\n                        replaceContent = ' ';\n                    }\n                    else if (secondToken !== 5 /* CommaToken */ && secondToken !== 17 /* EOF */) {\n                        hasError = true;\n                    }\n                    break;\n                case 16 /* Unknown */:\n                    hasError = true;\n                    break;\n            }\n            if (lineBreak && (secondToken === 12 /* LineCommentTrivia */ || secondToken === 13 /* BlockCommentTrivia */)) {\n                replaceContent = newLineAndIndent();\n            }\n        }\n        var secondTokenStart = scanner.getTokenOffset() + formatTextStart;\n        addEdit(replaceContent, firstTokenEnd, secondTokenStart);\n        firstToken = secondToken;\n    }\n    return editOperations;\n}\nfunction repeat(s, count) {\n    var result = '';\n    for (var i = 0; i < count; i++) {\n        result += s;\n    }\n    return result;\n}\nfunction computeIndentLevel(content, options) {\n    var i = 0;\n    var nChars = 0;\n    var tabSize = options.tabSize || 4;\n    while (i < content.length) {\n        var ch = content.charAt(i);\n        if (ch === ' ') {\n            nChars++;\n        }\n        else if (ch === '\\t') {\n            nChars += tabSize;\n        }\n        else {\n            break;\n        }\n        i++;\n    }\n    return Math.floor(nChars / tabSize);\n}\nfunction getEOL(options, text) {\n    for (var i = 0; i < text.length; i++) {\n        var ch = text.charAt(i);\n        if (ch === '\\r') {\n            if (i + 1 < text.length && text.charAt(i + 1) === '\\n') {\n                return '\\r\\n';\n            }\n            return '\\r';\n        }\n        else if (ch === '\\n') {\n            return '\\n';\n        }\n    }\n    return (options && options.eol) || '\\n';\n}\nexport function isEOL(text, offset) {\n    return '\\r\\n'.indexOf(text.charAt(offset)) !== -1;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { createScanner } from './scanner';\nvar ParseOptions;\n(function (ParseOptions) {\n    ParseOptions.DEFAULT = {\n        allowTrailingComma: false\n    };\n})(ParseOptions || (ParseOptions = {}));\n/**\n * For a given offset, evaluate the location in the JSON document. Each segment in the location path is either a property name or an array index.\n */\nexport function getLocation(text, position) {\n    var segments = []; // strings or numbers\n    var earlyReturnException = new Object();\n    var previousNode = undefined;\n    var previousNodeInst = {\n        value: {},\n        offset: 0,\n        length: 0,\n        type: 'object',\n        parent: undefined\n    };\n    var isAtPropertyKey = false;\n    function setPreviousNode(value, offset, length, type) {\n        previousNodeInst.value = value;\n        previousNodeInst.offset = offset;\n        previousNodeInst.length = length;\n        previousNodeInst.type = type;\n        previousNodeInst.colonOffset = undefined;\n        previousNode = previousNodeInst;\n    }\n    try {\n        visit(text, {\n            onObjectBegin: function (offset, length) {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                previousNode = undefined;\n                isAtPropertyKey = position > offset;\n                segments.push(''); // push a placeholder (will be replaced)\n            },\n            onObjectProperty: function (name, offset, length) {\n                if (position < offset) {\n                    throw earlyReturnException;\n                }\n                setPreviousNode(name, offset, length, 'property');\n                segments[segments.length - 1] = name;\n                if (position <= offset + length) {\n                    throw earlyReturnException;\n                }\n            },\n            onObjectEnd: function (offset, length) {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                previousNode = undefined;\n                segments.pop();\n            },\n            onArrayBegin: function (offset, length) {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                previousNode = undefined;\n                segments.push(0);\n            },\n            onArrayEnd: function (offset, length) {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                previousNode = undefined;\n                segments.pop();\n            },\n            onLiteralValue: function (value, offset, length) {\n                if (position < offset) {\n                    throw earlyReturnException;\n                }\n                setPreviousNode(value, offset, length, getNodeType(value));\n                if (position <= offset + length) {\n                    throw earlyReturnException;\n                }\n            },\n            onSeparator: function (sep, offset, length) {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                if (sep === ':' && previousNode && previousNode.type === 'property') {\n                    previousNode.colonOffset = offset;\n                    isAtPropertyKey = false;\n                    previousNode = undefined;\n                }\n                else if (sep === ',') {\n                    var last = segments[segments.length - 1];\n                    if (typeof last === 'number') {\n                        segments[segments.length - 1] = last + 1;\n                    }\n                    else {\n                        isAtPropertyKey = true;\n                        segments[segments.length - 1] = '';\n                    }\n                    previousNode = undefined;\n                }\n            }\n        });\n    }\n    catch (e) {\n        if (e !== earlyReturnException) {\n            throw e;\n        }\n    }\n    return {\n        path: segments,\n        previousNode: previousNode,\n        isAtPropertyKey: isAtPropertyKey,\n        matches: function (pattern) {\n            var k = 0;\n            for (var i = 0; k < pattern.length && i < segments.length; i++) {\n                if (pattern[k] === segments[i] || pattern[k] === '*') {\n                    k++;\n                }\n                else if (pattern[k] !== '**') {\n                    return false;\n                }\n            }\n            return k === pattern.length;\n        }\n    };\n}\n/**\n * Parses the given text and returns the object the JSON content represents. On invalid input, the parser tries to be as fault tolerant as possible, but still return a result.\n * Therefore always check the errors list to find out if the input was valid.\n */\nexport function parse(text, errors, options) {\n    if (errors === void 0) { errors = []; }\n    if (options === void 0) { options = ParseOptions.DEFAULT; }\n    var currentProperty = null;\n    var currentParent = [];\n    var previousParents = [];\n    function onValue(value) {\n        if (Array.isArray(currentParent)) {\n            currentParent.push(value);\n        }\n        else if (currentProperty !== null) {\n            currentParent[currentProperty] = value;\n        }\n    }\n    var visitor = {\n        onObjectBegin: function () {\n            var object = {};\n            onValue(object);\n            previousParents.push(currentParent);\n            currentParent = object;\n            currentProperty = null;\n        },\n        onObjectProperty: function (name) {\n            currentProperty = name;\n        },\n        onObjectEnd: function () {\n            currentParent = previousParents.pop();\n        },\n        onArrayBegin: function () {\n            var array = [];\n            onValue(array);\n            previousParents.push(currentParent);\n            currentParent = array;\n            currentProperty = null;\n        },\n        onArrayEnd: function () {\n            currentParent = previousParents.pop();\n        },\n        onLiteralValue: onValue,\n        onError: function (error, offset, length) {\n            errors.push({ error: error, offset: offset, length: length });\n        }\n    };\n    visit(text, visitor, options);\n    return currentParent[0];\n}\n/**\n * Parses the given text and returns a tree representation the JSON content. On invalid input, the parser tries to be as fault tolerant as possible, but still return a result.\n */\nexport function parseTree(text, errors, options) {\n    if (errors === void 0) { errors = []; }\n    if (options === void 0) { options = ParseOptions.DEFAULT; }\n    var currentParent = { type: 'array', offset: -1, length: -1, children: [], parent: undefined }; // artificial root\n    function ensurePropertyComplete(endOffset) {\n        if (currentParent.type === 'property') {\n            currentParent.length = endOffset - currentParent.offset;\n            currentParent = currentParent.parent;\n        }\n    }\n    function onValue(valueNode) {\n        currentParent.children.push(valueNode);\n        return valueNode;\n    }\n    var visitor = {\n        onObjectBegin: function (offset) {\n            currentParent = onValue({ type: 'object', offset: offset, length: -1, parent: currentParent, children: [] });\n        },\n        onObjectProperty: function (name, offset, length) {\n            currentParent = onValue({ type: 'property', offset: offset, length: -1, parent: currentParent, children: [] });\n            currentParent.children.push({ type: 'string', value: name, offset: offset, length: length, parent: currentParent });\n        },\n        onObjectEnd: function (offset, length) {\n            ensurePropertyComplete(offset + length); // in case of a missing value for a property: make sure property is complete\n            currentParent.length = offset + length - currentParent.offset;\n            currentParent = currentParent.parent;\n            ensurePropertyComplete(offset + length);\n        },\n        onArrayBegin: function (offset, length) {\n            currentParent = onValue({ type: 'array', offset: offset, length: -1, parent: currentParent, children: [] });\n        },\n        onArrayEnd: function (offset, length) {\n            currentParent.length = offset + length - currentParent.offset;\n            currentParent = currentParent.parent;\n            ensurePropertyComplete(offset + length);\n        },\n        onLiteralValue: function (value, offset, length) {\n            onValue({ type: getNodeType(value), offset: offset, length: length, parent: currentParent, value: value });\n            ensurePropertyComplete(offset + length);\n        },\n        onSeparator: function (sep, offset, length) {\n            if (currentParent.type === 'property') {\n                if (sep === ':') {\n                    currentParent.colonOffset = offset;\n                }\n                else if (sep === ',') {\n                    ensurePropertyComplete(offset);\n                }\n            }\n        },\n        onError: function (error, offset, length) {\n            errors.push({ error: error, offset: offset, length: length });\n        }\n    };\n    visit(text, visitor, options);\n    var result = currentParent.children[0];\n    if (result) {\n        delete result.parent;\n    }\n    return result;\n}\n/**\n * Finds the node at the given path in a JSON DOM.\n */\nexport function findNodeAtLocation(root, path) {\n    if (!root) {\n        return undefined;\n    }\n    var node = root;\n    for (var _i = 0, path_1 = path; _i < path_1.length; _i++) {\n        var segment = path_1[_i];\n        if (typeof segment === 'string') {\n            if (node.type !== 'object' || !Array.isArray(node.children)) {\n                return undefined;\n            }\n            var found = false;\n            for (var _a = 0, _b = node.children; _a < _b.length; _a++) {\n                var propertyNode = _b[_a];\n                if (Array.isArray(propertyNode.children) && propertyNode.children[0].value === segment) {\n                    node = propertyNode.children[1];\n                    found = true;\n                    break;\n                }\n            }\n            if (!found) {\n                return undefined;\n            }\n        }\n        else {\n            var index = segment;\n            if (node.type !== 'array' || index < 0 || !Array.isArray(node.children) || index >= node.children.length) {\n                return undefined;\n            }\n            node = node.children[index];\n        }\n    }\n    return node;\n}\n/**\n * Gets the JSON path of the given JSON DOM node\n */\nexport function getNodePath(node) {\n    if (!node.parent || !node.parent.children) {\n        return [];\n    }\n    var path = getNodePath(node.parent);\n    if (node.parent.type === 'property') {\n        var key = node.parent.children[0].value;\n        path.push(key);\n    }\n    else if (node.parent.type === 'array') {\n        var index = node.parent.children.indexOf(node);\n        if (index !== -1) {\n            path.push(index);\n        }\n    }\n    return path;\n}\n/**\n * Evaluates the JavaScript object of the given JSON DOM node\n */\nexport function getNodeValue(node) {\n    switch (node.type) {\n        case 'array':\n            return node.children.map(getNodeValue);\n        case 'object':\n            var obj = Object.create(null);\n            for (var _i = 0, _a = node.children; _i < _a.length; _i++) {\n                var prop = _a[_i];\n                var valueNode = prop.children[1];\n                if (valueNode) {\n                    obj[prop.children[0].value] = getNodeValue(valueNode);\n                }\n            }\n            return obj;\n        case 'null':\n        case 'string':\n        case 'number':\n        case 'boolean':\n            return node.value;\n        default:\n            return undefined;\n    }\n}\nexport function contains(node, offset, includeRightBound) {\n    if (includeRightBound === void 0) { includeRightBound = false; }\n    return (offset >= node.offset && offset < (node.offset + node.length)) || includeRightBound && (offset === (node.offset + node.length));\n}\n/**\n * Finds the most inner node at the given offset. If includeRightBound is set, also finds nodes that end at the given offset.\n */\nexport function findNodeAtOffset(node, offset, includeRightBound) {\n    if (includeRightBound === void 0) { includeRightBound = false; }\n    if (contains(node, offset, includeRightBound)) {\n        var children = node.children;\n        if (Array.isArray(children)) {\n            for (var i = 0; i < children.length && children[i].offset <= offset; i++) {\n                var item = findNodeAtOffset(children[i], offset, includeRightBound);\n                if (item) {\n                    return item;\n                }\n            }\n        }\n        return node;\n    }\n    return undefined;\n}\n/**\n * Parses the given text and invokes the visitor functions for each object, array and literal reached.\n */\nexport function visit(text, visitor, options) {\n    if (options === void 0) { options = ParseOptions.DEFAULT; }\n    var _scanner = createScanner(text, false);\n    function toNoArgVisit(visitFunction) {\n        return visitFunction ? function () { return visitFunction(_scanner.getTokenOffset(), _scanner.getTokenLength(), _scanner.getTokenStartLine(), _scanner.getTokenStartCharacter()); } : function () { return true; };\n    }\n    function toOneArgVisit(visitFunction) {\n        return visitFunction ? function (arg) { return visitFunction(arg, _scanner.getTokenOffset(), _scanner.getTokenLength(), _scanner.getTokenStartLine(), _scanner.getTokenStartCharacter()); } : function () { return true; };\n    }\n    var onObjectBegin = toNoArgVisit(visitor.onObjectBegin), onObjectProperty = toOneArgVisit(visitor.onObjectProperty), onObjectEnd = toNoArgVisit(visitor.onObjectEnd), onArrayBegin = toNoArgVisit(visitor.onArrayBegin), onArrayEnd = toNoArgVisit(visitor.onArrayEnd), onLiteralValue = toOneArgVisit(visitor.onLiteralValue), onSeparator = toOneArgVisit(visitor.onSeparator), onComment = toNoArgVisit(visitor.onComment), onError = toOneArgVisit(visitor.onError);\n    var disallowComments = options && options.disallowComments;\n    var allowTrailingComma = options && options.allowTrailingComma;\n    function scanNext() {\n        while (true) {\n            var token = _scanner.scan();\n            switch (_scanner.getTokenError()) {\n                case 4 /* InvalidUnicode */:\n                    handleError(14 /* InvalidUnicode */);\n                    break;\n                case 5 /* InvalidEscapeCharacter */:\n                    handleError(15 /* InvalidEscapeCharacter */);\n                    break;\n                case 3 /* UnexpectedEndOfNumber */:\n                    handleError(13 /* UnexpectedEndOfNumber */);\n                    break;\n                case 1 /* UnexpectedEndOfComment */:\n                    if (!disallowComments) {\n                        handleError(11 /* UnexpectedEndOfComment */);\n                    }\n                    break;\n                case 2 /* UnexpectedEndOfString */:\n                    handleError(12 /* UnexpectedEndOfString */);\n                    break;\n                case 6 /* InvalidCharacter */:\n                    handleError(16 /* InvalidCharacter */);\n                    break;\n            }\n            switch (token) {\n                case 12 /* LineCommentTrivia */:\n                case 13 /* BlockCommentTrivia */:\n                    if (disallowComments) {\n                        handleError(10 /* InvalidCommentToken */);\n                    }\n                    else {\n                        onComment();\n                    }\n                    break;\n                case 16 /* Unknown */:\n                    handleError(1 /* InvalidSymbol */);\n                    break;\n                case 15 /* Trivia */:\n                case 14 /* LineBreakTrivia */:\n                    break;\n                default:\n                    return token;\n            }\n        }\n    }\n    function handleError(error, skipUntilAfter, skipUntil) {\n        if (skipUntilAfter === void 0) { skipUntilAfter = []; }\n        if (skipUntil === void 0) { skipUntil = []; }\n        onError(error);\n        if (skipUntilAfter.length + skipUntil.length > 0) {\n            var token = _scanner.getToken();\n            while (token !== 17 /* EOF */) {\n                if (skipUntilAfter.indexOf(token) !== -1) {\n                    scanNext();\n                    break;\n                }\n                else if (skipUntil.indexOf(token) !== -1) {\n                    break;\n                }\n                token = scanNext();\n            }\n        }\n    }\n    function parseString(isValue) {\n        var value = _scanner.getTokenValue();\n        if (isValue) {\n            onLiteralValue(value);\n        }\n        else {\n            onObjectProperty(value);\n        }\n        scanNext();\n        return true;\n    }\n    function parseLiteral() {\n        switch (_scanner.getToken()) {\n            case 11 /* NumericLiteral */:\n                var value = 0;\n                try {\n                    value = JSON.parse(_scanner.getTokenValue());\n                    if (typeof value !== 'number') {\n                        handleError(2 /* InvalidNumberFormat */);\n                        value = 0;\n                    }\n                }\n                catch (e) {\n                    handleError(2 /* InvalidNumberFormat */);\n                }\n                onLiteralValue(value);\n                break;\n            case 7 /* NullKeyword */:\n                onLiteralValue(null);\n                break;\n            case 8 /* TrueKeyword */:\n                onLiteralValue(true);\n                break;\n            case 9 /* FalseKeyword */:\n                onLiteralValue(false);\n                break;\n            default:\n                return false;\n        }\n        scanNext();\n        return true;\n    }\n    function parseProperty() {\n        if (_scanner.getToken() !== 10 /* StringLiteral */) {\n            handleError(3 /* PropertyNameExpected */, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n            return false;\n        }\n        parseString(false);\n        if (_scanner.getToken() === 6 /* ColonToken */) {\n            onSeparator(':');\n            scanNext(); // consume colon\n            if (!parseValue()) {\n                handleError(4 /* ValueExpected */, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n            }\n        }\n        else {\n            handleError(5 /* ColonExpected */, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n        }\n        return true;\n    }\n    function parseObject() {\n        onObjectBegin();\n        scanNext(); // consume open brace\n        var needsComma = false;\n        while (_scanner.getToken() !== 2 /* CloseBraceToken */ && _scanner.getToken() !== 17 /* EOF */) {\n            if (_scanner.getToken() === 5 /* CommaToken */) {\n                if (!needsComma) {\n                    handleError(4 /* ValueExpected */, [], []);\n                }\n                onSeparator(',');\n                scanNext(); // consume comma\n                if (_scanner.getToken() === 2 /* CloseBraceToken */ && allowTrailingComma) {\n                    break;\n                }\n            }\n            else if (needsComma) {\n                handleError(6 /* CommaExpected */, [], []);\n            }\n            if (!parseProperty()) {\n                handleError(4 /* ValueExpected */, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n            }\n            needsComma = true;\n        }\n        onObjectEnd();\n        if (_scanner.getToken() !== 2 /* CloseBraceToken */) {\n            handleError(7 /* CloseBraceExpected */, [2 /* CloseBraceToken */], []);\n        }\n        else {\n            scanNext(); // consume close brace\n        }\n        return true;\n    }\n    function parseArray() {\n        onArrayBegin();\n        scanNext(); // consume open bracket\n        var needsComma = false;\n        while (_scanner.getToken() !== 4 /* CloseBracketToken */ && _scanner.getToken() !== 17 /* EOF */) {\n            if (_scanner.getToken() === 5 /* CommaToken */) {\n                if (!needsComma) {\n                    handleError(4 /* ValueExpected */, [], []);\n                }\n                onSeparator(',');\n                scanNext(); // consume comma\n                if (_scanner.getToken() === 4 /* CloseBracketToken */ && allowTrailingComma) {\n                    break;\n                }\n            }\n            else if (needsComma) {\n                handleError(6 /* CommaExpected */, [], []);\n            }\n            if (!parseValue()) {\n                handleError(4 /* ValueExpected */, [], [4 /* CloseBracketToken */, 5 /* CommaToken */]);\n            }\n            needsComma = true;\n        }\n        onArrayEnd();\n        if (_scanner.getToken() !== 4 /* CloseBracketToken */) {\n            handleError(8 /* CloseBracketExpected */, [4 /* CloseBracketToken */], []);\n        }\n        else {\n            scanNext(); // consume close bracket\n        }\n        return true;\n    }\n    function parseValue() {\n        switch (_scanner.getToken()) {\n            case 3 /* OpenBracketToken */:\n                return parseArray();\n            case 1 /* OpenBraceToken */:\n                return parseObject();\n            case 10 /* StringLiteral */:\n                return parseString(true);\n            default:\n                return parseLiteral();\n        }\n    }\n    scanNext();\n    if (_scanner.getToken() === 17 /* EOF */) {\n        if (options.allowEmptyContent) {\n            return true;\n        }\n        handleError(4 /* ValueExpected */, [], []);\n        return false;\n    }\n    if (!parseValue()) {\n        handleError(4 /* ValueExpected */, [], []);\n        return false;\n    }\n    if (_scanner.getToken() !== 17 /* EOF */) {\n        handleError(9 /* EndOfFileExpected */, [], []);\n    }\n    return true;\n}\n/**\n * Takes JSON with JavaScript-style comments and remove\n * them. Optionally replaces every none-newline character\n * of comments with a replaceCharacter\n */\nexport function stripComments(text, replaceCh) {\n    var _scanner = createScanner(text), parts = [], kind, offset = 0, pos;\n    do {\n        pos = _scanner.getPosition();\n        kind = _scanner.scan();\n        switch (kind) {\n            case 12 /* LineCommentTrivia */:\n            case 13 /* BlockCommentTrivia */:\n            case 17 /* EOF */:\n                if (offset !== pos) {\n                    parts.push(text.substring(offset, pos));\n                }\n                if (replaceCh !== undefined) {\n                    parts.push(_scanner.getTokenValue().replace(/[^\\r\\n]/g, replaceCh));\n                }\n                offset = _scanner.getPosition();\n                break;\n        }\n    } while (kind !== 17 /* EOF */);\n    return parts.join('');\n}\nexport function getNodeType(value) {\n    switch (typeof value) {\n        case 'boolean': return 'boolean';\n        case 'number': return 'number';\n        case 'string': return 'string';\n        case 'object': {\n            if (!value) {\n                return 'null';\n            }\n            else if (Array.isArray(value)) {\n                return 'array';\n            }\n            return 'object';\n        }\n        default: return 'null';\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport * as formatter from './impl/format';\nimport * as edit from './impl/edit';\nimport * as scanner from './impl/scanner';\nimport * as parser from './impl/parser';\n/**\n * Creates a JSON scanner on the given text.\n * If ignoreTrivia is set, whitespaces or comments are ignored.\n */\nexport var createScanner = scanner.createScanner;\n/**\n * For a given offset, evaluate the location in the JSON document. Each segment in the location path is either a property name or an array index.\n */\nexport var getLocation = parser.getLocation;\n/**\n * Parses the given text and returns the object the JSON content represents. On invalid input, the parser tries to be as fault tolerant as possible, but still return a result.\n * Therefore, always check the errors list to find out if the input was valid.\n */\nexport var parse = parser.parse;\n/**\n * Parses the given text and returns a tree representation the JSON content. On invalid input, the parser tries to be as fault tolerant as possible, but still return a result.\n */\nexport var parseTree = parser.parseTree;\n/**\n * Finds the node at the given path in a JSON DOM.\n */\nexport var findNodeAtLocation = parser.findNodeAtLocation;\n/**\n * Finds the innermost node at the given offset. If includeRightBound is set, also finds nodes that end at the given offset.\n */\nexport var findNodeAtOffset = parser.findNodeAtOffset;\n/**\n * Gets the JSON path of the given JSON DOM node\n */\nexport var getNodePath = parser.getNodePath;\n/**\n * Evaluates the JavaScript object of the given JSON DOM node\n */\nexport var getNodeValue = parser.getNodeValue;\n/**\n * Parses the given text and invokes the visitor functions for each object, array and literal reached.\n */\nexport var visit = parser.visit;\n/**\n * Takes JSON with JavaScript-style comments and remove\n * them. Optionally replaces every none-newline character\n * of comments with a replaceCharacter\n */\nexport var stripComments = parser.stripComments;\nexport function printParseErrorCode(code) {\n    switch (code) {\n        case 1 /* InvalidSymbol */: return 'InvalidSymbol';\n        case 2 /* InvalidNumberFormat */: return 'InvalidNumberFormat';\n        case 3 /* PropertyNameExpected */: return 'PropertyNameExpected';\n        case 4 /* ValueExpected */: return 'ValueExpected';\n        case 5 /* ColonExpected */: return 'ColonExpected';\n        case 6 /* CommaExpected */: return 'CommaExpected';\n        case 7 /* CloseBraceExpected */: return 'CloseBraceExpected';\n        case 8 /* CloseBracketExpected */: return 'CloseBracketExpected';\n        case 9 /* EndOfFileExpected */: return 'EndOfFileExpected';\n        case 10 /* InvalidCommentToken */: return 'InvalidCommentToken';\n        case 11 /* UnexpectedEndOfComment */: return 'UnexpectedEndOfComment';\n        case 12 /* UnexpectedEndOfString */: return 'UnexpectedEndOfString';\n        case 13 /* UnexpectedEndOfNumber */: return 'UnexpectedEndOfNumber';\n        case 14 /* InvalidUnicode */: return 'InvalidUnicode';\n        case 15 /* InvalidEscapeCharacter */: return 'InvalidEscapeCharacter';\n        case 16 /* InvalidCharacter */: return 'InvalidCharacter';\n    }\n    return '<unknown ParseErrorCode>';\n}\n/**\n * Computes the edits needed to format a JSON document.\n *\n * @param documentText The input text\n * @param range The range to format or `undefined` to format the full content\n * @param options The formatting options\n * @returns A list of edit operations describing the formatting changes to the original document. Edits can be either inserts, replacements or\n * removals of text segments. All offsets refer to the original state of the document. No two edits must change or remove the same range of\n * text in the original document. However, multiple edits can have\n * the same offset, for example multiple inserts, or an insert followed by a remove or replace. The order in the array defines which edit is applied first.\n * To apply edits to an input, you can use `applyEdits`.\n */\nexport function format(documentText, range, options) {\n    return formatter.format(documentText, range, options);\n}\n/**\n * Computes the edits needed to modify a value in the JSON document.\n *\n * @param documentText The input text\n * @param path The path of the value to change. The path represents either to the document root, a property or an array item.\n * If the path points to an non-existing property or item, it will be created.\n * @param value The new value for the specified property or item. If the value is undefined,\n * the property or item will be removed.\n * @param options Options\n * @returns A list of edit operations describing the formatting changes to the original document. Edits can be either inserts, replacements or\n * removals of text segments. All offsets refer to the original state of the document. No two edits must change or remove the same range of\n * text in the original document. However, multiple edits can have\n * the same offset, for example multiple inserts, or an insert followed by a remove or replace. The order in the array defines which edit is applied first.\n * To apply edits to an input, you can use `applyEdits`.\n */\nexport function modify(text, path, value, options) {\n    return edit.setProperty(text, path, value, options.formattingOptions, options.getInsertionIndex);\n}\n/**\n * Applies edits to a input string.\n */\nexport function applyEdits(text, edits) {\n    for (var i = edits.length - 1; i >= 0; i--) {\n        text = edit.applyEdit(text, edits[i]);\n    }\n    return text;\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\n/**\r\n * The Position namespace provides helper functions to work with\r\n * [Position](#Position) literals.\r\n */\r\nexport var Position;\r\n(function (Position) {\r\n    /**\r\n     * Creates a new Position literal from the given line and character.\r\n     * @param line The position's line.\r\n     * @param character The position's character.\r\n     */\r\n    function create(line, character) {\r\n        return { line: line, character: character };\r\n    }\r\n    Position.create = create;\r\n    /**\r\n     * Checks whether the given liternal conforms to the [Position](#Position) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Is.number(candidate.line) && Is.number(candidate.character);\r\n    }\r\n    Position.is = is;\r\n})(Position || (Position = {}));\r\n/**\r\n * The Range namespace provides helper functions to work with\r\n * [Range](#Range) literals.\r\n */\r\nexport var Range;\r\n(function (Range) {\r\n    function create(one, two, three, four) {\r\n        if (Is.number(one) && Is.number(two) && Is.number(three) && Is.number(four)) {\r\n            return { start: Position.create(one, two), end: Position.create(three, four) };\r\n        }\r\n        else if (Position.is(one) && Position.is(two)) {\r\n            return { start: one, end: two };\r\n        }\r\n        else {\r\n            throw new Error(\"Range#create called with invalid arguments[\" + one + \", \" + two + \", \" + three + \", \" + four + \"]\");\r\n        }\r\n    }\r\n    Range.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Range](#Range) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\r\n    }\r\n    Range.is = is;\r\n})(Range || (Range = {}));\r\n/**\r\n * The Location namespace provides helper functions to work with\r\n * [Location](#Location) literals.\r\n */\r\nexport var Location;\r\n(function (Location) {\r\n    /**\r\n     * Creates a Location literal.\r\n     * @param uri The location's uri.\r\n     * @param range The location's range.\r\n     */\r\n    function create(uri, range) {\r\n        return { uri: uri, range: range };\r\n    }\r\n    Location.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Location](#Location) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\r\n    }\r\n    Location.is = is;\r\n})(Location || (Location = {}));\r\n/**\r\n * The LocationLink namespace provides helper functions to work with\r\n * [LocationLink](#LocationLink) literals.\r\n */\r\nexport var LocationLink;\r\n(function (LocationLink) {\r\n    /**\r\n     * Creates a LocationLink literal.\r\n     * @param targetUri The definition's uri.\r\n     * @param targetRange The full range of the definition.\r\n     * @param targetSelectionRange The span of the symbol definition at the target.\r\n     * @param originSelectionRange The span of the symbol being defined in the originating source file.\r\n     */\r\n    function create(targetUri, targetRange, targetSelectionRange, originSelectionRange) {\r\n        return { targetUri: targetUri, targetRange: targetRange, targetSelectionRange: targetSelectionRange, originSelectionRange: originSelectionRange };\r\n    }\r\n    LocationLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [LocationLink](#LocationLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.targetRange) && Is.string(candidate.targetUri)\r\n            && (Range.is(candidate.targetSelectionRange) || Is.undefined(candidate.targetSelectionRange))\r\n            && (Range.is(candidate.originSelectionRange) || Is.undefined(candidate.originSelectionRange));\r\n    }\r\n    LocationLink.is = is;\r\n})(LocationLink || (LocationLink = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [Color](#Color) literals.\r\n */\r\nexport var Color;\r\n(function (Color) {\r\n    /**\r\n     * Creates a new Color literal.\r\n     */\r\n    function create(red, green, blue, alpha) {\r\n        return {\r\n            red: red,\r\n            green: green,\r\n            blue: blue,\r\n            alpha: alpha,\r\n        };\r\n    }\r\n    Color.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Color](#Color) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.red)\r\n            && Is.number(candidate.green)\r\n            && Is.number(candidate.blue)\r\n            && Is.number(candidate.alpha);\r\n    }\r\n    Color.is = is;\r\n})(Color || (Color = {}));\r\n/**\r\n * The ColorInformation namespace provides helper functions to work with\r\n * [ColorInformation](#ColorInformation) literals.\r\n */\r\nexport var ColorInformation;\r\n(function (ColorInformation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(range, color) {\r\n        return {\r\n            range: range,\r\n            color: color,\r\n        };\r\n    }\r\n    ColorInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Range.is(candidate.range) && Color.is(candidate.color);\r\n    }\r\n    ColorInformation.is = is;\r\n})(ColorInformation || (ColorInformation = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [ColorPresentation](#ColorPresentation) literals.\r\n */\r\nexport var ColorPresentation;\r\n(function (ColorPresentation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(label, textEdit, additionalTextEdits) {\r\n        return {\r\n            label: label,\r\n            textEdit: textEdit,\r\n            additionalTextEdits: additionalTextEdits,\r\n        };\r\n    }\r\n    ColorPresentation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate.label)\r\n            && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate))\r\n            && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\r\n    }\r\n    ColorPresentation.is = is;\r\n})(ColorPresentation || (ColorPresentation = {}));\r\n/**\r\n * Enum of known range kinds\r\n */\r\nexport var FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind || (FoldingRangeKind = {}));\r\n/**\r\n * The folding range namespace provides helper functions to work with\r\n * [FoldingRange](#FoldingRange) literals.\r\n */\r\nexport var FoldingRange;\r\n(function (FoldingRange) {\r\n    /**\r\n     * Creates a new FoldingRange literal.\r\n     */\r\n    function create(startLine, endLine, startCharacter, endCharacter, kind) {\r\n        var result = {\r\n            startLine: startLine,\r\n            endLine: endLine\r\n        };\r\n        if (Is.defined(startCharacter)) {\r\n            result.startCharacter = startCharacter;\r\n        }\r\n        if (Is.defined(endCharacter)) {\r\n            result.endCharacter = endCharacter;\r\n        }\r\n        if (Is.defined(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    FoldingRange.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FoldingRange](#FoldingRange) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.startLine) && Is.number(candidate.startLine)\r\n            && (Is.undefined(candidate.startCharacter) || Is.number(candidate.startCharacter))\r\n            && (Is.undefined(candidate.endCharacter) || Is.number(candidate.endCharacter))\r\n            && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\r\n    }\r\n    FoldingRange.is = is;\r\n})(FoldingRange || (FoldingRange = {}));\r\n/**\r\n * The DiagnosticRelatedInformation namespace provides helper functions to work with\r\n * [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) literals.\r\n */\r\nexport var DiagnosticRelatedInformation;\r\n(function (DiagnosticRelatedInformation) {\r\n    /**\r\n     * Creates a new DiagnosticRelatedInformation literal.\r\n     */\r\n    function create(location, message) {\r\n        return {\r\n            location: location,\r\n            message: message\r\n        };\r\n    }\r\n    DiagnosticRelatedInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\r\n    }\r\n    DiagnosticRelatedInformation.is = is;\r\n})(DiagnosticRelatedInformation || (DiagnosticRelatedInformation = {}));\r\n/**\r\n * The diagnostic's severity.\r\n */\r\nexport var DiagnosticSeverity;\r\n(function (DiagnosticSeverity) {\r\n    /**\r\n     * Reports an error.\r\n     */\r\n    DiagnosticSeverity.Error = 1;\r\n    /**\r\n     * Reports a warning.\r\n     */\r\n    DiagnosticSeverity.Warning = 2;\r\n    /**\r\n     * Reports an information.\r\n     */\r\n    DiagnosticSeverity.Information = 3;\r\n    /**\r\n     * Reports a hint.\r\n     */\r\n    DiagnosticSeverity.Hint = 4;\r\n})(DiagnosticSeverity || (DiagnosticSeverity = {}));\r\n/**\r\n * The diagnostic tags.\r\n *\r\n * @since 3.15.0\r\n */\r\nexport var DiagnosticTag;\r\n(function (DiagnosticTag) {\r\n    /**\r\n     * Unused or unnecessary code.\r\n     *\r\n     * Clients are allowed to render diagnostics with this tag faded out instead of having\r\n     * an error squiggle.\r\n     */\r\n    DiagnosticTag.Unnecessary = 1;\r\n    /**\r\n     * Deprecated or obsolete code.\r\n     *\r\n     * Clients are allowed to rendered diagnostics with this tag strike through.\r\n     */\r\n    DiagnosticTag.Deprecated = 2;\r\n})(DiagnosticTag || (DiagnosticTag = {}));\r\n/**\r\n * The Diagnostic namespace provides helper functions to work with\r\n * [Diagnostic](#Diagnostic) literals.\r\n */\r\nexport var Diagnostic;\r\n(function (Diagnostic) {\r\n    /**\r\n     * Creates a new Diagnostic literal.\r\n     */\r\n    function create(range, message, severity, code, source, relatedInformation) {\r\n        var result = { range: range, message: message };\r\n        if (Is.defined(severity)) {\r\n            result.severity = severity;\r\n        }\r\n        if (Is.defined(code)) {\r\n            result.code = code;\r\n        }\r\n        if (Is.defined(source)) {\r\n            result.source = source;\r\n        }\r\n        if (Is.defined(relatedInformation)) {\r\n            result.relatedInformation = relatedInformation;\r\n        }\r\n        return result;\r\n    }\r\n    Diagnostic.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Diagnostic](#Diagnostic) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && Range.is(candidate.range)\r\n            && Is.string(candidate.message)\r\n            && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\r\n            && (Is.number(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\r\n            && (Is.string(candidate.source) || Is.undefined(candidate.source))\r\n            && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\r\n    }\r\n    Diagnostic.is = is;\r\n})(Diagnostic || (Diagnostic = {}));\r\n/**\r\n * The Command namespace provides helper functions to work with\r\n * [Command](#Command) literals.\r\n */\r\nexport var Command;\r\n(function (Command) {\r\n    /**\r\n     * Creates a new Command literal.\r\n     */\r\n    function create(title, command) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { title: title, command: command };\r\n        if (Is.defined(args) && args.length > 0) {\r\n            result.arguments = args;\r\n        }\r\n        return result;\r\n    }\r\n    Command.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Command](#Command) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.command);\r\n    }\r\n    Command.is = is;\r\n})(Command || (Command = {}));\r\n/**\r\n * The TextEdit namespace provides helper function to create replace,\r\n * insert and delete edits more easily.\r\n */\r\nexport var TextEdit;\r\n(function (TextEdit) {\r\n    /**\r\n     * Creates a replace text edit.\r\n     * @param range The range of text to be replaced.\r\n     * @param newText The new text.\r\n     */\r\n    function replace(range, newText) {\r\n        return { range: range, newText: newText };\r\n    }\r\n    TextEdit.replace = replace;\r\n    /**\r\n     * Creates a insert text edit.\r\n     * @param position The position to insert the text at.\r\n     * @param newText The text to be inserted.\r\n     */\r\n    function insert(position, newText) {\r\n        return { range: { start: position, end: position }, newText: newText };\r\n    }\r\n    TextEdit.insert = insert;\r\n    /**\r\n     * Creates a delete text edit.\r\n     * @param range The range of text to be deleted.\r\n     */\r\n    function del(range) {\r\n        return { range: range, newText: '' };\r\n    }\r\n    TextEdit.del = del;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate)\r\n            && Is.string(candidate.newText)\r\n            && Range.is(candidate.range);\r\n    }\r\n    TextEdit.is = is;\r\n})(TextEdit || (TextEdit = {}));\r\n/**\r\n * The TextDocumentEdit namespace provides helper function to create\r\n * an edit that manipulates a text document.\r\n */\r\nexport var TextDocumentEdit;\r\n(function (TextDocumentEdit) {\r\n    /**\r\n     * Creates a new `TextDocumentEdit`\r\n     */\r\n    function create(textDocument, edits) {\r\n        return { textDocument: textDocument, edits: edits };\r\n    }\r\n    TextDocumentEdit.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && VersionedTextDocumentIdentifier.is(candidate.textDocument)\r\n            && Array.isArray(candidate.edits);\r\n    }\r\n    TextDocumentEdit.is = is;\r\n})(TextDocumentEdit || (TextDocumentEdit = {}));\r\nexport var CreateFile;\r\n(function (CreateFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'create',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    CreateFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'create' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    CreateFile.is = is;\r\n})(CreateFile || (CreateFile = {}));\r\nexport var RenameFile;\r\n(function (RenameFile) {\r\n    function create(oldUri, newUri, options) {\r\n        var result = {\r\n            kind: 'rename',\r\n            oldUri: oldUri,\r\n            newUri: newUri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    RenameFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'rename' && Is.string(candidate.oldUri) && Is.string(candidate.newUri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    RenameFile.is = is;\r\n})(RenameFile || (RenameFile = {}));\r\nexport var DeleteFile;\r\n(function (DeleteFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'delete',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.recursive !== void 0 || options.ignoreIfNotExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    DeleteFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'delete' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.recursive === void 0 || Is.boolean(candidate.options.recursive)) && (candidate.options.ignoreIfNotExists === void 0 || Is.boolean(candidate.options.ignoreIfNotExists))));\r\n    }\r\n    DeleteFile.is = is;\r\n})(DeleteFile || (DeleteFile = {}));\r\nexport var WorkspaceEdit;\r\n(function (WorkspaceEdit) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            (candidate.changes !== void 0 || candidate.documentChanges !== void 0) &&\r\n            (candidate.documentChanges === void 0 || candidate.documentChanges.every(function (change) {\r\n                if (Is.string(change.kind)) {\r\n                    return CreateFile.is(change) || RenameFile.is(change) || DeleteFile.is(change);\r\n                }\r\n                else {\r\n                    return TextDocumentEdit.is(change);\r\n                }\r\n            }));\r\n    }\r\n    WorkspaceEdit.is = is;\r\n})(WorkspaceEdit || (WorkspaceEdit = {}));\r\nvar TextEditChangeImpl = /** @class */ (function () {\r\n    function TextEditChangeImpl(edits) {\r\n        this.edits = edits;\r\n    }\r\n    TextEditChangeImpl.prototype.insert = function (position, newText) {\r\n        this.edits.push(TextEdit.insert(position, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.replace = function (range, newText) {\r\n        this.edits.push(TextEdit.replace(range, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.delete = function (range) {\r\n        this.edits.push(TextEdit.del(range));\r\n    };\r\n    TextEditChangeImpl.prototype.add = function (edit) {\r\n        this.edits.push(edit);\r\n    };\r\n    TextEditChangeImpl.prototype.all = function () {\r\n        return this.edits;\r\n    };\r\n    TextEditChangeImpl.prototype.clear = function () {\r\n        this.edits.splice(0, this.edits.length);\r\n    };\r\n    return TextEditChangeImpl;\r\n}());\r\n/**\r\n * A workspace change helps constructing changes to a workspace.\r\n */\r\nvar WorkspaceChange = /** @class */ (function () {\r\n    function WorkspaceChange(workspaceEdit) {\r\n        var _this = this;\r\n        this._textEditChanges = Object.create(null);\r\n        if (workspaceEdit) {\r\n            this._workspaceEdit = workspaceEdit;\r\n            if (workspaceEdit.documentChanges) {\r\n                workspaceEdit.documentChanges.forEach(function (change) {\r\n                    if (TextDocumentEdit.is(change)) {\r\n                        var textEditChange = new TextEditChangeImpl(change.edits);\r\n                        _this._textEditChanges[change.textDocument.uri] = textEditChange;\r\n                    }\r\n                });\r\n            }\r\n            else if (workspaceEdit.changes) {\r\n                Object.keys(workspaceEdit.changes).forEach(function (key) {\r\n                    var textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\r\n                    _this._textEditChanges[key] = textEditChange;\r\n                });\r\n            }\r\n        }\r\n    }\r\n    Object.defineProperty(WorkspaceChange.prototype, \"edit\", {\r\n        /**\r\n         * Returns the underlying [WorkspaceEdit](#WorkspaceEdit) literal\r\n         * use to be returned from a workspace edit operation like rename.\r\n         */\r\n        get: function () {\r\n            return this._workspaceEdit;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    WorkspaceChange.prototype.getTextEditChange = function (key) {\r\n        if (VersionedTextDocumentIdentifier.is(key)) {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    documentChanges: []\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.documentChanges) {\r\n                throw new Error('Workspace edit is not configured for document changes.');\r\n            }\r\n            var textDocument = key;\r\n            var result = this._textEditChanges[textDocument.uri];\r\n            if (!result) {\r\n                var edits = [];\r\n                var textDocumentEdit = {\r\n                    textDocument: textDocument,\r\n                    edits: edits\r\n                };\r\n                this._workspaceEdit.documentChanges.push(textDocumentEdit);\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[textDocument.uri] = result;\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    changes: Object.create(null)\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.changes) {\r\n                throw new Error('Workspace edit is not configured for normal text edit changes.');\r\n            }\r\n            var result = this._textEditChanges[key];\r\n            if (!result) {\r\n                var edits = [];\r\n                this._workspaceEdit.changes[key] = edits;\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[key] = result;\r\n            }\r\n            return result;\r\n        }\r\n    };\r\n    WorkspaceChange.prototype.createFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(CreateFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.renameFile = function (oldUri, newUri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(RenameFile.create(oldUri, newUri, options));\r\n    };\r\n    WorkspaceChange.prototype.deleteFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(DeleteFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.checkDocumentChanges = function () {\r\n        if (!this._workspaceEdit || !this._workspaceEdit.documentChanges) {\r\n            throw new Error('Workspace edit is not configured for document changes.');\r\n        }\r\n    };\r\n    return WorkspaceChange;\r\n}());\r\nexport { WorkspaceChange };\r\n/**\r\n * The TextDocumentIdentifier namespace provides helper functions to work with\r\n * [TextDocumentIdentifier](#TextDocumentIdentifier) literals.\r\n */\r\nexport var TextDocumentIdentifier;\r\n(function (TextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new TextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     */\r\n    function create(uri) {\r\n        return { uri: uri };\r\n    }\r\n    TextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentIdentifier](#TextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri);\r\n    }\r\n    TextDocumentIdentifier.is = is;\r\n})(TextDocumentIdentifier || (TextDocumentIdentifier = {}));\r\n/**\r\n * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\r\n * [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) literals.\r\n */\r\nexport var VersionedTextDocumentIdentifier;\r\n(function (VersionedTextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new VersionedTextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     * @param uri The document's text.\r\n     */\r\n    function create(uri, version) {\r\n        return { uri: uri, version: version };\r\n    }\r\n    VersionedTextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (candidate.version === null || Is.number(candidate.version));\r\n    }\r\n    VersionedTextDocumentIdentifier.is = is;\r\n})(VersionedTextDocumentIdentifier || (VersionedTextDocumentIdentifier = {}));\r\n/**\r\n * The TextDocumentItem namespace provides helper functions to work with\r\n * [TextDocumentItem](#TextDocumentItem) literals.\r\n */\r\nexport var TextDocumentItem;\r\n(function (TextDocumentItem) {\r\n    /**\r\n     * Creates a new TextDocumentItem literal.\r\n     * @param uri The document's uri.\r\n     * @param languageId The document's language identifier.\r\n     * @param version The document's version number.\r\n     * @param text The document's text.\r\n     */\r\n    function create(uri, languageId, version, text) {\r\n        return { uri: uri, languageId: languageId, version: version, text: text };\r\n    }\r\n    TextDocumentItem.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentItem](#TextDocumentItem) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.number(candidate.version) && Is.string(candidate.text);\r\n    }\r\n    TextDocumentItem.is = is;\r\n})(TextDocumentItem || (TextDocumentItem = {}));\r\n/**\r\n * Describes the content type that a client supports in various\r\n * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\r\n *\r\n * Please note that `MarkupKinds` must not start with a `$`. This kinds\r\n * are reserved for internal usage.\r\n */\r\nexport var MarkupKind;\r\n(function (MarkupKind) {\r\n    /**\r\n     * Plain text is supported as a content format\r\n     */\r\n    MarkupKind.PlainText = 'plaintext';\r\n    /**\r\n     * Markdown is supported as a content format\r\n     */\r\n    MarkupKind.Markdown = 'markdown';\r\n})(MarkupKind || (MarkupKind = {}));\r\n(function (MarkupKind) {\r\n    /**\r\n     * Checks whether the given value is a value of the [MarkupKind](#MarkupKind) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate === MarkupKind.PlainText || candidate === MarkupKind.Markdown;\r\n    }\r\n    MarkupKind.is = is;\r\n})(MarkupKind || (MarkupKind = {}));\r\nexport var MarkupContent;\r\n(function (MarkupContent) {\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkupContent](#MarkupContent) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\r\n    }\r\n    MarkupContent.is = is;\r\n})(MarkupContent || (MarkupContent = {}));\r\n/**\r\n * The kind of a completion entry.\r\n */\r\nexport var CompletionItemKind;\r\n(function (CompletionItemKind) {\r\n    CompletionItemKind.Text = 1;\r\n    CompletionItemKind.Method = 2;\r\n    CompletionItemKind.Function = 3;\r\n    CompletionItemKind.Constructor = 4;\r\n    CompletionItemKind.Field = 5;\r\n    CompletionItemKind.Variable = 6;\r\n    CompletionItemKind.Class = 7;\r\n    CompletionItemKind.Interface = 8;\r\n    CompletionItemKind.Module = 9;\r\n    CompletionItemKind.Property = 10;\r\n    CompletionItemKind.Unit = 11;\r\n    CompletionItemKind.Value = 12;\r\n    CompletionItemKind.Enum = 13;\r\n    CompletionItemKind.Keyword = 14;\r\n    CompletionItemKind.Snippet = 15;\r\n    CompletionItemKind.Color = 16;\r\n    CompletionItemKind.File = 17;\r\n    CompletionItemKind.Reference = 18;\r\n    CompletionItemKind.Folder = 19;\r\n    CompletionItemKind.EnumMember = 20;\r\n    CompletionItemKind.Constant = 21;\r\n    CompletionItemKind.Struct = 22;\r\n    CompletionItemKind.Event = 23;\r\n    CompletionItemKind.Operator = 24;\r\n    CompletionItemKind.TypeParameter = 25;\r\n})(CompletionItemKind || (CompletionItemKind = {}));\r\n/**\r\n * Defines whether the insert text in a completion item should be interpreted as\r\n * plain text or a snippet.\r\n */\r\nexport var InsertTextFormat;\r\n(function (InsertTextFormat) {\r\n    /**\r\n     * The primary text to be inserted is treated as a plain string.\r\n     */\r\n    InsertTextFormat.PlainText = 1;\r\n    /**\r\n     * The primary text to be inserted is treated as a snippet.\r\n     *\r\n     * A snippet can define tab stops and placeholders with `$1`, `$2`\r\n     * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\r\n     * the end of the snippet. Placeholders with equal identifiers are linked,\r\n     * that is typing in one will update others too.\r\n     *\r\n     * See also: https://github.com/Microsoft/vscode/blob/master/src/vs/editor/contrib/snippet/common/snippet.md\r\n     */\r\n    InsertTextFormat.Snippet = 2;\r\n})(InsertTextFormat || (InsertTextFormat = {}));\r\n/**\r\n * Completion item tags are extra annotations that tweak the rendering of a completion\r\n * item.\r\n *\r\n * @since 3.15.0\r\n */\r\nexport var CompletionItemTag;\r\n(function (CompletionItemTag) {\r\n    /**\r\n     * Render a completion as obsolete, usually using a strike-out.\r\n     */\r\n    CompletionItemTag.Deprecated = 1;\r\n})(CompletionItemTag || (CompletionItemTag = {}));\r\n/**\r\n * The CompletionItem namespace provides functions to deal with\r\n * completion items.\r\n */\r\nexport var CompletionItem;\r\n(function (CompletionItem) {\r\n    /**\r\n     * Create a completion item and seed it with a label.\r\n     * @param label The completion item's label\r\n     */\r\n    function create(label) {\r\n        return { label: label };\r\n    }\r\n    CompletionItem.create = create;\r\n})(CompletionItem || (CompletionItem = {}));\r\n/**\r\n * The CompletionList namespace provides functions to deal with\r\n * completion lists.\r\n */\r\nexport var CompletionList;\r\n(function (CompletionList) {\r\n    /**\r\n     * Creates a new completion list.\r\n     *\r\n     * @param items The completion items.\r\n     * @param isIncomplete The list is not complete.\r\n     */\r\n    function create(items, isIncomplete) {\r\n        return { items: items ? items : [], isIncomplete: !!isIncomplete };\r\n    }\r\n    CompletionList.create = create;\r\n})(CompletionList || (CompletionList = {}));\r\nexport var MarkedString;\r\n(function (MarkedString) {\r\n    /**\r\n     * Creates a marked string from plain text.\r\n     *\r\n     * @param plainText The plain text.\r\n     */\r\n    function fromPlainText(plainText) {\r\n        return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&'); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\r\n    }\r\n    MarkedString.fromPlainText = fromPlainText;\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkedString](#MarkedString) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate) || (Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value));\r\n    }\r\n    MarkedString.is = is;\r\n})(MarkedString || (MarkedString = {}));\r\nexport var Hover;\r\n(function (Hover) {\r\n    /**\r\n     * Checks whether the given value conforms to the [Hover](#Hover) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return !!candidate && Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) ||\r\n            MarkedString.is(candidate.contents) ||\r\n            Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === void 0 || Range.is(value.range));\r\n    }\r\n    Hover.is = is;\r\n})(Hover || (Hover = {}));\r\n/**\r\n * The ParameterInformation namespace provides helper functions to work with\r\n * [ParameterInformation](#ParameterInformation) literals.\r\n */\r\nexport var ParameterInformation;\r\n(function (ParameterInformation) {\r\n    /**\r\n     * Creates a new parameter information literal.\r\n     *\r\n     * @param label A label string.\r\n     * @param documentation A doc string.\r\n     */\r\n    function create(label, documentation) {\r\n        return documentation ? { label: label, documentation: documentation } : { label: label };\r\n    }\r\n    ParameterInformation.create = create;\r\n})(ParameterInformation || (ParameterInformation = {}));\r\n/**\r\n * The SignatureInformation namespace provides helper functions to work with\r\n * [SignatureInformation](#SignatureInformation) literals.\r\n */\r\nexport var SignatureInformation;\r\n(function (SignatureInformation) {\r\n    function create(label, documentation) {\r\n        var parameters = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            parameters[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { label: label };\r\n        if (Is.defined(documentation)) {\r\n            result.documentation = documentation;\r\n        }\r\n        if (Is.defined(parameters)) {\r\n            result.parameters = parameters;\r\n        }\r\n        else {\r\n            result.parameters = [];\r\n        }\r\n        return result;\r\n    }\r\n    SignatureInformation.create = create;\r\n})(SignatureInformation || (SignatureInformation = {}));\r\n/**\r\n * A document highlight kind.\r\n */\r\nexport var DocumentHighlightKind;\r\n(function (DocumentHighlightKind) {\r\n    /**\r\n     * A textual occurrence.\r\n     */\r\n    DocumentHighlightKind.Text = 1;\r\n    /**\r\n     * Read-access of a symbol, like reading a variable.\r\n     */\r\n    DocumentHighlightKind.Read = 2;\r\n    /**\r\n     * Write-access of a symbol, like writing to a variable.\r\n     */\r\n    DocumentHighlightKind.Write = 3;\r\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\r\n/**\r\n * DocumentHighlight namespace to provide helper functions to work with\r\n * [DocumentHighlight](#DocumentHighlight) literals.\r\n */\r\nexport var DocumentHighlight;\r\n(function (DocumentHighlight) {\r\n    /**\r\n     * Create a DocumentHighlight object.\r\n     * @param range The range the highlight applies to.\r\n     */\r\n    function create(range, kind) {\r\n        var result = { range: range };\r\n        if (Is.number(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentHighlight.create = create;\r\n})(DocumentHighlight || (DocumentHighlight = {}));\r\n/**\r\n * A symbol kind.\r\n */\r\nexport var SymbolKind;\r\n(function (SymbolKind) {\r\n    SymbolKind.File = 1;\r\n    SymbolKind.Module = 2;\r\n    SymbolKind.Namespace = 3;\r\n    SymbolKind.Package = 4;\r\n    SymbolKind.Class = 5;\r\n    SymbolKind.Method = 6;\r\n    SymbolKind.Property = 7;\r\n    SymbolKind.Field = 8;\r\n    SymbolKind.Constructor = 9;\r\n    SymbolKind.Enum = 10;\r\n    SymbolKind.Interface = 11;\r\n    SymbolKind.Function = 12;\r\n    SymbolKind.Variable = 13;\r\n    SymbolKind.Constant = 14;\r\n    SymbolKind.String = 15;\r\n    SymbolKind.Number = 16;\r\n    SymbolKind.Boolean = 17;\r\n    SymbolKind.Array = 18;\r\n    SymbolKind.Object = 19;\r\n    SymbolKind.Key = 20;\r\n    SymbolKind.Null = 21;\r\n    SymbolKind.EnumMember = 22;\r\n    SymbolKind.Struct = 23;\r\n    SymbolKind.Event = 24;\r\n    SymbolKind.Operator = 25;\r\n    SymbolKind.TypeParameter = 26;\r\n})(SymbolKind || (SymbolKind = {}));\r\n/**\r\n * Symbol tags are extra annotations that tweak the rendering of a symbol.\r\n * @since 3.15\r\n */\r\nexport var SymbolTag;\r\n(function (SymbolTag) {\r\n    /**\r\n     * Render a symbol as obsolete, usually using a strike-out.\r\n     */\r\n    SymbolTag.Deprecated = 1;\r\n})(SymbolTag || (SymbolTag = {}));\r\nexport var SymbolInformation;\r\n(function (SymbolInformation) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the location of the symbol.\r\n     * @param uri The resource of the location of symbol, defaults to the current document.\r\n     * @param containerName The name of the symbol containing the symbol.\r\n     */\r\n    function create(name, kind, range, uri, containerName) {\r\n        var result = {\r\n            name: name,\r\n            kind: kind,\r\n            location: { uri: uri, range: range }\r\n        };\r\n        if (containerName) {\r\n            result.containerName = containerName;\r\n        }\r\n        return result;\r\n    }\r\n    SymbolInformation.create = create;\r\n})(SymbolInformation || (SymbolInformation = {}));\r\nexport var DocumentSymbol;\r\n(function (DocumentSymbol) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param detail The detail of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the symbol.\r\n     * @param selectionRange The selectionRange of the symbol.\r\n     * @param children Children of the symbol.\r\n     */\r\n    function create(name, detail, kind, range, selectionRange, children) {\r\n        var result = {\r\n            name: name,\r\n            detail: detail,\r\n            kind: kind,\r\n            range: range,\r\n            selectionRange: selectionRange\r\n        };\r\n        if (children !== void 0) {\r\n            result.children = children;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentSymbol.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentSymbol](#DocumentSymbol) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            Is.string(candidate.name) && Is.number(candidate.kind) &&\r\n            Range.is(candidate.range) && Range.is(candidate.selectionRange) &&\r\n            (candidate.detail === void 0 || Is.string(candidate.detail)) &&\r\n            (candidate.deprecated === void 0 || Is.boolean(candidate.deprecated)) &&\r\n            (candidate.children === void 0 || Array.isArray(candidate.children));\r\n    }\r\n    DocumentSymbol.is = is;\r\n})(DocumentSymbol || (DocumentSymbol = {}));\r\n/**\r\n * A set of predefined code action kinds\r\n */\r\nexport var CodeActionKind;\r\n(function (CodeActionKind) {\r\n    /**\r\n     * Empty kind.\r\n     */\r\n    CodeActionKind.Empty = '';\r\n    /**\r\n     * Base kind for quickfix actions: 'quickfix'\r\n     */\r\n    CodeActionKind.QuickFix = 'quickfix';\r\n    /**\r\n     * Base kind for refactoring actions: 'refactor'\r\n     */\r\n    CodeActionKind.Refactor = 'refactor';\r\n    /**\r\n     * Base kind for refactoring extraction actions: 'refactor.extract'\r\n     *\r\n     * Example extract actions:\r\n     *\r\n     * - Extract method\r\n     * - Extract function\r\n     * - Extract variable\r\n     * - Extract interface from class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorExtract = 'refactor.extract';\r\n    /**\r\n     * Base kind for refactoring inline actions: 'refactor.inline'\r\n     *\r\n     * Example inline actions:\r\n     *\r\n     * - Inline function\r\n     * - Inline variable\r\n     * - Inline constant\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorInline = 'refactor.inline';\r\n    /**\r\n     * Base kind for refactoring rewrite actions: 'refactor.rewrite'\r\n     *\r\n     * Example rewrite actions:\r\n     *\r\n     * - Convert JavaScript function to class\r\n     * - Add or remove parameter\r\n     * - Encapsulate field\r\n     * - Make method static\r\n     * - Move method to base class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorRewrite = 'refactor.rewrite';\r\n    /**\r\n     * Base kind for source actions: `source`\r\n     *\r\n     * Source code actions apply to the entire file.\r\n     */\r\n    CodeActionKind.Source = 'source';\r\n    /**\r\n     * Base kind for an organize imports source action: `source.organizeImports`\r\n     */\r\n    CodeActionKind.SourceOrganizeImports = 'source.organizeImports';\r\n    /**\r\n     * Base kind for auto-fix source actions: `source.fixAll`.\r\n     *\r\n     * Fix all actions automatically fix errors that have a clear fix that do not require user input.\r\n     * They should not suppress errors or perform unsafe fixes such as generating new types or classes.\r\n     *\r\n     * @since 3.15.0\r\n     */\r\n    CodeActionKind.SourceFixAll = 'source.fixAll';\r\n})(CodeActionKind || (CodeActionKind = {}));\r\n/**\r\n * The CodeActionContext namespace provides helper functions to work with\r\n * [CodeActionContext](#CodeActionContext) literals.\r\n */\r\nexport var CodeActionContext;\r\n(function (CodeActionContext) {\r\n    /**\r\n     * Creates a new CodeActionContext literal.\r\n     */\r\n    function create(diagnostics, only) {\r\n        var result = { diagnostics: diagnostics };\r\n        if (only !== void 0 && only !== null) {\r\n            result.only = only;\r\n        }\r\n        return result;\r\n    }\r\n    CodeActionContext.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeActionContext](#CodeActionContext) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is) && (candidate.only === void 0 || Is.typedArray(candidate.only, Is.string));\r\n    }\r\n    CodeActionContext.is = is;\r\n})(CodeActionContext || (CodeActionContext = {}));\r\nexport var CodeAction;\r\n(function (CodeAction) {\r\n    function create(title, commandOrEdit, kind) {\r\n        var result = { title: title };\r\n        if (Command.is(commandOrEdit)) {\r\n            result.command = commandOrEdit;\r\n        }\r\n        else {\r\n            result.edit = commandOrEdit;\r\n        }\r\n        if (kind !== void 0) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    CodeAction.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && Is.string(candidate.title) &&\r\n            (candidate.diagnostics === void 0 || Is.typedArray(candidate.diagnostics, Diagnostic.is)) &&\r\n            (candidate.kind === void 0 || Is.string(candidate.kind)) &&\r\n            (candidate.edit !== void 0 || candidate.command !== void 0) &&\r\n            (candidate.command === void 0 || Command.is(candidate.command)) &&\r\n            (candidate.isPreferred === void 0 || Is.boolean(candidate.isPreferred)) &&\r\n            (candidate.edit === void 0 || WorkspaceEdit.is(candidate.edit));\r\n    }\r\n    CodeAction.is = is;\r\n})(CodeAction || (CodeAction = {}));\r\n/**\r\n * The CodeLens namespace provides helper functions to work with\r\n * [CodeLens](#CodeLens) literals.\r\n */\r\nexport var CodeLens;\r\n(function (CodeLens) {\r\n    /**\r\n     * Creates a new CodeLens literal.\r\n     */\r\n    function create(range, data) {\r\n        var result = { range: range };\r\n        if (Is.defined(data)) {\r\n            result.data = data;\r\n        }\r\n        return result;\r\n    }\r\n    CodeLens.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeLens](#CodeLens) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\r\n    }\r\n    CodeLens.is = is;\r\n})(CodeLens || (CodeLens = {}));\r\n/**\r\n * The FormattingOptions namespace provides helper functions to work with\r\n * [FormattingOptions](#FormattingOptions) literals.\r\n */\r\nexport var FormattingOptions;\r\n(function (FormattingOptions) {\r\n    /**\r\n     * Creates a new FormattingOptions literal.\r\n     */\r\n    function create(tabSize, insertSpaces) {\r\n        return { tabSize: tabSize, insertSpaces: insertSpaces };\r\n    }\r\n    FormattingOptions.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FormattingOptions](#FormattingOptions) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.number(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\r\n    }\r\n    FormattingOptions.is = is;\r\n})(FormattingOptions || (FormattingOptions = {}));\r\n/**\r\n * The DocumentLink namespace provides helper functions to work with\r\n * [DocumentLink](#DocumentLink) literals.\r\n */\r\nexport var DocumentLink;\r\n(function (DocumentLink) {\r\n    /**\r\n     * Creates a new DocumentLink literal.\r\n     */\r\n    function create(range, target, data) {\r\n        return { range: range, target: target, data: data };\r\n    }\r\n    DocumentLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentLink](#DocumentLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\r\n    }\r\n    DocumentLink.is = is;\r\n})(DocumentLink || (DocumentLink = {}));\r\n/**\r\n * The SelectionRange namespace provides helper function to work with\r\n * SelectionRange literals.\r\n */\r\nexport var SelectionRange;\r\n(function (SelectionRange) {\r\n    /**\r\n     * Creates a new SelectionRange\r\n     * @param range the range.\r\n     * @param parent an optional parent.\r\n     */\r\n    function create(range, parent) {\r\n        return { range: range, parent: parent };\r\n    }\r\n    SelectionRange.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate !== undefined && Range.is(candidate.range) && (candidate.parent === undefined || SelectionRange.is(candidate.parent));\r\n    }\r\n    SelectionRange.is = is;\r\n})(SelectionRange || (SelectionRange = {}));\r\nexport var EOL = ['\\n', '\\r\\n', '\\r'];\r\n/**\r\n * @deprecated Use the text document from the new vscode-languageserver-textdocument package.\r\n */\r\nexport var TextDocument;\r\n(function (TextDocument) {\r\n    /**\r\n     * Creates a new ITextDocument literal from the given uri and content.\r\n     * @param uri The document's uri.\r\n     * @param languageId  The document's language Id.\r\n     * @param content The document's content.\r\n     */\r\n    function create(uri, languageId, version, content) {\r\n        return new FullTextDocument(uri, languageId, version, content);\r\n    }\r\n    TextDocument.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ITextDocument](#ITextDocument) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.number(candidate.lineCount)\r\n            && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\r\n    }\r\n    TextDocument.is = is;\r\n    function applyEdits(document, edits) {\r\n        var text = document.getText();\r\n        var sortedEdits = mergeSort(edits, function (a, b) {\r\n            var diff = a.range.start.line - b.range.start.line;\r\n            if (diff === 0) {\r\n                return a.range.start.character - b.range.start.character;\r\n            }\r\n            return diff;\r\n        });\r\n        var lastModifiedOffset = text.length;\r\n        for (var i = sortedEdits.length - 1; i >= 0; i--) {\r\n            var e = sortedEdits[i];\r\n            var startOffset = document.offsetAt(e.range.start);\r\n            var endOffset = document.offsetAt(e.range.end);\r\n            if (endOffset <= lastModifiedOffset) {\r\n                text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\r\n            }\r\n            else {\r\n                throw new Error('Overlapping edit');\r\n            }\r\n            lastModifiedOffset = startOffset;\r\n        }\r\n        return text;\r\n    }\r\n    TextDocument.applyEdits = applyEdits;\r\n    function mergeSort(data, compare) {\r\n        if (data.length <= 1) {\r\n            // sorted\r\n            return data;\r\n        }\r\n        var p = (data.length / 2) | 0;\r\n        var left = data.slice(0, p);\r\n        var right = data.slice(p);\r\n        mergeSort(left, compare);\r\n        mergeSort(right, compare);\r\n        var leftIdx = 0;\r\n        var rightIdx = 0;\r\n        var i = 0;\r\n        while (leftIdx < left.length && rightIdx < right.length) {\r\n            var ret = compare(left[leftIdx], right[rightIdx]);\r\n            if (ret <= 0) {\r\n                // smaller_equal -> take left to preserve order\r\n                data[i++] = left[leftIdx++];\r\n            }\r\n            else {\r\n                // greater -> take right\r\n                data[i++] = right[rightIdx++];\r\n            }\r\n        }\r\n        while (leftIdx < left.length) {\r\n            data[i++] = left[leftIdx++];\r\n        }\r\n        while (rightIdx < right.length) {\r\n            data[i++] = right[rightIdx++];\r\n        }\r\n        return data;\r\n    }\r\n})(TextDocument || (TextDocument = {}));\r\nvar FullTextDocument = /** @class */ (function () {\r\n    function FullTextDocument(uri, languageId, version, content) {\r\n        this._uri = uri;\r\n        this._languageId = languageId;\r\n        this._version = version;\r\n        this._content = content;\r\n        this._lineOffsets = undefined;\r\n    }\r\n    Object.defineProperty(FullTextDocument.prototype, \"uri\", {\r\n        get: function () {\r\n            return this._uri;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\r\n        get: function () {\r\n            return this._languageId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"version\", {\r\n        get: function () {\r\n            return this._version;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FullTextDocument.prototype.getText = function (range) {\r\n        if (range) {\r\n            var start = this.offsetAt(range.start);\r\n            var end = this.offsetAt(range.end);\r\n            return this._content.substring(start, end);\r\n        }\r\n        return this._content;\r\n    };\r\n    FullTextDocument.prototype.update = function (event, version) {\r\n        this._content = event.text;\r\n        this._version = version;\r\n        this._lineOffsets = undefined;\r\n    };\r\n    FullTextDocument.prototype.getLineOffsets = function () {\r\n        if (this._lineOffsets === undefined) {\r\n            var lineOffsets = [];\r\n            var text = this._content;\r\n            var isLineStart = true;\r\n            for (var i = 0; i < text.length; i++) {\r\n                if (isLineStart) {\r\n                    lineOffsets.push(i);\r\n                    isLineStart = false;\r\n                }\r\n                var ch = text.charAt(i);\r\n                isLineStart = (ch === '\\r' || ch === '\\n');\r\n                if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\r\n                    i++;\r\n                }\r\n            }\r\n            if (isLineStart && text.length > 0) {\r\n                lineOffsets.push(text.length);\r\n            }\r\n            this._lineOffsets = lineOffsets;\r\n        }\r\n        return this._lineOffsets;\r\n    };\r\n    FullTextDocument.prototype.positionAt = function (offset) {\r\n        offset = Math.max(Math.min(offset, this._content.length), 0);\r\n        var lineOffsets = this.getLineOffsets();\r\n        var low = 0, high = lineOffsets.length;\r\n        if (high === 0) {\r\n            return Position.create(0, offset);\r\n        }\r\n        while (low < high) {\r\n            var mid = Math.floor((low + high) / 2);\r\n            if (lineOffsets[mid] > offset) {\r\n                high = mid;\r\n            }\r\n            else {\r\n                low = mid + 1;\r\n            }\r\n        }\r\n        // low is the least x for which the line offset is larger than the current offset\r\n        // or array.length if no line offset is larger than the current offset\r\n        var line = low - 1;\r\n        return Position.create(line, offset - lineOffsets[line]);\r\n    };\r\n    FullTextDocument.prototype.offsetAt = function (position) {\r\n        var lineOffsets = this.getLineOffsets();\r\n        if (position.line >= lineOffsets.length) {\r\n            return this._content.length;\r\n        }\r\n        else if (position.line < 0) {\r\n            return 0;\r\n        }\r\n        var lineOffset = lineOffsets[position.line];\r\n        var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\r\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\r\n    };\r\n    Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\r\n        get: function () {\r\n            return this.getLineOffsets().length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FullTextDocument;\r\n}());\r\nvar Is;\r\n(function (Is) {\r\n    var toString = Object.prototype.toString;\r\n    function defined(value) {\r\n        return typeof value !== 'undefined';\r\n    }\r\n    Is.defined = defined;\r\n    function undefined(value) {\r\n        return typeof value === 'undefined';\r\n    }\r\n    Is.undefined = undefined;\r\n    function boolean(value) {\r\n        return value === true || value === false;\r\n    }\r\n    Is.boolean = boolean;\r\n    function string(value) {\r\n        return toString.call(value) === '[object String]';\r\n    }\r\n    Is.string = string;\r\n    function number(value) {\r\n        return toString.call(value) === '[object Number]';\r\n    }\r\n    Is.number = number;\r\n    function func(value) {\r\n        return toString.call(value) === '[object Function]';\r\n    }\r\n    Is.func = func;\r\n    function objectLiteral(value) {\r\n        // Strictly speaking class instances pass this check as well. Since the LSP\r\n        // doesn't use classes we ignore this for now. If we do we need to add something\r\n        // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\r\n        return value !== null && typeof value === 'object';\r\n    }\r\n    Is.objectLiteral = objectLiteral;\r\n    function typedArray(value, check) {\r\n        return Array.isArray(value) && value.every(check);\r\n    }\r\n    Is.typedArray = typedArray;\r\n})(Is || (Is = {}));\r\n","/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\nexport function equals(one, other) {\n    if (one === other) {\n        return true;\n    }\n    if (one === null || one === undefined || other === null || other === undefined) {\n        return false;\n    }\n    if (typeof one !== typeof other) {\n        return false;\n    }\n    if (typeof one !== 'object') {\n        return false;\n    }\n    if ((Array.isArray(one)) !== (Array.isArray(other))) {\n        return false;\n    }\n    var i, key;\n    if (Array.isArray(one)) {\n        if (one.length !== other.length) {\n            return false;\n        }\n        for (i = 0; i < one.length; i++) {\n            if (!equals(one[i], other[i])) {\n                return false;\n            }\n        }\n    }\n    else {\n        var oneKeys = [];\n        for (key in one) {\n            oneKeys.push(key);\n        }\n        oneKeys.sort();\n        var otherKeys = [];\n        for (key in other) {\n            otherKeys.push(key);\n        }\n        otherKeys.sort();\n        if (!equals(oneKeys, otherKeys)) {\n            return false;\n        }\n        for (i = 0; i < oneKeys.length; i++) {\n            if (!equals(one[oneKeys[i]], other[oneKeys[i]])) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\nexport function isNumber(val) {\n    return typeof val === 'number';\n}\nexport function isDefined(val) {\n    return typeof val !== 'undefined';\n}\nexport function isBoolean(val) {\n    return typeof val === 'boolean';\n}\nexport function isString(val) {\n    return typeof val === 'string';\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nvar FullTextDocument = /** @class */ (function () {\n    function FullTextDocument(uri, languageId, version, content) {\n        this._uri = uri;\n        this._languageId = languageId;\n        this._version = version;\n        this._content = content;\n        this._lineOffsets = undefined;\n    }\n    Object.defineProperty(FullTextDocument.prototype, \"uri\", {\n        get: function () {\n            return this._uri;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\n        get: function () {\n            return this._languageId;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FullTextDocument.prototype, \"version\", {\n        get: function () {\n            return this._version;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    FullTextDocument.prototype.getText = function (range) {\n        if (range) {\n            var start = this.offsetAt(range.start);\n            var end = this.offsetAt(range.end);\n            return this._content.substring(start, end);\n        }\n        return this._content;\n    };\n    FullTextDocument.prototype.update = function (changes, version) {\n        for (var _i = 0, changes_1 = changes; _i < changes_1.length; _i++) {\n            var change = changes_1[_i];\n            if (FullTextDocument.isIncremental(change)) {\n                // makes sure start is before end\n                var range = getWellformedRange(change.range);\n                // update content\n                var startOffset = this.offsetAt(range.start);\n                var endOffset = this.offsetAt(range.end);\n                this._content = this._content.substring(0, startOffset) + change.text + this._content.substring(endOffset, this._content.length);\n                // update the offsets\n                var startLine = Math.max(range.start.line, 0);\n                var endLine = Math.max(range.end.line, 0);\n                var lineOffsets = this._lineOffsets;\n                var addedLineOffsets = computeLineOffsets(change.text, false, startOffset);\n                if (endLine - startLine === addedLineOffsets.length) {\n                    for (var i = 0, len = addedLineOffsets.length; i < len; i++) {\n                        lineOffsets[i + startLine + 1] = addedLineOffsets[i];\n                    }\n                }\n                else {\n                    if (addedLineOffsets.length < 10000) {\n                        lineOffsets.splice.apply(lineOffsets, [startLine + 1, endLine - startLine].concat(addedLineOffsets));\n                    }\n                    else { // avoid too many arguments for splice\n                        this._lineOffsets = lineOffsets = lineOffsets.slice(0, startLine + 1).concat(addedLineOffsets, lineOffsets.slice(endLine + 1));\n                    }\n                }\n                var diff = change.text.length - (endOffset - startOffset);\n                if (diff !== 0) {\n                    for (var i = startLine + 1 + addedLineOffsets.length, len = lineOffsets.length; i < len; i++) {\n                        lineOffsets[i] = lineOffsets[i] + diff;\n                    }\n                }\n            }\n            else if (FullTextDocument.isFull(change)) {\n                this._content = change.text;\n                this._lineOffsets = undefined;\n            }\n            else {\n                throw new Error('Unknown change event received');\n            }\n        }\n        this._version = version;\n    };\n    FullTextDocument.prototype.getLineOffsets = function () {\n        if (this._lineOffsets === undefined) {\n            this._lineOffsets = computeLineOffsets(this._content, true);\n        }\n        return this._lineOffsets;\n    };\n    FullTextDocument.prototype.positionAt = function (offset) {\n        offset = Math.max(Math.min(offset, this._content.length), 0);\n        var lineOffsets = this.getLineOffsets();\n        var low = 0, high = lineOffsets.length;\n        if (high === 0) {\n            return { line: 0, character: offset };\n        }\n        while (low < high) {\n            var mid = Math.floor((low + high) / 2);\n            if (lineOffsets[mid] > offset) {\n                high = mid;\n            }\n            else {\n                low = mid + 1;\n            }\n        }\n        // low is the least x for which the line offset is larger than the current offset\n        // or array.length if no line offset is larger than the current offset\n        var line = low - 1;\n        return { line: line, character: offset - lineOffsets[line] };\n    };\n    FullTextDocument.prototype.offsetAt = function (position) {\n        var lineOffsets = this.getLineOffsets();\n        if (position.line >= lineOffsets.length) {\n            return this._content.length;\n        }\n        else if (position.line < 0) {\n            return 0;\n        }\n        var lineOffset = lineOffsets[position.line];\n        var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\n    };\n    Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\n        get: function () {\n            return this.getLineOffsets().length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    FullTextDocument.isIncremental = function (event) {\n        var candidate = event;\n        return candidate !== undefined && candidate !== null &&\n            typeof candidate.text === 'string' && candidate.range !== undefined &&\n            (candidate.rangeLength === undefined || typeof candidate.rangeLength === 'number');\n    };\n    FullTextDocument.isFull = function (event) {\n        var candidate = event;\n        return candidate !== undefined && candidate !== null &&\n            typeof candidate.text === 'string' && candidate.range === undefined && candidate.rangeLength === undefined;\n    };\n    return FullTextDocument;\n}());\nexport var TextDocument;\n(function (TextDocument) {\n    /**\n     * Creates a new text document.\n     *\n     * @param uri The document's uri.\n     * @param languageId  The document's language Id.\n     * @param version The document's initial version number.\n     * @param content The document's content.\n     */\n    function create(uri, languageId, version, content) {\n        return new FullTextDocument(uri, languageId, version, content);\n    }\n    TextDocument.create = create;\n    /**\n     * Updates a TextDocument by modifing its content.\n     *\n     * @param document the document to update. Only documents created by TextDocument.create are valid inputs.\n     * @param changes the changes to apply to the document.\n     * @returns The updated TextDocument. Note: That's the same document instance passed in as first parameter.\n     *\n     */\n    function update(document, changes, version) {\n        if (document instanceof FullTextDocument) {\n            document.update(changes, version);\n            return document;\n        }\n        else {\n            throw new Error('TextDocument.update: document must be created by TextDocument.create');\n        }\n    }\n    TextDocument.update = update;\n    function applyEdits(document, edits) {\n        var text = document.getText();\n        var sortedEdits = mergeSort(edits.map(getWellformedEdit), function (a, b) {\n            var diff = a.range.start.line - b.range.start.line;\n            if (diff === 0) {\n                return a.range.start.character - b.range.start.character;\n            }\n            return diff;\n        });\n        var lastModifiedOffset = 0;\n        var spans = [];\n        for (var _i = 0, sortedEdits_1 = sortedEdits; _i < sortedEdits_1.length; _i++) {\n            var e = sortedEdits_1[_i];\n            var startOffset = document.offsetAt(e.range.start);\n            if (startOffset < lastModifiedOffset) {\n                throw new Error('Overlapping edit');\n            }\n            else if (startOffset > lastModifiedOffset) {\n                spans.push(text.substring(lastModifiedOffset, startOffset));\n            }\n            if (e.newText.length) {\n                spans.push(e.newText);\n            }\n            lastModifiedOffset = document.offsetAt(e.range.end);\n        }\n        spans.push(text.substr(lastModifiedOffset));\n        return spans.join('');\n    }\n    TextDocument.applyEdits = applyEdits;\n})(TextDocument || (TextDocument = {}));\nfunction mergeSort(data, compare) {\n    if (data.length <= 1) {\n        // sorted\n        return data;\n    }\n    var p = (data.length / 2) | 0;\n    var left = data.slice(0, p);\n    var right = data.slice(p);\n    mergeSort(left, compare);\n    mergeSort(right, compare);\n    var leftIdx = 0;\n    var rightIdx = 0;\n    var i = 0;\n    while (leftIdx < left.length && rightIdx < right.length) {\n        var ret = compare(left[leftIdx], right[rightIdx]);\n        if (ret <= 0) {\n            // smaller_equal -> take left to preserve order\n            data[i++] = left[leftIdx++];\n        }\n        else {\n            // greater -> take right\n            data[i++] = right[rightIdx++];\n        }\n    }\n    while (leftIdx < left.length) {\n        data[i++] = left[leftIdx++];\n    }\n    while (rightIdx < right.length) {\n        data[i++] = right[rightIdx++];\n    }\n    return data;\n}\nfunction computeLineOffsets(text, isAtLineStart, textOffset) {\n    if (textOffset === void 0) { textOffset = 0; }\n    var result = isAtLineStart ? [textOffset] : [];\n    for (var i = 0; i < text.length; i++) {\n        var ch = text.charCodeAt(i);\n        if (ch === 13 /* CarriageReturn */ || ch === 10 /* LineFeed */) {\n            if (ch === 13 /* CarriageReturn */ && i + 1 < text.length && text.charCodeAt(i + 1) === 10 /* LineFeed */) {\n                i++;\n            }\n            result.push(textOffset + i + 1);\n        }\n    }\n    return result;\n}\nfunction getWellformedRange(range) {\n    var start = range.start;\n    var end = range.end;\n    if (start.line > end.line || (start.line === end.line && start.character > end.character)) {\n        return { start: end, end: start };\n    }\n    return range;\n}\nfunction getWellformedEdit(textEdit) {\n    var range = getWellformedRange(textEdit.range);\n    if (range !== textEdit.range) {\n        return { newText: textEdit.newText, range: range };\n    }\n    return textEdit;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range, TextEdit, Color, ColorInformation, ColorPresentation, FoldingRange, FoldingRangeKind, MarkupKind, SelectionRange, Diagnostic, DiagnosticSeverity, CompletionItem, CompletionItemKind, CompletionList, Position, InsertTextFormat, MarkupContent, SymbolInformation, SymbolKind, DocumentSymbol, Location, Hover, MarkedString, FormattingOptions } from 'vscode-languageserver-types';\nimport { TextDocument } from 'vscode-languageserver-textdocument';\nexport { TextDocument, Range, TextEdit, Color, ColorInformation, ColorPresentation, FoldingRange, FoldingRangeKind, SelectionRange, Diagnostic, DiagnosticSeverity, CompletionItem, CompletionItemKind, CompletionList, Position, InsertTextFormat, MarkupContent, MarkupKind, SymbolInformation, SymbolKind, DocumentSymbol, Location, Hover, MarkedString, FormattingOptions };\n/**\n * Error codes used by diagnostics\n */\nexport var ErrorCode;\n(function (ErrorCode) {\n    ErrorCode[ErrorCode[\"Undefined\"] = 0] = \"Undefined\";\n    ErrorCode[ErrorCode[\"EnumValueMismatch\"] = 1] = \"EnumValueMismatch\";\n    ErrorCode[ErrorCode[\"UnexpectedEndOfComment\"] = 257] = \"UnexpectedEndOfComment\";\n    ErrorCode[ErrorCode[\"UnexpectedEndOfString\"] = 258] = \"UnexpectedEndOfString\";\n    ErrorCode[ErrorCode[\"UnexpectedEndOfNumber\"] = 259] = \"UnexpectedEndOfNumber\";\n    ErrorCode[ErrorCode[\"InvalidUnicode\"] = 260] = \"InvalidUnicode\";\n    ErrorCode[ErrorCode[\"InvalidEscapeCharacter\"] = 261] = \"InvalidEscapeCharacter\";\n    ErrorCode[ErrorCode[\"InvalidCharacter\"] = 262] = \"InvalidCharacter\";\n    ErrorCode[ErrorCode[\"PropertyExpected\"] = 513] = \"PropertyExpected\";\n    ErrorCode[ErrorCode[\"CommaExpected\"] = 514] = \"CommaExpected\";\n    ErrorCode[ErrorCode[\"ColonExpected\"] = 515] = \"ColonExpected\";\n    ErrorCode[ErrorCode[\"ValueExpected\"] = 516] = \"ValueExpected\";\n    ErrorCode[ErrorCode[\"CommaOrCloseBacketExpected\"] = 517] = \"CommaOrCloseBacketExpected\";\n    ErrorCode[ErrorCode[\"CommaOrCloseBraceExpected\"] = 518] = \"CommaOrCloseBraceExpected\";\n    ErrorCode[ErrorCode[\"TrailingComma\"] = 519] = \"TrailingComma\";\n    ErrorCode[ErrorCode[\"DuplicateKey\"] = 520] = \"DuplicateKey\";\n    ErrorCode[ErrorCode[\"CommentNotPermitted\"] = 521] = \"CommentNotPermitted\";\n    ErrorCode[ErrorCode[\"SchemaResolveError\"] = 768] = \"SchemaResolveError\";\n})(ErrorCode || (ErrorCode = {}));\nexport var ClientCapabilities;\n(function (ClientCapabilities) {\n    ClientCapabilities.LATEST = {\n        textDocument: {\n            completion: {\n                completionItem: {\n                    documentationFormat: [MarkupKind.Markdown, MarkupKind.PlainText],\n                    commitCharactersSupport: true\n                }\n            }\n        }\n    };\n})(ClientCapabilities || (ClientCapabilities = {}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport * as Json from 'jsonc-parser';\nimport { isNumber, equals, isBoolean, isString, isDefined } from '../utils/objects';\nimport { ErrorCode, Diagnostic, DiagnosticSeverity, Range } from '../jsonLanguageTypes';\nimport * as nls from 'vscode-nls';\nvar localize = nls.loadMessageBundle();\nvar formats = {\n    'color-hex': { errorMessage: localize('colorHexFormatWarning', 'Invalid color format. Use #RGB, #RGBA, #RRGGBB or #RRGGBBAA.'), pattern: /^#([0-9A-Fa-f]{3,4}|([0-9A-Fa-f]{2}){3,4})$/ },\n    'date-time': { errorMessage: localize('dateTimeFormatWarning', 'String is not a RFC3339 date-time.'), pattern: /^(\\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\\.[0-9]+)?(Z|(\\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i },\n    'date': { errorMessage: localize('dateFormatWarning', 'String is not a RFC3339 date.'), pattern: /^(\\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/i },\n    'time': { errorMessage: localize('timeFormatWarning', 'String is not a RFC3339 time.'), pattern: /^([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\\.[0-9]+)?(Z|(\\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i },\n    'email': { errorMessage: localize('emailFormatWarning', 'String is not an e-mail address.'), pattern: /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/ }\n};\nvar ASTNodeImpl = /** @class */ (function () {\n    function ASTNodeImpl(parent, offset, length) {\n        if (length === void 0) { length = 0; }\n        this.offset = offset;\n        this.length = length;\n        this.parent = parent;\n    }\n    Object.defineProperty(ASTNodeImpl.prototype, \"children\", {\n        get: function () {\n            return [];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ASTNodeImpl.prototype.toString = function () {\n        return 'type: ' + this.type + ' (' + this.offset + '/' + this.length + ')' + (this.parent ? ' parent: {' + this.parent.toString() + '}' : '');\n    };\n    return ASTNodeImpl;\n}());\nexport { ASTNodeImpl };\nvar NullASTNodeImpl = /** @class */ (function (_super) {\n    __extends(NullASTNodeImpl, _super);\n    function NullASTNodeImpl(parent, offset) {\n        var _this = _super.call(this, parent, offset) || this;\n        _this.type = 'null';\n        _this.value = null;\n        return _this;\n    }\n    return NullASTNodeImpl;\n}(ASTNodeImpl));\nexport { NullASTNodeImpl };\nvar BooleanASTNodeImpl = /** @class */ (function (_super) {\n    __extends(BooleanASTNodeImpl, _super);\n    function BooleanASTNodeImpl(parent, boolValue, offset) {\n        var _this = _super.call(this, parent, offset) || this;\n        _this.type = 'boolean';\n        _this.value = boolValue;\n        return _this;\n    }\n    return BooleanASTNodeImpl;\n}(ASTNodeImpl));\nexport { BooleanASTNodeImpl };\nvar ArrayASTNodeImpl = /** @class */ (function (_super) {\n    __extends(ArrayASTNodeImpl, _super);\n    function ArrayASTNodeImpl(parent, offset) {\n        var _this = _super.call(this, parent, offset) || this;\n        _this.type = 'array';\n        _this.items = [];\n        return _this;\n    }\n    Object.defineProperty(ArrayASTNodeImpl.prototype, \"children\", {\n        get: function () {\n            return this.items;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return ArrayASTNodeImpl;\n}(ASTNodeImpl));\nexport { ArrayASTNodeImpl };\nvar NumberASTNodeImpl = /** @class */ (function (_super) {\n    __extends(NumberASTNodeImpl, _super);\n    function NumberASTNodeImpl(parent, offset) {\n        var _this = _super.call(this, parent, offset) || this;\n        _this.type = 'number';\n        _this.isInteger = true;\n        _this.value = Number.NaN;\n        return _this;\n    }\n    return NumberASTNodeImpl;\n}(ASTNodeImpl));\nexport { NumberASTNodeImpl };\nvar StringASTNodeImpl = /** @class */ (function (_super) {\n    __extends(StringASTNodeImpl, _super);\n    function StringASTNodeImpl(parent, offset, length) {\n        var _this = _super.call(this, parent, offset, length) || this;\n        _this.type = 'string';\n        _this.value = '';\n        return _this;\n    }\n    return StringASTNodeImpl;\n}(ASTNodeImpl));\nexport { StringASTNodeImpl };\nvar PropertyASTNodeImpl = /** @class */ (function (_super) {\n    __extends(PropertyASTNodeImpl, _super);\n    function PropertyASTNodeImpl(parent, offset, keyNode) {\n        var _this = _super.call(this, parent, offset) || this;\n        _this.type = 'property';\n        _this.colonOffset = -1;\n        _this.keyNode = keyNode;\n        return _this;\n    }\n    Object.defineProperty(PropertyASTNodeImpl.prototype, \"children\", {\n        get: function () {\n            return this.valueNode ? [this.keyNode, this.valueNode] : [this.keyNode];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return PropertyASTNodeImpl;\n}(ASTNodeImpl));\nexport { PropertyASTNodeImpl };\nvar ObjectASTNodeImpl = /** @class */ (function (_super) {\n    __extends(ObjectASTNodeImpl, _super);\n    function ObjectASTNodeImpl(parent, offset) {\n        var _this = _super.call(this, parent, offset) || this;\n        _this.type = 'object';\n        _this.properties = [];\n        return _this;\n    }\n    Object.defineProperty(ObjectASTNodeImpl.prototype, \"children\", {\n        get: function () {\n            return this.properties;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return ObjectASTNodeImpl;\n}(ASTNodeImpl));\nexport { ObjectASTNodeImpl };\nexport function asSchema(schema) {\n    if (isBoolean(schema)) {\n        return schema ? {} : { \"not\": {} };\n    }\n    return schema;\n}\nexport var EnumMatch;\n(function (EnumMatch) {\n    EnumMatch[EnumMatch[\"Key\"] = 0] = \"Key\";\n    EnumMatch[EnumMatch[\"Enum\"] = 1] = \"Enum\";\n})(EnumMatch || (EnumMatch = {}));\nvar SchemaCollector = /** @class */ (function () {\n    function SchemaCollector(focusOffset, exclude) {\n        if (focusOffset === void 0) { focusOffset = -1; }\n        this.focusOffset = focusOffset;\n        this.exclude = exclude;\n        this.schemas = [];\n    }\n    SchemaCollector.prototype.add = function (schema) {\n        this.schemas.push(schema);\n    };\n    SchemaCollector.prototype.merge = function (other) {\n        Array.prototype.push.apply(this.schemas, other.schemas);\n    };\n    SchemaCollector.prototype.include = function (node) {\n        return (this.focusOffset === -1 || contains(node, this.focusOffset)) && (node !== this.exclude);\n    };\n    SchemaCollector.prototype.newSub = function () {\n        return new SchemaCollector(-1, this.exclude);\n    };\n    return SchemaCollector;\n}());\nvar NoOpSchemaCollector = /** @class */ (function () {\n    function NoOpSchemaCollector() {\n    }\n    Object.defineProperty(NoOpSchemaCollector.prototype, \"schemas\", {\n        get: function () { return []; },\n        enumerable: true,\n        configurable: true\n    });\n    NoOpSchemaCollector.prototype.add = function (schema) { };\n    NoOpSchemaCollector.prototype.merge = function (other) { };\n    NoOpSchemaCollector.prototype.include = function (node) { return true; };\n    NoOpSchemaCollector.prototype.newSub = function () { return this; };\n    NoOpSchemaCollector.instance = new NoOpSchemaCollector();\n    return NoOpSchemaCollector;\n}());\nvar ValidationResult = /** @class */ (function () {\n    function ValidationResult() {\n        this.problems = [];\n        this.propertiesMatches = 0;\n        this.propertiesValueMatches = 0;\n        this.primaryValueMatches = 0;\n        this.enumValueMatch = false;\n        this.enumValues = undefined;\n    }\n    ValidationResult.prototype.hasProblems = function () {\n        return !!this.problems.length;\n    };\n    ValidationResult.prototype.mergeAll = function (validationResults) {\n        for (var _i = 0, validationResults_1 = validationResults; _i < validationResults_1.length; _i++) {\n            var validationResult = validationResults_1[_i];\n            this.merge(validationResult);\n        }\n    };\n    ValidationResult.prototype.merge = function (validationResult) {\n        this.problems = this.problems.concat(validationResult.problems);\n    };\n    ValidationResult.prototype.mergeEnumValues = function (validationResult) {\n        if (!this.enumValueMatch && !validationResult.enumValueMatch && this.enumValues && validationResult.enumValues) {\n            this.enumValues = this.enumValues.concat(validationResult.enumValues);\n            for (var _i = 0, _a = this.problems; _i < _a.length; _i++) {\n                var error = _a[_i];\n                if (error.code === ErrorCode.EnumValueMismatch) {\n                    error.message = localize('enumWarning', 'Value is not accepted. Valid values: {0}.', this.enumValues.map(function (v) { return JSON.stringify(v); }).join(', '));\n                }\n            }\n        }\n    };\n    ValidationResult.prototype.mergePropertyMatch = function (propertyValidationResult) {\n        this.merge(propertyValidationResult);\n        this.propertiesMatches++;\n        if (propertyValidationResult.enumValueMatch || !propertyValidationResult.hasProblems() && propertyValidationResult.propertiesMatches) {\n            this.propertiesValueMatches++;\n        }\n        if (propertyValidationResult.enumValueMatch && propertyValidationResult.enumValues && propertyValidationResult.enumValues.length === 1) {\n            this.primaryValueMatches++;\n        }\n    };\n    ValidationResult.prototype.compare = function (other) {\n        var hasProblems = this.hasProblems();\n        if (hasProblems !== other.hasProblems()) {\n            return hasProblems ? -1 : 1;\n        }\n        if (this.enumValueMatch !== other.enumValueMatch) {\n            return other.enumValueMatch ? -1 : 1;\n        }\n        if (this.primaryValueMatches !== other.primaryValueMatches) {\n            return this.primaryValueMatches - other.primaryValueMatches;\n        }\n        if (this.propertiesValueMatches !== other.propertiesValueMatches) {\n            return this.propertiesValueMatches - other.propertiesValueMatches;\n        }\n        return this.propertiesMatches - other.propertiesMatches;\n    };\n    return ValidationResult;\n}());\nexport { ValidationResult };\nexport function newJSONDocument(root, diagnostics) {\n    if (diagnostics === void 0) { diagnostics = []; }\n    return new JSONDocument(root, diagnostics, []);\n}\nexport function getNodeValue(node) {\n    return Json.getNodeValue(node);\n}\nexport function getNodePath(node) {\n    return Json.getNodePath(node);\n}\nexport function contains(node, offset, includeRightBound) {\n    if (includeRightBound === void 0) { includeRightBound = false; }\n    return offset >= node.offset && offset < (node.offset + node.length) || includeRightBound && offset === (node.offset + node.length);\n}\nvar JSONDocument = /** @class */ (function () {\n    function JSONDocument(root, syntaxErrors, comments) {\n        if (syntaxErrors === void 0) { syntaxErrors = []; }\n        if (comments === void 0) { comments = []; }\n        this.root = root;\n        this.syntaxErrors = syntaxErrors;\n        this.comments = comments;\n    }\n    JSONDocument.prototype.getNodeFromOffset = function (offset, includeRightBound) {\n        if (includeRightBound === void 0) { includeRightBound = false; }\n        if (this.root) {\n            return Json.findNodeAtOffset(this.root, offset, includeRightBound);\n        }\n        return undefined;\n    };\n    JSONDocument.prototype.visit = function (visitor) {\n        if (this.root) {\n            var doVisit_1 = function (node) {\n                var ctn = visitor(node);\n                var children = node.children;\n                if (Array.isArray(children)) {\n                    for (var i = 0; i < children.length && ctn; i++) {\n                        ctn = doVisit_1(children[i]);\n                    }\n                }\n                return ctn;\n            };\n            doVisit_1(this.root);\n        }\n    };\n    JSONDocument.prototype.validate = function (textDocument, schema) {\n        if (this.root && schema) {\n            var validationResult = new ValidationResult();\n            validate(this.root, schema, validationResult, NoOpSchemaCollector.instance);\n            return validationResult.problems.map(function (p) {\n                var range = Range.create(textDocument.positionAt(p.location.offset), textDocument.positionAt(p.location.offset + p.location.length));\n                return Diagnostic.create(range, p.message, p.severity, p.code);\n            });\n        }\n        return undefined;\n    };\n    JSONDocument.prototype.getMatchingSchemas = function (schema, focusOffset, exclude) {\n        if (focusOffset === void 0) { focusOffset = -1; }\n        var matchingSchemas = new SchemaCollector(focusOffset, exclude);\n        if (this.root && schema) {\n            validate(this.root, schema, new ValidationResult(), matchingSchemas);\n        }\n        return matchingSchemas.schemas;\n    };\n    return JSONDocument;\n}());\nexport { JSONDocument };\nfunction validate(n, schema, validationResult, matchingSchemas) {\n    if (!n || !matchingSchemas.include(n)) {\n        return;\n    }\n    var node = n;\n    switch (node.type) {\n        case 'object':\n            _validateObjectNode(node, schema, validationResult, matchingSchemas);\n            break;\n        case 'array':\n            _validateArrayNode(node, schema, validationResult, matchingSchemas);\n            break;\n        case 'string':\n            _validateStringNode(node, schema, validationResult, matchingSchemas);\n            break;\n        case 'number':\n            _validateNumberNode(node, schema, validationResult, matchingSchemas);\n            break;\n        case 'property':\n            return validate(node.valueNode, schema, validationResult, matchingSchemas);\n    }\n    _validateNode();\n    matchingSchemas.add({ node: node, schema: schema });\n    function _validateNode() {\n        function matchesType(type) {\n            return node.type === type || (type === 'integer' && node.type === 'number' && node.isInteger);\n        }\n        if (Array.isArray(schema.type)) {\n            if (!schema.type.some(matchesType)) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: schema.errorMessage || localize('typeArrayMismatchWarning', 'Incorrect type. Expected one of {0}.', schema.type.join(', '))\n                });\n            }\n        }\n        else if (schema.type) {\n            if (!matchesType(schema.type)) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: schema.errorMessage || localize('typeMismatchWarning', 'Incorrect type. Expected \"{0}\".', schema.type)\n                });\n            }\n        }\n        if (Array.isArray(schema.allOf)) {\n            for (var _i = 0, _a = schema.allOf; _i < _a.length; _i++) {\n                var subSchemaRef = _a[_i];\n                validate(node, asSchema(subSchemaRef), validationResult, matchingSchemas);\n            }\n        }\n        var notSchema = asSchema(schema.not);\n        if (notSchema) {\n            var subValidationResult = new ValidationResult();\n            var subMatchingSchemas = matchingSchemas.newSub();\n            validate(node, notSchema, subValidationResult, subMatchingSchemas);\n            if (!subValidationResult.hasProblems()) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: localize('notSchemaWarning', \"Matches a schema that is not allowed.\")\n                });\n            }\n            for (var _b = 0, _c = subMatchingSchemas.schemas; _b < _c.length; _b++) {\n                var ms = _c[_b];\n                ms.inverted = !ms.inverted;\n                matchingSchemas.add(ms);\n            }\n        }\n        var testAlternatives = function (alternatives, maxOneMatch) {\n            var matches = [];\n            // remember the best match that is used for error messages\n            var bestMatch = undefined;\n            for (var _i = 0, alternatives_1 = alternatives; _i < alternatives_1.length; _i++) {\n                var subSchemaRef = alternatives_1[_i];\n                var subSchema = asSchema(subSchemaRef);\n                var subValidationResult = new ValidationResult();\n                var subMatchingSchemas = matchingSchemas.newSub();\n                validate(node, subSchema, subValidationResult, subMatchingSchemas);\n                if (!subValidationResult.hasProblems()) {\n                    matches.push(subSchema);\n                }\n                if (!bestMatch) {\n                    bestMatch = { schema: subSchema, validationResult: subValidationResult, matchingSchemas: subMatchingSchemas };\n                }\n                else {\n                    if (!maxOneMatch && !subValidationResult.hasProblems() && !bestMatch.validationResult.hasProblems()) {\n                        // no errors, both are equally good matches\n                        bestMatch.matchingSchemas.merge(subMatchingSchemas);\n                        bestMatch.validationResult.propertiesMatches += subValidationResult.propertiesMatches;\n                        bestMatch.validationResult.propertiesValueMatches += subValidationResult.propertiesValueMatches;\n                    }\n                    else {\n                        var compareResult = subValidationResult.compare(bestMatch.validationResult);\n                        if (compareResult > 0) {\n                            // our node is the best matching so far\n                            bestMatch = { schema: subSchema, validationResult: subValidationResult, matchingSchemas: subMatchingSchemas };\n                        }\n                        else if (compareResult === 0) {\n                            // there's already a best matching but we are as good\n                            bestMatch.matchingSchemas.merge(subMatchingSchemas);\n                            bestMatch.validationResult.mergeEnumValues(subValidationResult);\n                        }\n                    }\n                }\n            }\n            if (matches.length > 1 && maxOneMatch) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: 1 },\n                    severity: DiagnosticSeverity.Warning,\n                    message: localize('oneOfWarning', \"Matches multiple schemas when only one must validate.\")\n                });\n            }\n            if (bestMatch) {\n                validationResult.merge(bestMatch.validationResult);\n                validationResult.propertiesMatches += bestMatch.validationResult.propertiesMatches;\n                validationResult.propertiesValueMatches += bestMatch.validationResult.propertiesValueMatches;\n                matchingSchemas.merge(bestMatch.matchingSchemas);\n            }\n            return matches.length;\n        };\n        if (Array.isArray(schema.anyOf)) {\n            testAlternatives(schema.anyOf, false);\n        }\n        if (Array.isArray(schema.oneOf)) {\n            testAlternatives(schema.oneOf, true);\n        }\n        var testBranch = function (schema) {\n            var subValidationResult = new ValidationResult();\n            var subMatchingSchemas = matchingSchemas.newSub();\n            validate(node, asSchema(schema), subValidationResult, subMatchingSchemas);\n            validationResult.merge(subValidationResult);\n            validationResult.propertiesMatches += subValidationResult.propertiesMatches;\n            validationResult.propertiesValueMatches += subValidationResult.propertiesValueMatches;\n            matchingSchemas.merge(subMatchingSchemas);\n        };\n        var testCondition = function (ifSchema, thenSchema, elseSchema) {\n            var subSchema = asSchema(ifSchema);\n            var subValidationResult = new ValidationResult();\n            var subMatchingSchemas = matchingSchemas.newSub();\n            validate(node, subSchema, subValidationResult, subMatchingSchemas);\n            matchingSchemas.merge(subMatchingSchemas);\n            if (!subValidationResult.hasProblems()) {\n                if (thenSchema) {\n                    testBranch(thenSchema);\n                }\n            }\n            else if (elseSchema) {\n                testBranch(elseSchema);\n            }\n        };\n        var ifSchema = asSchema(schema.if);\n        if (ifSchema) {\n            testCondition(ifSchema, asSchema(schema.then), asSchema(schema.else));\n        }\n        if (Array.isArray(schema.enum)) {\n            var val = getNodeValue(node);\n            var enumValueMatch = false;\n            for (var _d = 0, _e = schema.enum; _d < _e.length; _d++) {\n                var e = _e[_d];\n                if (equals(val, e)) {\n                    enumValueMatch = true;\n                    break;\n                }\n            }\n            validationResult.enumValues = schema.enum;\n            validationResult.enumValueMatch = enumValueMatch;\n            if (!enumValueMatch) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    code: ErrorCode.EnumValueMismatch,\n                    message: schema.errorMessage || localize('enumWarning', 'Value is not accepted. Valid values: {0}.', schema.enum.map(function (v) { return JSON.stringify(v); }).join(', '))\n                });\n            }\n        }\n        if (isDefined(schema.const)) {\n            var val = getNodeValue(node);\n            if (!equals(val, schema.const)) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    code: ErrorCode.EnumValueMismatch,\n                    message: schema.errorMessage || localize('constWarning', 'Value must be {0}.', JSON.stringify(schema.const))\n                });\n                validationResult.enumValueMatch = false;\n            }\n            else {\n                validationResult.enumValueMatch = true;\n            }\n            validationResult.enumValues = [schema.const];\n        }\n        if (schema.deprecationMessage && node.parent) {\n            validationResult.problems.push({\n                location: { offset: node.parent.offset, length: node.parent.length },\n                severity: DiagnosticSeverity.Warning,\n                message: schema.deprecationMessage\n            });\n        }\n    }\n    function _validateNumberNode(node, schema, validationResult, matchingSchemas) {\n        var val = node.value;\n        if (isNumber(schema.multipleOf)) {\n            if (val % schema.multipleOf !== 0) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: localize('multipleOfWarning', 'Value is not divisible by {0}.', schema.multipleOf)\n                });\n            }\n        }\n        function getExclusiveLimit(limit, exclusive) {\n            if (isNumber(exclusive)) {\n                return exclusive;\n            }\n            if (isBoolean(exclusive) && exclusive) {\n                return limit;\n            }\n            return undefined;\n        }\n        function getLimit(limit, exclusive) {\n            if (!isBoolean(exclusive) || !exclusive) {\n                return limit;\n            }\n            return undefined;\n        }\n        var exclusiveMinimum = getExclusiveLimit(schema.minimum, schema.exclusiveMinimum);\n        if (isNumber(exclusiveMinimum) && val <= exclusiveMinimum) {\n            validationResult.problems.push({\n                location: { offset: node.offset, length: node.length },\n                severity: DiagnosticSeverity.Warning,\n                message: localize('exclusiveMinimumWarning', 'Value is below the exclusive minimum of {0}.', exclusiveMinimum)\n            });\n        }\n        var exclusiveMaximum = getExclusiveLimit(schema.maximum, schema.exclusiveMaximum);\n        if (isNumber(exclusiveMaximum) && val >= exclusiveMaximum) {\n            validationResult.problems.push({\n                location: { offset: node.offset, length: node.length },\n                severity: DiagnosticSeverity.Warning,\n                message: localize('exclusiveMaximumWarning', 'Value is above the exclusive maximum of {0}.', exclusiveMaximum)\n            });\n        }\n        var minimum = getLimit(schema.minimum, schema.exclusiveMinimum);\n        if (isNumber(minimum) && val < minimum) {\n            validationResult.problems.push({\n                location: { offset: node.offset, length: node.length },\n                severity: DiagnosticSeverity.Warning,\n                message: localize('minimumWarning', 'Value is below the minimum of {0}.', minimum)\n            });\n        }\n        var maximum = getLimit(schema.maximum, schema.exclusiveMaximum);\n        if (isNumber(maximum) && val > maximum) {\n            validationResult.problems.push({\n                location: { offset: node.offset, length: node.length },\n                severity: DiagnosticSeverity.Warning,\n                message: localize('maximumWarning', 'Value is above the maximum of {0}.', maximum)\n            });\n        }\n    }\n    function _validateStringNode(node, schema, validationResult, matchingSchemas) {\n        if (isNumber(schema.minLength) && node.value.length < schema.minLength) {\n            validationResult.problems.push({\n                location: { offset: node.offset, length: node.length },\n                severity: DiagnosticSeverity.Warning,\n                message: localize('minLengthWarning', 'String is shorter than the minimum length of {0}.', schema.minLength)\n            });\n        }\n        if (isNumber(schema.maxLength) && node.value.length > schema.maxLength) {\n            validationResult.problems.push({\n                location: { offset: node.offset, length: node.length },\n                severity: DiagnosticSeverity.Warning,\n                message: localize('maxLengthWarning', 'String is longer than the maximum length of {0}.', schema.maxLength)\n            });\n        }\n        if (isString(schema.pattern)) {\n            var regex = new RegExp(schema.pattern);\n            if (!regex.test(node.value)) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: schema.patternErrorMessage || schema.errorMessage || localize('patternWarning', 'String does not match the pattern of \"{0}\".', schema.pattern)\n                });\n            }\n        }\n        if (schema.format) {\n            switch (schema.format) {\n                case 'uri':\n                case 'uri-reference':\n                    {\n                        var errorMessage = void 0;\n                        if (!node.value) {\n                            errorMessage = localize('uriEmpty', 'URI expected.');\n                        }\n                        else {\n                            var match = /^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/.exec(node.value);\n                            if (!match) {\n                                errorMessage = localize('uriMissing', 'URI is expected.');\n                            }\n                            else if (!match[2] && schema.format === 'uri') {\n                                errorMessage = localize('uriSchemeMissing', 'URI with a scheme is expected.');\n                            }\n                        }\n                        if (errorMessage) {\n                            validationResult.problems.push({\n                                location: { offset: node.offset, length: node.length },\n                                severity: DiagnosticSeverity.Warning,\n                                message: schema.patternErrorMessage || schema.errorMessage || localize('uriFormatWarning', 'String is not a URI: {0}', errorMessage)\n                            });\n                        }\n                    }\n                    break;\n                case 'color-hex':\n                case 'date-time':\n                case 'date':\n                case 'time':\n                case 'email':\n                    var format = formats[schema.format];\n                    if (!node.value || !format.pattern.exec(node.value)) {\n                        validationResult.problems.push({\n                            location: { offset: node.offset, length: node.length },\n                            severity: DiagnosticSeverity.Warning,\n                            message: schema.patternErrorMessage || schema.errorMessage || format.errorMessage\n                        });\n                    }\n                default:\n            }\n        }\n    }\n    function _validateArrayNode(node, schema, validationResult, matchingSchemas) {\n        if (Array.isArray(schema.items)) {\n            var subSchemas = schema.items;\n            for (var index = 0; index < subSchemas.length; index++) {\n                var subSchemaRef = subSchemas[index];\n                var subSchema = asSchema(subSchemaRef);\n                var itemValidationResult = new ValidationResult();\n                var item = node.items[index];\n                if (item) {\n                    validate(item, subSchema, itemValidationResult, matchingSchemas);\n                    validationResult.mergePropertyMatch(itemValidationResult);\n                }\n                else if (node.items.length >= subSchemas.length) {\n                    validationResult.propertiesValueMatches++;\n                }\n            }\n            if (node.items.length > subSchemas.length) {\n                if (typeof schema.additionalItems === 'object') {\n                    for (var i = subSchemas.length; i < node.items.length; i++) {\n                        var itemValidationResult = new ValidationResult();\n                        validate(node.items[i], schema.additionalItems, itemValidationResult, matchingSchemas);\n                        validationResult.mergePropertyMatch(itemValidationResult);\n                    }\n                }\n                else if (schema.additionalItems === false) {\n                    validationResult.problems.push({\n                        location: { offset: node.offset, length: node.length },\n                        severity: DiagnosticSeverity.Warning,\n                        message: localize('additionalItemsWarning', 'Array has too many items according to schema. Expected {0} or fewer.', subSchemas.length)\n                    });\n                }\n            }\n        }\n        else {\n            var itemSchema = asSchema(schema.items);\n            if (itemSchema) {\n                for (var _i = 0, _a = node.items; _i < _a.length; _i++) {\n                    var item = _a[_i];\n                    var itemValidationResult = new ValidationResult();\n                    validate(item, itemSchema, itemValidationResult, matchingSchemas);\n                    validationResult.mergePropertyMatch(itemValidationResult);\n                }\n            }\n        }\n        var containsSchema = asSchema(schema.contains);\n        if (containsSchema) {\n            var doesContain = node.items.some(function (item) {\n                var itemValidationResult = new ValidationResult();\n                validate(item, containsSchema, itemValidationResult, NoOpSchemaCollector.instance);\n                return !itemValidationResult.hasProblems();\n            });\n            if (!doesContain) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: schema.errorMessage || localize('requiredItemMissingWarning', 'Array does not contain required item.')\n                });\n            }\n        }\n        if (isNumber(schema.minItems) && node.items.length < schema.minItems) {\n            validationResult.problems.push({\n                location: { offset: node.offset, length: node.length },\n                severity: DiagnosticSeverity.Warning,\n                message: localize('minItemsWarning', 'Array has too few items. Expected {0} or more.', schema.minItems)\n            });\n        }\n        if (isNumber(schema.maxItems) && node.items.length > schema.maxItems) {\n            validationResult.problems.push({\n                location: { offset: node.offset, length: node.length },\n                severity: DiagnosticSeverity.Warning,\n                message: localize('maxItemsWarning', 'Array has too many items. Expected {0} or fewer.', schema.maxItems)\n            });\n        }\n        if (schema.uniqueItems === true) {\n            var values_1 = getNodeValue(node);\n            var duplicates = values_1.some(function (value, index) {\n                return index !== values_1.lastIndexOf(value);\n            });\n            if (duplicates) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: localize('uniqueItemsWarning', 'Array has duplicate items.')\n                });\n            }\n        }\n    }\n    function _validateObjectNode(node, schema, validationResult, matchingSchemas) {\n        var seenKeys = Object.create(null);\n        var unprocessedProperties = [];\n        for (var _i = 0, _a = node.properties; _i < _a.length; _i++) {\n            var propertyNode = _a[_i];\n            var key = propertyNode.keyNode.value;\n            seenKeys[key] = propertyNode.valueNode;\n            unprocessedProperties.push(key);\n        }\n        if (Array.isArray(schema.required)) {\n            for (var _b = 0, _c = schema.required; _b < _c.length; _b++) {\n                var propertyName = _c[_b];\n                if (!seenKeys[propertyName]) {\n                    var keyNode = node.parent && node.parent.type === 'property' && node.parent.keyNode;\n                    var location = keyNode ? { offset: keyNode.offset, length: keyNode.length } : { offset: node.offset, length: 1 };\n                    validationResult.problems.push({\n                        location: location,\n                        severity: DiagnosticSeverity.Warning,\n                        message: localize('MissingRequiredPropWarning', 'Missing property \"{0}\".', propertyName)\n                    });\n                }\n            }\n        }\n        var propertyProcessed = function (prop) {\n            var index = unprocessedProperties.indexOf(prop);\n            while (index >= 0) {\n                unprocessedProperties.splice(index, 1);\n                index = unprocessedProperties.indexOf(prop);\n            }\n        };\n        if (schema.properties) {\n            for (var _d = 0, _e = Object.keys(schema.properties); _d < _e.length; _d++) {\n                var propertyName = _e[_d];\n                propertyProcessed(propertyName);\n                var propertySchema = schema.properties[propertyName];\n                var child = seenKeys[propertyName];\n                if (child) {\n                    if (isBoolean(propertySchema)) {\n                        if (!propertySchema) {\n                            var propertyNode = child.parent;\n                            validationResult.problems.push({\n                                location: { offset: propertyNode.keyNode.offset, length: propertyNode.keyNode.length },\n                                severity: DiagnosticSeverity.Warning,\n                                message: schema.errorMessage || localize('DisallowedExtraPropWarning', 'Property {0} is not allowed.', propertyName)\n                            });\n                        }\n                        else {\n                            validationResult.propertiesMatches++;\n                            validationResult.propertiesValueMatches++;\n                        }\n                    }\n                    else {\n                        var propertyValidationResult = new ValidationResult();\n                        validate(child, propertySchema, propertyValidationResult, matchingSchemas);\n                        validationResult.mergePropertyMatch(propertyValidationResult);\n                    }\n                }\n            }\n        }\n        if (schema.patternProperties) {\n            for (var _f = 0, _g = Object.keys(schema.patternProperties); _f < _g.length; _f++) {\n                var propertyPattern = _g[_f];\n                var regex = new RegExp(propertyPattern);\n                for (var _h = 0, _j = unprocessedProperties.slice(0); _h < _j.length; _h++) {\n                    var propertyName = _j[_h];\n                    if (regex.test(propertyName)) {\n                        propertyProcessed(propertyName);\n                        var child = seenKeys[propertyName];\n                        if (child) {\n                            var propertySchema = schema.patternProperties[propertyPattern];\n                            if (isBoolean(propertySchema)) {\n                                if (!propertySchema) {\n                                    var propertyNode = child.parent;\n                                    validationResult.problems.push({\n                                        location: { offset: propertyNode.keyNode.offset, length: propertyNode.keyNode.length },\n                                        severity: DiagnosticSeverity.Warning,\n                                        message: schema.errorMessage || localize('DisallowedExtraPropWarning', 'Property {0} is not allowed.', propertyName)\n                                    });\n                                }\n                                else {\n                                    validationResult.propertiesMatches++;\n                                    validationResult.propertiesValueMatches++;\n                                }\n                            }\n                            else {\n                                var propertyValidationResult = new ValidationResult();\n                                validate(child, propertySchema, propertyValidationResult, matchingSchemas);\n                                validationResult.mergePropertyMatch(propertyValidationResult);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        if (typeof schema.additionalProperties === 'object') {\n            for (var _k = 0, unprocessedProperties_1 = unprocessedProperties; _k < unprocessedProperties_1.length; _k++) {\n                var propertyName = unprocessedProperties_1[_k];\n                var child = seenKeys[propertyName];\n                if (child) {\n                    var propertyValidationResult = new ValidationResult();\n                    validate(child, schema.additionalProperties, propertyValidationResult, matchingSchemas);\n                    validationResult.mergePropertyMatch(propertyValidationResult);\n                }\n            }\n        }\n        else if (schema.additionalProperties === false) {\n            if (unprocessedProperties.length > 0) {\n                for (var _l = 0, unprocessedProperties_2 = unprocessedProperties; _l < unprocessedProperties_2.length; _l++) {\n                    var propertyName = unprocessedProperties_2[_l];\n                    var child = seenKeys[propertyName];\n                    if (child) {\n                        var propertyNode = child.parent;\n                        validationResult.problems.push({\n                            location: { offset: propertyNode.keyNode.offset, length: propertyNode.keyNode.length },\n                            severity: DiagnosticSeverity.Warning,\n                            message: schema.errorMessage || localize('DisallowedExtraPropWarning', 'Property {0} is not allowed.', propertyName)\n                        });\n                    }\n                }\n            }\n        }\n        if (isNumber(schema.maxProperties)) {\n            if (node.properties.length > schema.maxProperties) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: localize('MaxPropWarning', 'Object has more properties than limit of {0}.', schema.maxProperties)\n                });\n            }\n        }\n        if (isNumber(schema.minProperties)) {\n            if (node.properties.length < schema.minProperties) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: localize('MinPropWarning', 'Object has fewer properties than the required number of {0}', schema.minProperties)\n                });\n            }\n        }\n        if (schema.dependencies) {\n            for (var _m = 0, _o = Object.keys(schema.dependencies); _m < _o.length; _m++) {\n                var key = _o[_m];\n                var prop = seenKeys[key];\n                if (prop) {\n                    var propertyDep = schema.dependencies[key];\n                    if (Array.isArray(propertyDep)) {\n                        for (var _p = 0, propertyDep_1 = propertyDep; _p < propertyDep_1.length; _p++) {\n                            var requiredProp = propertyDep_1[_p];\n                            if (!seenKeys[requiredProp]) {\n                                validationResult.problems.push({\n                                    location: { offset: node.offset, length: node.length },\n                                    severity: DiagnosticSeverity.Warning,\n                                    message: localize('RequiredDependentPropWarning', 'Object is missing property {0} required by property {1}.', requiredProp, key)\n                                });\n                            }\n                            else {\n                                validationResult.propertiesValueMatches++;\n                            }\n                        }\n                    }\n                    else {\n                        var propertySchema = asSchema(propertyDep);\n                        if (propertySchema) {\n                            var propertyValidationResult = new ValidationResult();\n                            validate(node, propertySchema, propertyValidationResult, matchingSchemas);\n                            validationResult.mergePropertyMatch(propertyValidationResult);\n                        }\n                    }\n                }\n            }\n        }\n        var propertyNames = asSchema(schema.propertyNames);\n        if (propertyNames) {\n            for (var _q = 0, _r = node.properties; _q < _r.length; _q++) {\n                var f = _r[_q];\n                var key = f.keyNode;\n                if (key) {\n                    validate(key, propertyNames, validationResult, NoOpSchemaCollector.instance);\n                }\n            }\n        }\n    }\n}\nexport function parse(textDocument, config) {\n    var problems = [];\n    var lastProblemOffset = -1;\n    var text = textDocument.getText();\n    var scanner = Json.createScanner(text, false);\n    var commentRanges = config && config.collectComments ? [] : undefined;\n    function _scanNext() {\n        while (true) {\n            var token_1 = scanner.scan();\n            _checkScanError();\n            switch (token_1) {\n                case 12 /* LineCommentTrivia */:\n                case 13 /* BlockCommentTrivia */:\n                    if (Array.isArray(commentRanges)) {\n                        commentRanges.push(Range.create(textDocument.positionAt(scanner.getTokenOffset()), textDocument.positionAt(scanner.getTokenOffset() + scanner.getTokenLength())));\n                    }\n                    break;\n                case 15 /* Trivia */:\n                case 14 /* LineBreakTrivia */:\n                    break;\n                default:\n                    return token_1;\n            }\n        }\n    }\n    function _accept(token) {\n        if (scanner.getToken() === token) {\n            _scanNext();\n            return true;\n        }\n        return false;\n    }\n    function _errorAtRange(message, code, startOffset, endOffset, severity) {\n        if (severity === void 0) { severity = DiagnosticSeverity.Error; }\n        if (problems.length === 0 || startOffset !== lastProblemOffset) {\n            var range = Range.create(textDocument.positionAt(startOffset), textDocument.positionAt(endOffset));\n            problems.push(Diagnostic.create(range, message, severity, code, textDocument.languageId));\n            lastProblemOffset = startOffset;\n        }\n    }\n    function _error(message, code, node, skipUntilAfter, skipUntil) {\n        if (node === void 0) { node = undefined; }\n        if (skipUntilAfter === void 0) { skipUntilAfter = []; }\n        if (skipUntil === void 0) { skipUntil = []; }\n        var start = scanner.getTokenOffset();\n        var end = scanner.getTokenOffset() + scanner.getTokenLength();\n        if (start === end && start > 0) {\n            start--;\n            while (start > 0 && /\\s/.test(text.charAt(start))) {\n                start--;\n            }\n            end = start + 1;\n        }\n        _errorAtRange(message, code, start, end);\n        if (node) {\n            _finalize(node, false);\n        }\n        if (skipUntilAfter.length + skipUntil.length > 0) {\n            var token_2 = scanner.getToken();\n            while (token_2 !== 17 /* EOF */) {\n                if (skipUntilAfter.indexOf(token_2) !== -1) {\n                    _scanNext();\n                    break;\n                }\n                else if (skipUntil.indexOf(token_2) !== -1) {\n                    break;\n                }\n                token_2 = _scanNext();\n            }\n        }\n        return node;\n    }\n    function _checkScanError() {\n        switch (scanner.getTokenError()) {\n            case 4 /* InvalidUnicode */:\n                _error(localize('InvalidUnicode', 'Invalid unicode sequence in string.'), ErrorCode.InvalidUnicode);\n                return true;\n            case 5 /* InvalidEscapeCharacter */:\n                _error(localize('InvalidEscapeCharacter', 'Invalid escape character in string.'), ErrorCode.InvalidEscapeCharacter);\n                return true;\n            case 3 /* UnexpectedEndOfNumber */:\n                _error(localize('UnexpectedEndOfNumber', 'Unexpected end of number.'), ErrorCode.UnexpectedEndOfNumber);\n                return true;\n            case 1 /* UnexpectedEndOfComment */:\n                _error(localize('UnexpectedEndOfComment', 'Unexpected end of comment.'), ErrorCode.UnexpectedEndOfComment);\n                return true;\n            case 2 /* UnexpectedEndOfString */:\n                _error(localize('UnexpectedEndOfString', 'Unexpected end of string.'), ErrorCode.UnexpectedEndOfString);\n                return true;\n            case 6 /* InvalidCharacter */:\n                _error(localize('InvalidCharacter', 'Invalid characters in string. Control characters must be escaped.'), ErrorCode.InvalidCharacter);\n                return true;\n        }\n        return false;\n    }\n    function _finalize(node, scanNext) {\n        node.length = scanner.getTokenOffset() + scanner.getTokenLength() - node.offset;\n        if (scanNext) {\n            _scanNext();\n        }\n        return node;\n    }\n    function _parseArray(parent) {\n        if (scanner.getToken() !== 3 /* OpenBracketToken */) {\n            return undefined;\n        }\n        var node = new ArrayASTNodeImpl(parent, scanner.getTokenOffset());\n        _scanNext(); // consume OpenBracketToken\n        var count = 0;\n        var needsComma = false;\n        while (scanner.getToken() !== 4 /* CloseBracketToken */ && scanner.getToken() !== 17 /* EOF */) {\n            if (scanner.getToken() === 5 /* CommaToken */) {\n                if (!needsComma) {\n                    _error(localize('ValueExpected', 'Value expected'), ErrorCode.ValueExpected);\n                }\n                var commaOffset = scanner.getTokenOffset();\n                _scanNext(); // consume comma\n                if (scanner.getToken() === 4 /* CloseBracketToken */) {\n                    if (needsComma) {\n                        _errorAtRange(localize('TrailingComma', 'Trailing comma'), ErrorCode.TrailingComma, commaOffset, commaOffset + 1);\n                    }\n                    continue;\n                }\n            }\n            else if (needsComma) {\n                _error(localize('ExpectedComma', 'Expected comma'), ErrorCode.CommaExpected);\n            }\n            var item = _parseValue(node);\n            if (!item) {\n                _error(localize('PropertyExpected', 'Value expected'), ErrorCode.ValueExpected, undefined, [], [4 /* CloseBracketToken */, 5 /* CommaToken */]);\n            }\n            else {\n                node.items.push(item);\n            }\n            needsComma = true;\n        }\n        if (scanner.getToken() !== 4 /* CloseBracketToken */) {\n            return _error(localize('ExpectedCloseBracket', 'Expected comma or closing bracket'), ErrorCode.CommaOrCloseBacketExpected, node);\n        }\n        return _finalize(node, true);\n    }\n    var keyPlaceholder = new StringASTNodeImpl(undefined, 0, 0);\n    function _parseProperty(parent, keysSeen) {\n        var node = new PropertyASTNodeImpl(parent, scanner.getTokenOffset(), keyPlaceholder);\n        var key = _parseString(node);\n        if (!key) {\n            if (scanner.getToken() === 16 /* Unknown */) {\n                // give a more helpful error message\n                _error(localize('DoubleQuotesExpected', 'Property keys must be doublequoted'), ErrorCode.Undefined);\n                var keyNode = new StringASTNodeImpl(node, scanner.getTokenOffset(), scanner.getTokenLength());\n                keyNode.value = scanner.getTokenValue();\n                key = keyNode;\n                _scanNext(); // consume Unknown\n            }\n            else {\n                return undefined;\n            }\n        }\n        node.keyNode = key;\n        var seen = keysSeen[key.value];\n        if (seen) {\n            _errorAtRange(localize('DuplicateKeyWarning', \"Duplicate object key\"), ErrorCode.DuplicateKey, node.keyNode.offset, node.keyNode.offset + node.keyNode.length, DiagnosticSeverity.Warning);\n            if (typeof seen === 'object') {\n                _errorAtRange(localize('DuplicateKeyWarning', \"Duplicate object key\"), ErrorCode.DuplicateKey, seen.keyNode.offset, seen.keyNode.offset + seen.keyNode.length, DiagnosticSeverity.Warning);\n            }\n            keysSeen[key.value] = true; // if the same key is duplicate again, avoid duplicate error reporting\n        }\n        else {\n            keysSeen[key.value] = node;\n        }\n        if (scanner.getToken() === 6 /* ColonToken */) {\n            node.colonOffset = scanner.getTokenOffset();\n            _scanNext(); // consume ColonToken\n        }\n        else {\n            _error(localize('ColonExpected', 'Colon expected'), ErrorCode.ColonExpected);\n            if (scanner.getToken() === 10 /* StringLiteral */ && textDocument.positionAt(key.offset + key.length).line < textDocument.positionAt(scanner.getTokenOffset()).line) {\n                node.length = key.length;\n                return node;\n            }\n        }\n        var value = _parseValue(node);\n        if (!value) {\n            return _error(localize('ValueExpected', 'Value expected'), ErrorCode.ValueExpected, node, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n        }\n        node.valueNode = value;\n        node.length = value.offset + value.length - node.offset;\n        return node;\n    }\n    function _parseObject(parent) {\n        if (scanner.getToken() !== 1 /* OpenBraceToken */) {\n            return undefined;\n        }\n        var node = new ObjectASTNodeImpl(parent, scanner.getTokenOffset());\n        var keysSeen = Object.create(null);\n        _scanNext(); // consume OpenBraceToken\n        var needsComma = false;\n        while (scanner.getToken() !== 2 /* CloseBraceToken */ && scanner.getToken() !== 17 /* EOF */) {\n            if (scanner.getToken() === 5 /* CommaToken */) {\n                if (!needsComma) {\n                    _error(localize('PropertyExpected', 'Property expected'), ErrorCode.PropertyExpected);\n                }\n                var commaOffset = scanner.getTokenOffset();\n                _scanNext(); // consume comma\n                if (scanner.getToken() === 2 /* CloseBraceToken */) {\n                    if (needsComma) {\n                        _errorAtRange(localize('TrailingComma', 'Trailing comma'), ErrorCode.TrailingComma, commaOffset, commaOffset + 1);\n                    }\n                    continue;\n                }\n            }\n            else if (needsComma) {\n                _error(localize('ExpectedComma', 'Expected comma'), ErrorCode.CommaExpected);\n            }\n            var property = _parseProperty(node, keysSeen);\n            if (!property) {\n                _error(localize('PropertyExpected', 'Property expected'), ErrorCode.PropertyExpected, undefined, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n            }\n            else {\n                node.properties.push(property);\n            }\n            needsComma = true;\n        }\n        if (scanner.getToken() !== 2 /* CloseBraceToken */) {\n            return _error(localize('ExpectedCloseBrace', 'Expected comma or closing brace'), ErrorCode.CommaOrCloseBraceExpected, node);\n        }\n        return _finalize(node, true);\n    }\n    function _parseString(parent) {\n        if (scanner.getToken() !== 10 /* StringLiteral */) {\n            return undefined;\n        }\n        var node = new StringASTNodeImpl(parent, scanner.getTokenOffset());\n        node.value = scanner.getTokenValue();\n        return _finalize(node, true);\n    }\n    function _parseNumber(parent) {\n        if (scanner.getToken() !== 11 /* NumericLiteral */) {\n            return undefined;\n        }\n        var node = new NumberASTNodeImpl(parent, scanner.getTokenOffset());\n        if (scanner.getTokenError() === 0 /* None */) {\n            var tokenValue = scanner.getTokenValue();\n            try {\n                var numberValue = JSON.parse(tokenValue);\n                if (!isNumber(numberValue)) {\n                    return _error(localize('InvalidNumberFormat', 'Invalid number format.'), ErrorCode.Undefined, node);\n                }\n                node.value = numberValue;\n            }\n            catch (e) {\n                return _error(localize('InvalidNumberFormat', 'Invalid number format.'), ErrorCode.Undefined, node);\n            }\n            node.isInteger = tokenValue.indexOf('.') === -1;\n        }\n        return _finalize(node, true);\n    }\n    function _parseLiteral(parent) {\n        var node;\n        switch (scanner.getToken()) {\n            case 7 /* NullKeyword */:\n                return _finalize(new NullASTNodeImpl(parent, scanner.getTokenOffset()), true);\n            case 8 /* TrueKeyword */:\n                return _finalize(new BooleanASTNodeImpl(parent, true, scanner.getTokenOffset()), true);\n            case 9 /* FalseKeyword */:\n                return _finalize(new BooleanASTNodeImpl(parent, false, scanner.getTokenOffset()), true);\n            default:\n                return undefined;\n        }\n    }\n    function _parseValue(parent) {\n        return _parseArray(parent) || _parseObject(parent) || _parseString(parent) || _parseNumber(parent) || _parseLiteral(parent);\n    }\n    var _root = undefined;\n    var token = _scanNext();\n    if (token !== 17 /* EOF */) {\n        _root = _parseValue(_root);\n        if (!_root) {\n            _error(localize('Invalid symbol', 'Expected a JSON object, array or literal.'), ErrorCode.Undefined);\n        }\n        else if (scanner.getToken() !== 17 /* EOF */) {\n            _error(localize('End of file expected', 'End of file expected.'), ErrorCode.Undefined);\n        }\n    }\n    return new JSONDocument(_root, problems, commentRanges);\n}\n","/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\nexport function startsWith(haystack, needle) {\n    if (haystack.length < needle.length) {\n        return false;\n    }\n    for (var i = 0; i < needle.length; i++) {\n        if (haystack[i] !== needle[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Determines if haystack ends with needle.\n */\nexport function endsWith(haystack, needle) {\n    var diff = haystack.length - needle.length;\n    if (diff > 0) {\n        return haystack.lastIndexOf(needle) === diff;\n    }\n    else if (diff === 0) {\n        return haystack === needle;\n    }\n    else {\n        return false;\n    }\n}\nexport function convertSimple2RegExpPattern(pattern) {\n    return pattern.replace(/[\\-\\\\\\{\\}\\+\\?\\|\\^\\$\\.\\,\\[\\]\\(\\)\\#\\s]/g, '\\\\$&').replace(/[\\*]/g, '.*');\n}\nexport function repeat(value, count) {\n    var s = '';\n    while (count > 0) {\n        if ((count & 1) === 1) {\n            s += value;\n        }\n        value += value;\n        count = count >>> 1;\n    }\n    return s;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as Parser from '../parser/jsonParser';\nimport * as Json from 'jsonc-parser';\nimport { stringifyObject } from '../utils/json';\nimport { endsWith } from '../utils/strings';\nimport { isDefined } from '../utils/objects';\nimport { CompletionItem, CompletionItemKind, Range, TextEdit, InsertTextFormat, MarkupKind } from '../jsonLanguageTypes';\nimport * as nls from 'vscode-nls';\nvar localize = nls.loadMessageBundle();\nvar valueCommitCharacters = [',', '}', ']'];\nvar propertyCommitCharacters = [':'];\nvar JSONCompletion = /** @class */ (function () {\n    function JSONCompletion(schemaService, contributions, promiseConstructor, clientCapabilities) {\n        if (contributions === void 0) { contributions = []; }\n        if (promiseConstructor === void 0) { promiseConstructor = Promise; }\n        if (clientCapabilities === void 0) { clientCapabilities = {}; }\n        this.schemaService = schemaService;\n        this.contributions = contributions;\n        this.promiseConstructor = promiseConstructor;\n        this.clientCapabilities = clientCapabilities;\n    }\n    JSONCompletion.prototype.doResolve = function (item) {\n        for (var i = this.contributions.length - 1; i >= 0; i--) {\n            var resolveCompletion = this.contributions[i].resolveCompletion;\n            if (resolveCompletion) {\n                var resolver = resolveCompletion(item);\n                if (resolver) {\n                    return resolver;\n                }\n            }\n        }\n        return this.promiseConstructor.resolve(item);\n    };\n    JSONCompletion.prototype.doComplete = function (document, position, doc) {\n        var _this = this;\n        var result = {\n            items: [],\n            isIncomplete: false\n        };\n        var text = document.getText();\n        var offset = document.offsetAt(position);\n        var node = doc.getNodeFromOffset(offset, true);\n        if (this.isInComment(document, node ? node.offset : 0, offset)) {\n            return Promise.resolve(result);\n        }\n        if (node && (offset === node.offset + node.length) && offset > 0) {\n            var ch = text[offset - 1];\n            if (node.type === 'object' && ch === '}' || node.type === 'array' && ch === ']') {\n                // after ] or }\n                node = node.parent;\n            }\n        }\n        var currentWord = this.getCurrentWord(document, offset);\n        var overwriteRange;\n        if (node && (node.type === 'string' || node.type === 'number' || node.type === 'boolean' || node.type === 'null')) {\n            overwriteRange = Range.create(document.positionAt(node.offset), document.positionAt(node.offset + node.length));\n        }\n        else {\n            var overwriteStart = offset - currentWord.length;\n            if (overwriteStart > 0 && text[overwriteStart - 1] === '\"') {\n                overwriteStart--;\n            }\n            overwriteRange = Range.create(document.positionAt(overwriteStart), position);\n        }\n        var supportsCommitCharacters = false; //this.doesSupportsCommitCharacters(); disabled for now, waiting for new API: https://github.com/microsoft/vscode/issues/42544\n        var proposed = {};\n        var collector = {\n            add: function (suggestion) {\n                var label = suggestion.label;\n                var existing = proposed[label];\n                if (!existing) {\n                    label = label.replace(/[\\n]/g, '');\n                    if (label.length > 60) {\n                        var shortendedLabel = label.substr(0, 57).trim() + '...';\n                        if (!proposed[shortendedLabel]) {\n                            label = shortendedLabel;\n                        }\n                    }\n                    if (overwriteRange && suggestion.insertText !== undefined) {\n                        suggestion.textEdit = TextEdit.replace(overwriteRange, suggestion.insertText);\n                    }\n                    if (supportsCommitCharacters) {\n                        suggestion.commitCharacters = suggestion.kind === CompletionItemKind.Property ? propertyCommitCharacters : valueCommitCharacters;\n                    }\n                    suggestion.label = label;\n                    proposed[label] = suggestion;\n                    result.items.push(suggestion);\n                }\n                else if (!existing.documentation) {\n                    existing.documentation = suggestion.documentation;\n                }\n            },\n            setAsIncomplete: function () {\n                result.isIncomplete = true;\n            },\n            error: function (message) {\n                console.error(message);\n            },\n            log: function (message) {\n                console.log(message);\n            },\n            getNumberOfProposals: function () {\n                return result.items.length;\n            }\n        };\n        return this.schemaService.getSchemaForResource(document.uri, doc).then(function (schema) {\n            var collectionPromises = [];\n            var addValue = true;\n            var currentKey = '';\n            var currentProperty = undefined;\n            if (node) {\n                if (node.type === 'string') {\n                    var parent = node.parent;\n                    if (parent && parent.type === 'property' && parent.keyNode === node) {\n                        addValue = !parent.valueNode;\n                        currentProperty = parent;\n                        currentKey = text.substr(node.offset + 1, node.length - 2);\n                        if (parent) {\n                            node = parent.parent;\n                        }\n                    }\n                }\n            }\n            // proposals for properties\n            if (node && node.type === 'object') {\n                // don't suggest keys when the cursor is just before the opening curly brace\n                if (node.offset === offset) {\n                    return result;\n                }\n                // don't suggest properties that are already present\n                var properties = node.properties;\n                properties.forEach(function (p) {\n                    if (!currentProperty || currentProperty !== p) {\n                        proposed[p.keyNode.value] = CompletionItem.create('__');\n                    }\n                });\n                var separatorAfter_1 = '';\n                if (addValue) {\n                    separatorAfter_1 = _this.evaluateSeparatorAfter(document, document.offsetAt(overwriteRange.end));\n                }\n                if (schema) {\n                    // property proposals with schema\n                    _this.getPropertyCompletions(schema, doc, node, addValue, separatorAfter_1, collector);\n                }\n                else {\n                    // property proposals without schema\n                    _this.getSchemaLessPropertyCompletions(doc, node, currentKey, collector);\n                }\n                var location_1 = Parser.getNodePath(node);\n                _this.contributions.forEach(function (contribution) {\n                    var collectPromise = contribution.collectPropertyCompletions(document.uri, location_1, currentWord, addValue, separatorAfter_1 === '', collector);\n                    if (collectPromise) {\n                        collectionPromises.push(collectPromise);\n                    }\n                });\n                if ((!schema && currentWord.length > 0 && text.charAt(offset - currentWord.length - 1) !== '\"')) {\n                    collector.add({\n                        kind: CompletionItemKind.Property,\n                        label: _this.getLabelForValue(currentWord),\n                        insertText: _this.getInsertTextForProperty(currentWord, undefined, false, separatorAfter_1),\n                        insertTextFormat: InsertTextFormat.Snippet, documentation: '',\n                    });\n                    collector.setAsIncomplete();\n                }\n            }\n            // proposals for values\n            var types = {};\n            if (schema) {\n                // value proposals with schema\n                _this.getValueCompletions(schema, doc, node, offset, document, collector, types);\n            }\n            else {\n                // value proposals without schema\n                _this.getSchemaLessValueCompletions(doc, node, offset, document, collector);\n            }\n            if (_this.contributions.length > 0) {\n                _this.getContributedValueCompletions(doc, node, offset, document, collector, collectionPromises);\n            }\n            return _this.promiseConstructor.all(collectionPromises).then(function () {\n                if (collector.getNumberOfProposals() === 0) {\n                    var offsetForSeparator = offset;\n                    if (node && (node.type === 'string' || node.type === 'number' || node.type === 'boolean' || node.type === 'null')) {\n                        offsetForSeparator = node.offset + node.length;\n                    }\n                    var separatorAfter = _this.evaluateSeparatorAfter(document, offsetForSeparator);\n                    _this.addFillerValueCompletions(types, separatorAfter, collector);\n                }\n                return result;\n            });\n        });\n    };\n    JSONCompletion.prototype.getPropertyCompletions = function (schema, doc, node, addValue, separatorAfter, collector) {\n        var _this = this;\n        var matchingSchemas = doc.getMatchingSchemas(schema.schema, node.offset);\n        matchingSchemas.forEach(function (s) {\n            if (s.node === node && !s.inverted) {\n                var schemaProperties_1 = s.schema.properties;\n                if (schemaProperties_1) {\n                    Object.keys(schemaProperties_1).forEach(function (key) {\n                        var propertySchema = schemaProperties_1[key];\n                        if (typeof propertySchema === 'object' && !propertySchema.deprecationMessage && !propertySchema.doNotSuggest) {\n                            var proposal = {\n                                kind: CompletionItemKind.Property,\n                                label: key,\n                                insertText: _this.getInsertTextForProperty(key, propertySchema, addValue, separatorAfter),\n                                insertTextFormat: InsertTextFormat.Snippet,\n                                filterText: _this.getFilterTextForValue(key),\n                                documentation: _this.fromMarkup(propertySchema.markdownDescription) || propertySchema.description || '',\n                            };\n                            if (propertySchema.suggestSortText !== undefined) {\n                                proposal.sortText = propertySchema.suggestSortText;\n                            }\n                            if (proposal.insertText && endsWith(proposal.insertText, \"$1\" + separatorAfter)) {\n                                proposal.command = {\n                                    title: 'Suggest',\n                                    command: 'editor.action.triggerSuggest'\n                                };\n                            }\n                            collector.add(proposal);\n                        }\n                    });\n                }\n            }\n        });\n    };\n    JSONCompletion.prototype.getSchemaLessPropertyCompletions = function (doc, node, currentKey, collector) {\n        var _this = this;\n        var collectCompletionsForSimilarObject = function (obj) {\n            obj.properties.forEach(function (p) {\n                var key = p.keyNode.value;\n                collector.add({\n                    kind: CompletionItemKind.Property,\n                    label: key,\n                    insertText: _this.getInsertTextForValue(key, ''),\n                    insertTextFormat: InsertTextFormat.Snippet,\n                    filterText: _this.getFilterTextForValue(key),\n                    documentation: ''\n                });\n            });\n        };\n        if (node.parent) {\n            if (node.parent.type === 'property') {\n                // if the object is a property value, check the tree for other objects that hang under a property of the same name\n                var parentKey_1 = node.parent.keyNode.value;\n                doc.visit(function (n) {\n                    if (n.type === 'property' && n !== node.parent && n.keyNode.value === parentKey_1 && n.valueNode && n.valueNode.type === 'object') {\n                        collectCompletionsForSimilarObject(n.valueNode);\n                    }\n                    return true;\n                });\n            }\n            else if (node.parent.type === 'array') {\n                // if the object is in an array, use all other array elements as similar objects\n                node.parent.items.forEach(function (n) {\n                    if (n.type === 'object' && n !== node) {\n                        collectCompletionsForSimilarObject(n);\n                    }\n                });\n            }\n        }\n        else if (node.type === 'object') {\n            collector.add({\n                kind: CompletionItemKind.Property,\n                label: '$schema',\n                insertText: this.getInsertTextForProperty('$schema', undefined, true, ''),\n                insertTextFormat: InsertTextFormat.Snippet, documentation: '',\n                filterText: this.getFilterTextForValue(\"$schema\")\n            });\n        }\n    };\n    JSONCompletion.prototype.getSchemaLessValueCompletions = function (doc, node, offset, document, collector) {\n        var _this = this;\n        var offsetForSeparator = offset;\n        if (node && (node.type === 'string' || node.type === 'number' || node.type === 'boolean' || node.type === 'null')) {\n            offsetForSeparator = node.offset + node.length;\n            node = node.parent;\n        }\n        if (!node) {\n            collector.add({\n                kind: this.getSuggestionKind('object'),\n                label: 'Empty object',\n                insertText: this.getInsertTextForValue({}, ''),\n                insertTextFormat: InsertTextFormat.Snippet,\n                documentation: ''\n            });\n            collector.add({\n                kind: this.getSuggestionKind('array'),\n                label: 'Empty array',\n                insertText: this.getInsertTextForValue([], ''),\n                insertTextFormat: InsertTextFormat.Snippet,\n                documentation: ''\n            });\n            return;\n        }\n        var separatorAfter = this.evaluateSeparatorAfter(document, offsetForSeparator);\n        var collectSuggestionsForValues = function (value) {\n            if (value.parent && !Parser.contains(value.parent, offset, true)) {\n                collector.add({\n                    kind: _this.getSuggestionKind(value.type),\n                    label: _this.getLabelTextForMatchingNode(value, document),\n                    insertText: _this.getInsertTextForMatchingNode(value, document, separatorAfter),\n                    insertTextFormat: InsertTextFormat.Snippet, documentation: ''\n                });\n            }\n            if (value.type === 'boolean') {\n                _this.addBooleanValueCompletion(!value.value, separatorAfter, collector);\n            }\n        };\n        if (node.type === 'property') {\n            if (offset > (node.colonOffset || 0)) {\n                var valueNode = node.valueNode;\n                if (valueNode && (offset > (valueNode.offset + valueNode.length) || valueNode.type === 'object' || valueNode.type === 'array')) {\n                    return;\n                }\n                // suggest values at the same key\n                var parentKey_2 = node.keyNode.value;\n                doc.visit(function (n) {\n                    if (n.type === 'property' && n.keyNode.value === parentKey_2 && n.valueNode) {\n                        collectSuggestionsForValues(n.valueNode);\n                    }\n                    return true;\n                });\n                if (parentKey_2 === '$schema' && node.parent && !node.parent.parent) {\n                    this.addDollarSchemaCompletions(separatorAfter, collector);\n                }\n            }\n        }\n        if (node.type === 'array') {\n            if (node.parent && node.parent.type === 'property') {\n                // suggest items of an array at the same key\n                var parentKey_3 = node.parent.keyNode.value;\n                doc.visit(function (n) {\n                    if (n.type === 'property' && n.keyNode.value === parentKey_3 && n.valueNode && n.valueNode.type === 'array') {\n                        n.valueNode.items.forEach(collectSuggestionsForValues);\n                    }\n                    return true;\n                });\n            }\n            else {\n                // suggest items in the same array\n                node.items.forEach(collectSuggestionsForValues);\n            }\n        }\n    };\n    JSONCompletion.prototype.getValueCompletions = function (schema, doc, node, offset, document, collector, types) {\n        var offsetForSeparator = offset;\n        var parentKey = undefined;\n        var valueNode = undefined;\n        if (node && (node.type === 'string' || node.type === 'number' || node.type === 'boolean' || node.type === 'null')) {\n            offsetForSeparator = node.offset + node.length;\n            valueNode = node;\n            node = node.parent;\n        }\n        if (!node) {\n            this.addSchemaValueCompletions(schema.schema, '', collector, types);\n            return;\n        }\n        if ((node.type === 'property') && offset > (node.colonOffset || 0)) {\n            var valueNode_1 = node.valueNode;\n            if (valueNode_1 && offset > (valueNode_1.offset + valueNode_1.length)) {\n                return; // we are past the value node\n            }\n            parentKey = node.keyNode.value;\n            node = node.parent;\n        }\n        if (node && (parentKey !== undefined || node.type === 'array')) {\n            var separatorAfter = this.evaluateSeparatorAfter(document, offsetForSeparator);\n            var matchingSchemas = doc.getMatchingSchemas(schema.schema, node.offset, valueNode);\n            for (var _i = 0, matchingSchemas_1 = matchingSchemas; _i < matchingSchemas_1.length; _i++) {\n                var s = matchingSchemas_1[_i];\n                if (s.node === node && !s.inverted && s.schema) {\n                    if (node.type === 'array' && s.schema.items) {\n                        if (Array.isArray(s.schema.items)) {\n                            var index = this.findItemAtOffset(node, document, offset);\n                            if (index < s.schema.items.length) {\n                                this.addSchemaValueCompletions(s.schema.items[index], separatorAfter, collector, types);\n                            }\n                        }\n                        else {\n                            this.addSchemaValueCompletions(s.schema.items, separatorAfter, collector, types);\n                        }\n                    }\n                    if (s.schema.properties && parentKey !== undefined) {\n                        var propertySchema = s.schema.properties[parentKey];\n                        if (propertySchema) {\n                            this.addSchemaValueCompletions(propertySchema, separatorAfter, collector, types);\n                        }\n                    }\n                }\n            }\n            if (parentKey === '$schema' && !node.parent) {\n                this.addDollarSchemaCompletions(separatorAfter, collector);\n            }\n            if (types['boolean']) {\n                this.addBooleanValueCompletion(true, separatorAfter, collector);\n                this.addBooleanValueCompletion(false, separatorAfter, collector);\n            }\n            if (types['null']) {\n                this.addNullValueCompletion(separatorAfter, collector);\n            }\n        }\n    };\n    JSONCompletion.prototype.getContributedValueCompletions = function (doc, node, offset, document, collector, collectionPromises) {\n        if (!node) {\n            this.contributions.forEach(function (contribution) {\n                var collectPromise = contribution.collectDefaultCompletions(document.uri, collector);\n                if (collectPromise) {\n                    collectionPromises.push(collectPromise);\n                }\n            });\n        }\n        else {\n            if (node.type === 'string' || node.type === 'number' || node.type === 'boolean' || node.type === 'null') {\n                node = node.parent;\n            }\n            if (node && (node.type === 'property') && offset > (node.colonOffset || 0)) {\n                var parentKey_4 = node.keyNode.value;\n                var valueNode = node.valueNode;\n                if ((!valueNode || offset <= (valueNode.offset + valueNode.length)) && node.parent) {\n                    var location_2 = Parser.getNodePath(node.parent);\n                    this.contributions.forEach(function (contribution) {\n                        var collectPromise = contribution.collectValueCompletions(document.uri, location_2, parentKey_4, collector);\n                        if (collectPromise) {\n                            collectionPromises.push(collectPromise);\n                        }\n                    });\n                }\n            }\n        }\n    };\n    JSONCompletion.prototype.addSchemaValueCompletions = function (schema, separatorAfter, collector, types) {\n        var _this = this;\n        if (typeof schema === 'object') {\n            this.addEnumValueCompletions(schema, separatorAfter, collector);\n            this.addDefaultValueCompletions(schema, separatorAfter, collector);\n            this.collectTypes(schema, types);\n            if (Array.isArray(schema.allOf)) {\n                schema.allOf.forEach(function (s) { return _this.addSchemaValueCompletions(s, separatorAfter, collector, types); });\n            }\n            if (Array.isArray(schema.anyOf)) {\n                schema.anyOf.forEach(function (s) { return _this.addSchemaValueCompletions(s, separatorAfter, collector, types); });\n            }\n            if (Array.isArray(schema.oneOf)) {\n                schema.oneOf.forEach(function (s) { return _this.addSchemaValueCompletions(s, separatorAfter, collector, types); });\n            }\n        }\n    };\n    JSONCompletion.prototype.addDefaultValueCompletions = function (schema, separatorAfter, collector, arrayDepth) {\n        var _this = this;\n        if (arrayDepth === void 0) { arrayDepth = 0; }\n        var hasProposals = false;\n        if (isDefined(schema.default)) {\n            var type = schema.type;\n            var value = schema.default;\n            for (var i = arrayDepth; i > 0; i--) {\n                value = [value];\n                type = 'array';\n            }\n            collector.add({\n                kind: this.getSuggestionKind(type),\n                label: this.getLabelForValue(value),\n                insertText: this.getInsertTextForValue(value, separatorAfter),\n                insertTextFormat: InsertTextFormat.Snippet,\n                detail: localize('json.suggest.default', 'Default value')\n            });\n            hasProposals = true;\n        }\n        if (Array.isArray(schema.examples)) {\n            schema.examples.forEach(function (example) {\n                var type = schema.type;\n                var value = example;\n                for (var i = arrayDepth; i > 0; i--) {\n                    value = [value];\n                    type = 'array';\n                }\n                collector.add({\n                    kind: _this.getSuggestionKind(type),\n                    label: _this.getLabelForValue(value),\n                    insertText: _this.getInsertTextForValue(value, separatorAfter),\n                    insertTextFormat: InsertTextFormat.Snippet\n                });\n                hasProposals = true;\n            });\n        }\n        if (Array.isArray(schema.defaultSnippets)) {\n            schema.defaultSnippets.forEach(function (s) {\n                var type = schema.type;\n                var value = s.body;\n                var label = s.label;\n                var insertText;\n                var filterText;\n                if (isDefined(value)) {\n                    var type_1 = schema.type;\n                    for (var i = arrayDepth; i > 0; i--) {\n                        value = [value];\n                        type_1 = 'array';\n                    }\n                    insertText = _this.getInsertTextForSnippetValue(value, separatorAfter);\n                    filterText = _this.getFilterTextForSnippetValue(value);\n                    label = label || _this.getLabelForSnippetValue(value);\n                }\n                else if (typeof s.bodyText === 'string') {\n                    var prefix = '', suffix = '', indent = '';\n                    for (var i = arrayDepth; i > 0; i--) {\n                        prefix = prefix + indent + '[\\n';\n                        suffix = suffix + '\\n' + indent + ']';\n                        indent += '\\t';\n                        type = 'array';\n                    }\n                    insertText = prefix + indent + s.bodyText.split('\\n').join('\\n' + indent) + suffix + separatorAfter;\n                    label = label || insertText,\n                        filterText = insertText.replace(/[\\n]/g, ''); // remove new lines\n                }\n                else {\n                    return;\n                }\n                collector.add({\n                    kind: _this.getSuggestionKind(type),\n                    label: label,\n                    documentation: _this.fromMarkup(s.markdownDescription) || s.description,\n                    insertText: insertText,\n                    insertTextFormat: InsertTextFormat.Snippet,\n                    filterText: filterText\n                });\n                hasProposals = true;\n            });\n        }\n        if (!hasProposals && typeof schema.items === 'object' && !Array.isArray(schema.items) && arrayDepth < 5 /* beware of recursion */) {\n            this.addDefaultValueCompletions(schema.items, separatorAfter, collector, arrayDepth + 1);\n        }\n    };\n    JSONCompletion.prototype.addEnumValueCompletions = function (schema, separatorAfter, collector) {\n        if (isDefined(schema.const)) {\n            collector.add({\n                kind: this.getSuggestionKind(schema.type),\n                label: this.getLabelForValue(schema.const),\n                insertText: this.getInsertTextForValue(schema.const, separatorAfter),\n                insertTextFormat: InsertTextFormat.Snippet,\n                documentation: this.fromMarkup(schema.markdownDescription) || schema.description\n            });\n        }\n        if (Array.isArray(schema.enum)) {\n            for (var i = 0, length = schema.enum.length; i < length; i++) {\n                var enm = schema.enum[i];\n                var documentation = this.fromMarkup(schema.markdownDescription) || schema.description;\n                if (schema.markdownEnumDescriptions && i < schema.markdownEnumDescriptions.length && this.doesSupportMarkdown()) {\n                    documentation = this.fromMarkup(schema.markdownEnumDescriptions[i]);\n                }\n                else if (schema.enumDescriptions && i < schema.enumDescriptions.length) {\n                    documentation = schema.enumDescriptions[i];\n                }\n                collector.add({\n                    kind: this.getSuggestionKind(schema.type),\n                    label: this.getLabelForValue(enm),\n                    insertText: this.getInsertTextForValue(enm, separatorAfter),\n                    insertTextFormat: InsertTextFormat.Snippet,\n                    documentation: documentation\n                });\n            }\n        }\n    };\n    JSONCompletion.prototype.collectTypes = function (schema, types) {\n        if (Array.isArray(schema.enum) || isDefined(schema.const)) {\n            return;\n        }\n        var type = schema.type;\n        if (Array.isArray(type)) {\n            type.forEach(function (t) { return types[t] = true; });\n        }\n        else if (type) {\n            types[type] = true;\n        }\n    };\n    JSONCompletion.prototype.addFillerValueCompletions = function (types, separatorAfter, collector) {\n        if (types['object']) {\n            collector.add({\n                kind: this.getSuggestionKind('object'),\n                label: '{}',\n                insertText: this.getInsertTextForGuessedValue({}, separatorAfter),\n                insertTextFormat: InsertTextFormat.Snippet,\n                detail: localize('defaults.object', 'New object'),\n                documentation: ''\n            });\n        }\n        if (types['array']) {\n            collector.add({\n                kind: this.getSuggestionKind('array'),\n                label: '[]',\n                insertText: this.getInsertTextForGuessedValue([], separatorAfter),\n                insertTextFormat: InsertTextFormat.Snippet,\n                detail: localize('defaults.array', 'New array'),\n                documentation: ''\n            });\n        }\n    };\n    JSONCompletion.prototype.addBooleanValueCompletion = function (value, separatorAfter, collector) {\n        collector.add({\n            kind: this.getSuggestionKind('boolean'),\n            label: value ? 'true' : 'false',\n            insertText: this.getInsertTextForValue(value, separatorAfter),\n            insertTextFormat: InsertTextFormat.Snippet,\n            documentation: ''\n        });\n    };\n    JSONCompletion.prototype.addNullValueCompletion = function (separatorAfter, collector) {\n        collector.add({\n            kind: this.getSuggestionKind('null'),\n            label: 'null',\n            insertText: 'null' + separatorAfter,\n            insertTextFormat: InsertTextFormat.Snippet,\n            documentation: ''\n        });\n    };\n    JSONCompletion.prototype.addDollarSchemaCompletions = function (separatorAfter, collector) {\n        var _this = this;\n        var schemaIds = this.schemaService.getRegisteredSchemaIds(function (schema) { return schema === 'http' || schema === 'https'; });\n        schemaIds.forEach(function (schemaId) { return collector.add({\n            kind: CompletionItemKind.Module,\n            label: _this.getLabelForValue(schemaId),\n            filterText: _this.getFilterTextForValue(schemaId),\n            insertText: _this.getInsertTextForValue(schemaId, separatorAfter),\n            insertTextFormat: InsertTextFormat.Snippet, documentation: ''\n        }); });\n    };\n    JSONCompletion.prototype.getLabelForValue = function (value) {\n        return JSON.stringify(value);\n    };\n    JSONCompletion.prototype.getFilterTextForValue = function (value) {\n        return JSON.stringify(value);\n    };\n    JSONCompletion.prototype.getFilterTextForSnippetValue = function (value) {\n        return JSON.stringify(value).replace(/\\$\\{\\d+:([^}]+)\\}|\\$\\d+/g, '$1');\n    };\n    JSONCompletion.prototype.getLabelForSnippetValue = function (value) {\n        var label = JSON.stringify(value);\n        return label.replace(/\\$\\{\\d+:([^}]+)\\}|\\$\\d+/g, '$1');\n    };\n    JSONCompletion.prototype.getInsertTextForPlainText = function (text) {\n        return text.replace(/[\\\\\\$\\}]/g, '\\\\$&'); // escape $, \\ and } \n    };\n    JSONCompletion.prototype.getInsertTextForValue = function (value, separatorAfter) {\n        var text = JSON.stringify(value, null, '\\t');\n        if (text === '{}') {\n            return '{$1}' + separatorAfter;\n        }\n        else if (text === '[]') {\n            return '[$1]' + separatorAfter;\n        }\n        return this.getInsertTextForPlainText(text + separatorAfter);\n    };\n    JSONCompletion.prototype.getInsertTextForSnippetValue = function (value, separatorAfter) {\n        var replacer = function (value) {\n            if (typeof value === 'string') {\n                if (value[0] === '^') {\n                    return value.substr(1);\n                }\n            }\n            return JSON.stringify(value);\n        };\n        return stringifyObject(value, '', replacer) + separatorAfter;\n    };\n    JSONCompletion.prototype.getInsertTextForGuessedValue = function (value, separatorAfter) {\n        switch (typeof value) {\n            case 'object':\n                if (value === null) {\n                    return '${1:null}' + separatorAfter;\n                }\n                return this.getInsertTextForValue(value, separatorAfter);\n            case 'string':\n                var snippetValue = JSON.stringify(value);\n                snippetValue = snippetValue.substr(1, snippetValue.length - 2); // remove quotes\n                snippetValue = this.getInsertTextForPlainText(snippetValue); // escape \\ and }\n                return '\"${1:' + snippetValue + '}\"' + separatorAfter;\n            case 'number':\n            case 'boolean':\n                return '${1:' + JSON.stringify(value) + '}' + separatorAfter;\n        }\n        return this.getInsertTextForValue(value, separatorAfter);\n    };\n    JSONCompletion.prototype.getSuggestionKind = function (type) {\n        if (Array.isArray(type)) {\n            var array = type;\n            type = array.length > 0 ? array[0] : undefined;\n        }\n        if (!type) {\n            return CompletionItemKind.Value;\n        }\n        switch (type) {\n            case 'string': return CompletionItemKind.Value;\n            case 'object': return CompletionItemKind.Module;\n            case 'property': return CompletionItemKind.Property;\n            default: return CompletionItemKind.Value;\n        }\n    };\n    JSONCompletion.prototype.getLabelTextForMatchingNode = function (node, document) {\n        switch (node.type) {\n            case 'array':\n                return '[]';\n            case 'object':\n                return '{}';\n            default:\n                var content = document.getText().substr(node.offset, node.length);\n                return content;\n        }\n    };\n    JSONCompletion.prototype.getInsertTextForMatchingNode = function (node, document, separatorAfter) {\n        switch (node.type) {\n            case 'array':\n                return this.getInsertTextForValue([], separatorAfter);\n            case 'object':\n                return this.getInsertTextForValue({}, separatorAfter);\n            default:\n                var content = document.getText().substr(node.offset, node.length) + separatorAfter;\n                return this.getInsertTextForPlainText(content);\n        }\n    };\n    JSONCompletion.prototype.getInsertTextForProperty = function (key, propertySchema, addValue, separatorAfter) {\n        var propertyText = this.getInsertTextForValue(key, '');\n        if (!addValue) {\n            return propertyText;\n        }\n        var resultText = propertyText + ': ';\n        var value;\n        var nValueProposals = 0;\n        if (propertySchema) {\n            if (Array.isArray(propertySchema.defaultSnippets)) {\n                if (propertySchema.defaultSnippets.length === 1) {\n                    var body = propertySchema.defaultSnippets[0].body;\n                    if (isDefined(body)) {\n                        value = this.getInsertTextForSnippetValue(body, '');\n                    }\n                }\n                nValueProposals += propertySchema.defaultSnippets.length;\n            }\n            if (propertySchema.enum) {\n                if (!value && propertySchema.enum.length === 1) {\n                    value = this.getInsertTextForGuessedValue(propertySchema.enum[0], '');\n                }\n                nValueProposals += propertySchema.enum.length;\n            }\n            if (isDefined(propertySchema.default)) {\n                if (!value) {\n                    value = this.getInsertTextForGuessedValue(propertySchema.default, '');\n                }\n                nValueProposals++;\n            }\n            if (Array.isArray(propertySchema.examples) && propertySchema.examples.length) {\n                if (!value) {\n                    value = this.getInsertTextForGuessedValue(propertySchema.examples[0], '');\n                }\n                nValueProposals += propertySchema.examples.length;\n            }\n            if (nValueProposals === 0) {\n                var type = Array.isArray(propertySchema.type) ? propertySchema.type[0] : propertySchema.type;\n                if (!type) {\n                    if (propertySchema.properties) {\n                        type = 'object';\n                    }\n                    else if (propertySchema.items) {\n                        type = 'array';\n                    }\n                }\n                switch (type) {\n                    case 'boolean':\n                        value = '$1';\n                        break;\n                    case 'string':\n                        value = '\"$1\"';\n                        break;\n                    case 'object':\n                        value = '{$1}';\n                        break;\n                    case 'array':\n                        value = '[$1]';\n                        break;\n                    case 'number':\n                    case 'integer':\n                        value = '${1:0}';\n                        break;\n                    case 'null':\n                        value = '${1:null}';\n                        break;\n                    default:\n                        return propertyText;\n                }\n            }\n        }\n        if (!value || nValueProposals > 1) {\n            value = '$1';\n        }\n        return resultText + value + separatorAfter;\n    };\n    JSONCompletion.prototype.getCurrentWord = function (document, offset) {\n        var i = offset - 1;\n        var text = document.getText();\n        while (i >= 0 && ' \\t\\n\\r\\v\":{[,]}'.indexOf(text.charAt(i)) === -1) {\n            i--;\n        }\n        return text.substring(i + 1, offset);\n    };\n    JSONCompletion.prototype.evaluateSeparatorAfter = function (document, offset) {\n        var scanner = Json.createScanner(document.getText(), true);\n        scanner.setPosition(offset);\n        var token = scanner.scan();\n        switch (token) {\n            case 5 /* CommaToken */:\n            case 2 /* CloseBraceToken */:\n            case 4 /* CloseBracketToken */:\n            case 17 /* EOF */:\n                return '';\n            default:\n                return ',';\n        }\n    };\n    JSONCompletion.prototype.findItemAtOffset = function (node, document, offset) {\n        var scanner = Json.createScanner(document.getText(), true);\n        var children = node.items;\n        for (var i = children.length - 1; i >= 0; i--) {\n            var child = children[i];\n            if (offset > child.offset + child.length) {\n                scanner.setPosition(child.offset + child.length);\n                var token = scanner.scan();\n                if (token === 5 /* CommaToken */ && offset >= scanner.getTokenOffset() + scanner.getTokenLength()) {\n                    return i + 1;\n                }\n                return i;\n            }\n            else if (offset >= child.offset) {\n                return i;\n            }\n        }\n        return 0;\n    };\n    JSONCompletion.prototype.isInComment = function (document, start, offset) {\n        var scanner = Json.createScanner(document.getText(), false);\n        scanner.setPosition(start);\n        var token = scanner.scan();\n        while (token !== 17 /* EOF */ && (scanner.getTokenOffset() + scanner.getTokenLength() < offset)) {\n            token = scanner.scan();\n        }\n        return (token === 12 /* LineCommentTrivia */ || token === 13 /* BlockCommentTrivia */) && scanner.getTokenOffset() <= offset;\n    };\n    JSONCompletion.prototype.fromMarkup = function (markupString) {\n        if (markupString && this.doesSupportMarkdown()) {\n            return {\n                kind: MarkupKind.Markdown,\n                value: markupString\n            };\n        }\n        return undefined;\n    };\n    JSONCompletion.prototype.doesSupportMarkdown = function () {\n        if (!isDefined(this.supportsMarkdown)) {\n            var completion = this.clientCapabilities.textDocument && this.clientCapabilities.textDocument.completion;\n            this.supportsMarkdown = completion && completion.completionItem && Array.isArray(completion.completionItem.documentationFormat) && completion.completionItem.documentationFormat.indexOf(MarkupKind.Markdown) !== -1;\n        }\n        return this.supportsMarkdown;\n    };\n    JSONCompletion.prototype.doesSupportsCommitCharacters = function () {\n        if (!isDefined(this.supportsCommitCharacters)) {\n            var completion = this.clientCapabilities.textDocument && this.clientCapabilities.textDocument.completion;\n            this.supportsCommitCharacters = completion && completion.completionItem && !!completion.completionItem.commitCharactersSupport;\n        }\n        return this.supportsCommitCharacters;\n    };\n    return JSONCompletion;\n}());\nexport { JSONCompletion };\n","/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\nexport function stringifyObject(obj, indent, stringifyLiteral) {\n    if (obj !== null && typeof obj === 'object') {\n        var newIndent = indent + '\\t';\n        if (Array.isArray(obj)) {\n            if (obj.length === 0) {\n                return '[]';\n            }\n            var result = '[\\n';\n            for (var i = 0; i < obj.length; i++) {\n                result += newIndent + stringifyObject(obj[i], newIndent, stringifyLiteral);\n                if (i < obj.length - 1) {\n                    result += ',';\n                }\n                result += '\\n';\n            }\n            result += indent + ']';\n            return result;\n        }\n        else {\n            var keys = Object.keys(obj);\n            if (keys.length === 0) {\n                return '{}';\n            }\n            var result = '{\\n';\n            for (var i = 0; i < keys.length; i++) {\n                var key = keys[i];\n                result += newIndent + JSON.stringify(key) + ': ' + stringifyObject(obj[key], newIndent, stringifyLiteral);\n                if (i < keys.length - 1) {\n                    result += ',';\n                }\n                result += '\\n';\n            }\n            result += indent + '}';\n            return result;\n        }\n    }\n    return stringifyLiteral(obj);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as Parser from '../parser/jsonParser';\nimport { Range } from '../jsonLanguageTypes';\nvar JSONHover = /** @class */ (function () {\n    function JSONHover(schemaService, contributions, promiseConstructor) {\n        if (contributions === void 0) { contributions = []; }\n        this.schemaService = schemaService;\n        this.contributions = contributions;\n        this.promise = promiseConstructor || Promise;\n    }\n    JSONHover.prototype.doHover = function (document, position, doc) {\n        var offset = document.offsetAt(position);\n        var node = doc.getNodeFromOffset(offset);\n        if (!node || (node.type === 'object' || node.type === 'array') && offset > node.offset + 1 && offset < node.offset + node.length - 1) {\n            return this.promise.resolve(null);\n        }\n        var hoverRangeNode = node;\n        // use the property description when hovering over an object key\n        if (node.type === 'string') {\n            var parent = node.parent;\n            if (parent && parent.type === 'property' && parent.keyNode === node) {\n                node = parent.valueNode;\n                if (!node) {\n                    return this.promise.resolve(null);\n                }\n            }\n        }\n        var hoverRange = Range.create(document.positionAt(hoverRangeNode.offset), document.positionAt(hoverRangeNode.offset + hoverRangeNode.length));\n        var createHover = function (contents) {\n            var result = {\n                contents: contents,\n                range: hoverRange\n            };\n            return result;\n        };\n        var location = Parser.getNodePath(node);\n        for (var i = this.contributions.length - 1; i >= 0; i--) {\n            var contribution = this.contributions[i];\n            var promise = contribution.getInfoContribution(document.uri, location);\n            if (promise) {\n                return promise.then(function (htmlContent) { return createHover(htmlContent); });\n            }\n        }\n        return this.schemaService.getSchemaForResource(document.uri, doc).then(function (schema) {\n            if (schema && node) {\n                var matchingSchemas = doc.getMatchingSchemas(schema.schema, node.offset);\n                var title_1 = undefined;\n                var markdownDescription_1 = undefined;\n                var markdownEnumValueDescription_1 = undefined, enumValue_1 = undefined;\n                matchingSchemas.every(function (s) {\n                    if (s.node === node && !s.inverted && s.schema) {\n                        title_1 = title_1 || s.schema.title;\n                        markdownDescription_1 = markdownDescription_1 || s.schema.markdownDescription || toMarkdown(s.schema.description);\n                        if (s.schema.enum) {\n                            var idx = s.schema.enum.indexOf(Parser.getNodeValue(node));\n                            if (s.schema.markdownEnumDescriptions) {\n                                markdownEnumValueDescription_1 = s.schema.markdownEnumDescriptions[idx];\n                            }\n                            else if (s.schema.enumDescriptions) {\n                                markdownEnumValueDescription_1 = toMarkdown(s.schema.enumDescriptions[idx]);\n                            }\n                            if (markdownEnumValueDescription_1) {\n                                enumValue_1 = s.schema.enum[idx];\n                                if (typeof enumValue_1 !== 'string') {\n                                    enumValue_1 = JSON.stringify(enumValue_1);\n                                }\n                            }\n                        }\n                    }\n                    return true;\n                });\n                var result = '';\n                if (title_1) {\n                    result = toMarkdown(title_1);\n                }\n                if (markdownDescription_1) {\n                    if (result.length > 0) {\n                        result += \"\\n\\n\";\n                    }\n                    result += markdownDescription_1;\n                }\n                if (markdownEnumValueDescription_1) {\n                    if (result.length > 0) {\n                        result += \"\\n\\n\";\n                    }\n                    result += \"`\" + toMarkdownCodeBlock(enumValue_1) + \"`: \" + markdownEnumValueDescription_1;\n                }\n                return createHover([result]);\n            }\n            return null;\n        });\n    };\n    return JSONHover;\n}());\nexport { JSONHover };\nfunction toMarkdown(plain) {\n    if (plain) {\n        var res = plain.replace(/([^\\n\\r])(\\r?\\n)([^\\n\\r])/gm, '$1\\n\\n$3'); // single new lines to \\n\\n (Markdown paragraph)\n        return res.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, \"\\\\$&\"); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\n    }\n    return undefined;\n}\nfunction toMarkdownCodeBlock(content) {\n    // see https://daringfireball.net/projects/markdown/syntax#precode\n    if (content.indexOf('`') !== -1) {\n        return '`` ' + content + ' ``';\n    }\n    return content;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as Json from 'jsonc-parser';\nimport { URI } from 'vscode-uri';\nimport * as Strings from '../utils/strings';\nimport * as Parser from '../parser/jsonParser';\nimport * as nls from 'vscode-nls';\nvar localize = nls.loadMessageBundle();\nvar FilePatternAssociation = /** @class */ (function () {\n    function FilePatternAssociation(pattern, uris) {\n        this.patternRegExps = [];\n        this.isInclude = [];\n        try {\n            for (var _i = 0, pattern_1 = pattern; _i < pattern_1.length; _i++) {\n                var p = pattern_1[_i];\n                var include = p[0] !== '!';\n                if (!include) {\n                    p = p.substring(1);\n                }\n                this.patternRegExps.push(new RegExp(Strings.convertSimple2RegExpPattern(p) + '$'));\n                this.isInclude.push(include);\n            }\n            this.uris = uris;\n        }\n        catch (e) {\n            // invalid pattern\n            this.patternRegExps.length = 0;\n            this.isInclude.length = 0;\n            this.uris = [];\n        }\n    }\n    FilePatternAssociation.prototype.matchesPattern = function (fileName) {\n        var match = false;\n        for (var i = 0; i < this.patternRegExps.length; i++) {\n            var regExp = this.patternRegExps[i];\n            if (regExp.test(fileName)) {\n                match = this.isInclude[i];\n            }\n        }\n        return match;\n    };\n    FilePatternAssociation.prototype.getURIs = function () {\n        return this.uris;\n    };\n    return FilePatternAssociation;\n}());\nvar SchemaHandle = /** @class */ (function () {\n    function SchemaHandle(service, url, unresolvedSchemaContent) {\n        this.service = service;\n        this.url = url;\n        this.dependencies = {};\n        if (unresolvedSchemaContent) {\n            this.unresolvedSchema = this.service.promise.resolve(new UnresolvedSchema(unresolvedSchemaContent));\n        }\n    }\n    SchemaHandle.prototype.getUnresolvedSchema = function () {\n        if (!this.unresolvedSchema) {\n            this.unresolvedSchema = this.service.loadSchema(this.url);\n        }\n        return this.unresolvedSchema;\n    };\n    SchemaHandle.prototype.getResolvedSchema = function () {\n        var _this = this;\n        if (!this.resolvedSchema) {\n            this.resolvedSchema = this.getUnresolvedSchema().then(function (unresolved) {\n                return _this.service.resolveSchemaContent(unresolved, _this.url, _this.dependencies);\n            });\n        }\n        return this.resolvedSchema;\n    };\n    SchemaHandle.prototype.clearSchema = function () {\n        this.resolvedSchema = undefined;\n        this.unresolvedSchema = undefined;\n        this.dependencies = {};\n    };\n    return SchemaHandle;\n}());\nvar UnresolvedSchema = /** @class */ (function () {\n    function UnresolvedSchema(schema, errors) {\n        if (errors === void 0) { errors = []; }\n        this.schema = schema;\n        this.errors = errors;\n    }\n    return UnresolvedSchema;\n}());\nexport { UnresolvedSchema };\nvar ResolvedSchema = /** @class */ (function () {\n    function ResolvedSchema(schema, errors) {\n        if (errors === void 0) { errors = []; }\n        this.schema = schema;\n        this.errors = errors;\n    }\n    ResolvedSchema.prototype.getSection = function (path) {\n        var schemaRef = this.getSectionRecursive(path, this.schema);\n        if (schemaRef) {\n            return Parser.asSchema(schemaRef);\n        }\n        return undefined;\n    };\n    ResolvedSchema.prototype.getSectionRecursive = function (path, schema) {\n        if (!schema || typeof schema === 'boolean' || path.length === 0) {\n            return schema;\n        }\n        var next = path.shift();\n        if (schema.properties && typeof schema.properties[next]) {\n            return this.getSectionRecursive(path, schema.properties[next]);\n        }\n        else if (schema.patternProperties) {\n            for (var _i = 0, _a = Object.keys(schema.patternProperties); _i < _a.length; _i++) {\n                var pattern = _a[_i];\n                var regex = new RegExp(pattern);\n                if (regex.test(next)) {\n                    return this.getSectionRecursive(path, schema.patternProperties[pattern]);\n                }\n            }\n        }\n        else if (typeof schema.additionalProperties === 'object') {\n            return this.getSectionRecursive(path, schema.additionalProperties);\n        }\n        else if (next.match('[0-9]+')) {\n            if (Array.isArray(schema.items)) {\n                var index = parseInt(next, 10);\n                if (!isNaN(index) && schema.items[index]) {\n                    return this.getSectionRecursive(path, schema.items[index]);\n                }\n            }\n            else if (schema.items) {\n                return this.getSectionRecursive(path, schema.items);\n            }\n        }\n        return undefined;\n    };\n    return ResolvedSchema;\n}());\nexport { ResolvedSchema };\nvar JSONSchemaService = /** @class */ (function () {\n    function JSONSchemaService(requestService, contextService, promiseConstructor) {\n        this.contextService = contextService;\n        this.requestService = requestService;\n        this.promiseConstructor = promiseConstructor || Promise;\n        this.callOnDispose = [];\n        this.contributionSchemas = {};\n        this.contributionAssociations = [];\n        this.schemasById = {};\n        this.filePatternAssociations = [];\n        this.registeredSchemasIds = {};\n    }\n    JSONSchemaService.prototype.getRegisteredSchemaIds = function (filter) {\n        return Object.keys(this.registeredSchemasIds).filter(function (id) {\n            var scheme = URI.parse(id).scheme;\n            return scheme !== 'schemaservice' && (!filter || filter(scheme));\n        });\n    };\n    Object.defineProperty(JSONSchemaService.prototype, \"promise\", {\n        get: function () {\n            return this.promiseConstructor;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    JSONSchemaService.prototype.dispose = function () {\n        while (this.callOnDispose.length > 0) {\n            this.callOnDispose.pop()();\n        }\n    };\n    JSONSchemaService.prototype.onResourceChange = function (uri) {\n        var _this = this;\n        var hasChanges = false;\n        uri = normalizeId(uri);\n        var toWalk = [uri];\n        var all = Object.keys(this.schemasById).map(function (key) { return _this.schemasById[key]; });\n        while (toWalk.length) {\n            var curr = toWalk.pop();\n            for (var i = 0; i < all.length; i++) {\n                var handle = all[i];\n                if (handle && (handle.url === curr || handle.dependencies[curr])) {\n                    if (handle.url !== curr) {\n                        toWalk.push(handle.url);\n                    }\n                    handle.clearSchema();\n                    all[i] = undefined;\n                    hasChanges = true;\n                }\n            }\n        }\n        return hasChanges;\n    };\n    JSONSchemaService.prototype.setSchemaContributions = function (schemaContributions) {\n        if (schemaContributions.schemas) {\n            var schemas = schemaContributions.schemas;\n            for (var id in schemas) {\n                var normalizedId = normalizeId(id);\n                this.contributionSchemas[normalizedId] = this.addSchemaHandle(normalizedId, schemas[id]);\n            }\n        }\n        if (Array.isArray(schemaContributions.schemaAssociations)) {\n            var schemaAssociations = schemaContributions.schemaAssociations;\n            for (var _i = 0, schemaAssociations_1 = schemaAssociations; _i < schemaAssociations_1.length; _i++) {\n                var schemaAssociation = schemaAssociations_1[_i];\n                var uris = schemaAssociation.uris.map(normalizeId);\n                var association = this.addFilePatternAssociation(schemaAssociation.pattern, uris);\n                this.contributionAssociations.push(association);\n            }\n        }\n    };\n    JSONSchemaService.prototype.addSchemaHandle = function (id, unresolvedSchemaContent) {\n        var schemaHandle = new SchemaHandle(this, id, unresolvedSchemaContent);\n        this.schemasById[id] = schemaHandle;\n        return schemaHandle;\n    };\n    JSONSchemaService.prototype.getOrAddSchemaHandle = function (id, unresolvedSchemaContent) {\n        return this.schemasById[id] || this.addSchemaHandle(id, unresolvedSchemaContent);\n    };\n    JSONSchemaService.prototype.addFilePatternAssociation = function (pattern, uris) {\n        var fpa = new FilePatternAssociation(pattern, uris);\n        this.filePatternAssociations.push(fpa);\n        return fpa;\n    };\n    JSONSchemaService.prototype.registerExternalSchema = function (uri, filePatterns, unresolvedSchemaContent) {\n        var id = normalizeId(uri);\n        this.registeredSchemasIds[id] = true;\n        this.cachedSchemaForResource = undefined;\n        if (filePatterns) {\n            this.addFilePatternAssociation(filePatterns, [uri]);\n        }\n        return unresolvedSchemaContent ? this.addSchemaHandle(id, unresolvedSchemaContent) : this.getOrAddSchemaHandle(id);\n    };\n    JSONSchemaService.prototype.clearExternalSchemas = function () {\n        this.schemasById = {};\n        this.filePatternAssociations = [];\n        this.registeredSchemasIds = {};\n        this.cachedSchemaForResource = undefined;\n        for (var id in this.contributionSchemas) {\n            this.schemasById[id] = this.contributionSchemas[id];\n            this.registeredSchemasIds[id] = true;\n        }\n        for (var _i = 0, _a = this.contributionAssociations; _i < _a.length; _i++) {\n            var contributionAssociation = _a[_i];\n            this.filePatternAssociations.push(contributionAssociation);\n        }\n    };\n    JSONSchemaService.prototype.getResolvedSchema = function (schemaId) {\n        var id = normalizeId(schemaId);\n        var schemaHandle = this.schemasById[id];\n        if (schemaHandle) {\n            return schemaHandle.getResolvedSchema();\n        }\n        return this.promise.resolve(undefined);\n    };\n    JSONSchemaService.prototype.loadSchema = function (url) {\n        if (!this.requestService) {\n            var errorMessage = localize('json.schema.norequestservice', 'Unable to load schema from \\'{0}\\'. No schema request service available', toDisplayString(url));\n            return this.promise.resolve(new UnresolvedSchema({}, [errorMessage]));\n        }\n        return this.requestService(url).then(function (content) {\n            if (!content) {\n                var errorMessage = localize('json.schema.nocontent', 'Unable to load schema from \\'{0}\\': No content.', toDisplayString(url));\n                return new UnresolvedSchema({}, [errorMessage]);\n            }\n            var schemaContent = {};\n            var jsonErrors = [];\n            schemaContent = Json.parse(content, jsonErrors);\n            var errors = jsonErrors.length ? [localize('json.schema.invalidFormat', 'Unable to parse content from \\'{0}\\': Parse error at offset {1}.', toDisplayString(url), jsonErrors[0].offset)] : [];\n            return new UnresolvedSchema(schemaContent, errors);\n        }, function (error) {\n            var errorMessage = error.toString();\n            var errorSplit = error.toString().split('Error: ');\n            if (errorSplit.length > 1) {\n                // more concise error message, URL and context are attached by caller anyways\n                errorMessage = errorSplit[1];\n            }\n            if (Strings.endsWith(errorMessage, '.')) {\n                errorMessage = errorMessage.substr(0, errorMessage.length - 1);\n            }\n            return new UnresolvedSchema({}, [localize('json.schema.nocontent', 'Unable to load schema from \\'{0}\\': {1}.', toDisplayString(url), errorMessage)]);\n        });\n    };\n    JSONSchemaService.prototype.resolveSchemaContent = function (schemaToResolve, schemaURL, dependencies) {\n        var _this = this;\n        var resolveErrors = schemaToResolve.errors.slice(0);\n        var schema = schemaToResolve.schema;\n        if (schema.$schema) {\n            var id = normalizeId(schema.$schema);\n            if (id === 'http://json-schema.org/draft-03/schema') {\n                return this.promise.resolve(new ResolvedSchema({}, [localize('json.schema.draft03.notsupported', \"Draft-03 schemas are not supported.\")]));\n            }\n            else if (id === 'https://json-schema.org/draft/2019-09/schema') {\n                schemaToResolve.errors.push(localize('json.schema.draft201909.notsupported', \"Draft 2019-09 schemas are not yet fully supported.\"));\n            }\n        }\n        var contextService = this.contextService;\n        var findSection = function (schema, path) {\n            if (!path) {\n                return schema;\n            }\n            var current = schema;\n            if (path[0] === '/') {\n                path = path.substr(1);\n            }\n            path.split('/').some(function (part) {\n                current = current[part];\n                return !current;\n            });\n            return current;\n        };\n        var merge = function (target, sourceRoot, sourceURI, refSegment) {\n            var path = refSegment ? decodeURIComponent(refSegment) : undefined;\n            var section = findSection(sourceRoot, path);\n            if (section) {\n                for (var key in section) {\n                    if (section.hasOwnProperty(key) && !target.hasOwnProperty(key)) {\n                        target[key] = section[key];\n                    }\n                }\n            }\n            else {\n                resolveErrors.push(localize('json.schema.invalidref', '$ref \\'{0}\\' in \\'{1}\\' can not be resolved.', path, sourceURI));\n            }\n        };\n        var resolveExternalLink = function (node, uri, refSegment, parentSchemaURL, parentSchemaDependencies) {\n            if (contextService && !/^\\w+:\\/\\/.*/.test(uri)) {\n                uri = contextService.resolveRelativePath(uri, parentSchemaURL);\n            }\n            uri = normalizeId(uri);\n            var referencedHandle = _this.getOrAddSchemaHandle(uri);\n            return referencedHandle.getUnresolvedSchema().then(function (unresolvedSchema) {\n                parentSchemaDependencies[uri] = true;\n                if (unresolvedSchema.errors.length) {\n                    var loc = refSegment ? uri + '#' + refSegment : uri;\n                    resolveErrors.push(localize('json.schema.problemloadingref', 'Problems loading reference \\'{0}\\': {1}', loc, unresolvedSchema.errors[0]));\n                }\n                merge(node, unresolvedSchema.schema, uri, refSegment);\n                return resolveRefs(node, unresolvedSchema.schema, uri, referencedHandle.dependencies);\n            });\n        };\n        var resolveRefs = function (node, parentSchema, parentSchemaURL, parentSchemaDependencies) {\n            if (!node || typeof node !== 'object') {\n                return Promise.resolve(null);\n            }\n            var toWalk = [node];\n            var seen = [];\n            var openPromises = [];\n            var collectEntries = function () {\n                var entries = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    entries[_i] = arguments[_i];\n                }\n                for (var _a = 0, entries_1 = entries; _a < entries_1.length; _a++) {\n                    var entry = entries_1[_a];\n                    if (typeof entry === 'object') {\n                        toWalk.push(entry);\n                    }\n                }\n            };\n            var collectMapEntries = function () {\n                var maps = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    maps[_i] = arguments[_i];\n                }\n                for (var _a = 0, maps_1 = maps; _a < maps_1.length; _a++) {\n                    var map = maps_1[_a];\n                    if (typeof map === 'object') {\n                        for (var k in map) {\n                            var key = k;\n                            var entry = map[key];\n                            if (typeof entry === 'object') {\n                                toWalk.push(entry);\n                            }\n                        }\n                    }\n                }\n            };\n            var collectArrayEntries = function () {\n                var arrays = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    arrays[_i] = arguments[_i];\n                }\n                for (var _a = 0, arrays_1 = arrays; _a < arrays_1.length; _a++) {\n                    var array = arrays_1[_a];\n                    if (Array.isArray(array)) {\n                        for (var _b = 0, array_1 = array; _b < array_1.length; _b++) {\n                            var entry = array_1[_b];\n                            if (typeof entry === 'object') {\n                                toWalk.push(entry);\n                            }\n                        }\n                    }\n                }\n            };\n            var handleRef = function (next) {\n                var seenRefs = [];\n                while (next.$ref) {\n                    var ref = next.$ref;\n                    var segments = ref.split('#', 2);\n                    delete next.$ref;\n                    if (segments[0].length > 0) {\n                        openPromises.push(resolveExternalLink(next, segments[0], segments[1], parentSchemaURL, parentSchemaDependencies));\n                        return;\n                    }\n                    else {\n                        if (seenRefs.indexOf(ref) === -1) {\n                            merge(next, parentSchema, parentSchemaURL, segments[1]); // can set next.$ref again, use seenRefs to avoid circle\n                            seenRefs.push(ref);\n                        }\n                    }\n                }\n                collectEntries(next.items, next.additionalProperties, next.not, next.contains, next.propertyNames, next.if, next.then, next.else);\n                collectMapEntries(next.definitions, next.properties, next.patternProperties, next.dependencies);\n                collectArrayEntries(next.anyOf, next.allOf, next.oneOf, next.items);\n            };\n            while (toWalk.length) {\n                var next = toWalk.pop();\n                if (seen.indexOf(next) >= 0) {\n                    continue;\n                }\n                seen.push(next);\n                handleRef(next);\n            }\n            return _this.promise.all(openPromises);\n        };\n        return resolveRefs(schema, schema, schemaURL, dependencies).then(function (_) { return new ResolvedSchema(schema, resolveErrors); });\n    };\n    JSONSchemaService.prototype.getSchemaForResource = function (resource, document) {\n        // first use $schema if present\n        if (document && document.root && document.root.type === 'object') {\n            var schemaProperties = document.root.properties.filter(function (p) { return (p.keyNode.value === '$schema') && p.valueNode && p.valueNode.type === 'string'; });\n            if (schemaProperties.length > 0) {\n                var valueNode = schemaProperties[0].valueNode;\n                if (valueNode && valueNode.type === 'string') {\n                    var schemeId = Parser.getNodeValue(valueNode);\n                    if (schemeId && Strings.startsWith(schemeId, '.') && this.contextService) {\n                        schemeId = this.contextService.resolveRelativePath(schemeId, resource);\n                    }\n                    if (schemeId) {\n                        var id = normalizeId(schemeId);\n                        return this.getOrAddSchemaHandle(id).getResolvedSchema();\n                    }\n                }\n            }\n        }\n        if (this.cachedSchemaForResource && this.cachedSchemaForResource.resource === resource) {\n            return this.cachedSchemaForResource.resolvedSchema;\n        }\n        var seen = Object.create(null);\n        var schemas = [];\n        for (var _i = 0, _a = this.filePatternAssociations; _i < _a.length; _i++) {\n            var entry = _a[_i];\n            if (entry.matchesPattern(resource)) {\n                for (var _b = 0, _c = entry.getURIs(); _b < _c.length; _b++) {\n                    var schemaId = _c[_b];\n                    if (!seen[schemaId]) {\n                        schemas.push(schemaId);\n                        seen[schemaId] = true;\n                    }\n                }\n            }\n        }\n        var resolvedSchema = schemas.length > 0 ? this.createCombinedSchema(resource, schemas).getResolvedSchema() : this.promise.resolve(undefined);\n        this.cachedSchemaForResource = { resource: resource, resolvedSchema: resolvedSchema };\n        return resolvedSchema;\n    };\n    JSONSchemaService.prototype.createCombinedSchema = function (resource, schemaIds) {\n        if (schemaIds.length === 1) {\n            return this.getOrAddSchemaHandle(schemaIds[0]);\n        }\n        else {\n            var combinedSchemaId = 'schemaservice://combinedSchema/' + encodeURIComponent(resource);\n            var combinedSchema = {\n                allOf: schemaIds.map(function (schemaId) { return ({ $ref: schemaId }); })\n            };\n            return this.addSchemaHandle(combinedSchemaId, combinedSchema);\n        }\n    };\n    JSONSchemaService.prototype.getMatchingSchemas = function (document, jsonDocument, schema) {\n        if (schema) {\n            return this.promise.resolve(jsonDocument.getMatchingSchemas(schema).filter(function (s) { return !s.inverted; }));\n        }\n        return this.getSchemaForResource(document.uri, jsonDocument).then(function (schema) {\n            if (schema) {\n                return jsonDocument.getMatchingSchemas(schema.schema).filter(function (s) { return !s.inverted; });\n            }\n            return [];\n        });\n    };\n    return JSONSchemaService;\n}());\nexport { JSONSchemaService };\nfunction normalizeId(id) {\n    // remove trailing '#', normalize drive capitalization\n    try {\n        return URI.parse(id).toString();\n    }\n    catch (e) {\n        return id;\n    }\n}\nfunction toDisplayString(url) {\n    try {\n        var uri = URI.parse(url);\n        if (uri.scheme === 'file') {\n            return uri.fsPath;\n        }\n    }\n    catch (e) {\n        // ignore\n    }\n    return url;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { UnresolvedSchema } from './jsonSchemaService';\nimport { ErrorCode, Diagnostic, DiagnosticSeverity, Range } from '../jsonLanguageTypes';\nimport * as nls from 'vscode-nls';\nimport { isBoolean } from '../utils/objects';\nvar localize = nls.loadMessageBundle();\nvar JSONValidation = /** @class */ (function () {\n    function JSONValidation(jsonSchemaService, promiseConstructor) {\n        this.jsonSchemaService = jsonSchemaService;\n        this.promise = promiseConstructor;\n        this.validationEnabled = true;\n    }\n    JSONValidation.prototype.configure = function (raw) {\n        if (raw) {\n            this.validationEnabled = raw.validate;\n            this.commentSeverity = raw.allowComments ? undefined : DiagnosticSeverity.Error;\n        }\n    };\n    JSONValidation.prototype.doValidation = function (textDocument, jsonDocument, documentSettings, schema) {\n        var _this = this;\n        if (!this.validationEnabled) {\n            return this.promise.resolve([]);\n        }\n        var diagnostics = [];\n        var added = {};\n        var addProblem = function (problem) {\n            // remove duplicated messages\n            var signature = problem.range.start.line + ' ' + problem.range.start.character + ' ' + problem.message;\n            if (!added[signature]) {\n                added[signature] = true;\n                diagnostics.push(problem);\n            }\n        };\n        var getDiagnostics = function (schema) {\n            var trailingCommaSeverity = documentSettings ? toDiagnosticSeverity(documentSettings.trailingCommas) : DiagnosticSeverity.Error;\n            var commentSeverity = documentSettings ? toDiagnosticSeverity(documentSettings.comments) : _this.commentSeverity;\n            if (schema) {\n                if (schema.errors.length && jsonDocument.root) {\n                    var astRoot = jsonDocument.root;\n                    var property = astRoot.type === 'object' ? astRoot.properties[0] : undefined;\n                    if (property && property.keyNode.value === '$schema') {\n                        var node = property.valueNode || property;\n                        var range = Range.create(textDocument.positionAt(node.offset), textDocument.positionAt(node.offset + node.length));\n                        addProblem(Diagnostic.create(range, schema.errors[0], DiagnosticSeverity.Warning, ErrorCode.SchemaResolveError));\n                    }\n                    else {\n                        var range = Range.create(textDocument.positionAt(astRoot.offset), textDocument.positionAt(astRoot.offset + 1));\n                        addProblem(Diagnostic.create(range, schema.errors[0], DiagnosticSeverity.Warning, ErrorCode.SchemaResolveError));\n                    }\n                }\n                else {\n                    var semanticErrors = jsonDocument.validate(textDocument, schema.schema);\n                    if (semanticErrors) {\n                        semanticErrors.forEach(addProblem);\n                    }\n                }\n                if (schemaAllowsComments(schema.schema)) {\n                    commentSeverity = undefined;\n                }\n                if (schemaAllowsTrailingCommas(schema.schema)) {\n                    trailingCommaSeverity = undefined;\n                }\n            }\n            for (var _i = 0, _a = jsonDocument.syntaxErrors; _i < _a.length; _i++) {\n                var p = _a[_i];\n                if (p.code === ErrorCode.TrailingComma) {\n                    if (typeof trailingCommaSeverity !== 'number') {\n                        continue;\n                    }\n                    p.severity = trailingCommaSeverity;\n                }\n                addProblem(p);\n            }\n            if (typeof commentSeverity === 'number') {\n                var message_1 = localize('InvalidCommentToken', 'Comments are not permitted in JSON.');\n                jsonDocument.comments.forEach(function (c) {\n                    addProblem(Diagnostic.create(c, message_1, commentSeverity, ErrorCode.CommentNotPermitted));\n                });\n            }\n            return diagnostics;\n        };\n        if (schema) {\n            var id = schema.id || ('schemaservice://untitled/' + idCounter++);\n            return this.jsonSchemaService.resolveSchemaContent(new UnresolvedSchema(schema), id, {}).then(function (resolvedSchema) {\n                return getDiagnostics(resolvedSchema);\n            });\n        }\n        return this.jsonSchemaService.getSchemaForResource(textDocument.uri, jsonDocument).then(function (schema) {\n            return getDiagnostics(schema);\n        });\n    };\n    return JSONValidation;\n}());\nexport { JSONValidation };\nvar idCounter = 0;\nfunction schemaAllowsComments(schemaRef) {\n    if (schemaRef && typeof schemaRef === 'object') {\n        if (isBoolean(schemaRef.allowComments)) {\n            return schemaRef.allowComments;\n        }\n        if (schemaRef.allOf) {\n            for (var _i = 0, _a = schemaRef.allOf; _i < _a.length; _i++) {\n                var schema = _a[_i];\n                var allow = schemaAllowsComments(schema);\n                if (isBoolean(allow)) {\n                    return allow;\n                }\n            }\n        }\n    }\n    return undefined;\n}\nfunction schemaAllowsTrailingCommas(schemaRef) {\n    if (schemaRef && typeof schemaRef === 'object') {\n        if (isBoolean(schemaRef.allowTrailingCommas)) {\n            return schemaRef.allowTrailingCommas;\n        }\n        var deprSchemaRef = schemaRef;\n        if (isBoolean(deprSchemaRef['allowsTrailingCommas'])) { // deprecated\n            return deprSchemaRef['allowsTrailingCommas'];\n        }\n        if (schemaRef.allOf) {\n            for (var _i = 0, _a = schemaRef.allOf; _i < _a.length; _i++) {\n                var schema = _a[_i];\n                var allow = schemaAllowsTrailingCommas(schema);\n                if (isBoolean(allow)) {\n                    return allow;\n                }\n            }\n        }\n    }\n    return undefined;\n}\nfunction toDiagnosticSeverity(severityLevel) {\n    switch (severityLevel) {\n        case 'error': return DiagnosticSeverity.Error;\n        case 'warning': return DiagnosticSeverity.Warning;\n        case 'ignore': return undefined;\n    }\n    return undefined;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar Digit0 = 48;\nvar Digit9 = 57;\nvar A = 65;\nvar a = 97;\nvar f = 102;\nexport function hexDigit(charCode) {\n    if (charCode < Digit0) {\n        return 0;\n    }\n    if (charCode <= Digit9) {\n        return charCode - Digit0;\n    }\n    if (charCode < a) {\n        charCode += (a - A);\n    }\n    if (charCode >= a && charCode <= f) {\n        return charCode - a + 10;\n    }\n    return 0;\n}\nexport function colorFromHex(text) {\n    if (text[0] !== '#') {\n        return undefined;\n    }\n    switch (text.length) {\n        case 4:\n            return {\n                red: (hexDigit(text.charCodeAt(1)) * 0x11) / 255.0,\n                green: (hexDigit(text.charCodeAt(2)) * 0x11) / 255.0,\n                blue: (hexDigit(text.charCodeAt(3)) * 0x11) / 255.0,\n                alpha: 1\n            };\n        case 5:\n            return {\n                red: (hexDigit(text.charCodeAt(1)) * 0x11) / 255.0,\n                green: (hexDigit(text.charCodeAt(2)) * 0x11) / 255.0,\n                blue: (hexDigit(text.charCodeAt(3)) * 0x11) / 255.0,\n                alpha: (hexDigit(text.charCodeAt(4)) * 0x11) / 255.0,\n            };\n        case 7:\n            return {\n                red: (hexDigit(text.charCodeAt(1)) * 0x10 + hexDigit(text.charCodeAt(2))) / 255.0,\n                green: (hexDigit(text.charCodeAt(3)) * 0x10 + hexDigit(text.charCodeAt(4))) / 255.0,\n                blue: (hexDigit(text.charCodeAt(5)) * 0x10 + hexDigit(text.charCodeAt(6))) / 255.0,\n                alpha: 1\n            };\n        case 9:\n            return {\n                red: (hexDigit(text.charCodeAt(1)) * 0x10 + hexDigit(text.charCodeAt(2))) / 255.0,\n                green: (hexDigit(text.charCodeAt(3)) * 0x10 + hexDigit(text.charCodeAt(4))) / 255.0,\n                blue: (hexDigit(text.charCodeAt(5)) * 0x10 + hexDigit(text.charCodeAt(6))) / 255.0,\n                alpha: (hexDigit(text.charCodeAt(7)) * 0x10 + hexDigit(text.charCodeAt(8))) / 255.0\n            };\n    }\n    return undefined;\n}\nexport function colorFrom256RGB(red, green, blue, alpha) {\n    if (alpha === void 0) { alpha = 1.0; }\n    return {\n        red: red / 255.0,\n        green: green / 255.0,\n        blue: blue / 255.0,\n        alpha: alpha\n    };\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as Parser from '../parser/jsonParser';\nimport * as Strings from '../utils/strings';\nimport { colorFromHex } from '../utils/colors';\nimport { Range, TextEdit, SymbolKind, Location } from \"../jsonLanguageTypes\";\nvar JSONDocumentSymbols = /** @class */ (function () {\n    function JSONDocumentSymbols(schemaService) {\n        this.schemaService = schemaService;\n    }\n    JSONDocumentSymbols.prototype.findDocumentSymbols = function (document, doc, context) {\n        var _this = this;\n        if (context === void 0) { context = { resultLimit: Number.MAX_VALUE }; }\n        var root = doc.root;\n        if (!root) {\n            return [];\n        }\n        var limit = context.resultLimit || Number.MAX_VALUE;\n        // special handling for key bindings\n        var resourceString = document.uri;\n        if ((resourceString === 'vscode://defaultsettings/keybindings.json') || Strings.endsWith(resourceString.toLowerCase(), '/user/keybindings.json')) {\n            if (root.type === 'array') {\n                var result_1 = [];\n                for (var _i = 0, _a = root.items; _i < _a.length; _i++) {\n                    var item = _a[_i];\n                    if (item.type === 'object') {\n                        for (var _b = 0, _c = item.properties; _b < _c.length; _b++) {\n                            var property = _c[_b];\n                            if (property.keyNode.value === 'key' && property.valueNode) {\n                                var location = Location.create(document.uri, getRange(document, item));\n                                result_1.push({ name: Parser.getNodeValue(property.valueNode), kind: SymbolKind.Function, location: location });\n                                limit--;\n                                if (limit <= 0) {\n                                    if (context && context.onResultLimitExceeded) {\n                                        context.onResultLimitExceeded(resourceString);\n                                    }\n                                    return result_1;\n                                }\n                            }\n                        }\n                    }\n                }\n                return result_1;\n            }\n        }\n        var toVisit = [\n            { node: root, containerName: '' }\n        ];\n        var nextToVisit = 0;\n        var limitExceeded = false;\n        var result = [];\n        var collectOutlineEntries = function (node, containerName) {\n            if (node.type === 'array') {\n                node.items.forEach(function (node) {\n                    if (node) {\n                        toVisit.push({ node: node, containerName: containerName });\n                    }\n                });\n            }\n            else if (node.type === 'object') {\n                node.properties.forEach(function (property) {\n                    var valueNode = property.valueNode;\n                    if (valueNode) {\n                        if (limit > 0) {\n                            limit--;\n                            var location = Location.create(document.uri, getRange(document, property));\n                            var childContainerName = containerName ? containerName + '.' + property.keyNode.value : property.keyNode.value;\n                            result.push({ name: _this.getKeyLabel(property), kind: _this.getSymbolKind(valueNode.type), location: location, containerName: containerName });\n                            toVisit.push({ node: valueNode, containerName: childContainerName });\n                        }\n                        else {\n                            limitExceeded = true;\n                        }\n                    }\n                });\n            }\n        };\n        // breath first traversal\n        while (nextToVisit < toVisit.length) {\n            var next = toVisit[nextToVisit++];\n            collectOutlineEntries(next.node, next.containerName);\n        }\n        if (limitExceeded && context && context.onResultLimitExceeded) {\n            context.onResultLimitExceeded(resourceString);\n        }\n        return result;\n    };\n    JSONDocumentSymbols.prototype.findDocumentSymbols2 = function (document, doc, context) {\n        var _this = this;\n        if (context === void 0) { context = { resultLimit: Number.MAX_VALUE }; }\n        var root = doc.root;\n        if (!root) {\n            return [];\n        }\n        var limit = context.resultLimit || Number.MAX_VALUE;\n        // special handling for key bindings\n        var resourceString = document.uri;\n        if ((resourceString === 'vscode://defaultsettings/keybindings.json') || Strings.endsWith(resourceString.toLowerCase(), '/user/keybindings.json')) {\n            if (root.type === 'array') {\n                var result_2 = [];\n                for (var _i = 0, _a = root.items; _i < _a.length; _i++) {\n                    var item = _a[_i];\n                    if (item.type === 'object') {\n                        for (var _b = 0, _c = item.properties; _b < _c.length; _b++) {\n                            var property = _c[_b];\n                            if (property.keyNode.value === 'key' && property.valueNode) {\n                                var range = getRange(document, item);\n                                var selectionRange = getRange(document, property.keyNode);\n                                result_2.push({ name: Parser.getNodeValue(property.valueNode), kind: SymbolKind.Function, range: range, selectionRange: selectionRange });\n                                limit--;\n                                if (limit <= 0) {\n                                    if (context && context.onResultLimitExceeded) {\n                                        context.onResultLimitExceeded(resourceString);\n                                    }\n                                    return result_2;\n                                }\n                            }\n                        }\n                    }\n                }\n                return result_2;\n            }\n        }\n        var result = [];\n        var toVisit = [\n            { node: root, result: result }\n        ];\n        var nextToVisit = 0;\n        var limitExceeded = false;\n        var collectOutlineEntries = function (node, result) {\n            if (node.type === 'array') {\n                node.items.forEach(function (node, index) {\n                    if (node) {\n                        if (limit > 0) {\n                            limit--;\n                            var range = getRange(document, node);\n                            var selectionRange = range;\n                            var name = String(index);\n                            var symbol = { name: name, kind: _this.getSymbolKind(node.type), range: range, selectionRange: selectionRange, children: [] };\n                            result.push(symbol);\n                            toVisit.push({ result: symbol.children, node: node });\n                        }\n                        else {\n                            limitExceeded = true;\n                        }\n                    }\n                });\n            }\n            else if (node.type === 'object') {\n                node.properties.forEach(function (property) {\n                    var valueNode = property.valueNode;\n                    if (valueNode) {\n                        if (limit > 0) {\n                            limit--;\n                            var range = getRange(document, property);\n                            var selectionRange = getRange(document, property.keyNode);\n                            var symbol = { name: _this.getKeyLabel(property), kind: _this.getSymbolKind(valueNode.type), range: range, selectionRange: selectionRange, children: [] };\n                            result.push(symbol);\n                            toVisit.push({ result: symbol.children, node: valueNode });\n                        }\n                        else {\n                            limitExceeded = true;\n                        }\n                    }\n                });\n            }\n        };\n        // breath first traversal\n        while (nextToVisit < toVisit.length) {\n            var next = toVisit[nextToVisit++];\n            collectOutlineEntries(next.node, next.result);\n        }\n        if (limitExceeded && context && context.onResultLimitExceeded) {\n            context.onResultLimitExceeded(resourceString);\n        }\n        return result;\n    };\n    JSONDocumentSymbols.prototype.getSymbolKind = function (nodeType) {\n        switch (nodeType) {\n            case 'object':\n                return SymbolKind.Module;\n            case 'string':\n                return SymbolKind.String;\n            case 'number':\n                return SymbolKind.Number;\n            case 'array':\n                return SymbolKind.Array;\n            case 'boolean':\n                return SymbolKind.Boolean;\n            default: // 'null'\n                return SymbolKind.Variable;\n        }\n    };\n    JSONDocumentSymbols.prototype.getKeyLabel = function (property) {\n        var name = property.keyNode.value;\n        if (name) {\n            name = name.replace(/[\\n]/g, '');\n        }\n        if (name && name.trim()) {\n            return name;\n        }\n        return \"\\\"\" + name + \"\\\"\";\n    };\n    JSONDocumentSymbols.prototype.findDocumentColors = function (document, doc, context) {\n        return this.schemaService.getSchemaForResource(document.uri, doc).then(function (schema) {\n            var result = [];\n            if (schema) {\n                var limit = context && typeof context.resultLimit === 'number' ? context.resultLimit : Number.MAX_VALUE;\n                var matchingSchemas = doc.getMatchingSchemas(schema.schema);\n                var visitedNode = {};\n                for (var _i = 0, matchingSchemas_1 = matchingSchemas; _i < matchingSchemas_1.length; _i++) {\n                    var s = matchingSchemas_1[_i];\n                    if (!s.inverted && s.schema && (s.schema.format === 'color' || s.schema.format === 'color-hex') && s.node && s.node.type === 'string') {\n                        var nodeId = String(s.node.offset);\n                        if (!visitedNode[nodeId]) {\n                            var color = colorFromHex(Parser.getNodeValue(s.node));\n                            if (color) {\n                                var range = getRange(document, s.node);\n                                result.push({ color: color, range: range });\n                            }\n                            visitedNode[nodeId] = true;\n                            limit--;\n                            if (limit <= 0) {\n                                if (context && context.onResultLimitExceeded) {\n                                    context.onResultLimitExceeded(document.uri);\n                                }\n                                return result;\n                            }\n                        }\n                    }\n                }\n            }\n            return result;\n        });\n    };\n    JSONDocumentSymbols.prototype.getColorPresentations = function (document, doc, color, range) {\n        var result = [];\n        var red256 = Math.round(color.red * 255), green256 = Math.round(color.green * 255), blue256 = Math.round(color.blue * 255);\n        function toTwoDigitHex(n) {\n            var r = n.toString(16);\n            return r.length !== 2 ? '0' + r : r;\n        }\n        var label;\n        if (color.alpha === 1) {\n            label = \"#\" + toTwoDigitHex(red256) + toTwoDigitHex(green256) + toTwoDigitHex(blue256);\n        }\n        else {\n            label = \"#\" + toTwoDigitHex(red256) + toTwoDigitHex(green256) + toTwoDigitHex(blue256) + toTwoDigitHex(Math.round(color.alpha * 255));\n        }\n        result.push({ label: label, textEdit: TextEdit.replace(range, JSON.stringify(label)) });\n        return result;\n    };\n    return JSONDocumentSymbols;\n}());\nexport { JSONDocumentSymbols };\nfunction getRange(document, node) {\n    return Range.create(document.positionAt(node.offset), document.positionAt(node.offset + node.length));\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as nls from 'vscode-nls';\nvar localize = nls.loadMessageBundle();\nexport var schemaContributions = {\n    schemaAssociations: [],\n    schemas: {\n        // refer to the latest schema\n        'http://json-schema.org/schema#': {\n            $ref: 'http://json-schema.org/draft-07/schema#'\n        },\n        // bundle the schema-schema to include (localized) descriptions\n        'http://json-schema.org/draft-04/schema#': {\n            'title': localize('schema.json', 'Describes a JSON file using a schema. See json-schema.org for more info.'),\n            '$schema': 'http://json-schema.org/draft-04/schema#',\n            'definitions': {\n                'schemaArray': {\n                    'type': 'array',\n                    'minItems': 1,\n                    'items': {\n                        '$ref': '#'\n                    }\n                },\n                'positiveInteger': {\n                    'type': 'integer',\n                    'minimum': 0\n                },\n                'positiveIntegerDefault0': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/positiveInteger'\n                        },\n                        {\n                            'default': 0\n                        }\n                    ]\n                },\n                'simpleTypes': {\n                    'type': 'string',\n                    'enum': [\n                        'array',\n                        'boolean',\n                        'integer',\n                        'null',\n                        'number',\n                        'object',\n                        'string'\n                    ]\n                },\n                'stringArray': {\n                    'type': 'array',\n                    'items': {\n                        'type': 'string'\n                    },\n                    'minItems': 1,\n                    'uniqueItems': true\n                }\n            },\n            'type': 'object',\n            'properties': {\n                'id': {\n                    'type': 'string',\n                    'format': 'uri'\n                },\n                '$schema': {\n                    'type': 'string',\n                    'format': 'uri'\n                },\n                'title': {\n                    'type': 'string'\n                },\n                'description': {\n                    'type': 'string'\n                },\n                'default': {},\n                'multipleOf': {\n                    'type': 'number',\n                    'minimum': 0,\n                    'exclusiveMinimum': true\n                },\n                'maximum': {\n                    'type': 'number'\n                },\n                'exclusiveMaximum': {\n                    'type': 'boolean',\n                    'default': false\n                },\n                'minimum': {\n                    'type': 'number'\n                },\n                'exclusiveMinimum': {\n                    'type': 'boolean',\n                    'default': false\n                },\n                'maxLength': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/positiveInteger'\n                        }\n                    ]\n                },\n                'minLength': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/positiveIntegerDefault0'\n                        }\n                    ]\n                },\n                'pattern': {\n                    'type': 'string',\n                    'format': 'regex'\n                },\n                'additionalItems': {\n                    'anyOf': [\n                        {\n                            'type': 'boolean'\n                        },\n                        {\n                            '$ref': '#'\n                        }\n                    ],\n                    'default': {}\n                },\n                'items': {\n                    'anyOf': [\n                        {\n                            '$ref': '#'\n                        },\n                        {\n                            '$ref': '#/definitions/schemaArray'\n                        }\n                    ],\n                    'default': {}\n                },\n                'maxItems': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/positiveInteger'\n                        }\n                    ]\n                },\n                'minItems': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/positiveIntegerDefault0'\n                        }\n                    ]\n                },\n                'uniqueItems': {\n                    'type': 'boolean',\n                    'default': false\n                },\n                'maxProperties': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/positiveInteger'\n                        }\n                    ]\n                },\n                'minProperties': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/positiveIntegerDefault0'\n                        }\n                    ]\n                },\n                'required': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/stringArray'\n                        }\n                    ]\n                },\n                'additionalProperties': {\n                    'anyOf': [\n                        {\n                            'type': 'boolean'\n                        },\n                        {\n                            '$ref': '#'\n                        }\n                    ],\n                    'default': {}\n                },\n                'definitions': {\n                    'type': 'object',\n                    'additionalProperties': {\n                        '$ref': '#'\n                    },\n                    'default': {}\n                },\n                'properties': {\n                    'type': 'object',\n                    'additionalProperties': {\n                        '$ref': '#'\n                    },\n                    'default': {}\n                },\n                'patternProperties': {\n                    'type': 'object',\n                    'additionalProperties': {\n                        '$ref': '#'\n                    },\n                    'default': {}\n                },\n                'dependencies': {\n                    'type': 'object',\n                    'additionalProperties': {\n                        'anyOf': [\n                            {\n                                '$ref': '#'\n                            },\n                            {\n                                '$ref': '#/definitions/stringArray'\n                            }\n                        ]\n                    }\n                },\n                'enum': {\n                    'type': 'array',\n                    'minItems': 1,\n                    'uniqueItems': true\n                },\n                'type': {\n                    'anyOf': [\n                        {\n                            '$ref': '#/definitions/simpleTypes'\n                        },\n                        {\n                            'type': 'array',\n                            'items': {\n                                '$ref': '#/definitions/simpleTypes'\n                            },\n                            'minItems': 1,\n                            'uniqueItems': true\n                        }\n                    ]\n                },\n                'format': {\n                    'anyOf': [\n                        {\n                            'type': 'string',\n                            'enum': [\n                                'date-time',\n                                'uri',\n                                'email',\n                                'hostname',\n                                'ipv4',\n                                'ipv6',\n                                'regex'\n                            ]\n                        },\n                        {\n                            'type': 'string'\n                        }\n                    ]\n                },\n                'allOf': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/schemaArray'\n                        }\n                    ]\n                },\n                'anyOf': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/schemaArray'\n                        }\n                    ]\n                },\n                'oneOf': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/schemaArray'\n                        }\n                    ]\n                },\n                'not': {\n                    'allOf': [\n                        {\n                            '$ref': '#'\n                        }\n                    ]\n                }\n            },\n            'dependencies': {\n                'exclusiveMaximum': [\n                    'maximum'\n                ],\n                'exclusiveMinimum': [\n                    'minimum'\n                ]\n            },\n            'default': {}\n        },\n        'http://json-schema.org/draft-07/schema#': {\n            'title': localize('schema.json', 'Describes a JSON file using a schema. See json-schema.org for more info.'),\n            'definitions': {\n                'schemaArray': {\n                    'type': 'array',\n                    'minItems': 1,\n                    'items': { '$ref': '#' }\n                },\n                'nonNegativeInteger': {\n                    'type': 'integer',\n                    'minimum': 0\n                },\n                'nonNegativeIntegerDefault0': {\n                    'allOf': [\n                        { '$ref': '#/definitions/nonNegativeInteger' },\n                        { 'default': 0 }\n                    ]\n                },\n                'simpleTypes': {\n                    'enum': [\n                        'array',\n                        'boolean',\n                        'integer',\n                        'null',\n                        'number',\n                        'object',\n                        'string'\n                    ]\n                },\n                'stringArray': {\n                    'type': 'array',\n                    'items': { 'type': 'string' },\n                    'uniqueItems': true,\n                    'default': []\n                }\n            },\n            'type': ['object', 'boolean'],\n            'properties': {\n                '$id': {\n                    'type': 'string',\n                    'format': 'uri-reference'\n                },\n                '$schema': {\n                    'type': 'string',\n                    'format': 'uri'\n                },\n                '$ref': {\n                    'type': 'string',\n                    'format': 'uri-reference'\n                },\n                '$comment': {\n                    'type': 'string'\n                },\n                'title': {\n                    'type': 'string'\n                },\n                'description': {\n                    'type': 'string'\n                },\n                'default': true,\n                'readOnly': {\n                    'type': 'boolean',\n                    'default': false\n                },\n                'examples': {\n                    'type': 'array',\n                    'items': true\n                },\n                'multipleOf': {\n                    'type': 'number',\n                    'exclusiveMinimum': 0\n                },\n                'maximum': {\n                    'type': 'number'\n                },\n                'exclusiveMaximum': {\n                    'type': 'number'\n                },\n                'minimum': {\n                    'type': 'number'\n                },\n                'exclusiveMinimum': {\n                    'type': 'number'\n                },\n                'maxLength': { '$ref': '#/definitions/nonNegativeInteger' },\n                'minLength': { '$ref': '#/definitions/nonNegativeIntegerDefault0' },\n                'pattern': {\n                    'type': 'string',\n                    'format': 'regex'\n                },\n                'additionalItems': { '$ref': '#' },\n                'items': {\n                    'anyOf': [\n                        { '$ref': '#' },\n                        { '$ref': '#/definitions/schemaArray' }\n                    ],\n                    'default': true\n                },\n                'maxItems': { '$ref': '#/definitions/nonNegativeInteger' },\n                'minItems': { '$ref': '#/definitions/nonNegativeIntegerDefault0' },\n                'uniqueItems': {\n                    'type': 'boolean',\n                    'default': false\n                },\n                'contains': { '$ref': '#' },\n                'maxProperties': { '$ref': '#/definitions/nonNegativeInteger' },\n                'minProperties': { '$ref': '#/definitions/nonNegativeIntegerDefault0' },\n                'required': { '$ref': '#/definitions/stringArray' },\n                'additionalProperties': { '$ref': '#' },\n                'definitions': {\n                    'type': 'object',\n                    'additionalProperties': { '$ref': '#' },\n                    'default': {}\n                },\n                'properties': {\n                    'type': 'object',\n                    'additionalProperties': { '$ref': '#' },\n                    'default': {}\n                },\n                'patternProperties': {\n                    'type': 'object',\n                    'additionalProperties': { '$ref': '#' },\n                    'propertyNames': { 'format': 'regex' },\n                    'default': {}\n                },\n                'dependencies': {\n                    'type': 'object',\n                    'additionalProperties': {\n                        'anyOf': [\n                            { '$ref': '#' },\n                            { '$ref': '#/definitions/stringArray' }\n                        ]\n                    }\n                },\n                'propertyNames': { '$ref': '#' },\n                'const': true,\n                'enum': {\n                    'type': 'array',\n                    'items': true,\n                    'minItems': 1,\n                    'uniqueItems': true\n                },\n                'type': {\n                    'anyOf': [\n                        { '$ref': '#/definitions/simpleTypes' },\n                        {\n                            'type': 'array',\n                            'items': { '$ref': '#/definitions/simpleTypes' },\n                            'minItems': 1,\n                            'uniqueItems': true\n                        }\n                    ]\n                },\n                'format': { 'type': 'string' },\n                'contentMediaType': { 'type': 'string' },\n                'contentEncoding': { 'type': 'string' },\n                'if': { '$ref': '#' },\n                'then': { '$ref': '#' },\n                'else': { '$ref': '#' },\n                'allOf': { '$ref': '#/definitions/schemaArray' },\n                'anyOf': { '$ref': '#/definitions/schemaArray' },\n                'oneOf': { '$ref': '#/definitions/schemaArray' },\n                'not': { '$ref': '#' }\n            },\n            'default': true\n        }\n    }\n};\nvar descriptions = {\n    id: localize('schema.json.id', \"A unique identifier for the schema.\"),\n    $schema: localize('schema.json.$schema', \"The schema to verify this document against.\"),\n    title: localize('schema.json.title', \"A descriptive title of the element.\"),\n    description: localize('schema.json.description', \"A long description of the element. Used in hover menus and suggestions.\"),\n    default: localize('schema.json.default', \"A default value. Used by suggestions.\"),\n    multipleOf: localize('schema.json.multipleOf', \"A number that should cleanly divide the current value (i.e. have no remainder).\"),\n    maximum: localize('schema.json.maximum', \"The maximum numerical value, inclusive by default.\"),\n    exclusiveMaximum: localize('schema.json.exclusiveMaximum', \"Makes the maximum property exclusive.\"),\n    minimum: localize('schema.json.minimum', \"The minimum numerical value, inclusive by default.\"),\n    exclusiveMinimum: localize('schema.json.exclusiveMininum', \"Makes the minimum property exclusive.\"),\n    maxLength: localize('schema.json.maxLength', \"The maximum length of a string.\"),\n    minLength: localize('schema.json.minLength', \"The minimum length of a string.\"),\n    pattern: localize('schema.json.pattern', \"A regular expression to match the string against. It is not implicitly anchored.\"),\n    additionalItems: localize('schema.json.additionalItems', \"For arrays, only when items is set as an array. If it is a schema, then this schema validates items after the ones specified by the items array. If it is false, then additional items will cause validation to fail.\"),\n    items: localize('schema.json.items', \"For arrays. Can either be a schema to validate every element against or an array of schemas to validate each item against in order (the first schema will validate the first element, the second schema will validate the second element, and so on.\"),\n    maxItems: localize('schema.json.maxItems', \"The maximum number of items that can be inside an array. Inclusive.\"),\n    minItems: localize('schema.json.minItems', \"The minimum number of items that can be inside an array. Inclusive.\"),\n    uniqueItems: localize('schema.json.uniqueItems', \"If all of the items in the array must be unique. Defaults to false.\"),\n    maxProperties: localize('schema.json.maxProperties', \"The maximum number of properties an object can have. Inclusive.\"),\n    minProperties: localize('schema.json.minProperties', \"The minimum number of properties an object can have. Inclusive.\"),\n    required: localize('schema.json.required', \"An array of strings that lists the names of all properties required on this object.\"),\n    additionalProperties: localize('schema.json.additionalProperties', \"Either a schema or a boolean. If a schema, then used to validate all properties not matched by 'properties' or 'patternProperties'. If false, then any properties not matched by either will cause this schema to fail.\"),\n    definitions: localize('schema.json.definitions', \"Not used for validation. Place subschemas here that you wish to reference inline with $ref.\"),\n    properties: localize('schema.json.properties', \"A map of property names to schemas for each property.\"),\n    patternProperties: localize('schema.json.patternProperties', \"A map of regular expressions on property names to schemas for matching properties.\"),\n    dependencies: localize('schema.json.dependencies', \"A map of property names to either an array of property names or a schema. An array of property names means the property named in the key depends on the properties in the array being present in the object in order to be valid. If the value is a schema, then the schema is only applied to the object if the property in the key exists on the object.\"),\n    enum: localize('schema.json.enum', \"The set of literal values that are valid.\"),\n    type: localize('schema.json.type', \"Either a string of one of the basic schema types (number, integer, null, array, object, boolean, string) or an array of strings specifying a subset of those types.\"),\n    format: localize('schema.json.format', \"Describes the format expected for the value.\"),\n    allOf: localize('schema.json.allOf', \"An array of schemas, all of which must match.\"),\n    anyOf: localize('schema.json.anyOf', \"An array of schemas, where at least one must match.\"),\n    oneOf: localize('schema.json.oneOf', \"An array of schemas, exactly one of which must match.\"),\n    not: localize('schema.json.not', \"A schema which must not match.\"),\n    $id: localize('schema.json.$id', \"A unique identifier for the schema.\"),\n    $ref: localize('schema.json.$ref', \"Reference a definition hosted on any location.\"),\n    $comment: localize('schema.json.$comment', \"Comments from schema authors to readers or maintainers of the schema.\"),\n    readOnly: localize('schema.json.readOnly', \"Indicates that the value of the instance is managed exclusively by the owning authority.\"),\n    examples: localize('schema.json.examples', \"Sample JSON values associated with a particular schema, for the purpose of illustrating usage.\"),\n    contains: localize('schema.json.contains', \"An array instance is valid against \\\"contains\\\" if at least one of its elements is valid against the given schema.\"),\n    propertyNames: localize('schema.json.propertyNames', \"If the instance is an object, this keyword validates if every property name in the instance validates against the provided schema.\"),\n    const: localize('schema.json.const', \"An instance validates successfully against this keyword if its value is equal to the value of the keyword.\"),\n    contentMediaType: localize('schema.json.contentMediaType', \"Describes the media type of a string property.\"),\n    contentEncoding: localize('schema.json.contentEncoding', \"Describes the content encoding of a string property.\"),\n    if: localize('schema.json.if', \"The validation outcome of the \\\"if\\\" subschema controls which of the \\\"then\\\" or \\\"else\\\" keywords are evaluated.\"),\n    then: localize('schema.json.then', \"The \\\"if\\\" subschema is used for validation when the \\\"if\\\" subschema succeeds.\"),\n    else: localize('schema.json.else', \"The \\\"else\\\" subschema is used for validation when the \\\"if\\\" subschema fails.\")\n};\nfor (var schemaName in schemaContributions.schemas) {\n    var schema = schemaContributions.schemas[schemaName];\n    for (var property in schema.properties) {\n        var propertyObject = schema.properties[property];\n        if (typeof propertyObject === 'boolean') {\n            propertyObject = schema.properties[property] = {};\n        }\n        var description = descriptions[property];\n        if (description) {\n            propertyObject['description'] = description;\n        }\n        else {\n            console.log(property + \": localize('schema.json.\" + property + \"', \\\"\\\")\");\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createScanner } from 'jsonc-parser';\nimport { FoldingRangeKind, Position } from '../jsonLanguageTypes';\nexport function getFoldingRanges(document, context) {\n    var ranges = [];\n    var nestingLevels = [];\n    var stack = [];\n    var prevStart = -1;\n    var scanner = createScanner(document.getText(), false);\n    var token = scanner.scan();\n    function addRange(range) {\n        ranges.push(range);\n        nestingLevels.push(stack.length);\n    }\n    while (token !== 17 /* EOF */) {\n        switch (token) {\n            case 1 /* OpenBraceToken */:\n            case 3 /* OpenBracketToken */: {\n                var startLine = document.positionAt(scanner.getTokenOffset()).line;\n                var range = { startLine: startLine, endLine: startLine, kind: token === 1 /* OpenBraceToken */ ? 'object' : 'array' };\n                stack.push(range);\n                break;\n            }\n            case 2 /* CloseBraceToken */:\n            case 4 /* CloseBracketToken */: {\n                var kind = token === 2 /* CloseBraceToken */ ? 'object' : 'array';\n                if (stack.length > 0 && stack[stack.length - 1].kind === kind) {\n                    var range = stack.pop();\n                    var line = document.positionAt(scanner.getTokenOffset()).line;\n                    if (range && line > range.startLine + 1 && prevStart !== range.startLine) {\n                        range.endLine = line - 1;\n                        addRange(range);\n                        prevStart = range.startLine;\n                    }\n                }\n                break;\n            }\n            case 13 /* BlockCommentTrivia */: {\n                var startLine = document.positionAt(scanner.getTokenOffset()).line;\n                var endLine = document.positionAt(scanner.getTokenOffset() + scanner.getTokenLength()).line;\n                if (scanner.getTokenError() === 1 /* UnexpectedEndOfComment */ && startLine + 1 < document.lineCount) {\n                    scanner.setPosition(document.offsetAt(Position.create(startLine + 1, 0)));\n                }\n                else {\n                    if (startLine < endLine) {\n                        addRange({ startLine: startLine, endLine: endLine, kind: FoldingRangeKind.Comment });\n                        prevStart = startLine;\n                    }\n                }\n                break;\n            }\n            case 12 /* LineCommentTrivia */: {\n                var text = document.getText().substr(scanner.getTokenOffset(), scanner.getTokenLength());\n                var m = text.match(/^\\/\\/\\s*#(region\\b)|(endregion\\b)/);\n                if (m) {\n                    var line = document.positionAt(scanner.getTokenOffset()).line;\n                    if (m[1]) { // start pattern match\n                        var range = { startLine: line, endLine: line, kind: FoldingRangeKind.Region };\n                        stack.push(range);\n                    }\n                    else {\n                        var i = stack.length - 1;\n                        while (i >= 0 && stack[i].kind !== FoldingRangeKind.Region) {\n                            i--;\n                        }\n                        if (i >= 0) {\n                            var range = stack[i];\n                            stack.length = i;\n                            if (line > range.startLine && prevStart !== range.startLine) {\n                                range.endLine = line;\n                                addRange(range);\n                                prevStart = range.startLine;\n                            }\n                        }\n                    }\n                }\n                break;\n            }\n        }\n        token = scanner.scan();\n    }\n    var rangeLimit = context && context.rangeLimit;\n    if (typeof rangeLimit !== 'number' || ranges.length <= rangeLimit) {\n        return ranges;\n    }\n    if (context && context.onRangeLimitExceeded) {\n        context.onRangeLimitExceeded(document.uri);\n    }\n    var counts = [];\n    for (var _i = 0, nestingLevels_1 = nestingLevels; _i < nestingLevels_1.length; _i++) {\n        var level = nestingLevels_1[_i];\n        if (level < 30) {\n            counts[level] = (counts[level] || 0) + 1;\n        }\n    }\n    var entries = 0;\n    var maxLevel = 0;\n    for (var i = 0; i < counts.length; i++) {\n        var n = counts[i];\n        if (n) {\n            if (n + entries > rangeLimit) {\n                maxLevel = i;\n                break;\n            }\n            entries += n;\n        }\n    }\n    var result = [];\n    for (var i = 0; i < ranges.length; i++) {\n        var level = nestingLevels[i];\n        if (typeof level === 'number') {\n            if (level < maxLevel || (level === maxLevel && entries++ < rangeLimit)) {\n                result.push(ranges[i]);\n            }\n        }\n    }\n    return result;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range, SelectionRange } from '../jsonLanguageTypes';\nimport { createScanner } from 'jsonc-parser';\nexport function getSelectionRanges(document, positions, doc) {\n    function getSelectionRange(position) {\n        var offset = document.offsetAt(position);\n        var node = doc.getNodeFromOffset(offset, true);\n        var result = [];\n        while (node) {\n            switch (node.type) {\n                case 'string':\n                case 'object':\n                case 'array':\n                    // range without \", [ or {\n                    var cStart = node.offset + 1, cEnd = node.offset + node.length - 1;\n                    if (cStart < cEnd && offset >= cStart && offset <= cEnd) {\n                        result.push(newRange(cStart, cEnd));\n                    }\n                    result.push(newRange(node.offset, node.offset + node.length));\n                    break;\n                case 'number':\n                case 'boolean':\n                case 'null':\n                case 'property':\n                    result.push(newRange(node.offset, node.offset + node.length));\n                    break;\n            }\n            if (node.type === 'property' || node.parent && node.parent.type === 'array') {\n                var afterCommaOffset = getOffsetAfterNextToken(node.offset + node.length, 5 /* CommaToken */);\n                if (afterCommaOffset !== -1) {\n                    result.push(newRange(node.offset, afterCommaOffset));\n                }\n            }\n            node = node.parent;\n        }\n        var current = undefined;\n        for (var index = result.length - 1; index >= 0; index--) {\n            current = SelectionRange.create(result[index], current);\n        }\n        if (!current) {\n            current = SelectionRange.create(Range.create(position, position));\n        }\n        return current;\n    }\n    function newRange(start, end) {\n        return Range.create(document.positionAt(start), document.positionAt(end));\n    }\n    var scanner = createScanner(document.getText(), true);\n    function getOffsetAfterNextToken(offset, expectedToken) {\n        scanner.setPosition(offset);\n        var token = scanner.scan();\n        if (token === expectedToken) {\n            return scanner.getTokenOffset() + scanner.getTokenLength();\n        }\n        return -1;\n    }\n    return positions.map(getSelectionRange);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../jsonLanguageTypes';\nexport function findDefinition(document, position, doc) {\n    var offset = document.offsetAt(position);\n    var node = doc.getNodeFromOffset(offset, true);\n    if (!node || !isRef(node)) {\n        return Promise.resolve([]);\n    }\n    var propertyNode = node.parent;\n    var valueNode = propertyNode.valueNode;\n    var path = valueNode.value;\n    var targetNode = findTargetNode(doc, path);\n    if (!targetNode) {\n        return Promise.resolve([]);\n    }\n    var definition = {\n        targetUri: document.uri,\n        originSelectionRange: createRange(document, valueNode),\n        targetRange: createRange(document, targetNode),\n        targetSelectionRange: createRange(document, targetNode)\n    };\n    return Promise.resolve([definition]);\n}\nfunction createRange(document, node) {\n    return Range.create(document.positionAt(node.offset), document.positionAt(node.offset + node.length));\n}\nfunction isRef(node) {\n    return node.type === 'string' &&\n        node.parent &&\n        node.parent.type === 'property' &&\n        node.parent.valueNode === node &&\n        node.parent.keyNode.value === \"$ref\" ||\n        false;\n}\nfunction findTargetNode(doc, path) {\n    var tokens = parseJSONPointer(path);\n    if (!tokens) {\n        return null;\n    }\n    return findNode(tokens, doc.root);\n}\nfunction findNode(pointer, node) {\n    if (!node) {\n        return null;\n    }\n    if (pointer.length === 0) {\n        return node;\n    }\n    var token = pointer.shift();\n    if (node && node.type === 'object') {\n        var propertyNode = node.properties.find(function (propertyNode) { return propertyNode.keyNode.value === token; });\n        if (!propertyNode) {\n            return null;\n        }\n        return findNode(pointer, propertyNode.valueNode);\n    }\n    else if (node && node.type === 'array') {\n        if (token.match(/^(0|[1-9][0-9]*)$/)) {\n            var index = Number.parseInt(token);\n            var arrayItem = node.items[index];\n            if (!arrayItem) {\n                return null;\n            }\n            return findNode(pointer, arrayItem);\n        }\n    }\n    return null;\n}\nfunction parseJSONPointer(path) {\n    if (path === \"#\") {\n        return [];\n    }\n    if (path[0] !== '#' || path[1] !== '/') {\n        return null;\n    }\n    return path.substring(2).split(/\\//).map(unescape);\n}\nfunction unescape(str) {\n    return str.replace(/~1/g, '/').replace(/~0/g, '~');\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { JSONCompletion } from './services/jsonCompletion';\nimport { JSONHover } from './services/jsonHover';\nimport { JSONValidation } from './services/jsonValidation';\nimport { JSONDocumentSymbols } from './services/jsonDocumentSymbols';\nimport { parse as parseJSON, newJSONDocument } from './parser/jsonParser';\nimport { schemaContributions } from './services/configuration';\nimport { JSONSchemaService } from './services/jsonSchemaService';\nimport { getFoldingRanges } from './services/jsonFolding';\nimport { getSelectionRanges } from './services/jsonSelectionRanges';\nimport { format as formatJSON } from 'jsonc-parser';\nimport { Range, TextEdit } from './jsonLanguageTypes';\nimport { findDefinition } from './services/jsonDefinition';\nexport * from './jsonLanguageTypes';\nexport function getLanguageService(params) {\n    var promise = params.promiseConstructor || Promise;\n    var jsonSchemaService = new JSONSchemaService(params.schemaRequestService, params.workspaceContext, promise);\n    jsonSchemaService.setSchemaContributions(schemaContributions);\n    var jsonCompletion = new JSONCompletion(jsonSchemaService, params.contributions, promise, params.clientCapabilities);\n    var jsonHover = new JSONHover(jsonSchemaService, params.contributions, promise);\n    var jsonDocumentSymbols = new JSONDocumentSymbols(jsonSchemaService);\n    var jsonValidation = new JSONValidation(jsonSchemaService, promise);\n    return {\n        configure: function (settings) {\n            jsonSchemaService.clearExternalSchemas();\n            if (settings.schemas) {\n                settings.schemas.forEach(function (settings) {\n                    jsonSchemaService.registerExternalSchema(settings.uri, settings.fileMatch, settings.schema);\n                });\n            }\n            jsonValidation.configure(settings);\n        },\n        resetSchema: function (uri) { return jsonSchemaService.onResourceChange(uri); },\n        doValidation: jsonValidation.doValidation.bind(jsonValidation),\n        parseJSONDocument: function (document) { return parseJSON(document, { collectComments: true }); },\n        newJSONDocument: function (root, diagnostics) { return newJSONDocument(root, diagnostics); },\n        getMatchingSchemas: jsonSchemaService.getMatchingSchemas.bind(jsonSchemaService),\n        doResolve: jsonCompletion.doResolve.bind(jsonCompletion),\n        doComplete: jsonCompletion.doComplete.bind(jsonCompletion),\n        findDocumentSymbols: jsonDocumentSymbols.findDocumentSymbols.bind(jsonDocumentSymbols),\n        findDocumentSymbols2: jsonDocumentSymbols.findDocumentSymbols2.bind(jsonDocumentSymbols),\n        findColorSymbols: function (d, s) { return jsonDocumentSymbols.findDocumentColors(d, s).then(function (s) { return s.map(function (s) { return s.range; }); }); },\n        findDocumentColors: jsonDocumentSymbols.findDocumentColors.bind(jsonDocumentSymbols),\n        getColorPresentations: jsonDocumentSymbols.getColorPresentations.bind(jsonDocumentSymbols),\n        doHover: jsonHover.doHover.bind(jsonHover),\n        getFoldingRanges: getFoldingRanges,\n        getSelectionRanges: getSelectionRanges,\n        findDefinition: findDefinition,\n        format: function (d, r, o) {\n            var range = undefined;\n            if (r) {\n                var offset = d.offsetAt(r.start);\n                var length = d.offsetAt(r.end) - offset;\n                range = { offset: offset, length: length };\n            }\n            var options = { tabSize: o ? o.tabSize : 4, insertSpaces: o ? o.insertSpaces : true, eol: '\\n' };\n            return formatJSON(d.getText(), range, options).map(function (e) {\n                return TextEdit.replace(Range.create(d.positionAt(e.offset), d.positionAt(e.offset + e.length)), e.content);\n            });\n        }\n    };\n}\n"],"sourceRoot":""}