{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/diagnostic-channel/dist/src/channel.js","webpack:///external \"stream\"","webpack:///./node_modules/applicationinsights/out/Library/Logging.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/index.js","webpack:///external \"crypto\"","webpack:///external \"url\"","webpack:///external \"zlib\"","webpack:///external \"path\"","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/Domain.js","webpack:///./node_modules/applicationinsights/out/Library/Util.js","webpack:///external \"http\"","webpack:///external \"fs\"","webpack:///external \"vscode\"","webpack:///./node_modules/applicationinsights/out/AutoCollection/CorrelationContextManager.js","webpack:///./node_modules/applicationinsights/out/Library/RequestResponseHeaders.js","webpack:///external \"https\"","webpack:///external \"os\"","webpack:///./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/initialization.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/HttpDependencies.js","webpack:///./node_modules/applicationinsights/out/Library/CorrelationIdManager.js","webpack:///./src/logger.ts","webpack:///./node_modules/diagnostic-channel/dist/src/patchRequire.js","webpack:///external \"module\"","webpack:///external \"events\"","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/index.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/Base.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/DataPointType.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/EventData.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/Performance.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/RequestParser.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/HttpRequests.js","webpack:///./src/extension.ts","webpack:///./src/AADHelper.ts","webpack:///./node_modules/randombytes/index.js","webpack:///external \"querystring\"","webpack:///./src/authServer.ts","webpack:///./src/keychain.ts","webpack:///./node_modules/vscode-nls/lib/main.js","webpack:///external \"keytar\"","webpack:///./src/utils.ts","webpack:///./node_modules/node-fetch/lib/index.mjs","webpack:///./src/env/node/sha256.ts","webpack:///./node_modules/vscode-extension-telemetry/lib/telemetryReporter.js","webpack:///./node_modules/applicationinsights/out/applicationinsights.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/index.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/bunyan.pub.js","webpack:///./node_modules/semver/semver.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/console.pub.js","webpack:///external \"console\"","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/mongodb-core.pub.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/mongodb.pub.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/mysql.pub.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src sync ^.*\\/lib\\/Connection$","webpack:///./node_modules/diagnostic-channel-publishers/dist/src sync ^.*\\/lib\\/Pool$","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/pg-pool.pub.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/pg.pub.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/redis.pub.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/winston.pub.js","webpack:///./node_modules/zone.js/dist/zone-node.js","webpack:///external \"timers\"","webpack:///external \"_http_client\"","webpack:///./node_modules/applicationinsights/out/AutoCollection/Console.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/console.sub.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Constants.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/AvailabilityData.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/ContextTagKeys.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/Data.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/DataPoint.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/Envelope.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/ExceptionData.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/ExceptionDetails.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/MessageData.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/MetricData.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/PageViewData.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/RemoteDependencyData.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/RequestData.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/SeverityLevel.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/StackFrame.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/index.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/TelemetryType.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/bunyan.sub.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/winston.sub.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/Exceptions.js","webpack:///external \"constants\"","webpack:///./node_modules/applicationinsights/out/AutoCollection/HttpDependencyParser.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/mongodb.sub.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/mysql.sub.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/redis.sub.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/postgres.sub.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/HttpRequestParser.js","webpack:///./node_modules/applicationinsights/out/Library/NodeClient.js","webpack:///./node_modules/applicationinsights/out/Library/TelemetryClient.js","webpack:///./node_modules/applicationinsights/out/Library/Config.js","webpack:///./node_modules/applicationinsights/out/Library/Context.js","webpack:///./node_modules/applicationinsights/out/Library/Channel.js","webpack:///./node_modules/applicationinsights/out/TelemetryProcessors/index.js","webpack:///./node_modules/applicationinsights/out/TelemetryProcessors/SamplingTelemetryProcessor.js","webpack:///./node_modules/applicationinsights/out/Library/Sender.js","webpack:///external \"child_process\"","webpack:///./node_modules/applicationinsights/out/Library/EnvelopeFactory.js","webpack:///./node_modules/uuid/dist/esm-node/rng.js","webpack:///./node_modules/uuid/dist/esm-node/bytesToUuid.js","webpack:///./node_modules/uuid/dist/esm-node/v1.js","webpack:///./node_modules/uuid/dist/esm-node/v35.js","webpack:///./node_modules/uuid/dist/esm-node/v3.js","webpack:///./node_modules/uuid/dist/esm-node/md5.js","webpack:///./node_modules/uuid/dist/esm-node/v4.js","webpack:///./node_modules/uuid/dist/esm-node/v5.js","webpack:///./node_modules/uuid/dist/esm-node/sha1.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","patchRequire_1","patchRequire_2","makePatchingRequire","trueFilter","publishing","ContextPreservingEventEmitter","this","version","subscribers","contextPreservationFunction","cb","knownPatches","currentlyPublishing","shouldPublish","listeners","some","_a","filter","publish","event","standardEvent_1","timestamp","Date","now","data","forEach","listener","e","subscribe","push","unsubscribe","index","length","splice","reset","_this","getOwnPropertyNames","prop","bindToContext","addContextPreservation","preserver","previousPreservationStack","registerMonkeyPatch","packageName","patcher","getPatchesObject","global","diagnosticsSource","require","channel","Logging","info","message","optionalParams","_i","arguments","enableDebug","console","TAG","warn","disableWarnings","__export","Domain","__assign","assign","http","https","url","constants","RequestResponseHeaders","Util","getCookie","cookie","cookieName","cookies","split","trim","indexOf","substring","str","replace","int32ArrayToBase64","array","toChar","v","String","fromCharCode","x","map","join","Buffer","from","toString","substr","random32","Math","random","randomu32","w3cTraceId","tmp","hexValues","oct","a","clockSequenceHi","isArray","obj","isError","Error","isPrimitive","input","propType","isDate","msToTimeSpan","totalms","isNaN","sec","toFixed","min","floor","hour","days","extractError","err","looseError","code","id","extractObject","origProperty","toJSON","validateStringMap","field","stringTarget","JSON","stringify","constructor","MAX_PROPERTY_LENGTH","canIncludeCorrelationHeader","client","requestUrl","excludedDomains","config","correlationHeaderExcludedDomains","RegExp","test","parse","hostname","getCorrelationContextTarget","response","contextHeaders","headers","requestContextHeader","keyValues","keyValue","makeRequest","requestOptions","requestCallback","requestUrlParsed","options","host","port","path","pathname","proxyUrl","undefined","protocol","proxyHttpsUrl","proxyHttpUrl","proxyUrlParsed","Host","isHttps","httpsAgent","agent","httpAgent","tlsRestrictedAgent","request","Agent","secureOptions","SSL_OP_NO_SSLv2","SSL_OP_NO_SSLv3","SSL_OP_NO_TLSv1","SSL_OP_NO_TLSv1_1","DiagChannel","CorrelationContextManager","getCurrentContext","enabled","Zone","current","generateContextObject","operationId","parentId","operationName","correlationContextHeader","operation","customProperties","CustomPropertiesImpl","runWithContext","context","fn","fork","properties","run","wrapCallback","wrap","enable","isNodeVersionCompatible","hasEverEnabled","registerContextPreservation","patchError","patchTimers","disable","nodeVer","process","versions","node","parseInt","methodNames","methodName","orig","ret","apply","handleId","AppInsightsAsyncCorrelatedErrorWrapper","stackRewrite","prepareStackTrace","stackTrace","foundOne","fileName","getFileName","max","stack","stackFrames","startIndex","props","concat","keys","propertyName","hiddenPropertyName","writable","getOwnPropertyDescriptor","header","addHeaderData","keyvals","keyval","parts","serializeToHeader","getProperty","setProperty","val","bannedCharacters","requestContextSourceKey","requestContextTargetKey","requestIdHeader","parentIdHeader","rootIdHeader","IsInitialized","env","publishers","unpatchedModules","bunyan","mongodb","mongodbCore","mysql","redis","pg","pgPool","winston","mod","HttpDependencyParser","CorrelationContextManager_1","AutoCollectHttpDependencies","INSTANCE","_client","isEnabled","_isEnabled","_isInitialized","_initialize","isInitialized","originalRequest","originalHttpsRequest","clientRequestPatch","shouldCollect","disableCollectionRequestOption","alreadyAutoCollectedFlag","trackRequest","requestArgs","end","telemetry","requestParser","currentContext","uniqueRequestId","requestNumber","getUrl","getHeader","setHeader","correlationId","correlationHeader","components","key_1","on","onResponse","dependencyTelemetry","getDependencyTelemetry","contextObjects","trackDependency","onError","dispose","CorrelationIdManager","queryCorrelationId","callback","appIdUrlString","profileQueryEndpoint","instrumentationKey","completedLookups","pendingLookups","fetchAppId","method","disableAppInsightsAutoCollection","req","res","statusCode","appId_1","setEncoding","result","correlationIdPrefix","setTimeout","correlationIdRetryIntervalMs","error","cancelCorrelationIdQuery","generateRequestId","suffix","currentRootId","appendSuffix","generateRootId","getRootId","endIndex","delimiter","requestIdMaxLength","trimPosition","padLeft","pad","repeat","Logger","output","vscode","window","createOutputChannel","success","logLevel","level","appendLine","data2String","getUTCHours","getMinutes","getUTCSeconds","getMilliseconds","semver","moduleModule","nativeModules","binding","originalRequire","patchedModules","originalModule","modulePath","_resolveFilename","moduleVersion","prereleaseTagIndex","modifiedModule","modulePatcher","satisfies","versionSpecifier","patch","AvailabilityData","Base","ContextTagKeys","Data","DataPoint","DataPointType","Envelope","EventData","ExceptionData","ExceptionDetails","MessageData","MetricData","PageViewData","RemoteDependencyData","RequestData","SeverityLevel","StackFrame","extendStatics","__extends","setPrototypeOf","__proto__","Array","b","__","_super","ver","measurements","os","AutoCollectPerformance","_handle","_lastCpus","cpus","_lastRequests","totalRequestCount","_totalRequestCount","totalFailedRequestCount","_totalFailedRequestCount","time","cpuUsage","_lastAppCpuUsage","_lastHrtime","hrtime","setInterval","trackPerformance","unref","clearInterval","countRequest","start","once","_lastRequestExecutionTime","_trackCpu","_trackMemory","_trackNetwork","totalUser","totalSys","totalNice","totalIdle","totalIrq","cpu","lastCpu","times","model","speed","lastTimes","user","sys","nice","idle","irq","appCpuPercent","appCpuUsage","totalApp","system","combinedTotal","trackMetric","freeMem","freemem","usedMem","memoryUsage","rss","lastRequests","requests","intervalRequests","elapsedMs","elapsedSeconds","requestsPerSec","RequestParser","startTime","_setStatus","status","endTime","duration","_isSuccess","HttpRequestParser","AutoCollectHttpRequests","_isAutoCorrelating","useAutoCorrelation","isAutoCorrelating","_generateCorrelationContext","getOperationId","tags","getRequestId","getOperationName","getCorrelationContextHeader","wrapOnRequestHandler","onRequest","requestParser_1","correlationContext","wrapServerEventHandler","server","originalAddListener","addListener","eventType","eventHandler","originalHttpServer","createServer","originalHttpsServer","trackRequestSync","addResponseCorrelationIdHeader","endRequest","_requestParser","getOperationParentId","headersSent","ellapsedMilliseconds","requestTelemetry","getRequestTelemetry","tagOverrides","getRequestTags","DEFAULT_SCOPES","async","aiKey","telemetryReporter","loginService","AzureActiveDirectoryService","initialize","subscriptions","authentication","registerAuthenticationProvider","label","supportsMultipleAccounts","onDidChangeSessions","getSessions","Promise","resolve","sessions","login","scopes","sendTelemetryEvent","session","sort","fire","added","removed","changed","logout","redirectUrl","loginEndpointUrl","clientId","tenant","EventEmitter","REFRESH_NETWORK_FAILURE","UriEventHandler","uri","_tokens","_refreshTimeouts","Map","_uriHandler","registerUriHandler","storedData","keychain","getToken","refreshes","parseStoredData","refreshToken","scope","handleRefreshNetworkError","accessToken","account","displayName","sessionId","pollForReconnect","all","clearSessions","pollForChange","serializedData","token","setToken","addedIds","removedIds","promises","timeout","clearTimeout","clear","resolvedToken","resolveAccessToken","expiresAt","refreshedToken","convertToSession","includes","reject","uiKind","UIKind","Web","loginWithoutLocalServer","nonce","randomBytes","redirectPromise","codePromise","startServer","openExternal","Uri","encodeURIComponent","redirectReq","writeHead","Location","updatedPortStr","exec","state","codeVerifier","toBase64UrlEncoding","codeChallenge","sha256","loginUrl","codeRes","exchangeCodeForToken","close","callbackUri","authority","endsWith","asExternalUri","uriScheme","match","scheme","getCallbackEnvironment","query","signInUrl","with","timeoutPromise","_","wait","race","handleCodeResponse","uriEventListener","reduce","prev","queryString","parseQuery","decodeURIComponent","then","catch","existingTokenIndex","findIndex","clearSessionTimeout","expiresIn","set","storeTokenData","json","existingId","claims","getTokenClaims","access_token","expires_in","refresh_token","tid","oid","altsecid","ipd","email","unique_name","postData","querystring","grant_type","client_id","code_verifier","redirect_uri","proxyEndpoints","commands","executeCommand","endpoint","body","ok","getTokenFromResponse","delete","tokenIndex","attempts","find","delayBeforeRetry","removeInMemorySessionData","deleteToken","sendFile","filepath","contentType","fs","readFile","portTimer","cancelPortTimer","address","arg","assertIsDefined","listen","deferredRedirect","deferredCode","codeTimer","cancelCodeTimer","reqUrl","__dirname","error_description","MessageFormat","BundleFormat","LocalizeInfo","resolvedBundles","isPseudo","isDefined","isNumber","isString","readJsonFileSync","filename","readFileSync","format","args","rest","replacement","createScopedLocalizeFunction","messages","localize","cacheBundle","bundle","loadNlsBundleOrCreateFromI18n","bundlePath","file","cacheRoot","hash","useMemoryOnly","writeBundle","encoding","flag","utimes","SyntaxError","log","unlink","metaDataPath","languagePackLocation","translationsConfig","languagePack","contents","metaData","module_2","entry","translations","outDir","resultMessages","messageKey","translatedMessage","createNLSBundle","writeFileSync","loadDefaultNlsBundle","folder","module_1","createDefaultNlsBundle","loadNlsBundle","languagePackSupport","languagePackId","translationsConfigFile","candidate","root","language","existsSync","lastIndexOf","findInTheBoxBundle","loadMessageBundle","ext","extname","messageFormat","both","headerFile","dirname","parent","tryFindMetaDataHeaderFile","nlsBundle","module_3","resolvedLanguage","cacheLanguageResolution","locale","resolveLanguage","is","comment","VSCODE_NLS_CONFIG","vscodeOptions","availableLanguages","toLowerCase","isBoolean","_languagePackSupport","_cacheRoot","_languagePackId","_translationsConfigFile","_corruptedFile","writeFile","initializeSettings","opts","bundleFormat","standalone","base64string","Readable","BUFFER","TYPE","Blob","blobParts","buffers","size","Number","element","buffer","ArrayBuffer","isView","byteOffset","byteLength","type","buf","ab","slice","readable","_read","relativeStart","relativeEnd","span","slicedBuffer","blob","FetchError","systemError","errno","captureStackTrace","convert","defineProperties","configurable","INTERNALS","PassThrough","Body","_ref","_ref$size","_ref$timeout","isURLSearchParams","isBlob","isBuffer","disturbed","consumeBody","_this4","TypeError","alloc","stream","accum","accumBytes","abort","resTimeout","chunk","append","getAll","has","arrayBuffer","clone","instance","p1","p2","bodyUsed","getBoundary","pipe","extractContentType","getTotalBytes","getLengthSync","_lengthRetrievers","hasKnownLength","ct","_this2","_this3","charset","pop","convertBody","text","mixIn","proto","desc","invalidTokenRegex","invalidHeaderCharRegex","validateName","validateValue","MAP","Headers","init","rawHeaders","raw","headerNames","headerName","iterator","pairs","pair","thisArg","getHeaders","_pairs$i","createHeadersIterator","kind","k","entries","values","INTERNAL","target","HeadersIteratorPrototype","getPrototypeOf","_INTERNAL","done","exportNodeCompatibleHeaders","hostHeaderKey","INTERNALS$1","STATUS_CODES","Response","statusText","counter","redirected","INTERNALS$2","parse_url","format_url","streamDestructionSupported","isRequest","Request","parsedURL","href","toUpperCase","inputBody","signal","isAbortSignal","redirect","follow","compress","AbortError","PassThrough$1","resolve_url","fetch","contentLengthValue","totalBytes","getNodeRequestOptions","send","destroy","emit","aborted","abortAndFinalize","finalize","reqTimeout","removeEventListener","addEventListener","socket","createHeadersLenient","isRedirect","location","locationURL","requestOpts","response_options","statusMessage","codings","zlibOptions","flush","Z_SYNC_FLUSH","finishFlush","createGunzip","createBrotliDecompress","createInflate","createInflateRaw","dest","write","writeToStream","createHash","update","digest","appInsights","TelemetryReporter","extensionId","extensionVersion","userOptIn","logFilePath","logStream","createWriteStream","flags","autoClose","updateUserOptIn","configListener","workspace","onDidChangeConfiguration","getConfiguration","TELEMETRY_CONFIG_ID","TELEMETRY_CONFIG_ENABLED_ID","createAppInsightsClient","defaultClient","appInsightsClient","TelemetryClient","setUseDiskRetryCaching","setup","setAutoCollectRequests","setAutoCollectPerformance","setAutoCollectExceptions","setAutoCollectDependencies","setAutoDependencyCorrelation","setAutoCollectConsole","commonProperties","getCommonProperties","userId","machineId","endpointUrl","platform","release","eventName","trackEvent","flushEventsToLogger","flushEventsToAI","default","AutoCollectConsole","AutoCollectExceptions","Contracts","_console","_exceptions","_performance","_serverRequests","_clientRequests","_isConsole","_isConsoleLog","_isExceptions","_isPerformance","_isRequests","_isDependencies","_isDiskRetry","_isCorrelating","_diskRetryInterval","_diskRetryMaxBytes","_isStarted","Configuration","getCorrelationContext","wrapWithCorrelationContext","collectConsoleLog","resendInterval","maxBytesOnDisk","setInternalLogging","enableDebugLogging","enableWarningLogging","consolePub","diagnostic_channel_1","originalBunyan","originalEmit","_emit","rec","noemit","debug","SemVer","NODE_DEBUG","unshift","SEMVER_SPEC_VERSION","MAX_SAFE_INTEGER","re","src","R","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","MAINVERSION","MAINVERSIONLOOSE","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","PRERELEASE","PRERELEASELOOSE","BUILDIDENTIFIER","BUILD","FULL","FULLPLAIN","LOOSEPLAIN","LOOSE","GTLT","XRANGEIDENTIFIERLOOSE","XRANGEIDENTIFIER","XRANGEPLAIN","XRANGEPLAINLOOSE","XRANGE","XRANGELOOSE","COERCE","LONETILDE","TILDETRIM","TILDE","TILDELOOSE","LONECARET","CARETTRIM","CARET","CARETLOOSE","COMPARATORLOOSE","COMPARATOR","COMPARATORTRIM","HYPHENRANGE","HYPHENRANGELOOSE","STAR","loose","includePrerelease","er","major","minor","prerelease","num","build","valid","clean","compare","other","compareMain","comparePre","compareIdentifiers","inc","identifier","diff","version1","version2","eq","v1","v2","prefix","defaultResult","numeric","anum","bnum","gt","lt","neq","gte","lte","cmp","op","Comparator","comp","ANY","operator","rcompareIdentifiers","compareLoose","rcompare","list","rsort","Range","range","parseRange","isX","hyphenReplace","$0","fM","fm","fp","fpr","fb","to","tM","tm","tp","tpr","tb","testSet","allowed","outside","hilo","gtfn","ltefn","ltfn","ecomp","comparators","high","low","comparator","intersects","rangeTmp","sameDirectionIncreasing","sameDirectionDecreasing","sameSemVer","differentDirectionsInclusive","oppositeDirectionsLessThan","oppositeDirectionsGreaterThan","comps","hr","compRe","M","pr","replaceCaret","replaceCarets","replaceTilde","replaceTildes","gtlt","xM","xm","xp","replaceXRange","replaceXRanges","replaceStars","parseComparator","thisComparators","every","thisComparator","rangeComparators","rangeComparator","toComparators","maxSatisfying","maxSV","rangeObj","minSatisfying","minSV","minVersion","minver","compver","validRange","ltr","gtr","parsed","r1","r2","coerce","stream_1","originalConsole","aiLoggingOutStream","Writable","aiLoggingErrStream","stderr","aiLoggingConsole","Console","_loop_1","originalMethod","consoleMethods_1","mongoCore2","originalMongoCore","originalConnect","Server","connect","originalWrite","pool","cbidx","originalLogout","mongo2","originalMongo","instrument","operationIdGenerator","next","eventMap","requestId","startedData","succeeded","originalMysql","originalMysqlPath","patchObjectFunction","func","cbWrapper","originalFunc","resultContainer","patchClassMemberFunction","classObject","connectionClass","hrDuration","callbackArgs","poolClass","webpackEmptyContext","postgresPool1","originalPgPool","events_1","postgres6","originalPg","originalPgPath","originalClientQuery","Client","queryResult","database","connectionParameters","patchCallback","trackingCallback","rowCount","command","ceil","preparable","plan","originalRedis","originalSend","RedisClient","internal_send_command","commandObj","cb_1","pubsubBound","address_1","startTime_1","originalWinston","curLevels","originalLog","loggingFilter","meta","levelKind","npm","levels","syslog","filters","f","zoneSpec","_properties","_parent","_name","_zoneDelegate","ZoneDelegate","assertZonePatched","ZoneAwarePromise","_currentZoneFrame","zone","_currentTask","getZoneWith","source","_callback","intercept","runGuarded","applyThis","applyArgs","ZoneFrame","invoke","handleError","runTask","task","runCount","previousTask","isPeriodic","cancelFn","invokeTask","scheduleMicroTask","customSchedule","scheduleTask","ZoneTask","scheduleMacroTask","customCancel","scheduleEventTask","cancelTask","__symbol__","parentDelegate","_taskCounts","microTask","macroTask","eventTask","_parentDelegate","_forkZS","onFork","_forkDlgt","_forkCurrZone","_interceptZS","onIntercept","_interceptDlgt","_interceptCurrZone","_invokeZS","onInvoke","_invokeDlgt","_invokeCurrZone","_handleErrorZS","onHandleError","_handleErrorDlgt","_handleErrorCurrZone","_scheduleTaskZS","onScheduleTask","_scheduleTaskDlgt","_scheduleTaskCurrZone","_invokeTaskZS","onInvokeTask","_invokeTaskDlgt","_invokeTaskCurrZone","_cancelTaskZS","onCancelTask","_cancelTaskDlgt","_cancelTaskCurrZone","_hasTaskZS","onHasTask","_hasTaskDlgt","_hasTaskCurrZone","targetZone","scheduleFn","scheduleQueueDrain","_microTaskQueue","_updateTaskCount","hasTask","isEmpty","count","counts","change","self","_numberOfNestedTaskFrames","drainMicroTaskQueue","symbolSetTimeout","symbolPromise","symbolThen","_isDrainingMicrotaskQueue","_uncaughtPromiseErrors","consoleError","rejection","queue","uncaughtPromiseError","shift","isThenable","forwardResolution","forwardRejection","symbolState","symbolValue","makeResolver","promise","resolvePromise","clearRejectedNoCatch","scheduleResolveOrReject","error_1","currentTask","chainPromise","onFulfilled","onRejected","delegate","executor","rej","onResolve","onReject","values_1","resolvedValues","values_2","FrameType","NativePromise","patchThen","NativePromiseProtototype","NativePromiseThen","nativePromise","fetchPromise","zoneAwareFrame","NativeError","blackListedStackFrames","ZoneAwareError","createProperty","error_2","createMethodProperty","errorMethod","errorProperties","pKeys","createErrorProperties","getErrorPropertiesForPrototype","newProps","cKeys","cKey","originalStack","frames_1","zoneFrame","frame","frameType","blackList","transition","zoneAwareStack","stackTraceLimit","targetObject","constructorOpt","structuredStackTrace","getFunctionName","detectZone","parentZoneDelegate","currentZone","parentZD","frames_2","runFrame","runGuardedFrame","runTaskFrame","fnName","zoneSymbol","_global$1","EVENT_TASKS","findExistingRegisteredTask","handler","capture","remove","eventTasks","useCapturing","defaultListenerMetaCreator","invokeAddFunc","addFnSymbol","invokeRemoveFunc","removeFnSymbol","makeZoneAwareAddListener","addFnName","removeFnName","useCapturingParam","allowDuplicates","isPrepend","metaCreator","defaultUseCapturing","scheduleEventListener","attachRegisteredEvent","cancelEventListener","handleEvent","validZoneHandler","makeZoneAwareRemoveListener","symbol","patchMethod","patchFn","delegateName","Function","createNamedFn","events","callAndReturnFirstParam","zoneAwareAddListener$1","zoneAwarePrependListener","zoneAwareRemoveListener$1","zoneAwareRemoveAllListeners","findAllExistingRegisteredTasks","makeZoneAwareRemoveAllListeners","zoneAwareListeners","patchTimer","setName","cancelName","nameSuffix","setNative","clearNative","tasksByHandleId","clearTask","delay","handle","ref","funcName","callbackIndex","patchMacroTask","crypto","httpClient","_global","timers","patchNextTick","nativeRandomBytes_1","nativePbkdf2_1","pbkdf2","ClientRequest","ClientRequest_1","factory","_methodNames","Contracts_1","clients","subscriber","trackTrace","severity","Warning","Information","Generated_1","RemoteDependencyDataConstants","TYPE_HTTP","TYPE_AI","domainSupportsProperties","domain","applicationVersion","deviceId","deviceLocale","deviceModel","deviceOEMName","deviceOSVersion","deviceType","locationIp","operationParentId","operationSyntheticSource","operationCorrelationVector","sessionIsFirst","userAccountId","userAuthUserId","cloudRole","cloudRoleInstance","internalSdkVersion","internalAgentVersion","internalNodeName","Measurement","sampleRate","exceptions","hasFullStack","parsedStack","metrics","TelemetryType","telemetryTypeToBaseType","Event","Exception","Trace","Metric","Dependency","baseTypeToTelemetryType","baseType","bunyanToAILevelMap","10","Verbose","20","30","40","50","60","Critical","AIlevel","winstonToAILevelMap","og","emerg","alert","crit","warning","notice","verbose","silly","unknown","_exceptionListenerHandle","reThrow","trackException","exception","isAppCrashing","_rejectionListenerHandle","UNCAUGHT_EXCEPTION_HANDLER_NAME","UNHANDLED_REJECTION_HANDLER_NAME","removeListener","_getUrlFromRequestOptions","baseTelemetry","dependencyId","urlObject","search","dependencyName","remoteDependencyType","remoteDependencyTarget","resultCode","dependencyTypeName","originalOptions_1","parsedQuery","dbName","databaseName","commandName","queryObj","sqlString","sql","connectionConfig","_connection","socketPath","q","conn","_getAbsoluteUrl","socketRemoteAddress","remoteAddress","parseHeaders","connection","connectionRemoteAddress","legacySocketRemoteAddress","sourceCorrelationId","newTags","_getIp","_getId","encrypted","pathName","ipMatch","check","results","ip","parseId","userAgent","rootId","cookieValue","ServerRequestTracking","ClientRequestTracking","NodeClient","trackNodeHttpRequestSync","trackNodeHttpRequest","trackNodeHttpDependency","Config","Context","Channel","TelemetryProcessors","Sender","EnvelopeFactory","iKey","_telemetryProcessors","sender","disableAppInsights","maxBatchSize","maxBatchIntervalMs","track","triggerSend","telemetryType","envelope","createEnvelope","toISOString","accepted","runTelemetryProcessors","samplingTelemetryProcessor","addTelemetryProcessor","telemetryProcessor","clearTelemetryProcessors","telemetryProcessorsCount","processor","endpointBase","_getInstrumentationKey","samplingPercentage","setCorrelationId","ENV_profileQueryEndpoint","ENV_http_proxy","ENV_https_proxy","_profileQueryEndpoint","ENV_iKey","ENV_azurePrefix","legacy_ENV_iKey","packageJsonPath","_loadApplicationContext","_loadDeviceContext","_loadInternalContext","appVersion","packageJson","DefaultRoleName","arch","sdkVersion","isDisabled","getBatchSize","getBatchIntervalMs","_buffer","_lastSend","_isDisabled","_getBatchSize","_getBatchIntervalMs","_sender","setDiskRetryMode","payload","_stringify","_timeoutHandle","isNodeCrashing","bufferIsEmpty","batch","saveOnCrash","getSamplingHashCode","charCodeAt","abs","zlib","child_process","onSuccess","_config","_onSuccess","_onError","_enableDiskRetryMode","_resendInterval","WAIT_BETWEEN_RESEND","_maxBytesOnDisk","MAX_BYTES_ON_DISK","_numConsecutiveFailures","OS_PROVIDES_FILE_PROTECTION","USE_ICACLS","ICACLS_PATH","withCredentials","gzip","dataToSend","responseString","_sendFirstFileOnDisk","_storeToDisk","MAX_CONNECTION_FAILURES_BEFORE_WARN","_onErrorHelper","errorMessage","_storeToDiskSync","_runICACLS","aclProc","spawn","windowsHide","_runICACLSSync","spawnSync","_getACLIdentity","ACL_IDENTITY","psProc","POWERSHELL_PATH","stdio","stdout","_getACLIdentitySync","_getACLArguments","directory","identity","_applyACLRules","ACLED_DIRECTORIES","_applyACLRulesSync","_confirmDirExists","lstat","stats","mkdir","isDirectory","_getShallowDirectorySize","readdir","files","totalSize","stat","fileStats","isFile","_getShallowDirectorySizeSync","readdirSync","statSync","tmpdir","TEMPDIR_PREFIX","getTime","fileFullPath","mkdirSync","dirSize","tempDir","exists","basename","firstFile","filePath","systemdrive","createTraceData","createDependencyData","createEventData","createExceptionData","createRequestData","createMetricData","baseData","getTags","trace","severityLevel","remoteDependency","exceptionDetails","typeName","parseStack","requestData","responseCode","metric","Aggregation","stdDev","frames","totalSizeInBytes","_StackFrame","regex","parsedFrame","sizeInBytes","left","right","acceptedLeft","acceptedRight","howMany","assembly","matches","line","baseSize","rnds8","Uint8Array","rng","randomFillSync","byteToHex","offset_","offset","_nodeId","_clockseq","_lastMSecs","_lastNSecs","clockseq","seedBytes","msecs","nsecs","dt","tl","tmh","generateUUID","namespace","unescape","bytes","stringToBytes","uuid","hex","uuidToBytes","hashfunc","DNS","URL","v35","rnds"],"mappings":"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","file":"extension.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 31);\n","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar patchRequire_1 = require(\"./patchRequire\");\r\nvar patchRequire_2 = require(\"./patchRequire\");\r\nexports.makePatchingRequire = patchRequire_2.makePatchingRequire;\r\nvar trueFilter = function (publishing) { return true; };\r\nvar ContextPreservingEventEmitter = (function () {\r\n    function ContextPreservingEventEmitter() {\r\n        this.version = require(\"./../../package.json\").version; // Allow for future versions to replace things?\r\n        this.subscribers = {};\r\n        this.contextPreservationFunction = function (cb) { return cb; };\r\n        this.knownPatches = {};\r\n        this.currentlyPublishing = false;\r\n    }\r\n    ContextPreservingEventEmitter.prototype.shouldPublish = function (name) {\r\n        var listeners = this.subscribers[name];\r\n        if (listeners) {\r\n            return listeners.some(function (_a) {\r\n                var filter = _a.filter;\r\n                return !filter || filter(false);\r\n            });\r\n        }\r\n        return false;\r\n    };\r\n    ContextPreservingEventEmitter.prototype.publish = function (name, event) {\r\n        if (this.currentlyPublishing) {\r\n            return; // Avoid reentrancy\r\n        }\r\n        var listeners = this.subscribers[name];\r\n        // Note: Listeners called synchronously to preserve context\r\n        if (listeners) {\r\n            var standardEvent_1 = {\r\n                timestamp: Date.now(),\r\n                data: event,\r\n            };\r\n            this.currentlyPublishing = true;\r\n            listeners.forEach(function (_a) {\r\n                var listener = _a.listener, filter = _a.filter;\r\n                try {\r\n                    if (filter && filter(true)) {\r\n                        listener(standardEvent_1);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // Subscriber threw an error\r\n                }\r\n            });\r\n            this.currentlyPublishing = false;\r\n        }\r\n    };\r\n    ContextPreservingEventEmitter.prototype.subscribe = function (name, listener, filter) {\r\n        if (filter === void 0) { filter = trueFilter; }\r\n        if (!this.subscribers[name]) {\r\n            this.subscribers[name] = [];\r\n        }\r\n        this.subscribers[name].push({ listener: listener, filter: filter });\r\n    };\r\n    ContextPreservingEventEmitter.prototype.unsubscribe = function (name, listener, filter) {\r\n        if (filter === void 0) { filter = trueFilter; }\r\n        var listeners = this.subscribers[name];\r\n        if (listeners) {\r\n            for (var index = 0; index < listeners.length; ++index) {\r\n                if (listeners[index].listener === listener && listeners[index].filter === filter) {\r\n                    listeners.splice(index, 1);\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    // Used for tests\r\n    ContextPreservingEventEmitter.prototype.reset = function () {\r\n        var _this = this;\r\n        this.subscribers = {};\r\n        this.contextPreservationFunction = function (cb) { return cb; };\r\n        // Modify the knownPatches object rather than replace, since a reference will be used in the require patcher\r\n        Object.getOwnPropertyNames(this.knownPatches).forEach(function (prop) { return delete _this.knownPatches[prop]; });\r\n    };\r\n    ContextPreservingEventEmitter.prototype.bindToContext = function (cb) {\r\n        return this.contextPreservationFunction(cb);\r\n    };\r\n    ContextPreservingEventEmitter.prototype.addContextPreservation = function (preserver) {\r\n        var previousPreservationStack = this.contextPreservationFunction;\r\n        this.contextPreservationFunction = (function (cb) { return preserver(previousPreservationStack(cb)); });\r\n    };\r\n    ContextPreservingEventEmitter.prototype.registerMonkeyPatch = function (packageName, patcher) {\r\n        if (!this.knownPatches[packageName]) {\r\n            this.knownPatches[packageName] = [];\r\n        }\r\n        this.knownPatches[packageName].push(patcher);\r\n    };\r\n    ContextPreservingEventEmitter.prototype.getPatchesObject = function () {\r\n        return this.knownPatches;\r\n    };\r\n    return ContextPreservingEventEmitter;\r\n}());\r\nif (!global.diagnosticsSource) {\r\n    global.diagnosticsSource = new ContextPreservingEventEmitter();\r\n    // TODO: should this only patch require after at least one monkey patch is registered?\r\n    /* tslint:disable-next-line:no-var-requires */\r\n    var moduleModule = require(\"module\");\r\n    // Note: We pass in the object now before any patches are registered, but the object is passed by reference\r\n    // so any updates made to the object will be visible in the patcher.\r\n    moduleModule.prototype.require = patchRequire_1.makePatchingRequire(global.diagnosticsSource.getPatchesObject());\r\n}\r\nexports.channel = global.diagnosticsSource;\r\n//# sourceMappingURL=channel.js.map","module.exports = require(\"stream\");","\"use strict\";\r\nvar Logging = (function () {\r\n    function Logging() {\r\n    }\r\n    Logging.info = function (message) {\r\n        var optionalParams = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            optionalParams[_i - 1] = arguments[_i];\r\n        }\r\n        if (Logging.enableDebug) {\r\n            console.info(Logging.TAG + message, optionalParams);\r\n        }\r\n    };\r\n    Logging.warn = function (message) {\r\n        var optionalParams = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            optionalParams[_i - 1] = arguments[_i];\r\n        }\r\n        if (!Logging.disableWarnings) {\r\n            console.warn(Logging.TAG + message, optionalParams);\r\n        }\r\n    };\r\n    Logging.enableDebug = false;\r\n    Logging.disableWarnings = false;\r\n    Logging.TAG = \"ApplicationInsights:\";\r\n    return Logging;\r\n}());\r\nmodule.exports = Logging;\r\n//# sourceMappingURL=Logging.js.map","\"use strict\";\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(require(\"./Constants\"));\r\n__export(require(\"./Generated\"));\r\n__export(require(\"./TelemetryTypes\"));\r\n//# sourceMappingURL=index.js.map","module.exports = require(\"crypto\");","module.exports = require(\"url\");","module.exports = require(\"zlib\");","module.exports = require(\"path\");","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\n/**\r\n * The abstract common base of all domains.\r\n */\r\nvar Domain = (function () {\r\n    function Domain() {\r\n    }\r\n    return Domain;\r\n}());\r\nmodule.exports = Domain;\r\n//# sourceMappingURL=Domain.js.map","\"use strict\";\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nvar http = require(\"http\");\r\nvar https = require(\"https\");\r\nvar url = require(\"url\");\r\nvar constants = require(\"constants\");\r\nvar Logging = require(\"./Logging\");\r\nvar RequestResponseHeaders = require(\"./RequestResponseHeaders\");\r\nvar Util = (function () {\r\n    function Util() {\r\n    }\r\n    /**\r\n     * helper method to access userId and sessionId cookie\r\n     */\r\n    Util.getCookie = function (name, cookie) {\r\n        var value = \"\";\r\n        if (name && name.length && typeof cookie === \"string\") {\r\n            var cookieName = name + \"=\";\r\n            var cookies = cookie.split(\";\");\r\n            for (var i = 0; i < cookies.length; i++) {\r\n                var cookie = cookies[i];\r\n                cookie = Util.trim(cookie);\r\n                if (cookie && cookie.indexOf(cookieName) === 0) {\r\n                    value = cookie.substring(cookieName.length, cookies[i].length);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return value;\r\n    };\r\n    /**\r\n     * helper method to trim strings (IE8 does not implement String.prototype.trim)\r\n     */\r\n    Util.trim = function (str) {\r\n        if (typeof str === \"string\") {\r\n            return str.replace(/^\\s+|\\s+$/g, \"\");\r\n        }\r\n        else {\r\n            return \"\";\r\n        }\r\n    };\r\n    /**\r\n     * Convert an array of int32 to Base64 (no '==' at the end).\r\n     * MSB first.\r\n     */\r\n    Util.int32ArrayToBase64 = function (array) {\r\n        var toChar = function (v, i) {\r\n            return String.fromCharCode((v >> i) & 0xFF);\r\n        };\r\n        var int32AsString = function (v) {\r\n            return toChar(v, 24) + toChar(v, 16) + toChar(v, 8) + toChar(v, 0);\r\n        };\r\n        var x = array.map(int32AsString).join(\"\");\r\n        var b = Buffer.from ? Buffer.from(x, \"binary\") : new Buffer(x, \"binary\");\r\n        var s = b.toString(\"base64\");\r\n        return s.substr(0, s.indexOf(\"=\"));\r\n    };\r\n    /**\r\n     * generate a random 32bit number (-0x80000000..0x7FFFFFFF).\r\n     */\r\n    Util.random32 = function () {\r\n        return (0x100000000 * Math.random()) | 0;\r\n    };\r\n    /**\r\n     * generate a random 32bit number (0x00000000..0xFFFFFFFF).\r\n     */\r\n    Util.randomu32 = function () {\r\n        return Util.random32() + 0x80000000;\r\n    };\r\n    /**\r\n     * generate W3C-compatible trace id\r\n     * https://github.com/w3c/distributed-tracing/blob/master/trace_context/HTTP_HEADER_FORMAT.md#trace-id\r\n     */\r\n    Util.w3cTraceId = function () {\r\n        var hexValues = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"a\", \"b\", \"c\", \"d\", \"e\", \"f\"];\r\n        // rfc4122 version 4 UUID without dashes and with lowercase letters\r\n        var oct = \"\", tmp;\r\n        for (var a = 0; a < 4; a++) {\r\n            tmp = Util.random32();\r\n            oct +=\r\n                hexValues[tmp & 0xF] +\r\n                    hexValues[tmp >> 4 & 0xF] +\r\n                    hexValues[tmp >> 8 & 0xF] +\r\n                    hexValues[tmp >> 12 & 0xF] +\r\n                    hexValues[tmp >> 16 & 0xF] +\r\n                    hexValues[tmp >> 20 & 0xF] +\r\n                    hexValues[tmp >> 24 & 0xF] +\r\n                    hexValues[tmp >> 28 & 0xF];\r\n        }\r\n        // \"Set the two most significant bits (bits 6 and 7) of the clock_seq_hi_and_reserved to zero and one, respectively\"\r\n        var clockSequenceHi = hexValues[8 + (Math.random() * 4) | 0];\r\n        return oct.substr(0, 8) + oct.substr(9, 4) + \"4\" + oct.substr(13, 3) + clockSequenceHi + oct.substr(16, 3) + oct.substr(19, 12);\r\n    };\r\n    /**\r\n     * Check if an object is of type Array\r\n     */\r\n    Util.isArray = function (obj) {\r\n        return Object.prototype.toString.call(obj) === \"[object Array]\";\r\n    };\r\n    /**\r\n     * Check if an object is of type Error\r\n     */\r\n    Util.isError = function (obj) {\r\n        return obj instanceof Error;\r\n    };\r\n    Util.isPrimitive = function (input) {\r\n        var propType = typeof input;\r\n        return propType === \"string\" || propType === \"number\" || propType === \"boolean\";\r\n    };\r\n    /**\r\n     * Check if an object is of type Date\r\n     */\r\n    Util.isDate = function (obj) {\r\n        return Object.prototype.toString.call(obj) === \"[object Date]\";\r\n    };\r\n    /**\r\n     * Convert ms to c# time span format\r\n     */\r\n    Util.msToTimeSpan = function (totalms) {\r\n        if (isNaN(totalms) || totalms < 0) {\r\n            totalms = 0;\r\n        }\r\n        var sec = ((totalms / 1000) % 60).toFixed(7).replace(/0{0,4}$/, \"\");\r\n        var min = \"\" + Math.floor(totalms / (1000 * 60)) % 60;\r\n        var hour = \"\" + Math.floor(totalms / (1000 * 60 * 60)) % 24;\r\n        var days = Math.floor(totalms / (1000 * 60 * 60 * 24));\r\n        sec = sec.indexOf(\".\") < 2 ? \"0\" + sec : sec;\r\n        min = min.length < 2 ? \"0\" + min : min;\r\n        hour = hour.length < 2 ? \"0\" + hour : hour;\r\n        var daysText = days > 0 ? days + \".\" : \"\";\r\n        return daysText + hour + \":\" + min + \":\" + sec;\r\n    };\r\n    /**\r\n     * Using JSON.stringify, by default Errors do not serialize to something useful:\r\n     * Simplify a generic Node Error into a simpler map for customDimensions\r\n     * Custom errors can still implement toJSON to override this functionality\r\n     */\r\n    Util.extractError = function (err) {\r\n        // Error is often subclassed so may have code OR id properties:\r\n        // https://nodejs.org/api/errors.html#errors_error_code\r\n        var looseError = err;\r\n        return {\r\n            message: err.message,\r\n            code: looseError.code || looseError.id || \"\",\r\n        };\r\n    };\r\n    /**\r\n     * Manually call toJSON if available to pre-convert the value.\r\n     * If a primitive is returned, then the consumer of this function can skip JSON.stringify.\r\n     * This avoids double escaping of quotes for Date objects, for example.\r\n     */\r\n    Util.extractObject = function (origProperty) {\r\n        if (origProperty instanceof Error) {\r\n            return Util.extractError(origProperty);\r\n        }\r\n        if (typeof origProperty.toJSON === \"function\") {\r\n            return origProperty.toJSON();\r\n        }\r\n        return origProperty;\r\n    };\r\n    /**\r\n     * Validate that an object is of type { [key: string]: string }\r\n     */\r\n    Util.validateStringMap = function (obj) {\r\n        if (typeof obj !== \"object\") {\r\n            Logging.info(\"Invalid properties dropped from payload\");\r\n            return;\r\n        }\r\n        var map = {};\r\n        for (var field in obj) {\r\n            var property = '';\r\n            var origProperty = obj[field];\r\n            var propType = typeof origProperty;\r\n            if (Util.isPrimitive(origProperty)) {\r\n                property = origProperty.toString();\r\n            }\r\n            else if (origProperty === null || propType === \"undefined\") {\r\n                property = \"\";\r\n            }\r\n            else if (propType === \"function\") {\r\n                Logging.info(\"key: \" + field + \" was function; will not serialize\");\r\n                continue;\r\n            }\r\n            else {\r\n                var stringTarget = Util.isArray(origProperty) ? origProperty : Util.extractObject(origProperty);\r\n                try {\r\n                    if (Util.isPrimitive(stringTarget)) {\r\n                        property = stringTarget;\r\n                    }\r\n                    else {\r\n                        property = JSON.stringify(stringTarget);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    property = origProperty.constructor.name.toString() + \" (Error: \" + e.message + \")\";\r\n                    Logging.info(\"key: \" + field + \", could not be serialized\");\r\n                }\r\n            }\r\n            map[field] = property.substring(0, Util.MAX_PROPERTY_LENGTH);\r\n        }\r\n        return map;\r\n    };\r\n    /**\r\n     * Checks if a request url is not on a excluded domain list\r\n     * and if it is safe to add correlation headers\r\n     */\r\n    Util.canIncludeCorrelationHeader = function (client, requestUrl) {\r\n        var excludedDomains = client && client.config && client.config.correlationHeaderExcludedDomains;\r\n        if (!excludedDomains || excludedDomains.length == 0 || !requestUrl) {\r\n            return true;\r\n        }\r\n        for (var i = 0; i < excludedDomains.length; i++) {\r\n            var regex = new RegExp(excludedDomains[i].replace(/\\./g, \"\\.\").replace(/\\*/g, \".*\"));\r\n            if (regex.test(url.parse(requestUrl).hostname)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    Util.getCorrelationContextTarget = function (response, key) {\r\n        var contextHeaders = response.headers && response.headers[RequestResponseHeaders.requestContextHeader];\r\n        if (contextHeaders) {\r\n            var keyValues = contextHeaders.split(\",\");\r\n            for (var i = 0; i < keyValues.length; ++i) {\r\n                var keyValue = keyValues[i].split(\"=\");\r\n                if (keyValue.length == 2 && keyValue[0] == key) {\r\n                    return keyValue[1];\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Generate request\r\n     *\r\n     * Proxify the request creation to handle proxy http\r\n     *\r\n     * @param {string} requestUrl url endpoint\r\n     * @param {Object} requestOptions Request option\r\n     * @param {Function} requestCallback callback on request\r\n     * @returns {http.ClientRequest} request object\r\n     */\r\n    Util.makeRequest = function (config, requestUrl, requestOptions, requestCallback) {\r\n        if (requestUrl && requestUrl.indexOf('//') === 0) {\r\n            requestUrl = 'https:' + requestUrl;\r\n        }\r\n        var requestUrlParsed = url.parse(requestUrl);\r\n        var options = __assign({}, requestOptions, { host: requestUrlParsed.hostname, port: requestUrlParsed.port, path: requestUrlParsed.pathname });\r\n        var proxyUrl = undefined;\r\n        if (requestUrlParsed.protocol === 'https:') {\r\n            proxyUrl = config.proxyHttpsUrl || undefined;\r\n        }\r\n        if (requestUrlParsed.protocol === 'http:') {\r\n            proxyUrl = config.proxyHttpUrl || undefined;\r\n        }\r\n        if (proxyUrl) {\r\n            if (proxyUrl.indexOf('//') === 0) {\r\n                proxyUrl = 'http:' + proxyUrl;\r\n            }\r\n            var proxyUrlParsed = url.parse(proxyUrl);\r\n            // https is not supported at the moment\r\n            if (proxyUrlParsed.protocol === 'https:') {\r\n                Logging.info(\"Proxies that use HTTPS are not supported\");\r\n                proxyUrl = undefined;\r\n            }\r\n            else {\r\n                options = __assign({}, options, { host: proxyUrlParsed.hostname, port: proxyUrlParsed.port || \"80\", path: requestUrl, headers: __assign({}, options.headers, { Host: requestUrlParsed.hostname }) });\r\n            }\r\n        }\r\n        var isHttps = requestUrlParsed.protocol === 'https:' && !proxyUrl;\r\n        if (isHttps && config.httpsAgent !== undefined) {\r\n            options.agent = config.httpsAgent;\r\n        }\r\n        else if (!isHttps && config.httpAgent !== undefined) {\r\n            options.agent = config.httpAgent;\r\n        }\r\n        else if (isHttps) {\r\n            // HTTPS without a passed in agent. Use one that enforces our TLS rules\r\n            options.agent = Util.tlsRestrictedAgent;\r\n        }\r\n        if (isHttps) {\r\n            return https.request(options, requestCallback);\r\n        }\r\n        else {\r\n            return http.request(options, requestCallback);\r\n        }\r\n    };\r\n    ;\r\n    Util.MAX_PROPERTY_LENGTH = 8192;\r\n    Util.tlsRestrictedAgent = new https.Agent({\r\n        secureOptions: constants.SSL_OP_NO_SSLv2 | constants.SSL_OP_NO_SSLv3 |\r\n            constants.SSL_OP_NO_TLSv1 | constants.SSL_OP_NO_TLSv1_1\r\n    });\r\n    return Util;\r\n}());\r\nmodule.exports = Util;\r\n//# sourceMappingURL=Util.js.map","module.exports = require(\"http\");","module.exports = require(\"fs\");","module.exports = require(\"vscode\");","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Logging = require(\"../Library/Logging\");\r\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\r\nvar CorrelationContextManager = (function () {\r\n    function CorrelationContextManager() {\r\n    }\r\n    /**\r\n     *  Provides the current Context.\r\n     *  The context is the most recent one entered into for the current\r\n     *  logical chain of execution, including across asynchronous calls.\r\n     */\r\n    CorrelationContextManager.getCurrentContext = function () {\r\n        if (!CorrelationContextManager.enabled) {\r\n            return null;\r\n        }\r\n        return Zone.current.get(\"context\");\r\n    };\r\n    /**\r\n     *  A helper to generate objects conforming to the CorrelationContext interface\r\n     */\r\n    CorrelationContextManager.generateContextObject = function (operationId, parentId, operationName, correlationContextHeader) {\r\n        parentId = parentId || operationId;\r\n        if (this.enabled) {\r\n            return {\r\n                operation: {\r\n                    name: operationName,\r\n                    id: operationId,\r\n                    parentId: parentId\r\n                },\r\n                customProperties: new CustomPropertiesImpl(correlationContextHeader)\r\n            };\r\n        }\r\n        return null;\r\n    };\r\n    /**\r\n     *  Runs a function inside a given Context.\r\n     *  All logical children of the execution path that entered this Context\r\n     *  will receive this Context object on calls to GetCurrentContext.\r\n     */\r\n    CorrelationContextManager.runWithContext = function (context, fn) {\r\n        if (CorrelationContextManager.enabled) {\r\n            var newZone = Zone.current.fork({\r\n                name: \"AI-\" + ((context && context.operation.parentId) || \"Unknown\"),\r\n                properties: { context: context }\r\n            });\r\n            newZone.run(fn);\r\n        }\r\n        else {\r\n            fn();\r\n        }\r\n    };\r\n    /**\r\n     *  Patches a callback to restore the correct Context when getCurrentContext\r\n     *  is run within it. This is necessary if automatic correlation fails to work\r\n     *  with user-included libraries.\r\n     *\r\n     *  The supplied callback will be given the same context that was present for\r\n     *  the call to wrapCallback.  */\r\n    CorrelationContextManager.wrapCallback = function (fn) {\r\n        if (CorrelationContextManager.enabled) {\r\n            return Zone.current.wrap(fn, \"User-wrapped method\");\r\n        }\r\n        return fn;\r\n    };\r\n    /**\r\n     *  Enables the CorrelationContextManager.\r\n     */\r\n    CorrelationContextManager.enable = function () {\r\n        if (this.enabled) {\r\n            return;\r\n        }\r\n        if (!this.isNodeVersionCompatible()) {\r\n            this.enabled = false;\r\n            return;\r\n        }\r\n        // Run patches for Zone.js\r\n        if (!CorrelationContextManager.hasEverEnabled) {\r\n            this.hasEverEnabled = true;\r\n            // Load in Zone.js\r\n            try {\r\n                // Require zone if we can't detect its presence - guarded because of issue #346\r\n                // Note that usually multiple requires of zone.js does not error - but we see reports of it happening\r\n                // in the Azure Functions environment.\r\n                // This indicates that the file is being included multiple times in the same global scope,\r\n                // averting require's cache somehow.\r\n                if (typeof Zone === \"undefined\") {\r\n                    require(\"zone.js\");\r\n                }\r\n            }\r\n            catch (e) {\r\n                // Zone was already loaded even though we couldn't find its global variable\r\n                Logging.warn(\"Failed to require zone.js\");\r\n            }\r\n            DiagChannel.registerContextPreservation(function (cb) {\r\n                return Zone.current.wrap(cb, \"AI-ContextPreservation\");\r\n            });\r\n            this.patchError();\r\n            this.patchTimers([\"setTimeout\", \"setInterval\"]);\r\n        }\r\n        this.enabled = true;\r\n    };\r\n    /**\r\n     *  Disables the CorrelationContextManager.\r\n     */\r\n    CorrelationContextManager.disable = function () {\r\n        this.enabled = false;\r\n    };\r\n    /**\r\n     *  Reports if the CorrelationContextManager is able to run in this environment\r\n     */\r\n    CorrelationContextManager.isNodeVersionCompatible = function () {\r\n        // Unit tests warn of errors < 3.3 from timer patching. All versions before 4 were 0.x\r\n        var nodeVer = process.versions.node.split(\".\");\r\n        return parseInt(nodeVer[0]) > 3 || (parseInt(nodeVer[0]) > 2 && parseInt(nodeVer[1]) > 2);\r\n    };\r\n    // Zone.js breaks concatenation of timer return values.\r\n    // This fixes that.\r\n    CorrelationContextManager.patchTimers = function (methodNames) {\r\n        methodNames.forEach(function (methodName) {\r\n            var orig = global[methodName];\r\n            global[methodName] = function () {\r\n                var ret = orig.apply(this, arguments);\r\n                ret.toString = function () {\r\n                    if (this.data && typeof this.data.handleId !== 'undefined') {\r\n                        return this.data.handleId.toString();\r\n                    }\r\n                    else {\r\n                        return Object.prototype.toString.call(this);\r\n                    }\r\n                };\r\n                return ret;\r\n            };\r\n        });\r\n    };\r\n    // Zone.js breaks deepEqual on error objects (by making internal properties enumerable).\r\n    // This fixes that by subclassing the error object and making all properties not enumerable\r\n    CorrelationContextManager.patchError = function () {\r\n        var orig = global.Error;\r\n        // New error handler\r\n        function AppInsightsAsyncCorrelatedErrorWrapper() {\r\n            if (!(this instanceof AppInsightsAsyncCorrelatedErrorWrapper)) {\r\n                return AppInsightsAsyncCorrelatedErrorWrapper.apply(Object.create(AppInsightsAsyncCorrelatedErrorWrapper.prototype), arguments);\r\n            }\r\n            // Is this object set to rewrite the stack?\r\n            // If so, we should turn off some Zone stuff that is prone to break\r\n            var stackRewrite = orig.stackRewrite;\r\n            if (orig.prepareStackTrace) {\r\n                orig.stackRewrite = false;\r\n                var stackTrace = orig.prepareStackTrace;\r\n                orig.prepareStackTrace = function (e, s) {\r\n                    // Remove some AI and Zone methods from the stack trace\r\n                    // Otherwise we leave side-effects\r\n                    // Algorithm is to find the first frame on the stack after the first instance(s)\r\n                    // of AutoCollection/CorrelationContextManager\r\n                    // Eg. this should return the User frame on an array like below:\r\n                    //  Zone | Zone | CorrelationContextManager | CorrelationContextManager | User\r\n                    var foundOne = false;\r\n                    for (var i = 0; i < s.length; i++) {\r\n                        var fileName = s[i].getFileName();\r\n                        if (fileName) {\r\n                            if (fileName.indexOf(\"AutoCollection/CorrelationContextManager\") === -1 &&\r\n                                fileName.indexOf(\"AutoCollection\\\\CorrelationContextManager\") === -1) {\r\n                                if (foundOne) {\r\n                                    break;\r\n                                }\r\n                            }\r\n                            else {\r\n                                foundOne = true;\r\n                            }\r\n                        }\r\n                    }\r\n                    // Loop above goes one extra step\r\n                    i = Math.max(0, i - 1);\r\n                    if (foundOne) {\r\n                        s.splice(0, i);\r\n                    }\r\n                    return stackTrace(e, s);\r\n                };\r\n            }\r\n            // Apply the error constructor\r\n            orig.apply(this, arguments);\r\n            // Restore Zone stack rewriting settings\r\n            orig.stackRewrite = stackRewrite;\r\n            // Remove unexpected bits from stack trace\r\n            if (this.stack && typeof this.stack === \"string\") {\r\n                var stackFrames = this.stack.split(\"\\n\");\r\n                // Remove this class\r\n                if (stackFrames.length > 3) {\r\n                    if (stackFrames[2].trim().indexOf(\"at Error.AppInsightsAsyncCorrelatedErrorWrapper\") === 0) {\r\n                        stackFrames.splice(2, 1);\r\n                    }\r\n                    else if (stackFrames[1].trim().indexOf(\"at AppInsightsAsyncCorrelatedErrorWrapper.ZoneAwareError\") === 0\r\n                        && stackFrames[2].trim().indexOf(\"at new AppInsightsAsyncCorrelatedErrorWrapper\") === 0) {\r\n                        stackFrames.splice(1, 2);\r\n                    }\r\n                }\r\n                // Remove AI correlation ids\r\n                this.stack = stackFrames.map(function (v) {\r\n                    var startIndex = v.indexOf(\") [\");\r\n                    if (startIndex > -1) {\r\n                        v = v.substr(0, startIndex + 1);\r\n                    }\r\n                    return v;\r\n                }).join(\"\\n\");\r\n            }\r\n            // getOwnPropertyNames should be a superset of Object.keys...\r\n            // This appears to not always be the case\r\n            var props = Object.getOwnPropertyNames(this).concat(Object.keys(this));\r\n            // Zone.js will automatically create some hidden properties at read time.\r\n            // We need to proactively make those not enumerable as well as the currently visible properties\r\n            for (var i = 0; i < props.length; i++) {\r\n                var propertyName = props[i];\r\n                var hiddenPropertyName = Zone['__symbol__'](propertyName);\r\n                Object.defineProperty(this, propertyName, { enumerable: false });\r\n                Object.defineProperty(this, hiddenPropertyName, { enumerable: false, writable: true });\r\n            }\r\n            return this;\r\n        }\r\n        // Inherit from the Zone.js error handler\r\n        AppInsightsAsyncCorrelatedErrorWrapper.prototype = orig.prototype;\r\n        // We need this loop to copy outer methods like Error.captureStackTrace\r\n        var props = Object.getOwnPropertyNames(orig);\r\n        for (var i = 0; i < props.length; i++) {\r\n            var propertyName = props[i];\r\n            if (!AppInsightsAsyncCorrelatedErrorWrapper[propertyName]) {\r\n                Object.defineProperty(AppInsightsAsyncCorrelatedErrorWrapper, propertyName, Object.getOwnPropertyDescriptor(orig, propertyName));\r\n            }\r\n        }\r\n        // explicit cast to <any> required to avoid type error for captureStackTrace\r\n        // with latest node.d.ts (despite workaround above)\r\n        global.Error = AppInsightsAsyncCorrelatedErrorWrapper;\r\n    };\r\n    CorrelationContextManager.enabled = false;\r\n    CorrelationContextManager.hasEverEnabled = false;\r\n    return CorrelationContextManager;\r\n}());\r\nexports.CorrelationContextManager = CorrelationContextManager;\r\nvar CustomPropertiesImpl = (function () {\r\n    function CustomPropertiesImpl(header) {\r\n        this.props = [];\r\n        this.addHeaderData(header);\r\n    }\r\n    CustomPropertiesImpl.prototype.addHeaderData = function (header) {\r\n        var keyvals = header ? header.split(\", \") : [];\r\n        this.props = keyvals.map(function (keyval) {\r\n            var parts = keyval.split(\"=\");\r\n            return { key: parts[0], value: parts[1] };\r\n        }).concat(this.props);\r\n    };\r\n    CustomPropertiesImpl.prototype.serializeToHeader = function () {\r\n        return this.props.map(function (keyval) {\r\n            return keyval.key + \"=\" + keyval.value;\r\n        }).join(\", \");\r\n    };\r\n    CustomPropertiesImpl.prototype.getProperty = function (prop) {\r\n        for (var i = 0; i < this.props.length; ++i) {\r\n            var keyval = this.props[i];\r\n            if (keyval.key === prop) {\r\n                return keyval.value;\r\n            }\r\n        }\r\n        return;\r\n    };\r\n    // TODO: Strictly according to the spec, properties which are recieved from\r\n    // an incoming request should be left untouched, while we may add our own new\r\n    // properties. The logic here will need to change to track that.\r\n    CustomPropertiesImpl.prototype.setProperty = function (prop, val) {\r\n        if (CustomPropertiesImpl.bannedCharacters.test(prop) || CustomPropertiesImpl.bannedCharacters.test(val)) {\r\n            Logging.warn(\"Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: \" + prop + \" and value: \" + val);\r\n            return;\r\n        }\r\n        for (var i = 0; i < this.props.length; ++i) {\r\n            var keyval = this.props[i];\r\n            if (keyval.key === prop) {\r\n                keyval.value = val;\r\n                return;\r\n            }\r\n        }\r\n        this.props.push({ key: prop, value: val });\r\n    };\r\n    CustomPropertiesImpl.bannedCharacters = /[,=]/;\r\n    return CustomPropertiesImpl;\r\n}());\r\n//# sourceMappingURL=CorrelationContextManager.js.map","\"use strict\";\r\nmodule.exports = {\r\n    /**\r\n     * Request-Context header\r\n     */\r\n    requestContextHeader: \"request-context\",\r\n    /**\r\n     * Source instrumentation header that is added by an application while making http\r\n     * requests and retrieved by the other application when processing incoming requests.\r\n     */\r\n    requestContextSourceKey: \"appId\",\r\n    /**\r\n     * Target instrumentation header that is added to the response and retrieved by the\r\n     * calling application when processing incoming responses.\r\n     */\r\n    requestContextTargetKey: \"appId\",\r\n    /**\r\n     * Request-Id header\r\n     */\r\n    requestIdHeader: \"request-id\",\r\n    /**\r\n     * Legacy Header containing the id of the immidiate caller\r\n     */\r\n    parentIdHeader: \"x-ms-request-id\",\r\n    /**\r\n     * Legacy Header containing the correlation id that kept the same for every telemetry item\r\n     * accross transactions\r\n     */\r\n    rootIdHeader: \"x-ms-request-root-id\",\r\n    /**\r\n     * Correlation-Context header\r\n     *\r\n     * Not currently actively used, but the contents should be passed from incoming to outgoing requests\r\n     */\r\n    correlationContextHeader: \"correlation-context\"\r\n};\r\n//# sourceMappingURL=RequestResponseHeaders.js.map","module.exports = require(\"https\");","module.exports = require(\"os\");","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IsInitialized = !process.env[\"APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL\"];\r\nif (exports.IsInitialized) {\r\n    var publishers = require(\"diagnostic-channel-publishers\");\r\n    var individualOptOuts = process.env[\"APPLICATION_INSIGHTS_NO_PATCH_MODULES\"] || \"\";\r\n    var unpatchedModules = individualOptOuts.split(\",\");\r\n    var modules = {\r\n        bunyan: publishers.bunyan,\r\n        console: publishers.console,\r\n        mongodb: publishers.mongodb,\r\n        mongodbCore: publishers.mongodbCore,\r\n        mysql: publishers.mysql,\r\n        redis: publishers.redis,\r\n        pg: publishers.pg,\r\n        pgPool: publishers.pgPool,\r\n        winston: publishers.winston\r\n    };\r\n    for (var mod in modules) {\r\n        if (unpatchedModules.indexOf(mod) === -1) {\r\n            modules[mod].enable();\r\n        }\r\n    }\r\n}\r\nfunction registerContextPreservation(cb) {\r\n    if (!exports.IsInitialized) {\r\n        return;\r\n    }\r\n    require(\"diagnostic-channel\").channel.addContextPreservation(cb);\r\n}\r\nexports.registerContextPreservation = registerContextPreservation;\r\n//# sourceMappingURL=initialization.js.map","\"use strict\";\r\nvar http = require(\"http\");\r\nvar https = require(\"https\");\r\nvar Logging = require(\"../Library/Logging\");\r\nvar Util = require(\"../Library/Util\");\r\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\r\nvar HttpDependencyParser = require(\"./HttpDependencyParser\");\r\nvar CorrelationContextManager_1 = require(\"./CorrelationContextManager\");\r\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\r\nvar AutoCollectHttpDependencies = (function () {\r\n    function AutoCollectHttpDependencies(client) {\r\n        if (!!AutoCollectHttpDependencies.INSTANCE) {\r\n            throw new Error(\"Client request tracking should be configured from the applicationInsights object\");\r\n        }\r\n        AutoCollectHttpDependencies.INSTANCE = this;\r\n        this._client = client;\r\n    }\r\n    AutoCollectHttpDependencies.prototype.enable = function (isEnabled) {\r\n        this._isEnabled = isEnabled;\r\n        if (this._isEnabled && !this._isInitialized) {\r\n            this._initialize();\r\n        }\r\n        if (DiagChannel.IsInitialized) {\r\n            require(\"./diagnostic-channel/mongodb.sub\").enable(isEnabled, this._client);\r\n            require(\"./diagnostic-channel/mysql.sub\").enable(isEnabled, this._client);\r\n            require(\"./diagnostic-channel/redis.sub\").enable(isEnabled, this._client);\r\n            require(\"./diagnostic-channel/postgres.sub\").enable(isEnabled, this._client);\r\n        }\r\n    };\r\n    AutoCollectHttpDependencies.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    AutoCollectHttpDependencies.prototype._initialize = function () {\r\n        var _this = this;\r\n        this._isInitialized = true;\r\n        var originalGet = http.get;\r\n        var originalRequest = http.request;\r\n        var originalHttpsRequest = https.request;\r\n        var clientRequestPatch = function (request, options) {\r\n            var shouldCollect = !options[AutoCollectHttpDependencies.disableCollectionRequestOption] &&\r\n                !request[AutoCollectHttpDependencies.alreadyAutoCollectedFlag];\r\n            request[AutoCollectHttpDependencies.alreadyAutoCollectedFlag] = true;\r\n            if (request && options && shouldCollect) {\r\n                AutoCollectHttpDependencies.trackRequest(_this._client, { options: options, request: request });\r\n            }\r\n        };\r\n        // On node >= v0.11.12 and < 9.0 (excluding 8.9.0) https.request just calls http.request (with additional options).\r\n        // On node < 0.11.12, 8.9.0, and 9.0 > https.request is handled separately\r\n        // Patch both and leave a flag to not double-count on versions that just call through\r\n        // We add the flag to both http and https to protect against strange double collection in other scenarios\r\n        http.request = function (options) {\r\n            var requestArgs = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                requestArgs[_i - 1] = arguments[_i];\r\n            }\r\n            var request = originalRequest.call.apply(originalRequest, [http, options].concat(requestArgs));\r\n            clientRequestPatch(request, options);\r\n            return request;\r\n        };\r\n        https.request = function (options) {\r\n            var requestArgs = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                requestArgs[_i - 1] = arguments[_i];\r\n            }\r\n            var request = originalHttpsRequest.call.apply(originalHttpsRequest, [https, options].concat(requestArgs));\r\n            clientRequestPatch(request, options);\r\n            return request;\r\n        };\r\n        // Node 8 calls http.request from http.get using a local reference!\r\n        // We have to patch .get manually in this case and can't just assume request is enough\r\n        // We have to replace the entire method in this case. We can't call the original.\r\n        // This is because calling the original will give us no chance to set headers as it internally does .end().\r\n        http.get = function (options) {\r\n            var requestArgs = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                requestArgs[_i - 1] = arguments[_i];\r\n            }\r\n            var request = (_a = http.request).call.apply(_a, [http, options].concat(requestArgs));\r\n            request.end();\r\n            return request;\r\n            var _a;\r\n        };\r\n        https.get = function (options) {\r\n            var requestArgs = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                requestArgs[_i - 1] = arguments[_i];\r\n            }\r\n            var request = (_a = https.request).call.apply(_a, [https, options].concat(requestArgs));\r\n            request.end();\r\n            return request;\r\n            var _a;\r\n        };\r\n    };\r\n    /**\r\n     * Tracks an outgoing request. Because it may set headers this method must be called before\r\n     * writing content to or ending the request.\r\n     */\r\n    AutoCollectHttpDependencies.trackRequest = function (client, telemetry) {\r\n        if (!telemetry.options || !telemetry.request || !client) {\r\n            Logging.info(\"AutoCollectHttpDependencies.trackRequest was called with invalid parameters: \", !telemetry.options, !telemetry.request, !client);\r\n            return;\r\n        }\r\n        var requestParser = new HttpDependencyParser(telemetry.options, telemetry.request);\r\n        var currentContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        var uniqueRequestId = currentContext && currentContext.operation && (currentContext.operation.parentId + AutoCollectHttpDependencies.requestNumber++ + '.');\r\n        // Add the source correlationId to the request headers, if a value was not already provided.\r\n        // The getHeader/setHeader methods aren't available on very old Node versions, and\r\n        // are not included in the v0.10 type declarations currently used. So check if the\r\n        // methods exist before invoking them.\r\n        if (Util.canIncludeCorrelationHeader(client, requestParser.getUrl()) && telemetry.request.getHeader && telemetry.request.setHeader) {\r\n            if (client.config && client.config.correlationId) {\r\n                var correlationHeader = telemetry.request.getHeader(RequestResponseHeaders.requestContextHeader);\r\n                if (correlationHeader) {\r\n                    var components = correlationHeader.split(\",\");\r\n                    var key_1 = RequestResponseHeaders.requestContextSourceKey + \"=\";\r\n                    if (!components.some(function (value) { return value.substring(0, key_1.length) === key_1; })) {\r\n                        telemetry.request.setHeader(RequestResponseHeaders.requestContextHeader, correlationHeader + \",\" + RequestResponseHeaders.requestContextSourceKey + \"=\" + client.config.correlationId);\r\n                    }\r\n                }\r\n                else {\r\n                    telemetry.request.setHeader(RequestResponseHeaders.requestContextHeader, RequestResponseHeaders.requestContextSourceKey + \"=\" + client.config.correlationId);\r\n                }\r\n            }\r\n            if (currentContext && currentContext.operation) {\r\n                telemetry.request.setHeader(RequestResponseHeaders.requestIdHeader, uniqueRequestId);\r\n                // Also set legacy headers\r\n                telemetry.request.setHeader(RequestResponseHeaders.parentIdHeader, currentContext.operation.id);\r\n                telemetry.request.setHeader(RequestResponseHeaders.rootIdHeader, uniqueRequestId);\r\n                var correlationContextHeader = currentContext.customProperties.serializeToHeader();\r\n                if (correlationContextHeader) {\r\n                    telemetry.request.setHeader(RequestResponseHeaders.correlationContextHeader, correlationContextHeader);\r\n                }\r\n            }\r\n        }\r\n        // Collect dependency telemetry about the request when it finishes.\r\n        if (telemetry.request.on) {\r\n            telemetry.request.on('response', function (response) {\r\n                requestParser.onResponse(response);\r\n                var dependencyTelemetry = requestParser.getDependencyTelemetry(telemetry, uniqueRequestId);\r\n                dependencyTelemetry.contextObjects = dependencyTelemetry.contextObjects || {};\r\n                dependencyTelemetry.contextObjects[\"http.RequestOptions\"] = telemetry.options;\r\n                dependencyTelemetry.contextObjects[\"http.ClientRequest\"] = telemetry.request;\r\n                dependencyTelemetry.contextObjects[\"http.ClientResponse\"] = response;\r\n                client.trackDependency(dependencyTelemetry);\r\n            });\r\n            telemetry.request.on('error', function (e) {\r\n                requestParser.onError(e);\r\n                var dependencyTelemetry = requestParser.getDependencyTelemetry(telemetry, uniqueRequestId);\r\n                dependencyTelemetry.contextObjects = dependencyTelemetry.contextObjects || {};\r\n                dependencyTelemetry.contextObjects[\"http.RequestOptions\"] = telemetry.options;\r\n                dependencyTelemetry.contextObjects[\"http.ClientRequest\"] = telemetry.request;\r\n                dependencyTelemetry.contextObjects[\"Error\"] = e;\r\n                client.trackDependency(dependencyTelemetry);\r\n            });\r\n        }\r\n    };\r\n    AutoCollectHttpDependencies.prototype.dispose = function () {\r\n        AutoCollectHttpDependencies.INSTANCE = null;\r\n        this.enable(false);\r\n        this._isInitialized = false;\r\n    };\r\n    AutoCollectHttpDependencies.disableCollectionRequestOption = 'disableAppInsightsAutoCollection';\r\n    AutoCollectHttpDependencies.requestNumber = 1;\r\n    AutoCollectHttpDependencies.alreadyAutoCollectedFlag = '_appInsightsAutoCollected';\r\n    return AutoCollectHttpDependencies;\r\n}());\r\nmodule.exports = AutoCollectHttpDependencies;\r\n//# sourceMappingURL=HttpDependencies.js.map","\"use strict\";\r\nvar Util = require(\"./Util\");\r\nvar Logging = require(\"./Logging\");\r\nvar CorrelationIdManager = (function () {\r\n    function CorrelationIdManager() {\r\n    }\r\n    CorrelationIdManager.queryCorrelationId = function (config, callback) {\r\n        // GET request to `${this.endpointBase}/api/profiles/${this.instrumentationKey}/appId`\r\n        // If it 404s, the iKey is bad and we should give up\r\n        // If it fails otherwise, try again later\r\n        var appIdUrlString = config.profileQueryEndpoint + \"/api/profiles/\" + config.instrumentationKey + \"/appId\";\r\n        if (CorrelationIdManager.completedLookups.hasOwnProperty(appIdUrlString)) {\r\n            callback(CorrelationIdManager.completedLookups[appIdUrlString]);\r\n            return;\r\n        }\r\n        else if (CorrelationIdManager.pendingLookups[appIdUrlString]) {\r\n            CorrelationIdManager.pendingLookups[appIdUrlString].push(callback);\r\n            return;\r\n        }\r\n        CorrelationIdManager.pendingLookups[appIdUrlString] = [callback];\r\n        var fetchAppId = function () {\r\n            if (!CorrelationIdManager.pendingLookups[appIdUrlString]) {\r\n                // This query has been cancelled.\r\n                return;\r\n            }\r\n            var requestOptions = {\r\n                method: 'GET',\r\n                // Ensure this request is not captured by auto-collection.\r\n                // Note: we don't refer to the property in HttpDependencyParser because that would cause a cyclical dependency\r\n                disableAppInsightsAutoCollection: true\r\n            };\r\n            Logging.info(CorrelationIdManager.TAG, requestOptions);\r\n            var req = Util.makeRequest(config, appIdUrlString, requestOptions, function (res) {\r\n                if (res.statusCode === 200) {\r\n                    // Success; extract the appId from the body\r\n                    var appId_1 = \"\";\r\n                    res.setEncoding(\"utf-8\");\r\n                    res.on('data', function (data) {\r\n                        appId_1 += data;\r\n                    });\r\n                    res.on('end', function () {\r\n                        Logging.info(CorrelationIdManager.TAG, appId_1);\r\n                        var result = CorrelationIdManager.correlationIdPrefix + appId_1;\r\n                        CorrelationIdManager.completedLookups[appIdUrlString] = result;\r\n                        if (CorrelationIdManager.pendingLookups[appIdUrlString]) {\r\n                            CorrelationIdManager.pendingLookups[appIdUrlString].forEach(function (cb) { return cb(result); });\r\n                        }\r\n                        delete CorrelationIdManager.pendingLookups[appIdUrlString];\r\n                    });\r\n                }\r\n                else if (res.statusCode >= 400 && res.statusCode < 500) {\r\n                    // Not found, probably a bad key. Do not try again.\r\n                    CorrelationIdManager.completedLookups[appIdUrlString] = undefined;\r\n                    delete CorrelationIdManager.pendingLookups[appIdUrlString];\r\n                }\r\n                else {\r\n                    // Retry after timeout.\r\n                    setTimeout(fetchAppId, config.correlationIdRetryIntervalMs);\r\n                }\r\n            });\r\n            if (req) {\r\n                req.on('error', function (error) {\r\n                    // Unable to contact endpoint.\r\n                    // Do nothing for now.\r\n                    Logging.warn(CorrelationIdManager.TAG, error);\r\n                });\r\n                req.end();\r\n            }\r\n        };\r\n        setTimeout(fetchAppId, 0);\r\n    };\r\n    CorrelationIdManager.cancelCorrelationIdQuery = function (config, callback) {\r\n        var appIdUrlString = config.profileQueryEndpoint + \"/api/profiles/\" + config.instrumentationKey + \"/appId\";\r\n        var pendingLookups = CorrelationIdManager.pendingLookups[appIdUrlString];\r\n        if (pendingLookups) {\r\n            CorrelationIdManager.pendingLookups[appIdUrlString] = pendingLookups.filter(function (cb) { return cb != callback; });\r\n            if (CorrelationIdManager.pendingLookups[appIdUrlString].length == 0) {\r\n                delete CorrelationIdManager.pendingLookups[appIdUrlString];\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Generate a request Id according to https://github.com/lmolkova/correlation/blob/master/hierarchical_request_id.md\r\n     * @param parentId\r\n     */\r\n    CorrelationIdManager.generateRequestId = function (parentId) {\r\n        if (parentId) {\r\n            parentId = parentId[0] == '|' ? parentId : '|' + parentId;\r\n            if (parentId[parentId.length - 1] !== '.') {\r\n                parentId += '.';\r\n            }\r\n            var suffix = (CorrelationIdManager.currentRootId++).toString(16);\r\n            return CorrelationIdManager.appendSuffix(parentId, suffix, '_');\r\n        }\r\n        else {\r\n            return CorrelationIdManager.generateRootId();\r\n        }\r\n    };\r\n    /**\r\n     * Given a hierarchical identifier of the form |X.*\r\n     * return the root identifier X\r\n     * @param id\r\n     */\r\n    CorrelationIdManager.getRootId = function (id) {\r\n        var endIndex = id.indexOf('.');\r\n        if (endIndex < 0) {\r\n            endIndex = id.length;\r\n        }\r\n        var startIndex = id[0] === '|' ? 1 : 0;\r\n        return id.substring(startIndex, endIndex);\r\n    };\r\n    CorrelationIdManager.generateRootId = function () {\r\n        return '|' + Util.w3cTraceId() + '.';\r\n    };\r\n    CorrelationIdManager.appendSuffix = function (parentId, suffix, delimiter) {\r\n        if (parentId.length + suffix.length < CorrelationIdManager.requestIdMaxLength) {\r\n            return parentId + suffix + delimiter;\r\n        }\r\n        // Combined identifier would be too long, so we must truncate it.\r\n        // We need 9 characters of space: 8 for the overflow ID, 1 for the\r\n        // overflow delimiter '#'\r\n        var trimPosition = CorrelationIdManager.requestIdMaxLength - 9;\r\n        if (parentId.length > trimPosition) {\r\n            for (; trimPosition > 1; --trimPosition) {\r\n                var c = parentId[trimPosition - 1];\r\n                if (c === '.' || c === '_') {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (trimPosition <= 1) {\r\n            // parentId is not a valid ID\r\n            return CorrelationIdManager.generateRootId();\r\n        }\r\n        suffix = Util.randomu32().toString(16);\r\n        while (suffix.length < 8) {\r\n            suffix = '0' + suffix;\r\n        }\r\n        return parentId.substring(0, trimPosition) + suffix + '#';\r\n    };\r\n    CorrelationIdManager.TAG = \"CorrelationIdManager\";\r\n    CorrelationIdManager.correlationIdPrefix = \"cid-v1:\";\r\n    // To avoid extraneous HTTP requests, we maintain a queue of callbacks waiting on a particular appId lookup,\r\n    // as well as a cache of completed lookups so future requests can be resolved immediately.\r\n    CorrelationIdManager.pendingLookups = {};\r\n    CorrelationIdManager.completedLookups = {};\r\n    CorrelationIdManager.requestIdMaxLength = 1024;\r\n    CorrelationIdManager.currentRootId = Util.randomu32();\r\n    return CorrelationIdManager;\r\n}());\r\nmodule.exports = CorrelationIdManager;\r\n//# sourceMappingURL=CorrelationIdManager.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\n\ntype LogLevel = 'Info' | 'Error';\n\nclass Log {\n\tprivate output: vscode.OutputChannel;\n\n\tconstructor() {\n\t\tthis.output = vscode.window.createOutputChannel('Microsoft Authentication');\n\t}\n\n\tprivate data2String(data: any): string {\n\t\tif (data instanceof Error) {\n\t\t\treturn data.stack || data.message;\n\t\t}\n\t\tif (data.success === false && data.message) {\n\t\t\treturn data.message;\n\t\t}\n\t\treturn data.toString();\n\t}\n\n\tpublic info(message: string, data?: any): void {\n\t\tthis.logLevel('Info', message, data);\n\t}\n\n\tpublic error(message: string, data?: any): void {\n\t\tthis.logLevel('Error', message, data);\n\t}\n\n\tpublic logLevel(level: LogLevel, message: string, data?: any): void {\n\t\tthis.output.appendLine(`[${level}  - ${this.now()}] ${message}`);\n\t\tif (data) {\n\t\t\tthis.output.appendLine(this.data2String(data));\n\t\t}\n\t}\n\n\tprivate now(): string {\n\t\tconst now = new Date();\n\t\treturn padLeft(now.getUTCHours() + '', 2, '0')\n\t\t\t+ ':' + padLeft(now.getMinutes() + '', 2, '0')\n\t\t\t+ ':' + padLeft(now.getUTCSeconds() + '', 2, '0') + '.' + now.getMilliseconds();\n\t}\n}\n\nfunction padLeft(s: string, n: number, pad = ' ') {\n\treturn pad.repeat(Math.max(0, n - s.length)) + s;\n}\n\nconst Logger = new Log();\nexport default Logger;\n","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar path = require(\"path\");\r\nvar semver = require(\"semver\");\r\n/* tslint:disable-next-line:no-var-requires */\r\nvar moduleModule = require(\"module\");\r\nvar nativeModules = Object.keys(process.binding(\"natives\"));\r\nvar originalRequire = moduleModule.prototype.require;\r\nfunction makePatchingRequire(knownPatches) {\r\n    var patchedModules = {};\r\n    return function patchedRequire(moduleId) {\r\n        var originalModule = originalRequire.apply(this, arguments);\r\n        if (knownPatches[moduleId]) {\r\n            // Fetch the specific path of the module\r\n            var modulePath = moduleModule._resolveFilename(moduleId, this);\r\n            if (patchedModules.hasOwnProperty(modulePath)) {\r\n                // This module has already been patched, no need to reapply\r\n                return patchedModules[modulePath];\r\n            }\r\n            var moduleVersion = void 0;\r\n            if (nativeModules.indexOf(moduleId) < 0) {\r\n                try {\r\n                    moduleVersion = originalRequire.call(this, path.join(moduleId, \"package.json\")).version;\r\n                }\r\n                catch (e) {\r\n                    // This should only happen if moduleId is actually a path rather than a module\r\n                    // This is not a supported scenario\r\n                    return originalModule;\r\n                }\r\n            }\r\n            else {\r\n                // This module is implemented natively so we cannot find a package.json\r\n                // Instead, take the version of node itself\r\n                moduleVersion = process.version.substring(1);\r\n            }\r\n            var prereleaseTagIndex = moduleVersion.indexOf(\"-\");\r\n            if (prereleaseTagIndex >= 0) {\r\n                // We ignore prerelease tags to avoid impossible to fix gaps in support\r\n                // e.g. supporting console in >= 4.0.0 would otherwise not include\r\n                // 8.0.0-pre\r\n                moduleVersion = moduleVersion.substring(0, prereleaseTagIndex);\r\n            }\r\n            var modifiedModule = originalModule;\r\n            for (var _i = 0, _a = knownPatches[moduleId]; _i < _a.length; _i++) {\r\n                var modulePatcher = _a[_i];\r\n                if (semver.satisfies(moduleVersion, modulePatcher.versionSpecifier)) {\r\n                    modifiedModule = modulePatcher.patch(modifiedModule, modulePath);\r\n                }\r\n            }\r\n            return patchedModules[modulePath] = modifiedModule;\r\n        }\r\n        return originalModule;\r\n    };\r\n}\r\nexports.makePatchingRequire = makePatchingRequire;\r\n//# sourceMappingURL=patchRequire.js.map","module.exports = require(\"module\");","module.exports = require(\"events\");","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.AvailabilityData = require(\"./AvailabilityData\");\r\nexports.Base = require(\"./Base\");\r\nexports.ContextTagKeys = require(\"./ContextTagKeys\");\r\nexports.Data = require(\"./Data\");\r\nexports.DataPoint = require(\"./DataPoint\");\r\nexports.DataPointType = require(\"./DataPointType\");\r\nexports.Domain = require(\"./Domain\");\r\nexports.Envelope = require(\"./Envelope\");\r\nexports.EventData = require(\"./EventData\");\r\nexports.ExceptionData = require(\"./ExceptionData\");\r\nexports.ExceptionDetails = require(\"./ExceptionDetails\");\r\nexports.MessageData = require(\"./MessageData\");\r\nexports.MetricData = require(\"./MetricData\");\r\nexports.PageViewData = require(\"./PageViewData\");\r\nexports.RemoteDependencyData = require(\"./RemoteDependencyData\");\r\nexports.RequestData = require(\"./RequestData\");\r\nexports.SeverityLevel = require(\"./SeverityLevel\");\r\nexports.StackFrame = require(\"./StackFrame\");\r\n//# sourceMappingURL=index.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\n/**\r\n * Data struct to contain only C section with custom fields.\r\n */\r\nvar Base = (function () {\r\n    function Base() {\r\n    }\r\n    return Base;\r\n}());\r\nmodule.exports = Base;\r\n//# sourceMappingURL=Base.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\n/**\r\n * Type of the metric data measurement.\r\n */\r\nvar DataPointType;\r\n(function (DataPointType) {\r\n    DataPointType[DataPointType[\"Measurement\"] = 0] = \"Measurement\";\r\n    DataPointType[DataPointType[\"Aggregation\"] = 1] = \"Aggregation\";\r\n})(DataPointType || (DataPointType = {}));\r\nmodule.exports = DataPointType;\r\n//# sourceMappingURL=DataPointType.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * Instances of Event represent structured event records that can be grouped and searched by their properties. Event data item also creates a metric of event count by name.\r\n */\r\nvar EventData = (function (_super) {\r\n    __extends(EventData, _super);\r\n    function EventData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return EventData;\r\n}(Domain));\r\nmodule.exports = EventData;\r\n//# sourceMappingURL=EventData.js.map","\"use strict\";\r\nvar os = require(\"os\");\r\nvar Logging = require(\"../Library/Logging\");\r\nvar AutoCollectPerformance = (function () {\r\n    function AutoCollectPerformance(client) {\r\n        if (!!AutoCollectPerformance.INSTANCE) {\r\n            throw new Error(\"Performance tracking should be configured from the applicationInsights object\");\r\n        }\r\n        AutoCollectPerformance.INSTANCE = this;\r\n        this._isInitialized = false;\r\n        this._client = client;\r\n    }\r\n    AutoCollectPerformance.prototype.enable = function (isEnabled) {\r\n        var _this = this;\r\n        this._isEnabled = isEnabled;\r\n        if (this._isEnabled && !this._isInitialized) {\r\n            this._isInitialized = true;\r\n        }\r\n        if (isEnabled) {\r\n            if (!this._handle) {\r\n                this._lastCpus = os.cpus();\r\n                this._lastRequests = {\r\n                    totalRequestCount: AutoCollectPerformance._totalRequestCount,\r\n                    totalFailedRequestCount: AutoCollectPerformance._totalFailedRequestCount,\r\n                    time: +new Date\r\n                };\r\n                if (typeof process.cpuUsage === 'function') {\r\n                    this._lastAppCpuUsage = process.cpuUsage();\r\n                }\r\n                this._lastHrtime = process.hrtime();\r\n                this._handle = setInterval(function () { return _this.trackPerformance(); }, 60000);\r\n                this._handle.unref(); // Allow the app to terminate even while this loop is going on\r\n            }\r\n        }\r\n        else {\r\n            if (this._handle) {\r\n                clearInterval(this._handle);\r\n                this._handle = undefined;\r\n            }\r\n        }\r\n    };\r\n    AutoCollectPerformance.countRequest = function (request, response) {\r\n        var _this = this;\r\n        if (!AutoCollectPerformance.isEnabled()) {\r\n            return;\r\n        }\r\n        var start = +new Date;\r\n        if (!request || !response) {\r\n            Logging.warn(\"AutoCollectPerformance.countRequest was called with invalid parameters: \", !!request, !!response);\r\n            return;\r\n        }\r\n        // response listeners\r\n        if (typeof response.once === \"function\") {\r\n            response.once(\"finish\", function () {\r\n                var end = +new Date;\r\n                _this._lastRequestExecutionTime = end - start;\r\n                AutoCollectPerformance._totalRequestCount++;\r\n                if (response.statusCode >= 400) {\r\n                    AutoCollectPerformance._totalFailedRequestCount++;\r\n                }\r\n            });\r\n        }\r\n    };\r\n    AutoCollectPerformance.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    AutoCollectPerformance.isEnabled = function () {\r\n        return AutoCollectPerformance.INSTANCE && AutoCollectPerformance.INSTANCE._isEnabled;\r\n    };\r\n    AutoCollectPerformance.prototype.trackPerformance = function () {\r\n        this._trackCpu();\r\n        this._trackMemory();\r\n        this._trackNetwork();\r\n    };\r\n    AutoCollectPerformance.prototype._trackCpu = function () {\r\n        // this reports total ms spent in each category since the OS was booted, to calculate percent it is necessary\r\n        // to find the delta since the last measurement\r\n        var cpus = os.cpus();\r\n        if (cpus && cpus.length && this._lastCpus && cpus.length === this._lastCpus.length) {\r\n            var totalUser = 0;\r\n            var totalSys = 0;\r\n            var totalNice = 0;\r\n            var totalIdle = 0;\r\n            var totalIrq = 0;\r\n            for (var i = 0; !!cpus && i < cpus.length; i++) {\r\n                var cpu = cpus[i];\r\n                var lastCpu = this._lastCpus[i];\r\n                var name = \"% cpu(\" + i + \") \";\r\n                var model = cpu.model;\r\n                var speed = cpu.speed;\r\n                var times = cpu.times;\r\n                var lastTimes = lastCpu.times;\r\n                // user cpu time (or) % CPU time spent in user space\r\n                var user = (times.user - lastTimes.user) || 0;\r\n                totalUser += user;\r\n                // system cpu time (or) % CPU time spent in kernel space\r\n                var sys = (times.sys - lastTimes.sys) || 0;\r\n                totalSys += sys;\r\n                // user nice cpu time (or) % CPU time spent on low priority processes\r\n                var nice = (times.nice - lastTimes.nice) || 0;\r\n                totalNice += nice;\r\n                // idle cpu time (or) % CPU time spent idle\r\n                var idle = (times.idle - lastTimes.idle) || 0;\r\n                totalIdle += idle;\r\n                // irq (or) % CPU time spent servicing/handling hardware interrupts\r\n                var irq = (times.irq - lastTimes.irq) || 0;\r\n                totalIrq += irq;\r\n            }\r\n            // Calculate % of total cpu time (user + system) this App Process used (Only supported by node v6.1.0+)\r\n            var appCpuPercent = undefined;\r\n            if (typeof process.cpuUsage === 'function') {\r\n                var appCpuUsage = process.cpuUsage();\r\n                var hrtime = process.hrtime();\r\n                var totalApp = ((appCpuUsage.user - this._lastAppCpuUsage.user) + (appCpuUsage.system - this._lastAppCpuUsage.system)) || 0;\r\n                if (typeof this._lastHrtime !== 'undefined' && this._lastHrtime.length === 2) {\r\n                    var elapsedTime = ((hrtime[0] - this._lastHrtime[0]) * 1e6 + (hrtime[1] - this._lastHrtime[1]) / 1e3) || 0; // convert to microseconds\r\n                    appCpuPercent = 100 * totalApp / (elapsedTime * cpus.length);\r\n                }\r\n                // Set previous\r\n                this._lastAppCpuUsage = appCpuUsage;\r\n                this._lastHrtime = hrtime;\r\n            }\r\n            var combinedTotal = (totalUser + totalSys + totalNice + totalIdle + totalIrq) || 1;\r\n            this._client.trackMetric({ name: \"\\\\Processor(_Total)\\\\% Processor Time\", value: ((combinedTotal - totalIdle) / combinedTotal) * 100 });\r\n            this._client.trackMetric({ name: \"\\\\Process(??APP_WIN32_PROC??)\\\\% Processor Time\", value: appCpuPercent || ((totalUser / combinedTotal) * 100) });\r\n        }\r\n        this._lastCpus = cpus;\r\n    };\r\n    AutoCollectPerformance.prototype._trackMemory = function () {\r\n        var freeMem = os.freemem();\r\n        var usedMem = process.memoryUsage().rss;\r\n        this._client.trackMetric({ name: \"\\\\Process(??APP_WIN32_PROC??)\\\\Private Bytes\", value: usedMem });\r\n        this._client.trackMetric({ name: \"\\\\Memory\\\\Available Bytes\", value: freeMem });\r\n    };\r\n    AutoCollectPerformance.prototype._trackNetwork = function () {\r\n        // track total request counters\r\n        var lastRequests = this._lastRequests;\r\n        var requests = {\r\n            totalRequestCount: AutoCollectPerformance._totalRequestCount,\r\n            totalFailedRequestCount: AutoCollectPerformance._totalFailedRequestCount,\r\n            time: +new Date\r\n        };\r\n        var intervalRequests = (requests.totalRequestCount - lastRequests.totalRequestCount) || 0;\r\n        var intervalFailedRequests = (requests.totalFailedRequestCount - lastRequests.totalFailedRequestCount) || 0;\r\n        var elapsedMs = requests.time - lastRequests.time;\r\n        var elapsedSeconds = elapsedMs / 1000;\r\n        if (elapsedMs > 0) {\r\n            var requestsPerSec = intervalRequests / elapsedSeconds;\r\n            var failedRequestsPerSec = intervalFailedRequests / elapsedSeconds;\r\n            this._client.trackMetric({ name: \"\\\\ASP.NET Applications(??APP_W3SVC_PROC??)\\\\Requests/Sec\", value: requestsPerSec });\r\n            this._client.trackMetric({ name: \"\\\\ASP.NET Applications(??APP_W3SVC_PROC??)\\\\Request Execution Time\", value: AutoCollectPerformance._lastRequestExecutionTime });\r\n        }\r\n        this._lastRequests = requests;\r\n    };\r\n    AutoCollectPerformance.prototype.dispose = function () {\r\n        AutoCollectPerformance.INSTANCE = null;\r\n        this.enable(false);\r\n        this._isInitialized = false;\r\n    };\r\n    AutoCollectPerformance._totalRequestCount = 0;\r\n    AutoCollectPerformance._totalFailedRequestCount = 0;\r\n    AutoCollectPerformance._lastRequestExecutionTime = 0;\r\n    return AutoCollectPerformance;\r\n}());\r\nmodule.exports = AutoCollectPerformance;\r\n//# sourceMappingURL=Performance.js.map","\"use strict\";\r\n/**\r\n * Base class for helpers that read data from HTTP requst/response objects and convert them\r\n * into the telemetry contract objects.\r\n */\r\nvar RequestParser = (function () {\r\n    function RequestParser() {\r\n    }\r\n    /**\r\n     * Gets a url parsed out from request options\r\n     */\r\n    RequestParser.prototype.getUrl = function () {\r\n        return this.url;\r\n    };\r\n    RequestParser.prototype.RequestParser = function () {\r\n        this.startTime = +new Date();\r\n    };\r\n    RequestParser.prototype._setStatus = function (status, error) {\r\n        var endTime = +new Date();\r\n        this.duration = endTime - this.startTime;\r\n        this.statusCode = status;\r\n        var properties = this.properties || {};\r\n        if (error) {\r\n            if (typeof error === \"string\") {\r\n                properties[\"error\"] = error;\r\n            }\r\n            else if (error instanceof Error) {\r\n                properties[\"error\"] = error.message;\r\n            }\r\n            else if (typeof error === \"object\") {\r\n                for (var key in error) {\r\n                    properties[key] = error[key] && error[key].toString && error[key].toString();\r\n                }\r\n            }\r\n        }\r\n        this.properties = properties;\r\n    };\r\n    RequestParser.prototype._isSuccess = function () {\r\n        return (0 < this.statusCode) && (this.statusCode < 400);\r\n    };\r\n    return RequestParser;\r\n}());\r\nmodule.exports = RequestParser;\r\n//# sourceMappingURL=RequestParser.js.map","\"use strict\";\r\nvar http = require(\"http\");\r\nvar https = require(\"https\");\r\nvar Logging = require(\"../Library/Logging\");\r\nvar Util = require(\"../Library/Util\");\r\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\r\nvar HttpRequestParser = require(\"./HttpRequestParser\");\r\nvar CorrelationContextManager_1 = require(\"./CorrelationContextManager\");\r\nvar AutoCollectPerformance = require(\"./Performance\");\r\nvar AutoCollectHttpRequests = (function () {\r\n    function AutoCollectHttpRequests(client) {\r\n        if (!!AutoCollectHttpRequests.INSTANCE) {\r\n            throw new Error(\"Server request tracking should be configured from the applicationInsights object\");\r\n        }\r\n        AutoCollectHttpRequests.INSTANCE = this;\r\n        this._client = client;\r\n    }\r\n    AutoCollectHttpRequests.prototype.enable = function (isEnabled) {\r\n        this._isEnabled = isEnabled;\r\n        // Autocorrelation requires automatic monitoring of incoming server requests\r\n        // Disabling autocollection but enabling autocorrelation will still enable\r\n        // request monitoring but will not produce request events\r\n        if ((this._isAutoCorrelating || this._isEnabled || AutoCollectPerformance.isEnabled()) && !this._isInitialized) {\r\n            this.useAutoCorrelation(this._isAutoCorrelating);\r\n            this._initialize();\r\n        }\r\n    };\r\n    AutoCollectHttpRequests.prototype.useAutoCorrelation = function (isEnabled) {\r\n        if (isEnabled && !this._isAutoCorrelating) {\r\n            CorrelationContextManager_1.CorrelationContextManager.enable();\r\n        }\r\n        else if (!isEnabled && this._isAutoCorrelating) {\r\n            CorrelationContextManager_1.CorrelationContextManager.disable();\r\n        }\r\n        this._isAutoCorrelating = isEnabled;\r\n    };\r\n    AutoCollectHttpRequests.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    AutoCollectHttpRequests.prototype.isAutoCorrelating = function () {\r\n        return this._isAutoCorrelating;\r\n    };\r\n    AutoCollectHttpRequests.prototype._generateCorrelationContext = function (requestParser) {\r\n        if (!this._isAutoCorrelating) {\r\n            return;\r\n        }\r\n        return CorrelationContextManager_1.CorrelationContextManager.generateContextObject(requestParser.getOperationId(this._client.context.tags), requestParser.getRequestId(), requestParser.getOperationName(this._client.context.tags), requestParser.getCorrelationContextHeader());\r\n    };\r\n    AutoCollectHttpRequests.prototype._initialize = function () {\r\n        var _this = this;\r\n        this._isInitialized = true;\r\n        var wrapOnRequestHandler = function (onRequest) {\r\n            if (!onRequest) {\r\n                return undefined;\r\n            }\r\n            if (typeof onRequest !== 'function') {\r\n                throw new Error('onRequest handler must be a function');\r\n            }\r\n            return function (request, response) {\r\n                var shouldCollect = request && !request[AutoCollectHttpRequests.alreadyAutoCollectedFlag];\r\n                if (request && shouldCollect) {\r\n                    // Set up correlation context\r\n                    var requestParser_1 = new HttpRequestParser(request);\r\n                    var correlationContext = _this._generateCorrelationContext(requestParser_1);\r\n                    // Note: Check for if correlation is enabled happens within this method.\r\n                    // If not enabled, function will directly call the callback.\r\n                    CorrelationContextManager_1.CorrelationContextManager.runWithContext(correlationContext, function () {\r\n                        if (_this._isEnabled) {\r\n                            // Mark as auto collected\r\n                            request[AutoCollectHttpRequests.alreadyAutoCollectedFlag] = true;\r\n                            // Auto collect request\r\n                            AutoCollectHttpRequests.trackRequest(_this._client, { request: request, response: response }, requestParser_1);\r\n                        }\r\n                        // Add this request to the performance counter\r\n                        // Note: Check for if perf counters are enabled happens within this method.\r\n                        // TODO: Refactor common bits between trackRequest and countRequest so they can\r\n                        // be used together, even when perf counters are on, and request tracking is off\r\n                        AutoCollectPerformance.countRequest(request, response);\r\n                        if (typeof onRequest === \"function\") {\r\n                            onRequest(request, response);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    if (typeof onRequest === \"function\") {\r\n                        onRequest(request, response);\r\n                    }\r\n                }\r\n            };\r\n        };\r\n        // The `http.createServer` function will instantiate a new http.Server object.\r\n        // Inside the Server's constructor, it is using addListener to register the\r\n        // onRequest handler. So there are two ways to inject the wrapped onRequest handler:\r\n        // 1) Overwrite Server.prototype.addListener (and .on()) globally and not patching\r\n        //    the http.createServer call. Or\r\n        // 2) Overwrite the http.createServer method and add a patched addListener to the\r\n        //    fresh server instance. This seems more stable for possible future changes as\r\n        //    it also covers the case where the Server might not use addListener to manage\r\n        //    the callback internally.\r\n        //    And also as long as the constructor uses addListener to add the handle, it is\r\n        //    ok to patch the addListener after construction only. Because if we would patch\r\n        //    the prototype one and the createServer method, we would wrap the handler twice\r\n        //    in case of the constructor call.\r\n        var wrapServerEventHandler = function (server) {\r\n            var originalAddListener = server.addListener.bind(server);\r\n            server.addListener = function (eventType, eventHandler) {\r\n                switch (eventType) {\r\n                    case 'request':\r\n                    case 'checkContinue':\r\n                        return originalAddListener(eventType, wrapOnRequestHandler(eventHandler));\r\n                    default:\r\n                        return originalAddListener(eventType, eventHandler);\r\n                }\r\n            };\r\n            // on is an alias to addListener only\r\n            server.on = server.addListener;\r\n        };\r\n        var originalHttpServer = http.createServer;\r\n        http.createServer = function (onRequest) {\r\n            // todo: get a pointer to the server so the IP address can be read from server.address\r\n            var server = originalHttpServer(wrapOnRequestHandler(onRequest));\r\n            wrapServerEventHandler(server);\r\n            return server;\r\n        };\r\n        var originalHttpsServer = https.createServer;\r\n        https.createServer = function (options, onRequest) {\r\n            var server = originalHttpsServer(options, wrapOnRequestHandler(onRequest));\r\n            wrapServerEventHandler(server);\r\n            return server;\r\n        };\r\n    };\r\n    /**\r\n     * Tracks a request synchronously (doesn't wait for response 'finish' event)\r\n     */\r\n    AutoCollectHttpRequests.trackRequestSync = function (client, telemetry) {\r\n        if (!telemetry.request || !telemetry.response || !client) {\r\n            Logging.info(\"AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: \", !telemetry.request, !telemetry.response, !client);\r\n            return;\r\n        }\r\n        AutoCollectHttpRequests.addResponseCorrelationIdHeader(client, telemetry.response);\r\n        // store data about the request\r\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        var requestParser = new HttpRequestParser(telemetry.request, (correlationContext && correlationContext.operation.parentId));\r\n        // Overwrite correlation context with request parser results\r\n        if (correlationContext) {\r\n            correlationContext.operation.id = requestParser.getOperationId(client.context.tags) || correlationContext.operation.id;\r\n            correlationContext.operation.name = requestParser.getOperationName(client.context.tags) || correlationContext.operation.name;\r\n            correlationContext.operation.parentId = requestParser.getRequestId() || correlationContext.operation.parentId;\r\n            correlationContext.customProperties.addHeaderData(requestParser.getCorrelationContextHeader());\r\n        }\r\n        AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, telemetry.duration, telemetry.error);\r\n    };\r\n    /**\r\n     * Tracks a request by listening to the response 'finish' event\r\n     */\r\n    AutoCollectHttpRequests.trackRequest = function (client, telemetry, _requestParser) {\r\n        if (!telemetry.request || !telemetry.response || !client) {\r\n            Logging.info(\"AutoCollectHttpRequests.trackRequest was called with invalid parameters: \", !telemetry.request, !telemetry.response, !client);\r\n            return;\r\n        }\r\n        // store data about the request\r\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        var requestParser = _requestParser || new HttpRequestParser(telemetry.request, correlationContext && correlationContext.operation.parentId);\r\n        if (Util.canIncludeCorrelationHeader(client, requestParser.getUrl())) {\r\n            AutoCollectHttpRequests.addResponseCorrelationIdHeader(client, telemetry.response);\r\n        }\r\n        // Overwrite correlation context with request parser results (if not an automatic track. we've already precalculated the correlation context in that case)\r\n        if (correlationContext && !_requestParser) {\r\n            correlationContext.operation.id = requestParser.getOperationId(client.context.tags) || correlationContext.operation.id;\r\n            correlationContext.operation.name = requestParser.getOperationName(client.context.tags) || correlationContext.operation.name;\r\n            correlationContext.operation.parentId = requestParser.getOperationParentId(client.context.tags) || correlationContext.operation.parentId;\r\n            correlationContext.customProperties.addHeaderData(requestParser.getCorrelationContextHeader());\r\n        }\r\n        // response listeners\r\n        if (telemetry.response.once) {\r\n            telemetry.response.once(\"finish\", function () {\r\n                AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, null, null);\r\n            });\r\n        }\r\n        // track a failed request if an error is emitted\r\n        if (telemetry.request.on) {\r\n            telemetry.request.on(\"error\", function (error) {\r\n                AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, null, error);\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Add the target correlationId to the response headers, if not already provided.\r\n     */\r\n    AutoCollectHttpRequests.addResponseCorrelationIdHeader = function (client, response) {\r\n        if (client.config && client.config.correlationId &&\r\n            response.getHeader && response.setHeader && !response.headersSent) {\r\n            var correlationHeader = response.getHeader(RequestResponseHeaders.requestContextHeader);\r\n            if (correlationHeader) {\r\n                var components = correlationHeader.split(\",\");\r\n                var key_1 = RequestResponseHeaders.requestContextSourceKey + \"=\";\r\n                if (!components.some(function (value) { return value.substring(0, key_1.length) === key_1; })) {\r\n                    response.setHeader(RequestResponseHeaders.requestContextHeader, correlationHeader + \",\" + RequestResponseHeaders.requestContextSourceKey + \"=\" + client.config.correlationId);\r\n                }\r\n            }\r\n            else {\r\n                response.setHeader(RequestResponseHeaders.requestContextHeader, RequestResponseHeaders.requestContextSourceKey + \"=\" + client.config.correlationId);\r\n            }\r\n        }\r\n    };\r\n    AutoCollectHttpRequests.endRequest = function (client, requestParser, telemetry, ellapsedMilliseconds, error) {\r\n        if (error) {\r\n            requestParser.onError(error, ellapsedMilliseconds);\r\n        }\r\n        else {\r\n            requestParser.onResponse(telemetry.response, ellapsedMilliseconds);\r\n        }\r\n        var requestTelemetry = requestParser.getRequestTelemetry(telemetry);\r\n        requestTelemetry.tagOverrides = requestParser.getRequestTags(client.context.tags);\r\n        if (telemetry.tagOverrides) {\r\n            for (var key in telemetry.tagOverrides) {\r\n                requestTelemetry.tagOverrides[key] = telemetry.tagOverrides[key];\r\n            }\r\n        }\r\n        requestTelemetry.contextObjects = requestTelemetry.contextObjects || {};\r\n        requestTelemetry.contextObjects[\"http.ServerRequest\"] = telemetry.request;\r\n        requestTelemetry.contextObjects[\"http.ServerResponse\"] = telemetry.response;\r\n        client.trackRequest(requestTelemetry);\r\n    };\r\n    AutoCollectHttpRequests.prototype.dispose = function () {\r\n        AutoCollectHttpRequests.INSTANCE = null;\r\n        this.enable(false);\r\n        this._isInitialized = false;\r\n    };\r\n    AutoCollectHttpRequests.alreadyAutoCollectedFlag = '_appInsightsAutoCollected';\r\n    return AutoCollectHttpRequests;\r\n}());\r\nmodule.exports = AutoCollectHttpRequests;\r\n//# sourceMappingURL=HttpRequests.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { AzureActiveDirectoryService, onDidChangeSessions } from './AADHelper';\nimport TelemetryReporter from 'vscode-extension-telemetry';\n\nexport const DEFAULT_SCOPES = 'https://management.core.windows.net/.default offline_access';\n\nexport async function activate(context: vscode.ExtensionContext) {\n\tconst { name, version, aiKey } = require('../package.json') as { name: string, version: string, aiKey: string };\n\tconst telemetryReporter = new TelemetryReporter(name, version, aiKey);\n\n\tconst loginService = new AzureActiveDirectoryService();\n\n\tawait loginService.initialize();\n\n\tcontext.subscriptions.push(vscode.authentication.registerAuthenticationProvider({\n\t\tid: 'microsoft',\n\t\tlabel: 'Microsoft',\n\t\tsupportsMultipleAccounts: true,\n\t\tonDidChangeSessions: onDidChangeSessions.event,\n\t\tgetSessions: () => Promise.resolve(loginService.sessions),\n\t\tlogin: async (scopes: string[]) => {\n\t\t\ttry {\n\t\t\t\t/* __GDPR__\n\t\t\t\t\t\"login\" : { }\n\t\t\t\t*/\n\t\t\t\ttelemetryReporter.sendTelemetryEvent('login');\n\n\t\t\t\tconst session = await loginService.login(scopes.sort().join(' '));\n\t\t\t\tonDidChangeSessions.fire({ added: [session.id], removed: [], changed: [] });\n\t\t\t\treturn session;\n\t\t\t} catch (e) {\n\t\t\t\t/* __GDPR__\n\t\t\t\t\t\"loginFailed\" : { }\n\t\t\t\t*/\n\t\t\t\ttelemetryReporter.sendTelemetryEvent('loginFailed');\n\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t},\n\t\tlogout: async (id: string) => {\n\t\t\ttry {\n\t\t\t\t/* __GDPR__\n\t\t\t\t\t\"logout\" : { }\n\t\t\t\t*/\n\t\t\t\ttelemetryReporter.sendTelemetryEvent('logout');\n\n\t\t\t\tawait loginService.logout(id);\n\t\t\t\tonDidChangeSessions.fire({ added: [], removed: [id], changed: [] });\n\t\t\t} catch (e) {\n\t\t\t\t/* __GDPR__\n\t\t\t\t\t\"logoutFailed\" : { }\n\t\t\t\t*/\n\t\t\t\ttelemetryReporter.sendTelemetryEvent('logoutFailed');\n\t\t\t}\n\t\t}\n\t}));\n\n\treturn;\n}\n\n// this method is called when your extension is deactivated\nexport function deactivate() { }\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as randomBytes from 'randombytes';\nimport * as querystring from 'querystring';\nimport * as vscode from 'vscode';\nimport { createServer, startServer } from './authServer';\n\nimport { v4 as uuid } from 'uuid';\nimport { keychain } from './keychain';\nimport Logger from './logger';\nimport { toBase64UrlEncoding } from './utils';\nimport fetch from 'node-fetch';\nimport { sha256 } from './env/node/sha256';\n\nconst redirectUrl = 'https://vscode-redirect.azurewebsites.net/';\nconst loginEndpointUrl = 'https://login.microsoftonline.com/';\nconst clientId = 'aebc6443-996d-45c2-90f0-388ff96faa56';\nconst tenant = 'organizations';\n\ninterface IToken {\n\taccessToken?: string; // When unable to refresh due to network problems, the access token becomes undefined\n\n\texpiresIn?: number; // How long access token is valid, in seconds\n\texpiresAt?: number; // UNIX epoch time at which token will expire\n\trefreshToken: string;\n\n\taccount: {\n\t\tlabel: string;\n\t\tid: string;\n\t};\n\tscope: string;\n\tsessionId: string; // The account id + the scope\n}\n\ninterface ITokenClaims {\n\ttid: string;\n\temail?: string;\n\tunique_name?: string;\n\toid?: string;\n\taltsecid?: string;\n\tipd?: string;\n\tscp: string;\n}\n\ninterface IStoredSession {\n\tid: string;\n\trefreshToken: string;\n\tscope: string; // Scopes are alphabetized and joined with a space\n\taccount: {\n\t\tlabel?: string;\n\t\tdisplayName?: string,\n\t\tid: string\n\t}\n}\n\nexport interface ITokenResponse {\n\taccess_token: string;\n\texpires_in: number;\n\text_expires_in: number;\n\trefresh_token: string;\n\tscope: string;\n\ttoken_type: string;\n}\n\nfunction parseQuery(uri: vscode.Uri) {\n\treturn uri.query.split('&').reduce((prev: any, current) => {\n\t\tconst queryString = current.split('=');\n\t\tprev[queryString[0]] = queryString[1];\n\t\treturn prev;\n\t}, {});\n}\n\nexport const onDidChangeSessions = new vscode.EventEmitter<vscode.AuthenticationProviderAuthenticationSessionsChangeEvent>();\n\nexport const REFRESH_NETWORK_FAILURE = 'Network failure';\n\nclass UriEventHandler extends vscode.EventEmitter<vscode.Uri> implements vscode.UriHandler {\n\tpublic handleUri(uri: vscode.Uri) {\n\t\tthis.fire(uri);\n\t}\n}\n\nexport class AzureActiveDirectoryService {\n\tprivate _tokens: IToken[] = [];\n\tprivate _refreshTimeouts: Map<string, NodeJS.Timeout> = new Map<string, NodeJS.Timeout>();\n\tprivate _uriHandler: UriEventHandler;\n\n\tconstructor() {\n\t\tthis._uriHandler = new UriEventHandler();\n\t\tvscode.window.registerUriHandler(this._uriHandler);\n\t}\n\n\tpublic async initialize(): Promise<void> {\n\t\tconst storedData = await keychain.getToken();\n\t\tif (storedData) {\n\t\t\ttry {\n\t\t\t\tconst sessions = this.parseStoredData(storedData);\n\t\t\t\tconst refreshes = sessions.map(async session => {\n\t\t\t\t\tif (!session.refreshToken) {\n\t\t\t\t\t\treturn Promise.resolve();\n\t\t\t\t\t}\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait this.refreshToken(session.refreshToken, session.scope, session.id);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tif (e.message === REFRESH_NETWORK_FAILURE) {\n\t\t\t\t\t\t\tconst didSucceedOnRetry = await this.handleRefreshNetworkError(session.id, session.refreshToken, session.scope);\n\t\t\t\t\t\t\tif (!didSucceedOnRetry) {\n\t\t\t\t\t\t\t\tthis._tokens.push({\n\t\t\t\t\t\t\t\t\taccessToken: undefined,\n\t\t\t\t\t\t\t\t\trefreshToken: session.refreshToken,\n\t\t\t\t\t\t\t\t\taccount: {\n\t\t\t\t\t\t\t\t\t\tlabel: session.account.label ?? session.account.displayName!,\n\t\t\t\t\t\t\t\t\t\tid: session.account.id\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tscope: session.scope,\n\t\t\t\t\t\t\t\t\tsessionId: session.id\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tthis.pollForReconnect(session.id, session.refreshToken, session.scope);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tawait this.logout(session.id);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tawait Promise.all(refreshes);\n\t\t\t} catch (e) {\n\t\t\t\tLogger.info('Failed to initialize stored data');\n\t\t\t\tawait this.clearSessions();\n\t\t\t}\n\t\t}\n\n\t\tthis.pollForChange();\n\t}\n\n\tprivate parseStoredData(data: string): IStoredSession[] {\n\t\treturn JSON.parse(data);\n\t}\n\n\tprivate async storeTokenData(): Promise<void> {\n\t\tconst serializedData: IStoredSession[] = this._tokens.map(token => {\n\t\t\treturn {\n\t\t\t\tid: token.sessionId,\n\t\t\t\trefreshToken: token.refreshToken,\n\t\t\t\tscope: token.scope,\n\t\t\t\taccount: token.account\n\t\t\t};\n\t\t});\n\n\t\tawait keychain.setToken(JSON.stringify(serializedData));\n\t}\n\n\tprivate pollForChange() {\n\t\tsetTimeout(async () => {\n\t\t\tconst addedIds: string[] = [];\n\t\t\tlet removedIds: string[] = [];\n\t\t\tconst storedData = await keychain.getToken();\n\t\t\tif (storedData) {\n\t\t\t\ttry {\n\t\t\t\t\tconst sessions = this.parseStoredData(storedData);\n\t\t\t\t\tlet promises = sessions.map(async session => {\n\t\t\t\t\t\tconst matchesExisting = this._tokens.some(token => token.scope === session.scope && token.sessionId === session.id);\n\t\t\t\t\t\tif (!matchesExisting && session.refreshToken) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tawait this.refreshToken(session.refreshToken, session.scope, session.id);\n\t\t\t\t\t\t\t\taddedIds.push(session.id);\n\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\tif (e.message === REFRESH_NETWORK_FAILURE) {\n\t\t\t\t\t\t\t\t\t// Ignore, will automatically retry on next poll.\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tawait this.logout(session.id);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tpromises = promises.concat(this._tokens.map(async token => {\n\t\t\t\t\t\tconst matchesExisting = sessions.some(session => token.scope === session.scope && token.sessionId === session.id);\n\t\t\t\t\t\tif (!matchesExisting) {\n\t\t\t\t\t\t\tawait this.logout(token.sessionId);\n\t\t\t\t\t\t\tremovedIds.push(token.sessionId);\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\n\t\t\t\t\tawait Promise.all(promises);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tLogger.error(e.message);\n\t\t\t\t\t// if data is improperly formatted, remove all of it and send change event\n\t\t\t\t\tremovedIds = this._tokens.map(token => token.sessionId);\n\t\t\t\t\tthis.clearSessions();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this._tokens.length) {\n\t\t\t\t\t// Log out all, remove all local data\n\t\t\t\t\tremovedIds = this._tokens.map(token => token.sessionId);\n\t\t\t\t\tLogger.info('No stored keychain data, clearing local data');\n\n\t\t\t\t\tthis._tokens = [];\n\n\t\t\t\t\tthis._refreshTimeouts.forEach(timeout => {\n\t\t\t\t\t\tclearTimeout(timeout);\n\t\t\t\t\t});\n\n\t\t\t\t\tthis._refreshTimeouts.clear();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (addedIds.length || removedIds.length) {\n\t\t\t\tonDidChangeSessions.fire({ added: addedIds, removed: removedIds, changed: [] });\n\t\t\t}\n\n\t\t\tthis.pollForChange();\n\t\t}, 1000 * 30);\n\t}\n\n\tprivate async convertToSession(token: IToken): Promise<vscode.AuthenticationSession> {\n\t\tconst resolvedToken = await this.resolveAccessToken(token);\n\t\treturn {\n\t\t\tid: token.sessionId,\n\t\t\taccessToken: resolvedToken,\n\t\t\taccount: token.account,\n\t\t\tscopes: token.scope.split(' ')\n\t\t};\n\t}\n\n\tprivate async resolveAccessToken(token: IToken): Promise<string> {\n\t\tif (token.accessToken && (!token.expiresAt || token.expiresAt > Date.now())) {\n\t\t\ttoken.expiresAt\n\t\t\t\t? Logger.info(`Token available from cache, expires in ${token.expiresAt - Date.now()} milliseconds`)\n\t\t\t\t: Logger.info('Token available from cache');\n\t\t\treturn Promise.resolve(token.accessToken);\n\t\t}\n\n\t\ttry {\n\t\t\tLogger.info('Token expired or unavailable, trying refresh');\n\t\t\tconst refreshedToken = await this.refreshToken(token.refreshToken, token.scope, token.sessionId);\n\t\t\tif (refreshedToken.accessToken) {\n\t\t\t\treturn refreshedToken.accessToken;\n\t\t\t} else {\n\t\t\t\tthrow new Error();\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tthrow new Error('Unavailable due to network problems');\n\t\t}\n\t}\n\n\tprivate getTokenClaims(accessToken: string): ITokenClaims {\n\t\ttry {\n\t\t\treturn JSON.parse(Buffer.from(accessToken.split('.')[1], 'base64').toString());\n\t\t} catch (e) {\n\t\t\tLogger.error(e.message);\n\t\t\tthrow new Error('Unable to read token claims');\n\t\t}\n\t}\n\n\tget sessions(): Promise<vscode.AuthenticationSession[]> {\n\t\treturn Promise.all(this._tokens.map(token => this.convertToSession(token)));\n\t}\n\n\tpublic async login(scope: string): Promise<vscode.AuthenticationSession> {\n\t\tLogger.info('Logging in...');\n\t\tif (!scope.includes('offline_access')) {\n\t\t\tLogger.info('Warning: The \\'offline_access\\' scope was not included, so the generated token will not be able to be refreshed.');\n\t\t}\n\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tif (vscode.env.uiKind === vscode.UIKind.Web) {\n\t\t\t\tresolve(this.loginWithoutLocalServer(scope));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst nonce = randomBytes(16).toString('base64');\n\t\t\tconst { server, redirectPromise, codePromise } = createServer(nonce);\n\n\t\t\tlet token: IToken | undefined;\n\t\t\ttry {\n\t\t\t\tconst port = await startServer(server);\n\t\t\t\tvscode.env.openExternal(vscode.Uri.parse(`http://localhost:${port}/signin?nonce=${encodeURIComponent(nonce)}`));\n\n\t\t\t\tconst redirectReq = await redirectPromise;\n\t\t\t\tif ('err' in redirectReq) {\n\t\t\t\t\tconst { err, res } = redirectReq;\n\t\t\t\t\tres.writeHead(302, { Location: `/?error=${encodeURIComponent(err && err.message || 'Unknown error')}` });\n\t\t\t\t\tres.end();\n\t\t\t\t\tthrow err;\n\t\t\t\t}\n\n\t\t\t\tconst host = redirectReq.req.headers.host || '';\n\t\t\t\tconst updatedPortStr = (/^[^:]+:(\\d+)$/.exec(Array.isArray(host) ? host[0] : host) || [])[1];\n\t\t\t\tconst updatedPort = updatedPortStr ? parseInt(updatedPortStr, 10) : port;\n\n\t\t\t\tconst state = `${updatedPort},${encodeURIComponent(nonce)}`;\n\n\t\t\t\tconst codeVerifier = toBase64UrlEncoding(randomBytes(32).toString('base64'));\n\t\t\t\tconst codeChallenge = toBase64UrlEncoding(await sha256(codeVerifier));\n\t\t\t\tconst loginUrl = `${loginEndpointUrl}${tenant}/oauth2/v2.0/authorize?response_type=code&response_mode=query&client_id=${encodeURIComponent(clientId)}&redirect_uri=${encodeURIComponent(redirectUrl)}&state=${state}&scope=${encodeURIComponent(scope)}&prompt=select_account&code_challenge_method=S256&code_challenge=${codeChallenge}`;\n\n\t\t\t\tawait redirectReq.res.writeHead(302, { Location: loginUrl });\n\t\t\t\tredirectReq.res.end();\n\n\t\t\t\tconst codeRes = await codePromise;\n\t\t\t\tconst res = codeRes.res;\n\n\t\t\t\ttry {\n\t\t\t\t\tif ('err' in codeRes) {\n\t\t\t\t\t\tthrow codeRes.err;\n\t\t\t\t\t}\n\t\t\t\t\ttoken = await this.exchangeCodeForToken(codeRes.code, codeVerifier, scope);\n\t\t\t\t\tthis.setToken(token, scope);\n\t\t\t\t\tLogger.info('Login successful');\n\t\t\t\t\tres.writeHead(302, { Location: '/' });\n\t\t\t\t\tconst session = await this.convertToSession(token);\n\t\t\t\t\tresolve(session);\n\t\t\t\t\tres.end();\n\t\t\t\t} catch (err) {\n\t\t\t\t\tres.writeHead(302, { Location: `/?error=${encodeURIComponent(err && err.message || 'Unknown error')}` });\n\t\t\t\t\tres.end();\n\t\t\t\t\treject(err.message);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tLogger.error(e.message);\n\n\t\t\t\t// If the error was about starting the server, try directly hitting the login endpoint instead\n\t\t\t\tif (e.message === 'Error listening to server' || e.message === 'Closed' || e.message === 'Timeout waiting for port') {\n\t\t\t\t\tawait this.loginWithoutLocalServer(scope);\n\t\t\t\t}\n\n\t\t\t\treject(e.message);\n\t\t\t} finally {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tserver.close();\n\t\t\t\t}, 5000);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate getCallbackEnvironment(callbackUri: vscode.Uri): string {\n\t\tif (callbackUri.authority.endsWith('.workspaces.github.com') || callbackUri.authority.endsWith('.github.dev')) {\n\t\t\treturn `${callbackUri.authority},`;\n\t\t}\n\n\t\tswitch (callbackUri.authority) {\n\t\t\tcase 'online.visualstudio.com':\n\t\t\t\treturn 'vso,';\n\t\t\tcase 'online-ppe.core.vsengsaas.visualstudio.com':\n\t\t\t\treturn 'vsoppe,';\n\t\t\tcase 'online.dev.core.vsengsaas.visualstudio.com':\n\t\t\t\treturn 'vsodev,';\n\t\t\tdefault:\n\t\t\t\treturn '';\n\t\t}\n\t}\n\n\tprivate async loginWithoutLocalServer(scope: string): Promise<vscode.AuthenticationSession> {\n\t\tconst callbackUri = await vscode.env.asExternalUri(vscode.Uri.parse(`${vscode.env.uriScheme}://vscode.microsoft-authentication`));\n\t\tconst nonce = randomBytes(16).toString('base64');\n\t\tconst port = (callbackUri.authority.match(/:([0-9]*)$/) || [])[1] || (callbackUri.scheme === 'https' ? 443 : 80);\n\t\tconst callbackEnvironment = this.getCallbackEnvironment(callbackUri);\n\t\tconst state = `${callbackEnvironment}${port},${encodeURIComponent(nonce)},${encodeURIComponent(callbackUri.query)}`;\n\t\tconst signInUrl = `${loginEndpointUrl}${tenant}/oauth2/v2.0/authorize`;\n\t\tlet uri = vscode.Uri.parse(signInUrl);\n\t\tconst codeVerifier = toBase64UrlEncoding(randomBytes(32).toString('base64'));\n\t\tconst codeChallenge = toBase64UrlEncoding(await sha256(codeVerifier));\n\t\turi = uri.with({\n\t\t\tquery: `response_type=code&client_id=${encodeURIComponent(clientId)}&response_mode=query&redirect_uri=${redirectUrl}&state=${state}&scope=${scope}&prompt=select_account&code_challenge_method=S256&code_challenge=${codeChallenge}`\n\t\t});\n\t\tvscode.env.openExternal(uri);\n\n\t\tconst timeoutPromise = new Promise((_: (value: vscode.AuthenticationSession) => void, reject) => {\n\t\t\tconst wait = setTimeout(() => {\n\t\t\t\tclearTimeout(wait);\n\t\t\t\treject('Login timed out.');\n\t\t\t}, 1000 * 60 * 5);\n\t\t});\n\n\t\treturn Promise.race([this.handleCodeResponse(state, codeVerifier, scope), timeoutPromise]);\n\t}\n\n\tprivate async handleCodeResponse(state: string, codeVerifier: string, scope: string): Promise<vscode.AuthenticationSession> {\n\t\tlet uriEventListener: vscode.Disposable;\n\t\treturn new Promise((resolve: (value: vscode.AuthenticationSession) => void, reject) => {\n\t\t\turiEventListener = this._uriHandler.event(async (uri: vscode.Uri) => {\n\t\t\t\ttry {\n\t\t\t\t\tconst query = parseQuery(uri);\n\t\t\t\t\tconst code = query.code;\n\n\t\t\t\t\t// Workaround double encoding issues of state in web\n\t\t\t\t\tif (query.state !== state && decodeURIComponent(query.state) !== state) {\n\t\t\t\t\t\tthrow new Error('State does not match.');\n\t\t\t\t\t}\n\n\t\t\t\t\tconst token = await this.exchangeCodeForToken(code, codeVerifier, scope);\n\t\t\t\t\tthis.setToken(token, scope);\n\n\t\t\t\t\tconst session = await this.convertToSession(token);\n\t\t\t\t\tresolve(session);\n\t\t\t\t} catch (err) {\n\t\t\t\t\treject(err);\n\t\t\t\t}\n\t\t\t});\n\t\t}).then(result => {\n\t\t\turiEventListener.dispose();\n\t\t\treturn result;\n\t\t}).catch(err => {\n\t\t\turiEventListener.dispose();\n\t\t\tthrow err;\n\t\t});\n\t}\n\n\tprivate async setToken(token: IToken, scope: string): Promise<void> {\n\t\tconst existingTokenIndex = this._tokens.findIndex(t => t.sessionId === token.sessionId);\n\t\tif (existingTokenIndex > -1) {\n\t\t\tthis._tokens.splice(existingTokenIndex, 1, token);\n\t\t} else {\n\t\t\tthis._tokens.push(token);\n\t\t}\n\n\t\tthis.clearSessionTimeout(token.sessionId);\n\n\t\tif (token.expiresIn) {\n\t\t\tthis._refreshTimeouts.set(token.sessionId, setTimeout(async () => {\n\t\t\t\ttry {\n\t\t\t\t\tawait this.refreshToken(token.refreshToken, scope, token.sessionId);\n\t\t\t\t\tonDidChangeSessions.fire({ added: [], removed: [], changed: [token.sessionId] });\n\t\t\t\t} catch (e) {\n\t\t\t\t\tif (e.message === REFRESH_NETWORK_FAILURE) {\n\t\t\t\t\t\tconst didSucceedOnRetry = await this.handleRefreshNetworkError(token.sessionId, token.refreshToken, scope);\n\t\t\t\t\t\tif (!didSucceedOnRetry) {\n\t\t\t\t\t\t\tthis.pollForReconnect(token.sessionId, token.refreshToken, token.scope);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tawait this.logout(token.sessionId);\n\t\t\t\t\t\tonDidChangeSessions.fire({ added: [], removed: [token.sessionId], changed: [] });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, 1000 * (token.expiresIn - 30)));\n\t\t}\n\n\t\tthis.storeTokenData();\n\t}\n\n\tprivate getTokenFromResponse(json: ITokenResponse, scope: string, existingId?: string): IToken {\n\t\tconst claims = this.getTokenClaims(json.access_token);\n\t\treturn {\n\t\t\texpiresIn: json.expires_in,\n\t\t\texpiresAt: json.expires_in ? Date.now() + json.expires_in * 1000 : undefined,\n\t\t\taccessToken: json.access_token,\n\t\t\trefreshToken: json.refresh_token,\n\t\t\tscope,\n\t\t\tsessionId: existingId || `${claims.tid}/${(claims.oid || (claims.altsecid || '' + claims.ipd || ''))}/${uuid()}`,\n\t\t\taccount: {\n\t\t\t\tlabel: claims.email || claims.unique_name || 'user@example.com',\n\t\t\t\tid: `${claims.tid}/${(claims.oid || (claims.altsecid || '' + claims.ipd || ''))}`\n\t\t\t}\n\t\t};\n\t}\n\n\tprivate async exchangeCodeForToken(code: string, codeVerifier: string, scope: string): Promise<IToken> {\n\t\tLogger.info('Exchanging login code for token');\n\t\ttry {\n\t\t\tconst postData = querystring.stringify({\n\t\t\t\tgrant_type: 'authorization_code',\n\t\t\t\tcode: code,\n\t\t\t\tclient_id: clientId,\n\t\t\t\tscope: scope,\n\t\t\t\tcode_verifier: codeVerifier,\n\t\t\t\tredirect_uri: redirectUrl\n\t\t\t});\n\n\t\t\tconst proxyEndpoints: { [providerId: string]: string } | undefined = await vscode.commands.executeCommand('workbench.getCodeExchangeProxyEndpoints');\n\t\t\tconst endpoint = proxyEndpoints && proxyEndpoints['microsoft'] || `${loginEndpointUrl}${tenant}/oauth2/v2.0/token`;\n\n\t\t\tconst result = await fetch(endpoint, {\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\n\t\t\t\t\t'Content-Length': postData.length.toString()\n\t\t\t\t},\n\t\t\t\tbody: postData\n\t\t\t});\n\n\t\t\tif (result.ok) {\n\t\t\t\tLogger.info('Exchanging login code for token success');\n\t\t\t\tconst json = await result.json();\n\t\t\t\treturn this.getTokenFromResponse(json, scope);\n\t\t\t} else {\n\t\t\t\tLogger.error('Exchanging login code for token failed');\n\t\t\t\tthrow new Error('Unable to login.');\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tLogger.error(e.message);\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\tprivate async refreshToken(refreshToken: string, scope: string, sessionId: string): Promise<IToken> {\n\t\ttry {\n\t\t\tLogger.info('Refreshing token...');\n\t\t\tconst postData = querystring.stringify({\n\t\t\t\trefresh_token: refreshToken,\n\t\t\t\tclient_id: clientId,\n\t\t\t\tgrant_type: 'refresh_token',\n\t\t\t\tscope: scope\n\t\t\t});\n\n\t\t\tconst result = await fetch(`https://login.microsoftonline.com/${tenant}/oauth2/v2.0/token`, {\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\n\t\t\t\t\t'Content-Length': postData.length.toString()\n\t\t\t\t},\n\t\t\t\tbody: postData\n\t\t\t});\n\n\t\t\tif (result.ok) {\n\t\t\t\tconst json = await result.json();\n\t\t\t\tconst token = this.getTokenFromResponse(json, scope, sessionId);\n\t\t\t\tthis.setToken(token, scope);\n\t\t\t\tLogger.info('Token refresh success');\n\t\t\t\treturn token;\n\t\t\t} else {\n\t\t\t\tLogger.error('Refreshing token failed');\n\t\t\t\tthrow new Error('Refreshing token failed.');\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tLogger.error('Refreshing token failed');\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\tprivate clearSessionTimeout(sessionId: string): void {\n\t\tconst timeout = this._refreshTimeouts.get(sessionId);\n\t\tif (timeout) {\n\t\t\tclearTimeout(timeout);\n\t\t\tthis._refreshTimeouts.delete(sessionId);\n\t\t}\n\t}\n\n\tprivate removeInMemorySessionData(sessionId: string) {\n\t\tconst tokenIndex = this._tokens.findIndex(token => token.sessionId === sessionId);\n\t\tif (tokenIndex > -1) {\n\t\t\tthis._tokens.splice(tokenIndex, 1);\n\t\t}\n\n\t\tthis.clearSessionTimeout(sessionId);\n\t}\n\n\tprivate pollForReconnect(sessionId: string, refreshToken: string, scope: string): void {\n\t\tthis.clearSessionTimeout(sessionId);\n\n\t\tthis._refreshTimeouts.set(sessionId, setTimeout(async () => {\n\t\t\ttry {\n\t\t\t\tawait this.refreshToken(refreshToken, scope, sessionId);\n\t\t\t} catch (e) {\n\t\t\t\tthis.pollForReconnect(sessionId, refreshToken, scope);\n\t\t\t}\n\t\t}, 1000 * 60 * 30));\n\t}\n\n\tprivate handleRefreshNetworkError(sessionId: string, refreshToken: string, scope: string, attempts: number = 1): Promise<boolean> {\n\t\treturn new Promise((resolve, _) => {\n\t\t\tif (attempts === 3) {\n\t\t\t\tLogger.error('Token refresh failed after 3 attempts');\n\t\t\t\treturn resolve(false);\n\t\t\t}\n\n\t\t\tif (attempts === 1) {\n\t\t\t\tconst token = this._tokens.find(token => token.sessionId === sessionId);\n\t\t\t\tif (token) {\n\t\t\t\t\ttoken.accessToken = undefined;\n\t\t\t\t\tonDidChangeSessions.fire({ added: [], removed: [], changed: [token.sessionId] });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst delayBeforeRetry = 5 * attempts * attempts;\n\n\t\t\tthis.clearSessionTimeout(sessionId);\n\n\t\t\tthis._refreshTimeouts.set(sessionId, setTimeout(async () => {\n\t\t\t\ttry {\n\t\t\t\t\tawait this.refreshToken(refreshToken, scope, sessionId);\n\t\t\t\t\treturn resolve(true);\n\t\t\t\t} catch (e) {\n\t\t\t\t\treturn resolve(await this.handleRefreshNetworkError(sessionId, refreshToken, scope, attempts + 1));\n\t\t\t\t}\n\t\t\t}, 1000 * delayBeforeRetry));\n\t\t});\n\t}\n\n\tpublic async logout(sessionId: string) {\n\t\tLogger.info(`Logging out of session '${sessionId}'`);\n\t\tthis.removeInMemorySessionData(sessionId);\n\n\t\tif (this._tokens.length === 0) {\n\t\t\tawait keychain.deleteToken();\n\t\t} else {\n\t\t\tthis.storeTokenData();\n\t\t}\n\t}\n\n\tpublic async clearSessions() {\n\t\tLogger.info('Logging out of all sessions');\n\t\tthis._tokens = [];\n\t\tawait keychain.deleteToken();\n\n\t\tthis._refreshTimeouts.forEach(timeout => {\n\t\t\tclearTimeout(timeout);\n\t\t});\n\n\t\tthis._refreshTimeouts.clear();\n\t}\n}\n","module.exports = require('crypto').randomBytes\n","module.exports = require(\"querystring\");","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as http from 'http';\nimport * as url from 'url';\nimport * as fs from 'fs';\nimport * as path from 'path';\n\ninterface Deferred<T> {\n\tresolve: (result: T | Promise<T>) => void;\n\treject: (reason: any) => void;\n}\n\n/**\n * Asserts that the argument passed in is neither undefined nor null.\n */\nfunction assertIsDefined<T>(arg: T | null | undefined): T {\n\tif (typeof (arg) === 'undefined' || arg === null) {\n\t\tthrow new Error('Assertion Failed: argument is undefined or null');\n\t}\n\n\treturn arg;\n}\n\nexport async function startServer(server: http.Server): Promise<string> {\n\tlet portTimer: NodeJS.Timer;\n\n\tfunction cancelPortTimer() {\n\t\tclearTimeout(portTimer);\n\t}\n\n\tconst port = new Promise<string>((resolve, reject) => {\n\t\tportTimer = setTimeout(() => {\n\t\t\treject(new Error('Timeout waiting for port'));\n\t\t}, 5000);\n\n\t\tserver.on('listening', () => {\n\t\t\tconst address = server.address();\n\t\t\tif (typeof address === 'string') {\n\t\t\t\tresolve(address);\n\t\t\t} else {\n\t\t\t\tresolve(assertIsDefined(address).port.toString());\n\t\t\t}\n\t\t});\n\n\t\tserver.on('error', _ => {\n\t\t\treject(new Error('Error listening to server'));\n\t\t});\n\n\t\tserver.on('close', () => {\n\t\t\treject(new Error('Closed'));\n\t\t});\n\n\t\tserver.listen(0);\n\t});\n\n\tport.then(cancelPortTimer, cancelPortTimer);\n\treturn port;\n}\n\nfunction sendFile(res: http.ServerResponse, filepath: string, contentType: string) {\n\tfs.readFile(filepath, (err, body) => {\n\t\tif (err) {\n\t\t\tconsole.error(err);\n\t\t\tres.writeHead(404);\n\t\t\tres.end();\n\t\t} else {\n\t\t\tres.writeHead(200, {\n\t\t\t\t'Content-Length': body.length,\n\t\t\t\t'Content-Type': contentType\n\t\t\t});\n\t\t\tres.end(body);\n\t\t}\n\t});\n}\n\nasync function callback(nonce: string, reqUrl: url.Url): Promise<string> {\n\tconst query = reqUrl.query;\n\tif (!query || typeof query === 'string') {\n\t\tthrow new Error('No query received.');\n\t}\n\n\tlet error = query.error_description || query.error;\n\n\tif (!error) {\n\t\tconst state = (query.state as string) || '';\n\t\tconst receivedNonce = (state.split(',')[1] || '').replace(/ /g, '+');\n\t\tif (receivedNonce !== nonce) {\n\t\t\terror = 'Nonce does not match.';\n\t\t}\n\t}\n\n\tconst code = query.code as string;\n\tif (!error && code) {\n\t\treturn code;\n\t}\n\n\tthrow new Error((error as string) || 'No code received.');\n}\n\nexport function createServer(nonce: string) {\n\ttype RedirectResult = { req: http.IncomingMessage; res: http.ServerResponse; } | { err: any; res: http.ServerResponse; };\n\tlet deferredRedirect: Deferred<RedirectResult>;\n\tconst redirectPromise = new Promise<RedirectResult>((resolve, reject) => deferredRedirect = { resolve, reject });\n\n\ttype CodeResult = { code: string; res: http.ServerResponse; } | { err: any; res: http.ServerResponse; };\n\tlet deferredCode: Deferred<CodeResult>;\n\tconst codePromise = new Promise<CodeResult>((resolve, reject) => deferredCode = { resolve, reject });\n\n\tconst codeTimer = setTimeout(() => {\n\t\tdeferredCode.reject(new Error('Timeout waiting for code'));\n\t}, 5 * 60 * 1000);\n\n\tfunction cancelCodeTimer() {\n\t\tclearTimeout(codeTimer);\n\t}\n\n\tconst server = http.createServer(function (req, res) {\n\t\tconst reqUrl = url.parse(req.url!, /* parseQueryString */ true);\n\t\tswitch (reqUrl.pathname) {\n\t\t\tcase '/signin':\n\t\t\t\tconst receivedNonce = ((reqUrl.query.nonce as string) || '').replace(/ /g, '+');\n\t\t\t\tif (receivedNonce === nonce) {\n\t\t\t\t\tdeferredRedirect.resolve({ req, res });\n\t\t\t\t} else {\n\t\t\t\t\tconst err = new Error('Nonce does not match.');\n\t\t\t\t\tdeferredRedirect.resolve({ err, res });\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase '/':\n\t\t\t\tsendFile(res, path.join(__dirname, '../media/auth.html'), 'text/html; charset=utf-8');\n\t\t\t\tbreak;\n\t\t\tcase '/auth.css':\n\t\t\t\tsendFile(res, path.join(__dirname, '../media/auth.css'), 'text/css; charset=utf-8');\n\t\t\t\tbreak;\n\t\t\tcase '/callback':\n\t\t\t\tdeferredCode.resolve(callback(nonce, reqUrl)\n\t\t\t\t\t.then(code => ({ code, res }), err => ({ err, res })));\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tres.writeHead(404);\n\t\t\t\tres.end();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tcodePromise.then(cancelCodeTimer, cancelCodeTimer);\n\treturn {\n\t\tserver,\n\t\tredirectPromise,\n\t\tcodePromise\n\t};\n}\n",null,"/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar path = require(\"path\");\r\nvar fs = require(\"fs\");\r\nvar toString = Object.prototype.toString;\r\nfunction isDefined(value) {\r\n    return typeof value !== 'undefined';\r\n}\r\nfunction isNumber(value) {\r\n    return toString.call(value) === '[object Number]';\r\n}\r\nfunction isString(value) {\r\n    return toString.call(value) === '[object String]';\r\n}\r\nfunction isBoolean(value) {\r\n    return value === true || value === false;\r\n}\r\nfunction readJsonFileSync(filename) {\r\n    return JSON.parse(fs.readFileSync(filename, 'utf8'));\r\n}\r\nvar MessageFormat;\r\n(function (MessageFormat) {\r\n    MessageFormat[\"file\"] = \"file\";\r\n    MessageFormat[\"bundle\"] = \"bundle\";\r\n    MessageFormat[\"both\"] = \"both\";\r\n})(MessageFormat = exports.MessageFormat || (exports.MessageFormat = {}));\r\nvar BundleFormat;\r\n(function (BundleFormat) {\r\n    // the nls.bundle format\r\n    BundleFormat[\"standalone\"] = \"standalone\";\r\n    BundleFormat[\"languagePack\"] = \"languagePack\";\r\n})(BundleFormat = exports.BundleFormat || (exports.BundleFormat = {}));\r\nvar LocalizeInfo;\r\n(function (LocalizeInfo) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && isDefined(candidate.key) && isDefined(candidate.comment);\r\n    }\r\n    LocalizeInfo.is = is;\r\n})(LocalizeInfo || (LocalizeInfo = {}));\r\nvar resolvedLanguage;\r\nvar resolvedBundles;\r\nvar options;\r\nvar isPseudo;\r\nfunction initializeSettings() {\r\n    options = { locale: undefined, language: undefined, languagePackSupport: false, cacheLanguageResolution: true, messageFormat: MessageFormat.bundle };\r\n    if (isString(process.env.VSCODE_NLS_CONFIG)) {\r\n        try {\r\n            var vscodeOptions = JSON.parse(process.env.VSCODE_NLS_CONFIG);\r\n            var language = void 0;\r\n            var locale = void 0;\r\n            if (vscodeOptions.availableLanguages) {\r\n                var value = vscodeOptions.availableLanguages['*'];\r\n                if (isString(value)) {\r\n                    language = value;\r\n                }\r\n            }\r\n            if (isString(vscodeOptions.locale)) {\r\n                options.locale = vscodeOptions.locale.toLowerCase();\r\n            }\r\n            if (language === undefined) {\r\n                options.language = options.locale;\r\n            }\r\n            else if (language !== 'en') {\r\n                options.language = language;\r\n            }\r\n            if (isBoolean(vscodeOptions._languagePackSupport)) {\r\n                options.languagePackSupport = vscodeOptions._languagePackSupport;\r\n            }\r\n            if (isString(vscodeOptions._cacheRoot)) {\r\n                options.cacheRoot = vscodeOptions._cacheRoot;\r\n            }\r\n            if (isString(vscodeOptions._languagePackId)) {\r\n                options.languagePackId = vscodeOptions._languagePackId;\r\n            }\r\n            if (isString(vscodeOptions._translationsConfigFile)) {\r\n                options.translationsConfigFile = vscodeOptions._translationsConfigFile;\r\n                try {\r\n                    options.translationsConfig = readJsonFileSync(options.translationsConfigFile);\r\n                }\r\n                catch (error) {\r\n                    // We can't read the translation config file. Mark the cache as corrupted.\r\n                    if (vscodeOptions._corruptedFile) {\r\n                        fs.writeFile(vscodeOptions._corruptedFile, 'corrupted', 'utf8', function (err) {\r\n                            console.error(err);\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        catch (_a) {\r\n            // Do nothing.\r\n        }\r\n    }\r\n    isPseudo = options.locale === 'pseudo';\r\n    resolvedLanguage = undefined;\r\n    resolvedBundles = Object.create(null);\r\n}\r\ninitializeSettings();\r\nfunction supportsLanguagePack() {\r\n    return options.languagePackSupport === true && options.cacheRoot !== undefined && options.languagePackId !== undefined && options.translationsConfigFile !== undefined\r\n        && options.translationsConfig !== undefined;\r\n}\r\nfunction format(message, args) {\r\n    var result;\r\n    if (isPseudo) {\r\n        // FF3B and FF3D is the Unicode zenkaku representation for [ and ]\r\n        message = '\\uFF3B' + message.replace(/[aouei]/g, '$&$&') + '\\uFF3D';\r\n    }\r\n    if (args.length === 0) {\r\n        result = message;\r\n    }\r\n    else {\r\n        result = message.replace(/\\{(\\d+)\\}/g, function (match, rest) {\r\n            var index = rest[0];\r\n            var arg = args[index];\r\n            var replacement = match;\r\n            if (typeof arg === 'string') {\r\n                replacement = arg;\r\n            }\r\n            else if (typeof arg === 'number' || typeof arg === 'boolean' || arg === void 0 || arg === null) {\r\n                replacement = String(arg);\r\n            }\r\n            return replacement;\r\n        });\r\n    }\r\n    return result;\r\n}\r\nfunction createScopedLocalizeFunction(messages) {\r\n    return function (key, message) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        if (isNumber(key)) {\r\n            if (key >= messages.length) {\r\n                console.error(\"Broken localize call found. Index out of bounds. Stacktrace is\\n: \" + new Error('').stack);\r\n                return;\r\n            }\r\n            return format(messages[key], args);\r\n        }\r\n        else {\r\n            if (isString(message)) {\r\n                console.warn(\"Message \" + message + \" didn't get externalized correctly.\");\r\n                return format(message, args);\r\n            }\r\n            else {\r\n                console.error(\"Broken localize call found. Stacktrace is\\n: \" + new Error('').stack);\r\n            }\r\n        }\r\n    };\r\n}\r\nfunction localize(key, message) {\r\n    var args = [];\r\n    for (var _i = 2; _i < arguments.length; _i++) {\r\n        args[_i - 2] = arguments[_i];\r\n    }\r\n    return format(message, args);\r\n}\r\nfunction resolveLanguage(file) {\r\n    var resolvedLanguage;\r\n    if (options.cacheLanguageResolution && resolvedLanguage) {\r\n        resolvedLanguage = resolvedLanguage;\r\n    }\r\n    else {\r\n        if (isPseudo || !options.language) {\r\n            resolvedLanguage = '.nls.json';\r\n        }\r\n        else {\r\n            var locale = options.language;\r\n            while (locale) {\r\n                var candidate = '.nls.' + locale + '.json';\r\n                if (fs.existsSync(file + candidate)) {\r\n                    resolvedLanguage = candidate;\r\n                    break;\r\n                }\r\n                else {\r\n                    var index = locale.lastIndexOf('-');\r\n                    if (index > 0) {\r\n                        locale = locale.substring(0, index);\r\n                    }\r\n                    else {\r\n                        resolvedLanguage = '.nls.json';\r\n                        locale = null;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (options.cacheLanguageResolution) {\r\n            resolvedLanguage = resolvedLanguage;\r\n        }\r\n    }\r\n    return file + resolvedLanguage;\r\n}\r\nfunction findInTheBoxBundle(root) {\r\n    var language = options.language;\r\n    while (language) {\r\n        var candidate = path.join(root, \"nls.bundle.\" + language + \".json\");\r\n        if (fs.existsSync(candidate)) {\r\n            return candidate;\r\n        }\r\n        else {\r\n            var index = language.lastIndexOf('-');\r\n            if (index > 0) {\r\n                language = language.substring(0, index);\r\n            }\r\n            else {\r\n                language = undefined;\r\n            }\r\n        }\r\n    }\r\n    // Test if we can reslove the default bundle.\r\n    if (language === undefined) {\r\n        var candidate = path.join(root, 'nls.bundle.json');\r\n        if (fs.existsSync(candidate)) {\r\n            return candidate;\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nfunction mkdir(directory) {\r\n    try {\r\n        fs.mkdirSync(directory);\r\n    }\r\n    catch (err) {\r\n        if (err.code === 'EEXIST') {\r\n            return;\r\n        }\r\n        else if (err.code === 'ENOENT') {\r\n            var parent = path.dirname(directory);\r\n            if (parent !== directory) {\r\n                mkdir(parent);\r\n                fs.mkdirSync(directory);\r\n            }\r\n        }\r\n        else {\r\n            throw err;\r\n        }\r\n    }\r\n}\r\nfunction createDefaultNlsBundle(folder) {\r\n    var metaData = readJsonFileSync(path.join(folder, 'nls.metadata.json'));\r\n    var result = Object.create(null);\r\n    for (var module_1 in metaData) {\r\n        var entry = metaData[module_1];\r\n        result[module_1] = entry.messages;\r\n    }\r\n    return result;\r\n}\r\nfunction createNLSBundle(header, metaDataPath) {\r\n    var languagePackLocation = options.translationsConfig[header.id];\r\n    if (!languagePackLocation) {\r\n        return undefined;\r\n    }\r\n    var languagePack = readJsonFileSync(languagePackLocation).contents;\r\n    var metaData = readJsonFileSync(path.join(metaDataPath, 'nls.metadata.json'));\r\n    var result = Object.create(null);\r\n    for (var module_2 in metaData) {\r\n        var entry = metaData[module_2];\r\n        var translations = languagePack[header.outDir + \"/\" + module_2];\r\n        if (translations) {\r\n            var resultMessages = [];\r\n            for (var i = 0; i < entry.keys.length; i++) {\r\n                var messageKey = entry.keys[i];\r\n                var key = isString(messageKey) ? messageKey : messageKey.key;\r\n                var translatedMessage = translations[key];\r\n                if (translatedMessage === undefined) {\r\n                    translatedMessage = entry.messages[i];\r\n                }\r\n                resultMessages.push(translatedMessage);\r\n            }\r\n            result[module_2] = resultMessages;\r\n        }\r\n        else {\r\n            result[module_2] = entry.messages;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction touch(file) {\r\n    var d = new Date();\r\n    fs.utimes(file, d, d, function () {\r\n        // Do nothing. Ignore\r\n    });\r\n}\r\nfunction cacheBundle(key, bundle) {\r\n    resolvedBundles[key] = bundle;\r\n    return bundle;\r\n}\r\nfunction loadNlsBundleOrCreateFromI18n(header, bundlePath) {\r\n    var result;\r\n    var bundle = path.join(options.cacheRoot, header.id + \"-\" + header.hash + \".json\");\r\n    var useMemoryOnly = false;\r\n    var writeBundle = false;\r\n    try {\r\n        result = JSON.parse(fs.readFileSync(bundle, { encoding: 'utf8', flag: 'r' }));\r\n        touch(bundle);\r\n        return result;\r\n    }\r\n    catch (err) {\r\n        if (err.code === 'ENOENT') {\r\n            writeBundle = true;\r\n        }\r\n        else if (err instanceof SyntaxError) {\r\n            // We have a syntax error. So no valid JSON. Use\r\n            console.log(\"Syntax error parsing message bundle: \" + err.message + \".\");\r\n            fs.unlink(bundle, function (err) {\r\n                if (err) {\r\n                    console.error(\"Deleting corrupted bundle \" + bundle + \" failed.\");\r\n                }\r\n            });\r\n            useMemoryOnly = true;\r\n        }\r\n        else {\r\n            throw err;\r\n        }\r\n    }\r\n    result = createNLSBundle(header, bundlePath);\r\n    if (!result || useMemoryOnly) {\r\n        return result;\r\n    }\r\n    if (writeBundle) {\r\n        try {\r\n            fs.writeFileSync(bundle, JSON.stringify(result), { encoding: 'utf8', flag: 'wx' });\r\n        }\r\n        catch (err) {\r\n            if (err.code === 'EEXIST') {\r\n                return result;\r\n            }\r\n            throw err;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction loadDefaultNlsBundle(bundlePath) {\r\n    try {\r\n        return createDefaultNlsBundle(bundlePath);\r\n    }\r\n    catch (err) {\r\n        console.log(\"Generating default bundle from meta data failed.\", err);\r\n        return undefined;\r\n    }\r\n}\r\nfunction loadNlsBundle(header, bundlePath) {\r\n    var result;\r\n    // Core decided to use a language pack. Do the same in the extension\r\n    if (supportsLanguagePack()) {\r\n        try {\r\n            result = loadNlsBundleOrCreateFromI18n(header, bundlePath);\r\n        }\r\n        catch (err) {\r\n            console.log(\"Load or create bundle failed \", err);\r\n        }\r\n    }\r\n    if (!result) {\r\n        // No language pack found, but core is running in language pack mode\r\n        // Don't try to use old in the box bundles since the might be stale\r\n        // Fall right back to the default bundle.\r\n        if (options.languagePackSupport) {\r\n            return loadDefaultNlsBundle(bundlePath);\r\n        }\r\n        var candidate = findInTheBoxBundle(bundlePath);\r\n        if (candidate) {\r\n            try {\r\n                return readJsonFileSync(candidate);\r\n            }\r\n            catch (err) {\r\n                console.log(\"Loading in the box message bundle failed.\", err);\r\n            }\r\n        }\r\n        result = loadDefaultNlsBundle(bundlePath);\r\n    }\r\n    return result;\r\n}\r\nfunction tryFindMetaDataHeaderFile(file) {\r\n    var result;\r\n    var dirname = path.dirname(file);\r\n    while (true) {\r\n        result = path.join(dirname, 'nls.metadata.header.json');\r\n        if (fs.existsSync(result)) {\r\n            break;\r\n        }\r\n        var parent = path.dirname(dirname);\r\n        if (parent === dirname) {\r\n            result = undefined;\r\n            break;\r\n        }\r\n        else {\r\n            dirname = parent;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction loadMessageBundle(file) {\r\n    if (!file) {\r\n        // No file. We are in dev mode. Return the default\r\n        // localize function.\r\n        return localize;\r\n    }\r\n    // Remove extension since we load json files.\r\n    var ext = path.extname(file);\r\n    if (ext) {\r\n        file = file.substr(0, file.length - ext.length);\r\n    }\r\n    if (options.messageFormat === MessageFormat.both || options.messageFormat === MessageFormat.bundle) {\r\n        var headerFile = tryFindMetaDataHeaderFile(file);\r\n        if (headerFile) {\r\n            var bundlePath = path.dirname(headerFile);\r\n            var bundle = resolvedBundles[bundlePath];\r\n            if (bundle === undefined) {\r\n                try {\r\n                    var header = JSON.parse(fs.readFileSync(headerFile, 'utf8'));\r\n                    try {\r\n                        var nlsBundle = loadNlsBundle(header, bundlePath);\r\n                        bundle = cacheBundle(bundlePath, nlsBundle ? { header: header, nlsBundle: nlsBundle } : null);\r\n                    }\r\n                    catch (err) {\r\n                        console.error('Failed to load nls bundle', err);\r\n                        bundle = cacheBundle(bundlePath, null);\r\n                    }\r\n                }\r\n                catch (err) {\r\n                    console.error('Failed to read header file', err);\r\n                    bundle = cacheBundle(bundlePath, null);\r\n                }\r\n            }\r\n            if (bundle) {\r\n                var module_3 = file.substr(bundlePath.length + 1).replace(/\\\\/g, '/');\r\n                var messages = bundle.nlsBundle[module_3];\r\n                if (messages === undefined) {\r\n                    console.error(\"Messages for file \" + file + \" not found. See console for details.\");\r\n                    return function () {\r\n                        return 'Messages not found.';\r\n                    };\r\n                }\r\n                return createScopedLocalizeFunction(messages);\r\n            }\r\n        }\r\n    }\r\n    if (options.messageFormat === MessageFormat.both || options.messageFormat === MessageFormat.file) {\r\n        // Try to load a single file bundle\r\n        try {\r\n            var json = readJsonFileSync(resolveLanguage(file));\r\n            if (Array.isArray(json)) {\r\n                return createScopedLocalizeFunction(json);\r\n            }\r\n            else {\r\n                if (isDefined(json.messages) && isDefined(json.keys)) {\r\n                    return createScopedLocalizeFunction(json.messages);\r\n                }\r\n                else {\r\n                    console.error(\"String bundle '\" + file + \"' uses an unsupported format.\");\r\n                    return function () {\r\n                        return 'File bundle has unsupported format. See console for details';\r\n                    };\r\n                }\r\n            }\r\n        }\r\n        catch (err) {\r\n            if (err.code !== 'ENOENT') {\r\n                console.error('Failed to load single file bundle', err);\r\n            }\r\n        }\r\n    }\r\n    console.error(\"Failed to load message bundle for file \" + file);\r\n    return function () {\r\n        return 'Failed to load message bundle. See console for details.';\r\n    };\r\n}\r\nexports.loadMessageBundle = loadMessageBundle;\r\nfunction config(opts) {\r\n    if (opts) {\r\n        if (isString(opts.locale)) {\r\n            options.locale = opts.locale.toLowerCase();\r\n            options.language = options.locale;\r\n            resolvedLanguage = undefined;\r\n            resolvedBundles = Object.create(null);\r\n        }\r\n        if (opts.messageFormat !== undefined) {\r\n            options.messageFormat = opts.messageFormat;\r\n        }\r\n        if (opts.bundleFormat === BundleFormat.standalone && options.languagePackSupport === true) {\r\n            options.languagePackSupport = false;\r\n        }\r\n    }\r\n    isPseudo = options.locale === 'pseudo';\r\n    return loadMessageBundle;\r\n}\r\nexports.config = config;\r\n//# sourceMappingURL=main.js.map","module.exports = require(\"keytar\");","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport function toBase64UrlEncoding(base64string: string) {\n\treturn base64string.replace(/=/g, '').replace(/\\+/g, '-').replace(/\\//g, '_'); // Need to use base64url encoding\n}\n","import Stream from 'stream';\nimport http from 'http';\nimport Url from 'url';\nimport https from 'https';\nimport zlib from 'zlib';\n\n// Based on https://github.com/tmpvar/jsdom/blob/aa85b2abf07766ff7bf5c1f6daafb3726f2f2db5/lib/jsdom/living/blob.js\n\n// fix for \"Readable\" isn't a named export issue\nconst Readable = Stream.Readable;\n\nconst BUFFER = Symbol('buffer');\nconst TYPE = Symbol('type');\n\nclass Blob {\n\tconstructor() {\n\t\tthis[TYPE] = '';\n\n\t\tconst blobParts = arguments[0];\n\t\tconst options = arguments[1];\n\n\t\tconst buffers = [];\n\t\tlet size = 0;\n\n\t\tif (blobParts) {\n\t\t\tconst a = blobParts;\n\t\t\tconst length = Number(a.length);\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst element = a[i];\n\t\t\t\tlet buffer;\n\t\t\t\tif (element instanceof Buffer) {\n\t\t\t\t\tbuffer = element;\n\t\t\t\t} else if (ArrayBuffer.isView(element)) {\n\t\t\t\t\tbuffer = Buffer.from(element.buffer, element.byteOffset, element.byteLength);\n\t\t\t\t} else if (element instanceof ArrayBuffer) {\n\t\t\t\t\tbuffer = Buffer.from(element);\n\t\t\t\t} else if (element instanceof Blob) {\n\t\t\t\t\tbuffer = element[BUFFER];\n\t\t\t\t} else {\n\t\t\t\t\tbuffer = Buffer.from(typeof element === 'string' ? element : String(element));\n\t\t\t\t}\n\t\t\t\tsize += buffer.length;\n\t\t\t\tbuffers.push(buffer);\n\t\t\t}\n\t\t}\n\n\t\tthis[BUFFER] = Buffer.concat(buffers);\n\n\t\tlet type = options && options.type !== undefined && String(options.type).toLowerCase();\n\t\tif (type && !/[^\\u0020-\\u007E]/.test(type)) {\n\t\t\tthis[TYPE] = type;\n\t\t}\n\t}\n\tget size() {\n\t\treturn this[BUFFER].length;\n\t}\n\tget type() {\n\t\treturn this[TYPE];\n\t}\n\ttext() {\n\t\treturn Promise.resolve(this[BUFFER].toString());\n\t}\n\tarrayBuffer() {\n\t\tconst buf = this[BUFFER];\n\t\tconst ab = buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\treturn Promise.resolve(ab);\n\t}\n\tstream() {\n\t\tconst readable = new Readable();\n\t\treadable._read = function () {};\n\t\treadable.push(this[BUFFER]);\n\t\treadable.push(null);\n\t\treturn readable;\n\t}\n\ttoString() {\n\t\treturn '[object Blob]';\n\t}\n\tslice() {\n\t\tconst size = this.size;\n\n\t\tconst start = arguments[0];\n\t\tconst end = arguments[1];\n\t\tlet relativeStart, relativeEnd;\n\t\tif (start === undefined) {\n\t\t\trelativeStart = 0;\n\t\t} else if (start < 0) {\n\t\t\trelativeStart = Math.max(size + start, 0);\n\t\t} else {\n\t\t\trelativeStart = Math.min(start, size);\n\t\t}\n\t\tif (end === undefined) {\n\t\t\trelativeEnd = size;\n\t\t} else if (end < 0) {\n\t\t\trelativeEnd = Math.max(size + end, 0);\n\t\t} else {\n\t\t\trelativeEnd = Math.min(end, size);\n\t\t}\n\t\tconst span = Math.max(relativeEnd - relativeStart, 0);\n\n\t\tconst buffer = this[BUFFER];\n\t\tconst slicedBuffer = buffer.slice(relativeStart, relativeStart + span);\n\t\tconst blob = new Blob([], { type: arguments[2] });\n\t\tblob[BUFFER] = slicedBuffer;\n\t\treturn blob;\n\t}\n}\n\nObject.defineProperties(Blob.prototype, {\n\tsize: { enumerable: true },\n\ttype: { enumerable: true },\n\tslice: { enumerable: true }\n});\n\nObject.defineProperty(Blob.prototype, Symbol.toStringTag, {\n\tvalue: 'Blob',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * fetch-error.js\n *\n * FetchError interface for operational errors\n */\n\n/**\n * Create FetchError instance\n *\n * @param   String      message      Error message for human\n * @param   String      type         Error type for machine\n * @param   String      systemError  For Node.js system error\n * @return  FetchError\n */\nfunction FetchError(message, type, systemError) {\n  Error.call(this, message);\n\n  this.message = message;\n  this.type = type;\n\n  // when err.type is `system`, err.code contains system error code\n  if (systemError) {\n    this.code = this.errno = systemError.code;\n  }\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nFetchError.prototype = Object.create(Error.prototype);\nFetchError.prototype.constructor = FetchError;\nFetchError.prototype.name = 'FetchError';\n\nlet convert;\ntry {\n\tconvert = require('encoding').convert;\n} catch (e) {}\n\nconst INTERNALS = Symbol('Body internals');\n\n// fix an issue where \"PassThrough\" isn't a named export for node <10\nconst PassThrough = Stream.PassThrough;\n\n/**\n * Body mixin\n *\n * Ref: https://fetch.spec.whatwg.org/#body\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nfunction Body(body) {\n\tvar _this = this;\n\n\tvar _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n\t    _ref$size = _ref.size;\n\n\tlet size = _ref$size === undefined ? 0 : _ref$size;\n\tvar _ref$timeout = _ref.timeout;\n\tlet timeout = _ref$timeout === undefined ? 0 : _ref$timeout;\n\n\tif (body == null) {\n\t\t// body is undefined or null\n\t\tbody = null;\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\tbody = Buffer.from(body.toString());\n\t} else if (isBlob(body)) ; else if (Buffer.isBuffer(body)) ; else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\tbody = Buffer.from(body);\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\tbody = Buffer.from(body.buffer, body.byteOffset, body.byteLength);\n\t} else if (body instanceof Stream) ; else {\n\t\t// none of the above\n\t\t// coerce to string then buffer\n\t\tbody = Buffer.from(String(body));\n\t}\n\tthis[INTERNALS] = {\n\t\tbody,\n\t\tdisturbed: false,\n\t\terror: null\n\t};\n\tthis.size = size;\n\tthis.timeout = timeout;\n\n\tif (body instanceof Stream) {\n\t\tbody.on('error', function (err) {\n\t\t\tconst error = err.name === 'AbortError' ? err : new FetchError(`Invalid response body while trying to fetch ${_this.url}: ${err.message}`, 'system', err);\n\t\t\t_this[INTERNALS].error = error;\n\t\t});\n\t}\n}\n\nBody.prototype = {\n\tget body() {\n\t\treturn this[INTERNALS].body;\n\t},\n\n\tget bodyUsed() {\n\t\treturn this[INTERNALS].disturbed;\n\t},\n\n\t/**\n  * Decode response as ArrayBuffer\n  *\n  * @return  Promise\n  */\n\tarrayBuffer() {\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\t});\n\t},\n\n\t/**\n  * Return raw response as Blob\n  *\n  * @return Promise\n  */\n\tblob() {\n\t\tlet ct = this.headers && this.headers.get('content-type') || '';\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn Object.assign(\n\t\t\t// Prevent copying\n\t\t\tnew Blob([], {\n\t\t\t\ttype: ct.toLowerCase()\n\t\t\t}), {\n\t\t\t\t[BUFFER]: buf\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n  * Decode response as json\n  *\n  * @return  Promise\n  */\n\tjson() {\n\t\tvar _this2 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(buffer.toString());\n\t\t\t} catch (err) {\n\t\t\t\treturn Body.Promise.reject(new FetchError(`invalid json response body at ${_this2.url} reason: ${err.message}`, 'invalid-json'));\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n  * Decode response as text\n  *\n  * @return  Promise\n  */\n\ttext() {\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn buffer.toString();\n\t\t});\n\t},\n\n\t/**\n  * Decode response as buffer (non-spec api)\n  *\n  * @return  Promise\n  */\n\tbuffer() {\n\t\treturn consumeBody.call(this);\n\t},\n\n\t/**\n  * Decode response as text, while automatically detecting the encoding and\n  * trying to decode to UTF-8 (non-spec api)\n  *\n  * @return  Promise\n  */\n\ttextConverted() {\n\t\tvar _this3 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn convertBody(buffer, _this3.headers);\n\t\t});\n\t}\n};\n\n// In browsers, all properties are enumerable.\nObject.defineProperties(Body.prototype, {\n\tbody: { enumerable: true },\n\tbodyUsed: { enumerable: true },\n\tarrayBuffer: { enumerable: true },\n\tblob: { enumerable: true },\n\tjson: { enumerable: true },\n\ttext: { enumerable: true }\n});\n\nBody.mixIn = function (proto) {\n\tfor (const name of Object.getOwnPropertyNames(Body.prototype)) {\n\t\t// istanbul ignore else: future proof\n\t\tif (!(name in proto)) {\n\t\t\tconst desc = Object.getOwnPropertyDescriptor(Body.prototype, name);\n\t\t\tObject.defineProperty(proto, name, desc);\n\t\t}\n\t}\n};\n\n/**\n * Consume and convert an entire Body to a Buffer.\n *\n * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body\n *\n * @return  Promise\n */\nfunction consumeBody() {\n\tvar _this4 = this;\n\n\tif (this[INTERNALS].disturbed) {\n\t\treturn Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));\n\t}\n\n\tthis[INTERNALS].disturbed = true;\n\n\tif (this[INTERNALS].error) {\n\t\treturn Body.Promise.reject(this[INTERNALS].error);\n\t}\n\n\tlet body = this.body;\n\n\t// body is null\n\tif (body === null) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is blob\n\tif (isBlob(body)) {\n\t\tbody = body.stream();\n\t}\n\n\t// body is buffer\n\tif (Buffer.isBuffer(body)) {\n\t\treturn Body.Promise.resolve(body);\n\t}\n\n\t// istanbul ignore if: should never happen\n\tif (!(body instanceof Stream)) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is stream\n\t// get ready to actually consume the body\n\tlet accum = [];\n\tlet accumBytes = 0;\n\tlet abort = false;\n\n\treturn new Body.Promise(function (resolve, reject) {\n\t\tlet resTimeout;\n\n\t\t// allow timeout on slow response body\n\t\tif (_this4.timeout) {\n\t\t\tresTimeout = setTimeout(function () {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`Response timeout while trying to fetch ${_this4.url} (over ${_this4.timeout}ms)`, 'body-timeout'));\n\t\t\t}, _this4.timeout);\n\t\t}\n\n\t\t// handle stream errors\n\t\tbody.on('error', function (err) {\n\t\t\tif (err.name === 'AbortError') {\n\t\t\t\t// if the request was aborted, reject with this Error\n\t\t\t\tabort = true;\n\t\t\t\treject(err);\n\t\t\t} else {\n\t\t\t\t// other errors, such as incorrect content-encoding\n\t\t\t\treject(new FetchError(`Invalid response body while trying to fetch ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\n\t\tbody.on('data', function (chunk) {\n\t\t\tif (abort || chunk === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_this4.size && accumBytes + chunk.length > _this4.size) {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`content size at ${_this4.url} over limit: ${_this4.size}`, 'max-size'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\taccumBytes += chunk.length;\n\t\t\taccum.push(chunk);\n\t\t});\n\n\t\tbody.on('end', function () {\n\t\t\tif (abort) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearTimeout(resTimeout);\n\n\t\t\ttry {\n\t\t\t\tresolve(Buffer.concat(accum, accumBytes));\n\t\t\t} catch (err) {\n\t\t\t\t// handle streams that have accumulated too much data (issue #414)\n\t\t\t\treject(new FetchError(`Could not create Buffer from response body for ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Detect buffer encoding and convert to target encoding\n * ref: http://www.w3.org/TR/2011/WD-html5-20110113/parsing.html#determining-the-character-encoding\n *\n * @param   Buffer  buffer    Incoming buffer\n * @param   String  encoding  Target encoding\n * @return  String\n */\nfunction convertBody(buffer, headers) {\n\tif (typeof convert !== 'function') {\n\t\tthrow new Error('The package `encoding` must be installed to use the textConverted() function');\n\t}\n\n\tconst ct = headers.get('content-type');\n\tlet charset = 'utf-8';\n\tlet res, str;\n\n\t// header\n\tif (ct) {\n\t\tres = /charset=([^;]*)/i.exec(ct);\n\t}\n\n\t// no charset in content type, peek at response body for at most 1024 bytes\n\tstr = buffer.slice(0, 1024).toString();\n\n\t// html5\n\tif (!res && str) {\n\t\tres = /<meta.+?charset=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// html4\n\tif (!res && str) {\n\t\tres = /<meta[\\s]+?http-equiv=(['\"])content-type\\1[\\s]+?content=(['\"])(.+?)\\2/i.exec(str);\n\n\t\tif (res) {\n\t\t\tres = /charset=(.*)/i.exec(res.pop());\n\t\t}\n\t}\n\n\t// xml\n\tif (!res && str) {\n\t\tres = /<\\?xml.+?encoding=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// found charset\n\tif (res) {\n\t\tcharset = res.pop();\n\n\t\t// prevent decode issues when sites use incorrect encoding\n\t\t// ref: https://hsivonen.fi/encoding-menu/\n\t\tif (charset === 'gb2312' || charset === 'gbk') {\n\t\t\tcharset = 'gb18030';\n\t\t}\n\t}\n\n\t// turn raw buffers into a single utf-8 buffer\n\treturn convert(buffer, 'UTF-8', charset).toString();\n}\n\n/**\n * Detect a URLSearchParams object\n * ref: https://github.com/bitinn/node-fetch/issues/296#issuecomment-307598143\n *\n * @param   Object  obj     Object to detect by type or brand\n * @return  String\n */\nfunction isURLSearchParams(obj) {\n\t// Duck-typing as a necessary condition.\n\tif (typeof obj !== 'object' || typeof obj.append !== 'function' || typeof obj.delete !== 'function' || typeof obj.get !== 'function' || typeof obj.getAll !== 'function' || typeof obj.has !== 'function' || typeof obj.set !== 'function') {\n\t\treturn false;\n\t}\n\n\t// Brand-checking and more duck-typing as optional condition.\n\treturn obj.constructor.name === 'URLSearchParams' || Object.prototype.toString.call(obj) === '[object URLSearchParams]' || typeof obj.sort === 'function';\n}\n\n/**\n * Check if `obj` is a W3C `Blob` object (which `File` inherits from)\n * @param  {*} obj\n * @return {boolean}\n */\nfunction isBlob(obj) {\n\treturn typeof obj === 'object' && typeof obj.arrayBuffer === 'function' && typeof obj.type === 'string' && typeof obj.stream === 'function' && typeof obj.constructor === 'function' && typeof obj.constructor.name === 'string' && /^(Blob|File)$/.test(obj.constructor.name) && /^(Blob|File)$/.test(obj[Symbol.toStringTag]);\n}\n\n/**\n * Clone body given Res/Req instance\n *\n * @param   Mixed  instance  Response or Request instance\n * @return  Mixed\n */\nfunction clone(instance) {\n\tlet p1, p2;\n\tlet body = instance.body;\n\n\t// don't allow cloning a used body\n\tif (instance.bodyUsed) {\n\t\tthrow new Error('cannot clone body after it is used');\n\t}\n\n\t// check that body is a stream and not form-data object\n\t// note: we can't clone the form-data object without having it as a dependency\n\tif (body instanceof Stream && typeof body.getBoundary !== 'function') {\n\t\t// tee instance body\n\t\tp1 = new PassThrough();\n\t\tp2 = new PassThrough();\n\t\tbody.pipe(p1);\n\t\tbody.pipe(p2);\n\t\t// set instance body to teed body and return the other teed body\n\t\tinstance[INTERNALS].body = p1;\n\t\tbody = p2;\n\t}\n\n\treturn body;\n}\n\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present.\n *\n * @param   Mixed  instance  Any options.body input\n */\nfunction extractContentType(body) {\n\tif (body === null) {\n\t\t// body is null\n\t\treturn null;\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t\treturn 'text/plain;charset=UTF-8';\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\treturn 'application/x-www-form-urlencoded;charset=UTF-8';\n\t} else if (isBlob(body)) {\n\t\t// body is blob\n\t\treturn body.type || null;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn null;\n\t} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\treturn null;\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\treturn null;\n\t} else if (typeof body.getBoundary === 'function') {\n\t\t// detect form data input from form-data module\n\t\treturn `multipart/form-data;boundary=${body.getBoundary()}`;\n\t} else if (body instanceof Stream) {\n\t\t// body is stream\n\t\t// can't really do much about this\n\t\treturn null;\n\t} else {\n\t\t// Body constructor defaults other things to string\n\t\treturn 'text/plain;charset=UTF-8';\n\t}\n}\n\n/**\n * The Fetch Standard treats this as if \"total bytes\" is a property on the body.\n * For us, we have to explicitly get it with a function.\n *\n * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes\n *\n * @param   Body    instance   Instance of Body\n * @return  Number?            Number of bytes, or null if not possible\n */\nfunction getTotalBytes(instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\treturn 0;\n\t} else if (isBlob(body)) {\n\t\treturn body.size;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn body.length;\n\t} else if (body && typeof body.getLengthSync === 'function') {\n\t\t// detect form data input from form-data module\n\t\tif (body._lengthRetrievers && body._lengthRetrievers.length == 0 || // 1.x\n\t\tbody.hasKnownLength && body.hasKnownLength()) {\n\t\t\t// 2.x\n\t\t\treturn body.getLengthSync();\n\t\t}\n\t\treturn null;\n\t} else {\n\t\t// body is stream\n\t\treturn null;\n\t}\n}\n\n/**\n * Write a Body to a Node.js WritableStream (e.g. http.Request) object.\n *\n * @param   Body    instance   Instance of Body\n * @return  Void\n */\nfunction writeToStream(dest, instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\tdest.end();\n\t} else if (isBlob(body)) {\n\t\tbody.stream().pipe(dest);\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\tdest.write(body);\n\t\tdest.end();\n\t} else {\n\t\t// body is stream\n\t\tbody.pipe(dest);\n\t}\n}\n\n// expose Promise\nBody.Promise = global.Promise;\n\n/**\n * headers.js\n *\n * Headers class offers convenient helpers\n */\n\nconst invalidTokenRegex = /[^\\^_`a-zA-Z\\-0-9!#$%&'*+.|~]/;\nconst invalidHeaderCharRegex = /[^\\t\\x20-\\x7e\\x80-\\xff]/;\n\nfunction validateName(name) {\n\tname = `${name}`;\n\tif (invalidTokenRegex.test(name) || name === '') {\n\t\tthrow new TypeError(`${name} is not a legal HTTP header name`);\n\t}\n}\n\nfunction validateValue(value) {\n\tvalue = `${value}`;\n\tif (invalidHeaderCharRegex.test(value)) {\n\t\tthrow new TypeError(`${value} is not a legal HTTP header value`);\n\t}\n}\n\n/**\n * Find the key in the map object given a header name.\n *\n * Returns undefined if not found.\n *\n * @param   String  name  Header name\n * @return  String|Undefined\n */\nfunction find(map, name) {\n\tname = name.toLowerCase();\n\tfor (const key in map) {\n\t\tif (key.toLowerCase() === name) {\n\t\t\treturn key;\n\t\t}\n\t}\n\treturn undefined;\n}\n\nconst MAP = Symbol('map');\nclass Headers {\n\t/**\n  * Headers class\n  *\n  * @param   Object  headers  Response headers\n  * @return  Void\n  */\n\tconstructor() {\n\t\tlet init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n\t\tthis[MAP] = Object.create(null);\n\n\t\tif (init instanceof Headers) {\n\t\t\tconst rawHeaders = init.raw();\n\t\t\tconst headerNames = Object.keys(rawHeaders);\n\n\t\t\tfor (const headerName of headerNames) {\n\t\t\t\tfor (const value of rawHeaders[headerName]) {\n\t\t\t\t\tthis.append(headerName, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// We don't worry about converting prop to ByteString here as append()\n\t\t// will handle it.\n\t\tif (init == null) ; else if (typeof init === 'object') {\n\t\t\tconst method = init[Symbol.iterator];\n\t\t\tif (method != null) {\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Header pairs must be iterable');\n\t\t\t\t}\n\n\t\t\t\t// sequence<sequence<ByteString>>\n\t\t\t\t// Note: per spec we have to first exhaust the lists then process them\n\t\t\t\tconst pairs = [];\n\t\t\t\tfor (const pair of init) {\n\t\t\t\t\tif (typeof pair !== 'object' || typeof pair[Symbol.iterator] !== 'function') {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be iterable');\n\t\t\t\t\t}\n\t\t\t\t\tpairs.push(Array.from(pair));\n\t\t\t\t}\n\n\t\t\t\tfor (const pair of pairs) {\n\t\t\t\t\tif (pair.length !== 2) {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be a name/value tuple');\n\t\t\t\t\t}\n\t\t\t\t\tthis.append(pair[0], pair[1]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// record<ByteString, ByteString>\n\t\t\t\tfor (const key of Object.keys(init)) {\n\t\t\t\t\tconst value = init[key];\n\t\t\t\t\tthis.append(key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Provided initializer must be an object');\n\t\t}\n\t}\n\n\t/**\n  * Return combined header value given name\n  *\n  * @param   String  name  Header name\n  * @return  Mixed\n  */\n\tget(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key === undefined) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this[MAP][key].join(', ');\n\t}\n\n\t/**\n  * Iterate over all headers\n  *\n  * @param   Function  callback  Executed for each item with parameters (value, name, thisArg)\n  * @param   Boolean   thisArg   `this` context for callback function\n  * @return  Void\n  */\n\tforEach(callback) {\n\t\tlet thisArg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\tlet pairs = getHeaders(this);\n\t\tlet i = 0;\n\t\twhile (i < pairs.length) {\n\t\t\tvar _pairs$i = pairs[i];\n\t\t\tconst name = _pairs$i[0],\n\t\t\t      value = _pairs$i[1];\n\n\t\t\tcallback.call(thisArg, value, name, this);\n\t\t\tpairs = getHeaders(this);\n\t\t\ti++;\n\t\t}\n\t}\n\n\t/**\n  * Overwrite header values given name\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tset(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tthis[MAP][key !== undefined ? key : name] = [value];\n\t}\n\n\t/**\n  * Append a value onto existing header\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tappend(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tthis[MAP][key].push(value);\n\t\t} else {\n\t\t\tthis[MAP][name] = [value];\n\t\t}\n\t}\n\n\t/**\n  * Check for header name existence\n  *\n  * @param   String   name  Header name\n  * @return  Boolean\n  */\n\thas(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\treturn find(this[MAP], name) !== undefined;\n\t}\n\n\t/**\n  * Delete all header values given name\n  *\n  * @param   String  name  Header name\n  * @return  Void\n  */\n\tdelete(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tdelete this[MAP][key];\n\t\t}\n\t}\n\n\t/**\n  * Return raw headers (non-spec api)\n  *\n  * @return  Object\n  */\n\traw() {\n\t\treturn this[MAP];\n\t}\n\n\t/**\n  * Get an iterator on keys.\n  *\n  * @return  Iterator\n  */\n\tkeys() {\n\t\treturn createHeadersIterator(this, 'key');\n\t}\n\n\t/**\n  * Get an iterator on values.\n  *\n  * @return  Iterator\n  */\n\tvalues() {\n\t\treturn createHeadersIterator(this, 'value');\n\t}\n\n\t/**\n  * Get an iterator on entries.\n  *\n  * This is the default iterator of the Headers object.\n  *\n  * @return  Iterator\n  */\n\t[Symbol.iterator]() {\n\t\treturn createHeadersIterator(this, 'key+value');\n\t}\n}\nHeaders.prototype.entries = Headers.prototype[Symbol.iterator];\n\nObject.defineProperty(Headers.prototype, Symbol.toStringTag, {\n\tvalue: 'Headers',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Headers.prototype, {\n\tget: { enumerable: true },\n\tforEach: { enumerable: true },\n\tset: { enumerable: true },\n\tappend: { enumerable: true },\n\thas: { enumerable: true },\n\tdelete: { enumerable: true },\n\tkeys: { enumerable: true },\n\tvalues: { enumerable: true },\n\tentries: { enumerable: true }\n});\n\nfunction getHeaders(headers) {\n\tlet kind = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'key+value';\n\n\tconst keys = Object.keys(headers[MAP]).sort();\n\treturn keys.map(kind === 'key' ? function (k) {\n\t\treturn k.toLowerCase();\n\t} : kind === 'value' ? function (k) {\n\t\treturn headers[MAP][k].join(', ');\n\t} : function (k) {\n\t\treturn [k.toLowerCase(), headers[MAP][k].join(', ')];\n\t});\n}\n\nconst INTERNAL = Symbol('internal');\n\nfunction createHeadersIterator(target, kind) {\n\tconst iterator = Object.create(HeadersIteratorPrototype);\n\titerator[INTERNAL] = {\n\t\ttarget,\n\t\tkind,\n\t\tindex: 0\n\t};\n\treturn iterator;\n}\n\nconst HeadersIteratorPrototype = Object.setPrototypeOf({\n\tnext() {\n\t\t// istanbul ignore if\n\t\tif (!this || Object.getPrototypeOf(this) !== HeadersIteratorPrototype) {\n\t\t\tthrow new TypeError('Value of `this` is not a HeadersIterator');\n\t\t}\n\n\t\tvar _INTERNAL = this[INTERNAL];\n\t\tconst target = _INTERNAL.target,\n\t\t      kind = _INTERNAL.kind,\n\t\t      index = _INTERNAL.index;\n\n\t\tconst values = getHeaders(target, kind);\n\t\tconst len = values.length;\n\t\tif (index >= len) {\n\t\t\treturn {\n\t\t\t\tvalue: undefined,\n\t\t\t\tdone: true\n\t\t\t};\n\t\t}\n\n\t\tthis[INTERNAL].index = index + 1;\n\n\t\treturn {\n\t\t\tvalue: values[index],\n\t\t\tdone: false\n\t\t};\n\t}\n}, Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));\n\nObject.defineProperty(HeadersIteratorPrototype, Symbol.toStringTag, {\n\tvalue: 'HeadersIterator',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * Export the Headers object in a form that Node.js can consume.\n *\n * @param   Headers  headers\n * @return  Object\n */\nfunction exportNodeCompatibleHeaders(headers) {\n\tconst obj = Object.assign({ __proto__: null }, headers[MAP]);\n\n\t// http.request() only supports string as Host header. This hack makes\n\t// specifying custom Host header possible.\n\tconst hostHeaderKey = find(headers[MAP], 'Host');\n\tif (hostHeaderKey !== undefined) {\n\t\tobj[hostHeaderKey] = obj[hostHeaderKey][0];\n\t}\n\n\treturn obj;\n}\n\n/**\n * Create a Headers object from an object of headers, ignoring those that do\n * not conform to HTTP grammar productions.\n *\n * @param   Object  obj  Object of headers\n * @return  Headers\n */\nfunction createHeadersLenient(obj) {\n\tconst headers = new Headers();\n\tfor (const name of Object.keys(obj)) {\n\t\tif (invalidTokenRegex.test(name)) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (Array.isArray(obj[name])) {\n\t\t\tfor (const val of obj[name]) {\n\t\t\t\tif (invalidHeaderCharRegex.test(val)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (headers[MAP][name] === undefined) {\n\t\t\t\t\theaders[MAP][name] = [val];\n\t\t\t\t} else {\n\t\t\t\t\theaders[MAP][name].push(val);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!invalidHeaderCharRegex.test(obj[name])) {\n\t\t\theaders[MAP][name] = [obj[name]];\n\t\t}\n\t}\n\treturn headers;\n}\n\nconst INTERNALS$1 = Symbol('Response internals');\n\n// fix an issue where \"STATUS_CODES\" aren't a named export for node <10\nconst STATUS_CODES = http.STATUS_CODES;\n\n/**\n * Response class\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nclass Response {\n\tconstructor() {\n\t\tlet body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\t\tlet opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tBody.call(this, body, opts);\n\n\t\tconst status = opts.status || 200;\n\t\tconst headers = new Headers(opts.headers);\n\n\t\tif (body != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(body);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tthis[INTERNALS$1] = {\n\t\t\turl: opts.url,\n\t\t\tstatus,\n\t\t\tstatusText: opts.statusText || STATUS_CODES[status],\n\t\t\theaders,\n\t\t\tcounter: opts.counter\n\t\t};\n\t}\n\n\tget url() {\n\t\treturn this[INTERNALS$1].url || '';\n\t}\n\n\tget status() {\n\t\treturn this[INTERNALS$1].status;\n\t}\n\n\t/**\n  * Convenience property representing if the request ended normally\n  */\n\tget ok() {\n\t\treturn this[INTERNALS$1].status >= 200 && this[INTERNALS$1].status < 300;\n\t}\n\n\tget redirected() {\n\t\treturn this[INTERNALS$1].counter > 0;\n\t}\n\n\tget statusText() {\n\t\treturn this[INTERNALS$1].statusText;\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$1].headers;\n\t}\n\n\t/**\n  * Clone this response\n  *\n  * @return  Response\n  */\n\tclone() {\n\t\treturn new Response(clone(this), {\n\t\t\turl: this.url,\n\t\t\tstatus: this.status,\n\t\t\tstatusText: this.statusText,\n\t\t\theaders: this.headers,\n\t\t\tok: this.ok,\n\t\t\tredirected: this.redirected\n\t\t});\n\t}\n}\n\nBody.mixIn(Response.prototype);\n\nObject.defineProperties(Response.prototype, {\n\turl: { enumerable: true },\n\tstatus: { enumerable: true },\n\tok: { enumerable: true },\n\tredirected: { enumerable: true },\n\tstatusText: { enumerable: true },\n\theaders: { enumerable: true },\n\tclone: { enumerable: true }\n});\n\nObject.defineProperty(Response.prototype, Symbol.toStringTag, {\n\tvalue: 'Response',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nconst INTERNALS$2 = Symbol('Request internals');\n\n// fix an issue where \"format\", \"parse\" aren't a named export for node <10\nconst parse_url = Url.parse;\nconst format_url = Url.format;\n\nconst streamDestructionSupported = 'destroy' in Stream.Readable.prototype;\n\n/**\n * Check if a value is an instance of Request.\n *\n * @param   Mixed   input\n * @return  Boolean\n */\nfunction isRequest(input) {\n\treturn typeof input === 'object' && typeof input[INTERNALS$2] === 'object';\n}\n\nfunction isAbortSignal(signal) {\n\tconst proto = signal && typeof signal === 'object' && Object.getPrototypeOf(signal);\n\treturn !!(proto && proto.constructor.name === 'AbortSignal');\n}\n\n/**\n * Request class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nclass Request {\n\tconstructor(input) {\n\t\tlet init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tlet parsedURL;\n\n\t\t// normalize input\n\t\tif (!isRequest(input)) {\n\t\t\tif (input && input.href) {\n\t\t\t\t// in order to support Node.js' Url objects; though WHATWG's URL objects\n\t\t\t\t// will fall into this branch also (since their `toString()` will return\n\t\t\t\t// `href` property anyway)\n\t\t\t\tparsedURL = parse_url(input.href);\n\t\t\t} else {\n\t\t\t\t// coerce input to a string before attempting to parse\n\t\t\t\tparsedURL = parse_url(`${input}`);\n\t\t\t}\n\t\t\tinput = {};\n\t\t} else {\n\t\t\tparsedURL = parse_url(input.url);\n\t\t}\n\n\t\tlet method = init.method || input.method || 'GET';\n\t\tmethod = method.toUpperCase();\n\n\t\tif ((init.body != null || isRequest(input) && input.body !== null) && (method === 'GET' || method === 'HEAD')) {\n\t\t\tthrow new TypeError('Request with GET/HEAD method cannot have body');\n\t\t}\n\n\t\tlet inputBody = init.body != null ? init.body : isRequest(input) && input.body !== null ? clone(input) : null;\n\n\t\tBody.call(this, inputBody, {\n\t\t\ttimeout: init.timeout || input.timeout || 0,\n\t\t\tsize: init.size || input.size || 0\n\t\t});\n\n\t\tconst headers = new Headers(init.headers || input.headers || {});\n\n\t\tif (inputBody != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(inputBody);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tlet signal = isRequest(input) ? input.signal : null;\n\t\tif ('signal' in init) signal = init.signal;\n\n\t\tif (signal != null && !isAbortSignal(signal)) {\n\t\t\tthrow new TypeError('Expected signal to be an instanceof AbortSignal');\n\t\t}\n\n\t\tthis[INTERNALS$2] = {\n\t\t\tmethod,\n\t\t\tredirect: init.redirect || input.redirect || 'follow',\n\t\t\theaders,\n\t\t\tparsedURL,\n\t\t\tsignal\n\t\t};\n\n\t\t// node-fetch-only options\n\t\tthis.follow = init.follow !== undefined ? init.follow : input.follow !== undefined ? input.follow : 20;\n\t\tthis.compress = init.compress !== undefined ? init.compress : input.compress !== undefined ? input.compress : true;\n\t\tthis.counter = init.counter || input.counter || 0;\n\t\tthis.agent = init.agent || input.agent;\n\t}\n\n\tget method() {\n\t\treturn this[INTERNALS$2].method;\n\t}\n\n\tget url() {\n\t\treturn format_url(this[INTERNALS$2].parsedURL);\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$2].headers;\n\t}\n\n\tget redirect() {\n\t\treturn this[INTERNALS$2].redirect;\n\t}\n\n\tget signal() {\n\t\treturn this[INTERNALS$2].signal;\n\t}\n\n\t/**\n  * Clone this request\n  *\n  * @return  Request\n  */\n\tclone() {\n\t\treturn new Request(this);\n\t}\n}\n\nBody.mixIn(Request.prototype);\n\nObject.defineProperty(Request.prototype, Symbol.toStringTag, {\n\tvalue: 'Request',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Request.prototype, {\n\tmethod: { enumerable: true },\n\turl: { enumerable: true },\n\theaders: { enumerable: true },\n\tredirect: { enumerable: true },\n\tclone: { enumerable: true },\n\tsignal: { enumerable: true }\n});\n\n/**\n * Convert a Request to Node.js http request options.\n *\n * @param   Request  A Request instance\n * @return  Object   The options object to be passed to http.request\n */\nfunction getNodeRequestOptions(request) {\n\tconst parsedURL = request[INTERNALS$2].parsedURL;\n\tconst headers = new Headers(request[INTERNALS$2].headers);\n\n\t// fetch step 1.3\n\tif (!headers.has('Accept')) {\n\t\theaders.set('Accept', '*/*');\n\t}\n\n\t// Basic fetch\n\tif (!parsedURL.protocol || !parsedURL.hostname) {\n\t\tthrow new TypeError('Only absolute URLs are supported');\n\t}\n\n\tif (!/^https?:$/.test(parsedURL.protocol)) {\n\t\tthrow new TypeError('Only HTTP(S) protocols are supported');\n\t}\n\n\tif (request.signal && request.body instanceof Stream.Readable && !streamDestructionSupported) {\n\t\tthrow new Error('Cancellation of streamed requests with AbortSignal is not supported in node < 8');\n\t}\n\n\t// HTTP-network-or-cache fetch steps 2.4-2.7\n\tlet contentLengthValue = null;\n\tif (request.body == null && /^(POST|PUT)$/i.test(request.method)) {\n\t\tcontentLengthValue = '0';\n\t}\n\tif (request.body != null) {\n\t\tconst totalBytes = getTotalBytes(request);\n\t\tif (typeof totalBytes === 'number') {\n\t\t\tcontentLengthValue = String(totalBytes);\n\t\t}\n\t}\n\tif (contentLengthValue) {\n\t\theaders.set('Content-Length', contentLengthValue);\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.11\n\tif (!headers.has('User-Agent')) {\n\t\theaders.set('User-Agent', 'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)');\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.15\n\tif (request.compress && !headers.has('Accept-Encoding')) {\n\t\theaders.set('Accept-Encoding', 'gzip,deflate');\n\t}\n\n\tlet agent = request.agent;\n\tif (typeof agent === 'function') {\n\t\tagent = agent(parsedURL);\n\t}\n\n\tif (!headers.has('Connection') && !agent) {\n\t\theaders.set('Connection', 'close');\n\t}\n\n\t// HTTP-network fetch step 4.2\n\t// chunked encoding is handled by Node.js\n\n\treturn Object.assign({}, parsedURL, {\n\t\tmethod: request.method,\n\t\theaders: exportNodeCompatibleHeaders(headers),\n\t\tagent\n\t});\n}\n\n/**\n * abort-error.js\n *\n * AbortError interface for cancelled requests\n */\n\n/**\n * Create AbortError instance\n *\n * @param   String      message      Error message for human\n * @return  AbortError\n */\nfunction AbortError(message) {\n  Error.call(this, message);\n\n  this.type = 'aborted';\n  this.message = message;\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nAbortError.prototype = Object.create(Error.prototype);\nAbortError.prototype.constructor = AbortError;\nAbortError.prototype.name = 'AbortError';\n\n// fix an issue where \"PassThrough\", \"resolve\" aren't a named export for node <10\nconst PassThrough$1 = Stream.PassThrough;\nconst resolve_url = Url.resolve;\n\n/**\n * Fetch function\n *\n * @param   Mixed    url   Absolute url or Request instance\n * @param   Object   opts  Fetch options\n * @return  Promise\n */\nfunction fetch(url, opts) {\n\n\t// allow custom promise\n\tif (!fetch.Promise) {\n\t\tthrow new Error('native promise missing, set fetch.Promise to your favorite alternative');\n\t}\n\n\tBody.Promise = fetch.Promise;\n\n\t// wrap http.request into fetch\n\treturn new fetch.Promise(function (resolve, reject) {\n\t\t// build request object\n\t\tconst request = new Request(url, opts);\n\t\tconst options = getNodeRequestOptions(request);\n\n\t\tconst send = (options.protocol === 'https:' ? https : http).request;\n\t\tconst signal = request.signal;\n\n\t\tlet response = null;\n\n\t\tconst abort = function abort() {\n\t\t\tlet error = new AbortError('The user aborted a request.');\n\t\t\treject(error);\n\t\t\tif (request.body && request.body instanceof Stream.Readable) {\n\t\t\t\trequest.body.destroy(error);\n\t\t\t}\n\t\t\tif (!response || !response.body) return;\n\t\t\tresponse.body.emit('error', error);\n\t\t};\n\n\t\tif (signal && signal.aborted) {\n\t\t\tabort();\n\t\t\treturn;\n\t\t}\n\n\t\tconst abortAndFinalize = function abortAndFinalize() {\n\t\t\tabort();\n\t\t\tfinalize();\n\t\t};\n\n\t\t// send request\n\t\tconst req = send(options);\n\t\tlet reqTimeout;\n\n\t\tif (signal) {\n\t\t\tsignal.addEventListener('abort', abortAndFinalize);\n\t\t}\n\n\t\tfunction finalize() {\n\t\t\treq.abort();\n\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\tclearTimeout(reqTimeout);\n\t\t}\n\n\t\tif (request.timeout) {\n\t\t\treq.once('socket', function (socket) {\n\t\t\t\treqTimeout = setTimeout(function () {\n\t\t\t\t\treject(new FetchError(`network timeout at: ${request.url}`, 'request-timeout'));\n\t\t\t\t\tfinalize();\n\t\t\t\t}, request.timeout);\n\t\t\t});\n\t\t}\n\n\t\treq.on('error', function (err) {\n\t\t\treject(new FetchError(`request to ${request.url} failed, reason: ${err.message}`, 'system', err));\n\t\t\tfinalize();\n\t\t});\n\n\t\treq.on('response', function (res) {\n\t\t\tclearTimeout(reqTimeout);\n\n\t\t\tconst headers = createHeadersLenient(res.headers);\n\n\t\t\t// HTTP fetch step 5\n\t\t\tif (fetch.isRedirect(res.statusCode)) {\n\t\t\t\t// HTTP fetch step 5.2\n\t\t\t\tconst location = headers.get('Location');\n\n\t\t\t\t// HTTP fetch step 5.3\n\t\t\t\tconst locationURL = location === null ? null : resolve_url(request.url, location);\n\n\t\t\t\t// HTTP fetch step 5.5\n\t\t\t\tswitch (request.redirect) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\treject(new FetchError(`redirect mode is set to error: ${request.url}`, 'no-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t// node-fetch-specific step: make manual redirect a bit easier to use by setting the Location header value to the resolved URL.\n\t\t\t\t\t\tif (locationURL !== null) {\n\t\t\t\t\t\t\t// handle corrupted header\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\theaders.set('Location', locationURL);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\t// istanbul ignore next: nodejs server prevent invalid response headers, we can't test this through normal request\n\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'follow':\n\t\t\t\t\t\t// HTTP-redirect fetch step 2\n\t\t\t\t\t\tif (locationURL === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 5\n\t\t\t\t\t\tif (request.counter >= request.follow) {\n\t\t\t\t\t\t\treject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 6 (counter increment)\n\t\t\t\t\t\t// Create a new Request object.\n\t\t\t\t\t\tconst requestOpts = {\n\t\t\t\t\t\t\theaders: new Headers(request.headers),\n\t\t\t\t\t\t\tfollow: request.follow,\n\t\t\t\t\t\t\tcounter: request.counter + 1,\n\t\t\t\t\t\t\tagent: request.agent,\n\t\t\t\t\t\t\tcompress: request.compress,\n\t\t\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t\t\tbody: request.body,\n\t\t\t\t\t\t\tsignal: request.signal,\n\t\t\t\t\t\t\ttimeout: request.timeout\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 9\n\t\t\t\t\t\tif (res.statusCode !== 303 && request.body && getTotalBytes(request) === null) {\n\t\t\t\t\t\t\treject(new FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 11\n\t\t\t\t\t\tif (res.statusCode === 303 || (res.statusCode === 301 || res.statusCode === 302) && request.method === 'POST') {\n\t\t\t\t\t\t\trequestOpts.method = 'GET';\n\t\t\t\t\t\t\trequestOpts.body = undefined;\n\t\t\t\t\t\t\trequestOpts.headers.delete('content-length');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 15\n\t\t\t\t\t\tresolve(fetch(new Request(locationURL, requestOpts)));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// prepare response\n\t\t\tres.once('end', function () {\n\t\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\t});\n\t\t\tlet body = res.pipe(new PassThrough$1());\n\n\t\t\tconst response_options = {\n\t\t\t\turl: request.url,\n\t\t\t\tstatus: res.statusCode,\n\t\t\t\tstatusText: res.statusMessage,\n\t\t\t\theaders: headers,\n\t\t\t\tsize: request.size,\n\t\t\t\ttimeout: request.timeout,\n\t\t\t\tcounter: request.counter\n\t\t\t};\n\n\t\t\t// HTTP-network fetch step 12.1.1.3\n\t\t\tconst codings = headers.get('Content-Encoding');\n\n\t\t\t// HTTP-network fetch step 12.1.1.4: handle content codings\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no Content-Encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!request.compress || request.method === 'HEAD' || codings === null || res.statusCode === 204 || res.statusCode === 304) {\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For Node v6+\n\t\t\t// Be less strict when decoding compressed responses, since sometimes\n\t\t\t// servers send slightly invalid responses that are still accepted\n\t\t\t// by common browsers.\n\t\t\t// Always using Z_SYNC_FLUSH is what cURL does.\n\t\t\tconst zlibOptions = {\n\t\t\t\tflush: zlib.Z_SYNC_FLUSH,\n\t\t\t\tfinishFlush: zlib.Z_SYNC_FLUSH\n\t\t\t};\n\n\t\t\t// for gzip\n\t\t\tif (codings == 'gzip' || codings == 'x-gzip') {\n\t\t\t\tbody = body.pipe(zlib.createGunzip(zlibOptions));\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for deflate\n\t\t\tif (codings == 'deflate' || codings == 'x-deflate') {\n\t\t\t\t// handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tconst raw = res.pipe(new PassThrough$1());\n\t\t\t\traw.once('data', function (chunk) {\n\t\t\t\t\t// see http://stackoverflow.com/questions/37519828\n\t\t\t\t\tif ((chunk[0] & 0x0F) === 0x08) {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflate());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflateRaw());\n\t\t\t\t\t}\n\t\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for br\n\t\t\tif (codings == 'br' && typeof zlib.createBrotliDecompress === 'function') {\n\t\t\t\tbody = body.pipe(zlib.createBrotliDecompress());\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// otherwise, use response as-is\n\t\t\tresponse = new Response(body, response_options);\n\t\t\tresolve(response);\n\t\t});\n\n\t\twriteToStream(req, request);\n\t});\n}\n/**\n * Redirect code matching\n *\n * @param   Number   code  Status code\n * @return  Boolean\n */\nfetch.isRedirect = function (code) {\n\treturn code === 301 || code === 302 || code === 303 || code === 307 || code === 308;\n};\n\n// expose Promise\nfetch.Promise = global.Promise;\n\nexport default fetch;\nexport { Headers, Request, Response, FetchError };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n'use strict';\n\nexport async function sha256(s: string | Uint8Array): Promise<string> {\n\treturn (require('crypto')).createHash('sha256').update(s).digest('base64');\n}\n","/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nprocess.env['APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL'] = true;\nvar fs = require(\"fs\");\nvar os = require(\"os\");\nvar path = require(\"path\");\nvar vscode = require(\"vscode\");\nvar appInsights = require(\"applicationinsights\");\nvar TelemetryReporter = /** @class */ (function () {\n    // tslint:disable-next-line\n    function TelemetryReporter(extensionId, extensionVersion, key) {\n        var _this = this;\n        this.extensionId = extensionId;\n        this.extensionVersion = extensionVersion;\n        this.userOptIn = false;\n        var logFilePath = process.env['VSCODE_LOGS'] || '';\n        if (logFilePath && extensionId && process.env['VSCODE_LOG_LEVEL'] === 'trace') {\n            logFilePath = path.join(logFilePath, extensionId + \".txt\");\n            this.logStream = fs.createWriteStream(logFilePath, { flags: 'a', encoding: 'utf8', autoClose: true });\n        }\n        this.updateUserOptIn(key);\n        this.configListener = vscode.workspace.onDidChangeConfiguration(function () { return _this.updateUserOptIn(key); });\n    }\n    TelemetryReporter.prototype.updateUserOptIn = function (key) {\n        var config = vscode.workspace.getConfiguration(TelemetryReporter.TELEMETRY_CONFIG_ID);\n        if (this.userOptIn !== config.get(TelemetryReporter.TELEMETRY_CONFIG_ENABLED_ID, true)) {\n            this.userOptIn = config.get(TelemetryReporter.TELEMETRY_CONFIG_ENABLED_ID, true);\n            if (this.userOptIn) {\n                this.createAppInsightsClient(key);\n            }\n            else {\n                this.dispose();\n            }\n        }\n    };\n    TelemetryReporter.prototype.createAppInsightsClient = function (key) {\n        //check if another instance is already initialized\n        if (appInsights.defaultClient) {\n            this.appInsightsClient = new appInsights.TelemetryClient(key);\n            // no other way to enable offline mode\n            this.appInsightsClient.channel.setUseDiskRetryCaching(true);\n        }\n        else {\n            appInsights.setup(key)\n                .setAutoCollectRequests(false)\n                .setAutoCollectPerformance(false)\n                .setAutoCollectExceptions(false)\n                .setAutoCollectDependencies(false)\n                .setAutoDependencyCorrelation(false)\n                .setAutoCollectConsole(false)\n                .setUseDiskRetryCaching(true)\n                .start();\n            this.appInsightsClient = appInsights.defaultClient;\n        }\n        this.appInsightsClient.commonProperties = this.getCommonProperties();\n        if (vscode && vscode.env) {\n            this.appInsightsClient.context.tags[this.appInsightsClient.context.keys.userId] = vscode.env.machineId;\n            this.appInsightsClient.context.tags[this.appInsightsClient.context.keys.sessionId] = vscode.env.sessionId;\n        }\n        //check if it's an Asimov key to change the endpoint\n        if (key && key.indexOf('AIF-') === 0) {\n            this.appInsightsClient.config.endpointUrl = \"https://vortex.data.microsoft.com/collect/v1\";\n        }\n    };\n    // __GDPR__COMMON__ \"common.os\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.platformversion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.extname\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.extversion\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.vscodemachineid\" : { \"endPoint\": \"MacAddressHash\", \"classification\": \"EndUserPseudonymizedInformation\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.vscodesessionid\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.vscodeversion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    TelemetryReporter.prototype.getCommonProperties = function () {\n        var commonProperties = Object.create(null);\n        commonProperties['common.os'] = os.platform();\n        commonProperties['common.platformversion'] = (os.release() || '').replace(/^(\\d+)(\\.\\d+)?(\\.\\d+)?(.*)/, '$1$2$3');\n        commonProperties['common.extname'] = this.extensionId;\n        commonProperties['common.extversion'] = this.extensionVersion;\n        if (vscode && vscode.env) {\n            commonProperties['common.vscodemachineid'] = vscode.env.machineId;\n            commonProperties['common.vscodesessionid'] = vscode.env.sessionId;\n            commonProperties['common.vscodeversion'] = vscode.version;\n        }\n        return commonProperties;\n    };\n    TelemetryReporter.prototype.sendTelemetryEvent = function (eventName, properties, measurements) {\n        if (this.userOptIn && eventName && this.appInsightsClient) {\n            this.appInsightsClient.trackEvent({\n                name: this.extensionId + \"/\" + eventName,\n                properties: properties,\n                measurements: measurements\n            });\n            if (this.logStream) {\n                this.logStream.write(\"telemetry/\" + eventName + \" \" + JSON.stringify({ properties: properties, measurements: measurements }) + \"\\n\");\n            }\n        }\n    };\n    TelemetryReporter.prototype.dispose = function () {\n        var _this = this;\n        this.configListener.dispose();\n        var flushEventsToLogger = new Promise(function (resolve) {\n            if (!_this.logStream) {\n                return resolve(void 0);\n            }\n            _this.logStream.on('finish', resolve);\n            _this.logStream.end();\n        });\n        var flushEventsToAI = new Promise(function (resolve) {\n            if (_this.appInsightsClient) {\n                _this.appInsightsClient.flush({\n                    callback: function () {\n                        // all data flushed\n                        _this.appInsightsClient = undefined;\n                        resolve(void 0);\n                    }\n                });\n            }\n            else {\n                resolve(void 0);\n            }\n        });\n        return Promise.all([flushEventsToAI, flushEventsToLogger]);\n    };\n    TelemetryReporter.TELEMETRY_CONFIG_ID = 'telemetry';\n    TelemetryReporter.TELEMETRY_CONFIG_ENABLED_ID = 'enableTelemetry';\n    return TelemetryReporter;\n}());\nexports.default = TelemetryReporter;\n//# sourceMappingURL=telemetryReporter.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar CorrelationContextManager = require(\"./AutoCollection/CorrelationContextManager\"); // Keep this first\r\nvar AutoCollectConsole = require(\"./AutoCollection/Console\");\r\nvar AutoCollectExceptions = require(\"./AutoCollection/Exceptions\");\r\nvar AutoCollectPerformance = require(\"./AutoCollection/Performance\");\r\nvar AutoCollectHttpDependencies = require(\"./AutoCollection/HttpDependencies\");\r\nvar AutoCollectHttpRequests = require(\"./AutoCollection/HttpRequests\");\r\nvar Logging = require(\"./Library/Logging\");\r\n// We export these imports so that SDK users may use these classes directly.\r\n// They're exposed using \"export import\" so that types are passed along as expected\r\nexports.TelemetryClient = require(\"./Library/NodeClient\");\r\nexports.Contracts = require(\"./Declarations/Contracts\");\r\n// Default autocollection configuration\r\nvar _isConsole = true;\r\nvar _isConsoleLog = false;\r\nvar _isExceptions = true;\r\nvar _isPerformance = true;\r\nvar _isRequests = true;\r\nvar _isDependencies = true;\r\nvar _isDiskRetry = true;\r\nvar _isCorrelating = true;\r\nvar _diskRetryInterval = undefined;\r\nvar _diskRetryMaxBytes = undefined;\r\nvar _console;\r\nvar _exceptions;\r\nvar _performance;\r\nvar _serverRequests;\r\nvar _clientRequests;\r\nvar _isStarted = false;\r\n/**\r\n * Initializes the default client. Should be called after setting\r\n * configuration options.\r\n *\r\n * @param instrumentationKey the instrumentation key to use. Optional, if\r\n * this is not specified, the value will be read from the environment\r\n * variable APPINSIGHTS_INSTRUMENTATIONKEY.\r\n * @returns {Configuration} the configuration class to initialize\r\n * and start the SDK.\r\n */\r\nfunction setup(instrumentationKey) {\r\n    if (!exports.defaultClient) {\r\n        exports.defaultClient = new exports.TelemetryClient(instrumentationKey);\r\n        _console = new AutoCollectConsole(exports.defaultClient);\r\n        _exceptions = new AutoCollectExceptions(exports.defaultClient);\r\n        _performance = new AutoCollectPerformance(exports.defaultClient);\r\n        _serverRequests = new AutoCollectHttpRequests(exports.defaultClient);\r\n        _clientRequests = new AutoCollectHttpDependencies(exports.defaultClient);\r\n    }\r\n    else {\r\n        Logging.info(\"The default client is already setup\");\r\n    }\r\n    if (exports.defaultClient && exports.defaultClient.channel) {\r\n        exports.defaultClient.channel.setUseDiskRetryCaching(_isDiskRetry, _diskRetryInterval, _diskRetryMaxBytes);\r\n    }\r\n    return Configuration;\r\n}\r\nexports.setup = setup;\r\n/**\r\n * Starts automatic collection of telemetry. Prior to calling start no\r\n * telemetry will be *automatically* collected, though manual collection\r\n * is enabled.\r\n * @returns {ApplicationInsights} this class\r\n */\r\nfunction start() {\r\n    if (!!exports.defaultClient) {\r\n        _isStarted = true;\r\n        _console.enable(_isConsole, _isConsoleLog);\r\n        _exceptions.enable(_isExceptions);\r\n        _performance.enable(_isPerformance);\r\n        _serverRequests.useAutoCorrelation(_isCorrelating);\r\n        _serverRequests.enable(_isRequests);\r\n        _clientRequests.enable(_isDependencies);\r\n    }\r\n    else {\r\n        Logging.warn(\"Start cannot be called before setup\");\r\n    }\r\n    return Configuration;\r\n}\r\nexports.start = start;\r\n/**\r\n * Returns an object that is shared across all code handling a given request.\r\n * This can be used similarly to thread-local storage in other languages.\r\n * Properties set on this object will be available to telemetry processors.\r\n *\r\n * Do not store sensitive information here.\r\n * Custom properties set on this object can be exposed in a future SDK\r\n * release via outgoing HTTP headers.\r\n * This is to allow for correlating data cross-component.\r\n *\r\n * This method will return null if automatic dependency correlation is disabled.\r\n * @returns A plain object for request storage or null if automatic dependency correlation is disabled.\r\n */\r\nfunction getCorrelationContext() {\r\n    if (_isCorrelating) {\r\n        return CorrelationContextManager.CorrelationContextManager.getCurrentContext();\r\n    }\r\n    return null;\r\n}\r\nexports.getCorrelationContext = getCorrelationContext;\r\n/**\r\n * Returns a function that will get the same correlation context within its\r\n * function body as the code executing this function.\r\n * Use this method if automatic dependency correlation is not propagating\r\n * correctly to an asynchronous callback.\r\n */\r\nfunction wrapWithCorrelationContext(fn) {\r\n    return CorrelationContextManager.CorrelationContextManager.wrapCallback(fn);\r\n}\r\nexports.wrapWithCorrelationContext = wrapWithCorrelationContext;\r\n/**\r\n * The active configuration for global SDK behaviors, such as autocollection.\r\n */\r\nvar Configuration = (function () {\r\n    function Configuration() {\r\n    }\r\n    /**\r\n     * Sets the state of console and logger tracking (enabled by default for third-party loggers only)\r\n     * @param value if true logger activity will be sent to Application Insights\r\n     * @param collectConsoleLog if true, logger autocollection will include console.log calls (default false)\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectConsole = function (value, collectConsoleLog) {\r\n        if (collectConsoleLog === void 0) { collectConsoleLog = false; }\r\n        _isConsole = value;\r\n        _isConsoleLog = collectConsoleLog;\r\n        if (_isStarted) {\r\n            _console.enable(value, collectConsoleLog);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of exception tracking (enabled by default)\r\n     * @param value if true uncaught exceptions will be sent to Application Insights\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectExceptions = function (value) {\r\n        _isExceptions = value;\r\n        if (_isStarted) {\r\n            _exceptions.enable(value);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of performance tracking (enabled by default)\r\n     * @param value if true performance counters will be collected every second and sent to Application Insights\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectPerformance = function (value) {\r\n        _isPerformance = value;\r\n        if (_isStarted) {\r\n            _performance.enable(value);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of request tracking (enabled by default)\r\n     * @param value if true requests will be sent to Application Insights\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectRequests = function (value) {\r\n        _isRequests = value;\r\n        if (_isStarted) {\r\n            _serverRequests.enable(value);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of dependency tracking (enabled by default)\r\n     * @param value if true dependencies will be sent to Application Insights\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectDependencies = function (value) {\r\n        _isDependencies = value;\r\n        if (_isStarted) {\r\n            _clientRequests.enable(value);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of automatic dependency correlation (enabled by default)\r\n     * @param value if true dependencies will be correlated with requests\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoDependencyCorrelation = function (value) {\r\n        _isCorrelating = value;\r\n        if (_isStarted) {\r\n            _serverRequests.useAutoCorrelation(value);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Enable or disable disk-backed retry caching to cache events when client is offline (enabled by default)\r\n     * Note that this method only applies to the default client. Disk-backed retry caching is disabled by default for additional clients.\r\n     * For enable for additional clients, use client.channel.setUseDiskRetryCaching(true).\r\n     * These cached events are stored in your system or user's temporary directory and access restricted to your user when possible.\r\n     * @param value if true events that occured while client is offline will be cached on disk\r\n     * @param resendInterval The wait interval for resending cached events.\r\n     * @param maxBytesOnDisk The maximum size (in bytes) that the created temporary directory for cache events can grow to, before caching is disabled.\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setUseDiskRetryCaching = function (value, resendInterval, maxBytesOnDisk) {\r\n        _isDiskRetry = value;\r\n        _diskRetryInterval = resendInterval;\r\n        _diskRetryMaxBytes = maxBytesOnDisk;\r\n        if (exports.defaultClient && exports.defaultClient.channel) {\r\n            exports.defaultClient.channel.setUseDiskRetryCaching(value, resendInterval, maxBytesOnDisk);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Enables debug and warning logging for AppInsights itself.\r\n     * @param enableDebugLogging if true, enables debug logging\r\n     * @param enableWarningLogging if true, enables warning logging\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setInternalLogging = function (enableDebugLogging, enableWarningLogging) {\r\n        if (enableDebugLogging === void 0) { enableDebugLogging = false; }\r\n        if (enableWarningLogging === void 0) { enableWarningLogging = true; }\r\n        Logging.enableDebug = enableDebugLogging;\r\n        Logging.disableWarnings = !enableWarningLogging;\r\n        return Configuration;\r\n    };\r\n    // Convenience shortcut to ApplicationInsights.start\r\n    Configuration.start = start;\r\n    return Configuration;\r\n}());\r\nexports.Configuration = Configuration;\r\n/**\r\n * Disposes the default client and all the auto collectors so they can be reinitialized with different configuration\r\n*/\r\nfunction dispose() {\r\n    exports.defaultClient = null;\r\n    _isStarted = false;\r\n    if (_console) {\r\n        _console.dispose();\r\n    }\r\n    if (_exceptions) {\r\n        _exceptions.dispose();\r\n    }\r\n    if (_performance) {\r\n        _performance.dispose();\r\n    }\r\n    if (_serverRequests) {\r\n        _serverRequests.dispose();\r\n    }\r\n    if (_clientRequests) {\r\n        _clientRequests.dispose();\r\n    }\r\n}\r\nexports.dispose = dispose;\r\n//# sourceMappingURL=applicationinsights.js.map","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar bunyan = require(\"./bunyan.pub\");\r\nexports.bunyan = bunyan;\r\nvar consolePub = require(\"./console.pub\");\r\nexports.console = consolePub;\r\nvar mongodbCore = require(\"./mongodb-core.pub\");\r\nexports.mongodbCore = mongodbCore;\r\nvar mongodb = require(\"./mongodb.pub\");\r\nexports.mongodb = mongodb;\r\nvar mysql = require(\"./mysql.pub\");\r\nexports.mysql = mysql;\r\nvar pgPool = require(\"./pg-pool.pub\");\r\nexports.pgPool = pgPool;\r\nvar pg = require(\"./pg.pub\");\r\nexports.pg = pg;\r\nvar redis = require(\"./redis.pub\");\r\nexports.redis = redis;\r\nvar winston = require(\"./winston.pub\");\r\nexports.winston = winston;\r\nfunction enable() {\r\n    bunyan.enable();\r\n    consolePub.enable();\r\n    mongodbCore.enable();\r\n    mongodb.enable();\r\n    mysql.enable();\r\n    pg.enable();\r\n    pgPool.enable();\r\n    redis.enable();\r\n    winston.enable();\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar bunyanPatchFunction = function (originalBunyan) {\r\n    var originalEmit = originalBunyan.prototype._emit;\r\n    originalBunyan.prototype._emit = function (rec, noemit) {\r\n        var ret = originalEmit.apply(this, arguments);\r\n        if (!noemit) {\r\n            var str = ret;\r\n            if (!str) {\r\n                str = originalEmit.call(this, rec, true);\r\n            }\r\n            diagnostic_channel_1.channel.publish(\"bunyan\", { level: rec.level, result: str });\r\n        }\r\n        return ret;\r\n    };\r\n    return originalBunyan;\r\n};\r\nexports.bunyan = {\r\n    versionSpecifier: \">= 1.0.0 < 2.0.0\",\r\n    patch: bunyanPatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"bunyan\", exports.bunyan);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=bunyan.pub.js.map","exports = module.exports = SemVer\n\nvar debug\n/* istanbul ignore next */\nif (typeof process === 'object' &&\n    process.env &&\n    process.env.NODE_DEBUG &&\n    /\\bsemver\\b/i.test(process.env.NODE_DEBUG)) {\n  debug = function () {\n    var args = Array.prototype.slice.call(arguments, 0)\n    args.unshift('SEMVER')\n    console.log.apply(console, args)\n  }\n} else {\n  debug = function () {}\n}\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nexports.SEMVER_SPEC_VERSION = '2.0.0'\n\nvar MAX_LENGTH = 256\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n  /* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nvar MAX_SAFE_COMPONENT_LENGTH = 16\n\n// The actual regexps go on exports.re\nvar re = exports.re = []\nvar src = exports.src = []\nvar R = 0\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\nvar NUMERICIDENTIFIER = R++\nsrc[NUMERICIDENTIFIER] = '0|[1-9]\\\\d*'\nvar NUMERICIDENTIFIERLOOSE = R++\nsrc[NUMERICIDENTIFIERLOOSE] = '[0-9]+'\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\nvar NONNUMERICIDENTIFIER = R++\nsrc[NONNUMERICIDENTIFIER] = '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*'\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\nvar MAINVERSION = R++\nsrc[MAINVERSION] = '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')'\n\nvar MAINVERSIONLOOSE = R++\nsrc[MAINVERSIONLOOSE] = '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')'\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\nvar PRERELEASEIDENTIFIER = R++\nsrc[PRERELEASEIDENTIFIER] = '(?:' + src[NUMERICIDENTIFIER] +\n                            '|' + src[NONNUMERICIDENTIFIER] + ')'\n\nvar PRERELEASEIDENTIFIERLOOSE = R++\nsrc[PRERELEASEIDENTIFIERLOOSE] = '(?:' + src[NUMERICIDENTIFIERLOOSE] +\n                                 '|' + src[NONNUMERICIDENTIFIER] + ')'\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\nvar PRERELEASE = R++\nsrc[PRERELEASE] = '(?:-(' + src[PRERELEASEIDENTIFIER] +\n                  '(?:\\\\.' + src[PRERELEASEIDENTIFIER] + ')*))'\n\nvar PRERELEASELOOSE = R++\nsrc[PRERELEASELOOSE] = '(?:-?(' + src[PRERELEASEIDENTIFIERLOOSE] +\n                       '(?:\\\\.' + src[PRERELEASEIDENTIFIERLOOSE] + ')*))'\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\nvar BUILDIDENTIFIER = R++\nsrc[BUILDIDENTIFIER] = '[0-9A-Za-z-]+'\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\nvar BUILD = R++\nsrc[BUILD] = '(?:\\\\+(' + src[BUILDIDENTIFIER] +\n             '(?:\\\\.' + src[BUILDIDENTIFIER] + ')*))'\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\nvar FULL = R++\nvar FULLPLAIN = 'v?' + src[MAINVERSION] +\n                src[PRERELEASE] + '?' +\n                src[BUILD] + '?'\n\nsrc[FULL] = '^' + FULLPLAIN + '$'\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\nvar LOOSEPLAIN = '[v=\\\\s]*' + src[MAINVERSIONLOOSE] +\n                 src[PRERELEASELOOSE] + '?' +\n                 src[BUILD] + '?'\n\nvar LOOSE = R++\nsrc[LOOSE] = '^' + LOOSEPLAIN + '$'\n\nvar GTLT = R++\nsrc[GTLT] = '((?:<|>)?=?)'\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\nvar XRANGEIDENTIFIERLOOSE = R++\nsrc[XRANGEIDENTIFIERLOOSE] = src[NUMERICIDENTIFIERLOOSE] + '|x|X|\\\\*'\nvar XRANGEIDENTIFIER = R++\nsrc[XRANGEIDENTIFIER] = src[NUMERICIDENTIFIER] + '|x|X|\\\\*'\n\nvar XRANGEPLAIN = R++\nsrc[XRANGEPLAIN] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:' + src[PRERELEASE] + ')?' +\n                   src[BUILD] + '?' +\n                   ')?)?'\n\nvar XRANGEPLAINLOOSE = R++\nsrc[XRANGEPLAINLOOSE] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:' + src[PRERELEASELOOSE] + ')?' +\n                        src[BUILD] + '?' +\n                        ')?)?'\n\nvar XRANGE = R++\nsrc[XRANGE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAIN] + '$'\nvar XRANGELOOSE = R++\nsrc[XRANGELOOSE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAINLOOSE] + '$'\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\nvar COERCE = R++\nsrc[COERCE] = '(?:^|[^\\\\d])' +\n              '(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '})' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:$|[^\\\\d])'\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\nvar LONETILDE = R++\nsrc[LONETILDE] = '(?:~>?)'\n\nvar TILDETRIM = R++\nsrc[TILDETRIM] = '(\\\\s*)' + src[LONETILDE] + '\\\\s+'\nre[TILDETRIM] = new RegExp(src[TILDETRIM], 'g')\nvar tildeTrimReplace = '$1~'\n\nvar TILDE = R++\nsrc[TILDE] = '^' + src[LONETILDE] + src[XRANGEPLAIN] + '$'\nvar TILDELOOSE = R++\nsrc[TILDELOOSE] = '^' + src[LONETILDE] + src[XRANGEPLAINLOOSE] + '$'\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\nvar LONECARET = R++\nsrc[LONECARET] = '(?:\\\\^)'\n\nvar CARETTRIM = R++\nsrc[CARETTRIM] = '(\\\\s*)' + src[LONECARET] + '\\\\s+'\nre[CARETTRIM] = new RegExp(src[CARETTRIM], 'g')\nvar caretTrimReplace = '$1^'\n\nvar CARET = R++\nsrc[CARET] = '^' + src[LONECARET] + src[XRANGEPLAIN] + '$'\nvar CARETLOOSE = R++\nsrc[CARETLOOSE] = '^' + src[LONECARET] + src[XRANGEPLAINLOOSE] + '$'\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\nvar COMPARATORLOOSE = R++\nsrc[COMPARATORLOOSE] = '^' + src[GTLT] + '\\\\s*(' + LOOSEPLAIN + ')$|^$'\nvar COMPARATOR = R++\nsrc[COMPARATOR] = '^' + src[GTLT] + '\\\\s*(' + FULLPLAIN + ')$|^$'\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\nvar COMPARATORTRIM = R++\nsrc[COMPARATORTRIM] = '(\\\\s*)' + src[GTLT] +\n                      '\\\\s*(' + LOOSEPLAIN + '|' + src[XRANGEPLAIN] + ')'\n\n// this one has to use the /g flag\nre[COMPARATORTRIM] = new RegExp(src[COMPARATORTRIM], 'g')\nvar comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\nvar HYPHENRANGE = R++\nsrc[HYPHENRANGE] = '^\\\\s*(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s+-\\\\s+' +\n                   '(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s*$'\n\nvar HYPHENRANGELOOSE = R++\nsrc[HYPHENRANGELOOSE] = '^\\\\s*(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s+-\\\\s+' +\n                        '(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s*$'\n\n// Star ranges basically just allow anything at all.\nvar STAR = R++\nsrc[STAR] = '(<|>)?=?\\\\s*\\\\*'\n\n// Compile to actual regexp objects.\n// All are flag-free, unless they were created above with a flag.\nfor (var i = 0; i < R; i++) {\n  debug(i, src[i])\n  if (!re[i]) {\n    re[i] = new RegExp(src[i])\n  }\n}\n\nexports.parse = parse\nfunction parse (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  if (version.length > MAX_LENGTH) {\n    return null\n  }\n\n  var r = options.loose ? re[LOOSE] : re[FULL]\n  if (!r.test(version)) {\n    return null\n  }\n\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    return null\n  }\n}\n\nexports.valid = valid\nfunction valid (version, options) {\n  var v = parse(version, options)\n  return v ? v.version : null\n}\n\nexports.clean = clean\nfunction clean (version, options) {\n  var s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\n\nexports.SemVer = SemVer\n\nfunction SemVer (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n  if (version instanceof SemVer) {\n    if (version.loose === options.loose) {\n      return version\n    } else {\n      version = version.version\n    }\n  } else if (typeof version !== 'string') {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  if (version.length > MAX_LENGTH) {\n    throw new TypeError('version is longer than ' + MAX_LENGTH + ' characters')\n  }\n\n  if (!(this instanceof SemVer)) {\n    return new SemVer(version, options)\n  }\n\n  debug('SemVer', version, options)\n  this.options = options\n  this.loose = !!options.loose\n\n  var m = version.trim().match(options.loose ? re[LOOSE] : re[FULL])\n\n  if (!m) {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  this.raw = version\n\n  // these are actually numbers\n  this.major = +m[1]\n  this.minor = +m[2]\n  this.patch = +m[3]\n\n  if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n    throw new TypeError('Invalid major version')\n  }\n\n  if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n    throw new TypeError('Invalid minor version')\n  }\n\n  if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n    throw new TypeError('Invalid patch version')\n  }\n\n  // numberify any prerelease numeric ids\n  if (!m[4]) {\n    this.prerelease = []\n  } else {\n    this.prerelease = m[4].split('.').map(function (id) {\n      if (/^[0-9]+$/.test(id)) {\n        var num = +id\n        if (num >= 0 && num < MAX_SAFE_INTEGER) {\n          return num\n        }\n      }\n      return id\n    })\n  }\n\n  this.build = m[5] ? m[5].split('.') : []\n  this.format()\n}\n\nSemVer.prototype.format = function () {\n  this.version = this.major + '.' + this.minor + '.' + this.patch\n  if (this.prerelease.length) {\n    this.version += '-' + this.prerelease.join('.')\n  }\n  return this.version\n}\n\nSemVer.prototype.toString = function () {\n  return this.version\n}\n\nSemVer.prototype.compare = function (other) {\n  debug('SemVer.compare', this.version, this.options, other)\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return this.compareMain(other) || this.comparePre(other)\n}\n\nSemVer.prototype.compareMain = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return compareIdentifiers(this.major, other.major) ||\n         compareIdentifiers(this.minor, other.minor) ||\n         compareIdentifiers(this.patch, other.patch)\n}\n\nSemVer.prototype.comparePre = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  // NOT having a prerelease is > having one\n  if (this.prerelease.length && !other.prerelease.length) {\n    return -1\n  } else if (!this.prerelease.length && other.prerelease.length) {\n    return 1\n  } else if (!this.prerelease.length && !other.prerelease.length) {\n    return 0\n  }\n\n  var i = 0\n  do {\n    var a = this.prerelease[i]\n    var b = other.prerelease[i]\n    debug('prerelease compare', i, a, b)\n    if (a === undefined && b === undefined) {\n      return 0\n    } else if (b === undefined) {\n      return 1\n    } else if (a === undefined) {\n      return -1\n    } else if (a === b) {\n      continue\n    } else {\n      return compareIdentifiers(a, b)\n    }\n  } while (++i)\n}\n\n// preminor will bump the version up to the next minor release, and immediately\n// down to pre-release. premajor and prepatch work the same way.\nSemVer.prototype.inc = function (release, identifier) {\n  switch (release) {\n    case 'premajor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor = 0\n      this.major++\n      this.inc('pre', identifier)\n      break\n    case 'preminor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor++\n      this.inc('pre', identifier)\n      break\n    case 'prepatch':\n      // If this is already a prerelease, it will bump to the next version\n      // drop any prereleases that might already exist, since they are not\n      // relevant at this point.\n      this.prerelease.length = 0\n      this.inc('patch', identifier)\n      this.inc('pre', identifier)\n      break\n    // If the input is a non-prerelease version, this acts the same as\n    // prepatch.\n    case 'prerelease':\n      if (this.prerelease.length === 0) {\n        this.inc('patch', identifier)\n      }\n      this.inc('pre', identifier)\n      break\n\n    case 'major':\n      // If this is a pre-major version, bump up to the same major version.\n      // Otherwise increment major.\n      // 1.0.0-5 bumps to 1.0.0\n      // 1.1.0 bumps to 2.0.0\n      if (this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0) {\n        this.major++\n      }\n      this.minor = 0\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'minor':\n      // If this is a pre-minor version, bump up to the same minor version.\n      // Otherwise increment minor.\n      // 1.2.0-5 bumps to 1.2.0\n      // 1.2.1 bumps to 1.3.0\n      if (this.patch !== 0 || this.prerelease.length === 0) {\n        this.minor++\n      }\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'patch':\n      // If this is not a pre-release version, it will increment the patch.\n      // If it is a pre-release it will bump up to the same patch version.\n      // 1.2.0-5 patches to 1.2.0\n      // 1.2.0 patches to 1.2.1\n      if (this.prerelease.length === 0) {\n        this.patch++\n      }\n      this.prerelease = []\n      break\n    // This probably shouldn't be used publicly.\n    // 1.0.0 \"pre\" would become 1.0.0-0 which is the wrong direction.\n    case 'pre':\n      if (this.prerelease.length === 0) {\n        this.prerelease = [0]\n      } else {\n        var i = this.prerelease.length\n        while (--i >= 0) {\n          if (typeof this.prerelease[i] === 'number') {\n            this.prerelease[i]++\n            i = -2\n          }\n        }\n        if (i === -1) {\n          // didn't increment anything\n          this.prerelease.push(0)\n        }\n      }\n      if (identifier) {\n        // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n        // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n        if (this.prerelease[0] === identifier) {\n          if (isNaN(this.prerelease[1])) {\n            this.prerelease = [identifier, 0]\n          }\n        } else {\n          this.prerelease = [identifier, 0]\n        }\n      }\n      break\n\n    default:\n      throw new Error('invalid increment argument: ' + release)\n  }\n  this.format()\n  this.raw = this.version\n  return this\n}\n\nexports.inc = inc\nfunction inc (version, release, loose, identifier) {\n  if (typeof (loose) === 'string') {\n    identifier = loose\n    loose = undefined\n  }\n\n  try {\n    return new SemVer(version, loose).inc(release, identifier).version\n  } catch (er) {\n    return null\n  }\n}\n\nexports.diff = diff\nfunction diff (version1, version2) {\n  if (eq(version1, version2)) {\n    return null\n  } else {\n    var v1 = parse(version1)\n    var v2 = parse(version2)\n    var prefix = ''\n    if (v1.prerelease.length || v2.prerelease.length) {\n      prefix = 'pre'\n      var defaultResult = 'prerelease'\n    }\n    for (var key in v1) {\n      if (key === 'major' || key === 'minor' || key === 'patch') {\n        if (v1[key] !== v2[key]) {\n          return prefix + key\n        }\n      }\n    }\n    return defaultResult // may be undefined\n  }\n}\n\nexports.compareIdentifiers = compareIdentifiers\n\nvar numeric = /^[0-9]+$/\nfunction compareIdentifiers (a, b) {\n  var anum = numeric.test(a)\n  var bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nexports.rcompareIdentifiers = rcompareIdentifiers\nfunction rcompareIdentifiers (a, b) {\n  return compareIdentifiers(b, a)\n}\n\nexports.major = major\nfunction major (a, loose) {\n  return new SemVer(a, loose).major\n}\n\nexports.minor = minor\nfunction minor (a, loose) {\n  return new SemVer(a, loose).minor\n}\n\nexports.patch = patch\nfunction patch (a, loose) {\n  return new SemVer(a, loose).patch\n}\n\nexports.compare = compare\nfunction compare (a, b, loose) {\n  return new SemVer(a, loose).compare(new SemVer(b, loose))\n}\n\nexports.compareLoose = compareLoose\nfunction compareLoose (a, b) {\n  return compare(a, b, true)\n}\n\nexports.rcompare = rcompare\nfunction rcompare (a, b, loose) {\n  return compare(b, a, loose)\n}\n\nexports.sort = sort\nfunction sort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.compare(a, b, loose)\n  })\n}\n\nexports.rsort = rsort\nfunction rsort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.rcompare(a, b, loose)\n  })\n}\n\nexports.gt = gt\nfunction gt (a, b, loose) {\n  return compare(a, b, loose) > 0\n}\n\nexports.lt = lt\nfunction lt (a, b, loose) {\n  return compare(a, b, loose) < 0\n}\n\nexports.eq = eq\nfunction eq (a, b, loose) {\n  return compare(a, b, loose) === 0\n}\n\nexports.neq = neq\nfunction neq (a, b, loose) {\n  return compare(a, b, loose) !== 0\n}\n\nexports.gte = gte\nfunction gte (a, b, loose) {\n  return compare(a, b, loose) >= 0\n}\n\nexports.lte = lte\nfunction lte (a, b, loose) {\n  return compare(a, b, loose) <= 0\n}\n\nexports.cmp = cmp\nfunction cmp (a, op, b, loose) {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError('Invalid operator: ' + op)\n  }\n}\n\nexports.Comparator = Comparator\nfunction Comparator (comp, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (comp instanceof Comparator) {\n    if (comp.loose === !!options.loose) {\n      return comp\n    } else {\n      comp = comp.value\n    }\n  }\n\n  if (!(this instanceof Comparator)) {\n    return new Comparator(comp, options)\n  }\n\n  debug('comparator', comp, options)\n  this.options = options\n  this.loose = !!options.loose\n  this.parse(comp)\n\n  if (this.semver === ANY) {\n    this.value = ''\n  } else {\n    this.value = this.operator + this.semver.version\n  }\n\n  debug('comp', this)\n}\n\nvar ANY = {}\nComparator.prototype.parse = function (comp) {\n  var r = this.options.loose ? re[COMPARATORLOOSE] : re[COMPARATOR]\n  var m = comp.match(r)\n\n  if (!m) {\n    throw new TypeError('Invalid comparator: ' + comp)\n  }\n\n  this.operator = m[1]\n  if (this.operator === '=') {\n    this.operator = ''\n  }\n\n  // if it literally is just '>' or '' then allow anything.\n  if (!m[2]) {\n    this.semver = ANY\n  } else {\n    this.semver = new SemVer(m[2], this.options.loose)\n  }\n}\n\nComparator.prototype.toString = function () {\n  return this.value\n}\n\nComparator.prototype.test = function (version) {\n  debug('Comparator.test', version, this.options.loose)\n\n  if (this.semver === ANY) {\n    return true\n  }\n\n  if (typeof version === 'string') {\n    version = new SemVer(version, this.options)\n  }\n\n  return cmp(version, this.operator, this.semver, this.options)\n}\n\nComparator.prototype.intersects = function (comp, options) {\n  if (!(comp instanceof Comparator)) {\n    throw new TypeError('a Comparator is required')\n  }\n\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  var rangeTmp\n\n  if (this.operator === '') {\n    rangeTmp = new Range(comp.value, options)\n    return satisfies(this.value, rangeTmp, options)\n  } else if (comp.operator === '') {\n    rangeTmp = new Range(this.value, options)\n    return satisfies(comp.semver, rangeTmp, options)\n  }\n\n  var sameDirectionIncreasing =\n    (this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '>=' || comp.operator === '>')\n  var sameDirectionDecreasing =\n    (this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '<=' || comp.operator === '<')\n  var sameSemVer = this.semver.version === comp.semver.version\n  var differentDirectionsInclusive =\n    (this.operator === '>=' || this.operator === '<=') &&\n    (comp.operator === '>=' || comp.operator === '<=')\n  var oppositeDirectionsLessThan =\n    cmp(this.semver, '<', comp.semver, options) &&\n    ((this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '<=' || comp.operator === '<'))\n  var oppositeDirectionsGreaterThan =\n    cmp(this.semver, '>', comp.semver, options) &&\n    ((this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '>=' || comp.operator === '>'))\n\n  return sameDirectionIncreasing || sameDirectionDecreasing ||\n    (sameSemVer && differentDirectionsInclusive) ||\n    oppositeDirectionsLessThan || oppositeDirectionsGreaterThan\n}\n\nexports.Range = Range\nfunction Range (range, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (range instanceof Range) {\n    if (range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease) {\n      return range\n    } else {\n      return new Range(range.raw, options)\n    }\n  }\n\n  if (range instanceof Comparator) {\n    return new Range(range.value, options)\n  }\n\n  if (!(this instanceof Range)) {\n    return new Range(range, options)\n  }\n\n  this.options = options\n  this.loose = !!options.loose\n  this.includePrerelease = !!options.includePrerelease\n\n  // First, split based on boolean or ||\n  this.raw = range\n  this.set = range.split(/\\s*\\|\\|\\s*/).map(function (range) {\n    return this.parseRange(range.trim())\n  }, this).filter(function (c) {\n    // throw out any that are not relevant for whatever reason\n    return c.length\n  })\n\n  if (!this.set.length) {\n    throw new TypeError('Invalid SemVer Range: ' + range)\n  }\n\n  this.format()\n}\n\nRange.prototype.format = function () {\n  this.range = this.set.map(function (comps) {\n    return comps.join(' ').trim()\n  }).join('||').trim()\n  return this.range\n}\n\nRange.prototype.toString = function () {\n  return this.range\n}\n\nRange.prototype.parseRange = function (range) {\n  var loose = this.options.loose\n  range = range.trim()\n  // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n  var hr = loose ? re[HYPHENRANGELOOSE] : re[HYPHENRANGE]\n  range = range.replace(hr, hyphenReplace)\n  debug('hyphen replace', range)\n  // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n  range = range.replace(re[COMPARATORTRIM], comparatorTrimReplace)\n  debug('comparator trim', range, re[COMPARATORTRIM])\n\n  // `~ 1.2.3` => `~1.2.3`\n  range = range.replace(re[TILDETRIM], tildeTrimReplace)\n\n  // `^ 1.2.3` => `^1.2.3`\n  range = range.replace(re[CARETTRIM], caretTrimReplace)\n\n  // normalize spaces\n  range = range.split(/\\s+/).join(' ')\n\n  // At this point, the range is completely trimmed and\n  // ready to be split into comparators.\n\n  var compRe = loose ? re[COMPARATORLOOSE] : re[COMPARATOR]\n  var set = range.split(' ').map(function (comp) {\n    return parseComparator(comp, this.options)\n  }, this).join(' ').split(/\\s+/)\n  if (this.options.loose) {\n    // in loose mode, throw out any that are not valid comparators\n    set = set.filter(function (comp) {\n      return !!comp.match(compRe)\n    })\n  }\n  set = set.map(function (comp) {\n    return new Comparator(comp, this.options)\n  }, this)\n\n  return set\n}\n\nRange.prototype.intersects = function (range, options) {\n  if (!(range instanceof Range)) {\n    throw new TypeError('a Range is required')\n  }\n\n  return this.set.some(function (thisComparators) {\n    return thisComparators.every(function (thisComparator) {\n      return range.set.some(function (rangeComparators) {\n        return rangeComparators.every(function (rangeComparator) {\n          return thisComparator.intersects(rangeComparator, options)\n        })\n      })\n    })\n  })\n}\n\n// Mostly just for testing and legacy API reasons\nexports.toComparators = toComparators\nfunction toComparators (range, options) {\n  return new Range(range, options).set.map(function (comp) {\n    return comp.map(function (c) {\n      return c.value\n    }).join(' ').trim().split(' ')\n  })\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nfunction parseComparator (comp, options) {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nfunction isX (id) {\n  return !id || id.toLowerCase() === 'x' || id === '*'\n}\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0\nfunction replaceTildes (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceTilde(comp, options)\n  }).join(' ')\n}\n\nfunction replaceTilde (comp, options) {\n  var r = options.loose ? re[TILDELOOSE] : re[TILDE]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('tilde', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0\n      ret = '>=' + M + '.' + m + '.' + p +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0\n// ^1.2.3 --> >=1.2.3 <2.0.0\n// ^1.2.0 --> >=1.2.0 <2.0.0\nfunction replaceCarets (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceCaret(comp, options)\n  }).join(' ')\n}\n\nfunction replaceCaret (comp, options) {\n  debug('caret', comp, options)\n  var r = options.loose ? re[CARETLOOSE] : re[CARET]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('caret', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n      } else {\n        ret = '>=' + M + '.' + m + '.0 <' + (+M + 1) + '.0.0'\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nfunction replaceXRanges (comp, options) {\n  debug('replaceXRanges', comp, options)\n  return comp.split(/\\s+/).map(function (comp) {\n    return replaceXRange(comp, options)\n  }).join(' ')\n}\n\nfunction replaceXRange (comp, options) {\n  comp = comp.trim()\n  var r = options.loose ? re[XRANGELOOSE] : re[XRANGE]\n  return comp.replace(r, function (ret, gtlt, M, m, p, pr) {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    var xM = isX(M)\n    var xm = xM || isX(m)\n    var xp = xm || isX(p)\n    var anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        // >1.2.3 => >= 1.2.4\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      ret = gtlt + M + '.' + m + '.' + p\n    } else if (xm) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (xp) {\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nfunction replaceStars (comp, options) {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(re[STAR], '')\n}\n\n// This function is passed to string.replace(re[HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0\nfunction hyphenReplace ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr, tb) {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = '>=' + fM + '.0.0'\n  } else if (isX(fp)) {\n    from = '>=' + fM + '.' + fm + '.0'\n  } else {\n    from = '>=' + from\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = '<' + (+tM + 1) + '.0.0'\n  } else if (isX(tp)) {\n    to = '<' + tM + '.' + (+tm + 1) + '.0'\n  } else if (tpr) {\n    to = '<=' + tM + '.' + tm + '.' + tp + '-' + tpr\n  } else {\n    to = '<=' + to\n  }\n\n  return (from + ' ' + to).trim()\n}\n\n// if ANY of the sets match ALL of its comparators, then pass\nRange.prototype.test = function (version) {\n  if (!version) {\n    return false\n  }\n\n  if (typeof version === 'string') {\n    version = new SemVer(version, this.options)\n  }\n\n  for (var i = 0; i < this.set.length; i++) {\n    if (testSet(this.set[i], version, this.options)) {\n      return true\n    }\n  }\n  return false\n}\n\nfunction testSet (set, version, options) {\n  for (var i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        var allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n\nexports.satisfies = satisfies\nfunction satisfies (version, range, options) {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\n\nexports.maxSatisfying = maxSatisfying\nfunction maxSatisfying (versions, range, options) {\n  var max = null\n  var maxSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\n\nexports.minSatisfying = minSatisfying\nfunction minSatisfying (versions, range, options) {\n  var min = null\n  var minSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\n\nexports.minVersion = minVersion\nfunction minVersion (range, loose) {\n  range = new Range(range, loose)\n\n  var minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    comparators.forEach(function (comparator) {\n      // Clone to avoid manipulating the comparator's semver object.\n      var compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!minver || gt(minver, compver)) {\n            minver = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error('Unexpected operation: ' + comparator.operator)\n      }\n    })\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\n\nexports.validRange = validRange\nfunction validRange (range, options) {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\n\n// Determine if version is less than all the versions possible in the range\nexports.ltr = ltr\nfunction ltr (version, range, options) {\n  return outside(version, range, '<', options)\n}\n\n// Determine if version is greater than all the versions possible in the range.\nexports.gtr = gtr\nfunction gtr (version, range, options) {\n  return outside(version, range, '>', options)\n}\n\nexports.outside = outside\nfunction outside (version, range, hilo, options) {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  var gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisifes the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    var high = null\n    var low = null\n\n    comparators.forEach(function (comparator) {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nexports.prerelease = prerelease\nfunction prerelease (version, options) {\n  var parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\n\nexports.intersects = intersects\nfunction intersects (r1, r2, options) {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2)\n}\n\nexports.coerce = coerce\nfunction coerce (version) {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  var match = version.match(re[COERCE])\n\n  if (match == null) {\n    return null\n  }\n\n  return parse(match[1] +\n    '.' + (match[2] || '0') +\n    '.' + (match[3] || '0'))\n}\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar stream_1 = require(\"stream\");\r\nvar consolePatchFunction = function (originalConsole) {\r\n    var aiLoggingOutStream = new stream_1.Writable();\r\n    var aiLoggingErrStream = new stream_1.Writable();\r\n    // Default console is roughly equivalent to `new Console(process.stdout, process.stderr)`\r\n    // We create a version which publishes to the channel and also to stdout/stderr\r\n    aiLoggingOutStream.write = function (chunk) {\r\n        if (!chunk) {\r\n            return true;\r\n        }\r\n        var message = chunk.toString();\r\n        diagnostic_channel_1.channel.publish(\"console\", { message: message });\r\n        return true;\r\n    };\r\n    aiLoggingErrStream.write = function (chunk) {\r\n        if (!chunk) {\r\n            return true;\r\n        }\r\n        var message = chunk.toString();\r\n        diagnostic_channel_1.channel.publish(\"console\", { message: message, stderr: true });\r\n        return true;\r\n    };\r\n    var aiLoggingConsole = new originalConsole.Console(aiLoggingOutStream, aiLoggingErrStream);\r\n    var consoleMethods = [\"log\", \"info\", \"warn\", \"error\", \"dir\", \"time\", \"timeEnd\", \"trace\", \"assert\"];\r\n    var _loop_1 = function (method) {\r\n        var originalMethod = originalConsole[method];\r\n        if (originalMethod) {\r\n            originalConsole[method] = function () {\r\n                if (aiLoggingConsole[method]) {\r\n                    try {\r\n                        aiLoggingConsole[method].apply(aiLoggingConsole, arguments);\r\n                    }\r\n                    catch (e) {\r\n                        // Ignore errors; allow the original method to throw if necessary\r\n                    }\r\n                }\r\n                return originalMethod.apply(originalConsole, arguments);\r\n            };\r\n        }\r\n    };\r\n    for (var _i = 0, consoleMethods_1 = consoleMethods; _i < consoleMethods_1.length; _i++) {\r\n        var method = consoleMethods_1[_i];\r\n        _loop_1(method);\r\n    }\r\n    return originalConsole;\r\n};\r\nexports.console = {\r\n    versionSpecifier: \">= 4.0.0\",\r\n    patch: consolePatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"console\", exports.console);\r\n    // Force patching of console\r\n    /* tslint:disable-next-line:no-var-requires */\r\n    require(\"console\");\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=console.pub.js.map","module.exports = require(\"console\");","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar mongodbcorePatchFunction = function (originalMongoCore) {\r\n    var originalConnect = originalMongoCore.Server.prototype.connect;\r\n    originalMongoCore.Server.prototype.connect = function contextPreservingConnect() {\r\n        var ret = originalConnect.apply(this, arguments);\r\n        // Messages sent to mongo progress through a pool\r\n        // This can result in context getting mixed between different responses\r\n        // so we wrap the callbacks to restore appropriate state\r\n        var originalWrite = this.s.pool.write;\r\n        this.s.pool.write = function contextPreservingWrite() {\r\n            var cbidx = typeof arguments[1] === \"function\" ? 1 : 2;\r\n            if (typeof arguments[cbidx] === \"function\") {\r\n                arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(arguments[cbidx]);\r\n            }\r\n            return originalWrite.apply(this, arguments);\r\n        };\r\n        // Logout is a special case, it doesn't call the write function but instead\r\n        // directly calls into connection.write\r\n        var originalLogout = this.s.pool.logout;\r\n        this.s.pool.logout = function contextPreservingLogout() {\r\n            if (typeof arguments[1] === \"function\") {\r\n                arguments[1] = diagnostic_channel_1.channel.bindToContext(arguments[1]);\r\n            }\r\n            return originalLogout.apply(this, arguments);\r\n        };\r\n        return ret;\r\n    };\r\n    return originalMongoCore;\r\n};\r\nexports.mongoCore2 = {\r\n    versionSpecifier: \">= 2.0.0 < 2.2.0\",\r\n    patch: mongodbcorePatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb-core\", exports.mongoCore2);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=mongodb-core.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar mongodbPatchFunction = function (originalMongo) {\r\n    var listener = originalMongo.instrument({\r\n        operationIdGenerator: {\r\n            next: function () {\r\n                return diagnostic_channel_1.channel.bindToContext(function (cb) { return cb(); });\r\n            },\r\n        },\r\n    });\r\n    var eventMap = {};\r\n    listener.on(\"started\", function (event) {\r\n        if (eventMap[event.requestId]) {\r\n            // Note: Mongo can generate 2 completely separate requests\r\n            // which share the same requestId, if a certain race condition is triggered.\r\n            // For now, we accept that this can happen and potentially miss or mislabel some events.\r\n            return;\r\n        }\r\n        eventMap[event.requestId] = event;\r\n    });\r\n    listener.on(\"succeeded\", function (event) {\r\n        var startedData = eventMap[event.requestId];\r\n        if (startedData) {\r\n            delete eventMap[event.requestId];\r\n        }\r\n        event.operationId(function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: true }); });\r\n    });\r\n    listener.on(\"failed\", function (event) {\r\n        var startedData = eventMap[event.requestId];\r\n        if (startedData) {\r\n            delete eventMap[event.requestId];\r\n        }\r\n        event.operationId(function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: false }); });\r\n    });\r\n    return originalMongo;\r\n};\r\nexports.mongo2 = {\r\n    versionSpecifier: \">= 2.0.0 <= 2.2.x\",\r\n    patch: mongodbPatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb\", exports.mongo2);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=mongodb.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar path = require(\"path\");\r\nvar mysqlPatchFunction = function (originalMysql, originalMysqlPath) {\r\n    // The `name` passed in here is for debugging purposes,\r\n    // to help distinguish which object is being patched.\r\n    var patchObjectFunction = function (obj, name) {\r\n        return function (func, cbWrapper) {\r\n            var originalFunc = obj[func];\r\n            if (originalFunc) {\r\n                obj[func] = function mysqlContextPreserver() {\r\n                    // Find the callback, if there is one\r\n                    var cbidx = arguments.length - 1;\r\n                    for (var i = arguments.length - 1; i >= 0; --i) {\r\n                        if (typeof arguments[i] === \"function\") {\r\n                            cbidx = i;\r\n                            break;\r\n                        }\r\n                        else if (typeof arguments[i] !== \"undefined\") {\r\n                            break;\r\n                        }\r\n                    }\r\n                    var cb = arguments[cbidx];\r\n                    var resultContainer = { result: null, startTime: null };\r\n                    if (typeof cb === \"function\") {\r\n                        // Preserve context on the callback.\r\n                        // If this is one of the functions that we want to track,\r\n                        // then wrap the callback with the tracking wrapper\r\n                        if (cbWrapper) {\r\n                            resultContainer.startTime = process.hrtime();\r\n                            arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(cbWrapper(resultContainer, cb));\r\n                        }\r\n                        else {\r\n                            arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(cb);\r\n                        }\r\n                    }\r\n                    var result = originalFunc.apply(this, arguments);\r\n                    resultContainer.result = result;\r\n                    return result;\r\n                };\r\n            }\r\n        };\r\n    };\r\n    var patchClassMemberFunction = function (classObject, name) {\r\n        return patchObjectFunction(classObject.prototype, name + \".prototype\");\r\n    };\r\n    var connectionCallbackFunctions = [\r\n        \"connect\", \"changeUser\",\r\n        \"ping\", \"statistics\", \"end\",\r\n    ];\r\n    var connectionClass = require(path.dirname(originalMysqlPath) + \"/lib/Connection\");\r\n    connectionCallbackFunctions.forEach(function (value) { return patchClassMemberFunction(connectionClass, \"Connection\")(value); });\r\n    // Connection.createQuery is a static method\r\n    patchObjectFunction(connectionClass, \"Connection\")(\"createQuery\", function (resultContainer, cb) {\r\n        return function (err) {\r\n            var hrDuration = process.hrtime(resultContainer.startTime);\r\n            /* tslint:disable-next-line:no-bitwise */\r\n            var duration = (hrDuration[0] * 1e3 + hrDuration[1] / 1e6) | 0;\r\n            diagnostic_channel_1.channel.publish(\"mysql\", { query: resultContainer.result, callbackArgs: arguments, err: err, duration: duration });\r\n            cb.apply(this, arguments);\r\n        };\r\n    });\r\n    var poolCallbackFunctions = [\r\n        \"_enqueueCallback\",\r\n    ];\r\n    var poolClass = require(path.dirname(originalMysqlPath) + \"/lib/Pool\");\r\n    poolCallbackFunctions.forEach(function (value) { return patchClassMemberFunction(poolClass, \"Pool\")(value); });\r\n    return originalMysql;\r\n};\r\nexports.mysql = {\r\n    versionSpecifier: \">= 2.0.0 <= 2.14.x\",\r\n    patch: mysqlPatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mysql\", exports.mysql);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=mysql.pub.js.map","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 53;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 54;","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nfunction postgresPool1PatchFunction(originalPgPool) {\r\n    var originalConnect = originalPgPool.prototype.connect;\r\n    originalPgPool.prototype.connect = function connect(callback) {\r\n        if (callback) {\r\n            arguments[0] = diagnostic_channel_1.channel.bindToContext(callback);\r\n        }\r\n        originalConnect.apply(this, arguments);\r\n    };\r\n    return originalPgPool;\r\n}\r\nexports.postgresPool1 = {\r\n    versionSpecifier: \"1.x\",\r\n    patch: postgresPool1PatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"pg-pool\", exports.postgresPool1);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=pg-pool.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar events_1 = require(\"events\");\r\nfunction postgres6PatchFunction(originalPg, originalPgPath) {\r\n    var originalClientQuery = originalPg.Client.prototype.query;\r\n    var diagnosticOriginalFunc = \"__diagnosticOriginalFunc\";\r\n    // wherever the callback is passed, find it, save it, and remove it from the call\r\n    // to the the original .query() function\r\n    originalPg.Client.prototype.query = function query(config, values, callback) {\r\n        var data = {\r\n            query: {},\r\n            database: {\r\n                host: this.connectionParameters.host,\r\n                port: this.connectionParameters.port,\r\n            },\r\n            result: null,\r\n            error: null,\r\n            duration: 0,\r\n        };\r\n        var start = process.hrtime();\r\n        var queryResult;\r\n        function patchCallback(cb) {\r\n            if (cb && cb[diagnosticOriginalFunc]) {\r\n                cb = cb[diagnosticOriginalFunc];\r\n            }\r\n            var trackingCallback = diagnostic_channel_1.channel.bindToContext(function (err, res) {\r\n                var end = process.hrtime(start);\r\n                data.result = res && { rowCount: res.rowCount, command: res.command };\r\n                data.error = err;\r\n                data.duration = Math.ceil((end[0] * 1e3) + (end[1] / 1e6));\r\n                diagnostic_channel_1.channel.publish(\"postgres\", data);\r\n                // emulate weird internal behavior in pg@6\r\n                // on success, the callback is called *before* query events are emitted\r\n                // on failure, the callback is called *instead of* the query emitting events\r\n                // with no events, that means no promises (since the promise is resolved/rejected in an event handler)\r\n                // since we are always inserting ourselves as a callback, we have to restore the original\r\n                // behavior if the user didn't provide one themselves\r\n                if (err) {\r\n                    if (cb) {\r\n                        return cb.apply(this, arguments);\r\n                    }\r\n                    else if (queryResult && queryResult instanceof events_1.EventEmitter) {\r\n                        queryResult.emit(\"error\", err);\r\n                    }\r\n                }\r\n                else if (cb) {\r\n                    cb.apply(this, arguments);\r\n                }\r\n            });\r\n            try {\r\n                Object.defineProperty(trackingCallback, diagnosticOriginalFunc, { value: cb });\r\n                return trackingCallback;\r\n            }\r\n            catch (e) {\r\n                // this should never happen, but bailout in case it does\r\n                return cb;\r\n            }\r\n        }\r\n        // this function takes too many variations of arguments.\r\n        // this patches any provided callback or creates a new callback if one wasn't provided.\r\n        // since the callback is always called (if provided) in addition to always having a Promisified\r\n        // EventEmitter returned (well, sometimes -- see above), its safe to insert a callback if none was given\r\n        try {\r\n            if (typeof config === \"string\") {\r\n                if (values instanceof Array) {\r\n                    data.query.preparable = {\r\n                        text: config,\r\n                        args: values,\r\n                    };\r\n                    callback = patchCallback(callback);\r\n                }\r\n                else {\r\n                    data.query.text = config;\r\n                    // pg v6 will, for some reason, accept both\r\n                    // client.query(\"...\", undefined, () => {...})\r\n                    // **and**\r\n                    // client.query(\"...\", () => {...});\r\n                    // Internally, precedence is given to the callback argument\r\n                    if (callback) {\r\n                        callback = patchCallback(callback);\r\n                    }\r\n                    else {\r\n                        values = patchCallback(values);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                if (typeof config.name === \"string\") {\r\n                    data.query.plan = config.name;\r\n                }\r\n                else if (config.values instanceof Array) {\r\n                    data.query.preparable = {\r\n                        text: config.text,\r\n                        args: config.values,\r\n                    };\r\n                }\r\n                else {\r\n                    data.query.text = config.text;\r\n                }\r\n                if (callback) {\r\n                    callback = patchCallback(callback);\r\n                }\r\n                else if (values) {\r\n                    values = patchCallback(values);\r\n                }\r\n                else {\r\n                    config.callback = patchCallback(config.callback);\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            // if our logic here throws, bail out and just let pg do its thing\r\n            return originalClientQuery.apply(this, arguments);\r\n        }\r\n        arguments[0] = config;\r\n        arguments[1] = values;\r\n        arguments[2] = callback;\r\n        arguments.length = (arguments.length > 3) ? arguments.length : 3;\r\n        queryResult = originalClientQuery.apply(this, arguments);\r\n        return queryResult;\r\n    };\r\n    return originalPg;\r\n}\r\nexports.postgres6 = {\r\n    versionSpecifier: \"6.x\",\r\n    patch: postgres6PatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"pg\", exports.postgres6);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=pg.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar redisPatchFunction = function (originalRedis) {\r\n    var originalSend = originalRedis.RedisClient.prototype.internal_send_command;\r\n    // Note: This is mixing together both context tracking and dependency tracking\r\n    originalRedis.RedisClient.prototype.internal_send_command = function (commandObj) {\r\n        if (commandObj) {\r\n            var cb_1 = commandObj.callback;\r\n            if (!cb_1 || !cb_1.pubsubBound) {\r\n                var address_1 = this.address;\r\n                var startTime_1 = process.hrtime();\r\n                // Note: augmenting the callback on internal_send_command is correct for context\r\n                // tracking, but may be too low-level for dependency tracking. There are some 'errors'\r\n                // which higher levels expect in some cases\r\n                // However, the only other option is to intercept every individual command.\r\n                commandObj.callback = diagnostic_channel_1.channel.bindToContext(function (err, result) {\r\n                    var hrDuration = process.hrtime(startTime_1);\r\n                    /* tslint:disable-next-line:no-bitwise */\r\n                    var duration = (hrDuration[0] * 1e3 + hrDuration[1] / 1e6) | 0;\r\n                    diagnostic_channel_1.channel.publish(\"redis\", { duration: duration, address: address_1, commandObj: commandObj, err: err, result: result });\r\n                    if (typeof cb_1 === \"function\") {\r\n                        cb_1.apply(this, arguments);\r\n                    }\r\n                });\r\n                commandObj.callback.pubsubBound = true;\r\n            }\r\n        }\r\n        return originalSend.call(this, commandObj);\r\n    };\r\n    return originalRedis;\r\n};\r\nexports.redis = {\r\n    versionSpecifier: \">= 2.0.0 < 3.0.0\",\r\n    patch: redisPatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"redis\", exports.redis);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=redis.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\n// register a \"filter\" with each logger that publishes the data about to be logged\r\nvar winstonPatchFunction = function (originalWinston) {\r\n    var originalLog = originalWinston.Logger.prototype.log;\r\n    var curLevels;\r\n    var loggingFilter = function (level, message, meta) {\r\n        var levelKind;\r\n        if (curLevels === originalWinston.config.npm.levels) {\r\n            levelKind = \"npm\";\r\n        }\r\n        else if (curLevels === originalWinston.config.syslog.levels) {\r\n            levelKind = \"syslog\";\r\n        }\r\n        else {\r\n            levelKind = \"unknown\";\r\n        }\r\n        diagnostic_channel_1.channel.publish(\"winston\", { level: level, message: message, meta: meta, levelKind: levelKind });\r\n        return message;\r\n    };\r\n    // whenever someone logs, ensure our filter comes last\r\n    originalWinston.Logger.prototype.log = function log() {\r\n        curLevels = this.levels;\r\n        if (!this.filters || this.filters.length === 0) {\r\n            this.filters = [loggingFilter];\r\n        }\r\n        else if (this.filters[this.filters.length - 1] !== loggingFilter) {\r\n            this.filters = this.filters.filter(function (f) { return f !== loggingFilter; });\r\n            this.filters.push(loggingFilter);\r\n        }\r\n        return originalLog.apply(this, arguments);\r\n    };\r\n    return originalWinston;\r\n};\r\nexports.winston = {\r\n    versionSpecifier: \"2.x\",\r\n    patch: winstonPatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"winston\", exports.winston);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=winston.pub.js.map","/**\n* @license\n* Copyright Google Inc. All Rights Reserved.\n*\n* Use of this source code is governed by an MIT-style license that can be\n* found in the LICENSE file at https://angular.io/license\n*/\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (factory());\n}(this, (function () { 'use strict';\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n\nvar Zone$1 = (function (global) {\n    if (global['Zone']) {\n        throw new Error('Zone already loaded.');\n    }\n    var Zone = (function () {\n        function Zone(parent, zoneSpec) {\n            this._properties = null;\n            this._parent = parent;\n            this._name = zoneSpec ? zoneSpec.name || 'unnamed' : '<root>';\n            this._properties = zoneSpec && zoneSpec.properties || {};\n            this._zoneDelegate =\n                new ZoneDelegate(this, this._parent && this._parent._zoneDelegate, zoneSpec);\n        }\n        Zone.assertZonePatched = function () {\n            if (global.Promise !== ZoneAwarePromise) {\n                throw new Error('Zone.js has detected that ZoneAwarePromise `(window|global).Promise` ' +\n                    'has been overwritten.\\n' +\n                    'Most likely cause is that a Promise polyfill has been loaded ' +\n                    'after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. ' +\n                    'If you must load one, do so before loading zone.js.)');\n            }\n        };\n        Object.defineProperty(Zone, \"current\", {\n            get: function () {\n                return _currentZoneFrame.zone;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        \n        Object.defineProperty(Zone, \"currentTask\", {\n            get: function () {\n                return _currentTask;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        \n        Object.defineProperty(Zone.prototype, \"parent\", {\n            get: function () {\n                return this._parent;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        \n        Object.defineProperty(Zone.prototype, \"name\", {\n            get: function () {\n                return this._name;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        \n        Zone.prototype.get = function (key) {\n            var zone = this.getZoneWith(key);\n            if (zone)\n                return zone._properties[key];\n        };\n        Zone.prototype.getZoneWith = function (key) {\n            var current = this;\n            while (current) {\n                if (current._properties.hasOwnProperty(key)) {\n                    return current;\n                }\n                current = current._parent;\n            }\n            return null;\n        };\n        Zone.prototype.fork = function (zoneSpec) {\n            if (!zoneSpec)\n                throw new Error('ZoneSpec required!');\n            return this._zoneDelegate.fork(this, zoneSpec);\n        };\n        Zone.prototype.wrap = function (callback, source) {\n            if (typeof callback !== 'function') {\n                throw new Error('Expecting function got: ' + callback);\n            }\n            var _callback = this._zoneDelegate.intercept(this, callback, source);\n            var zone = this;\n            return function () {\n                return zone.runGuarded(_callback, this, arguments, source);\n            };\n        };\n        Zone.prototype.run = function (callback, applyThis, applyArgs, source) {\n            if (applyThis === void 0) { applyThis = null; }\n            if (applyArgs === void 0) { applyArgs = null; }\n            if (source === void 0) { source = null; }\n            _currentZoneFrame = new ZoneFrame(_currentZoneFrame, this);\n            try {\n                return this._zoneDelegate.invoke(this, callback, applyThis, applyArgs, source);\n            }\n            finally {\n                _currentZoneFrame = _currentZoneFrame.parent;\n            }\n        };\n        Zone.prototype.runGuarded = function (callback, applyThis, applyArgs, source) {\n            if (applyThis === void 0) { applyThis = null; }\n            if (applyArgs === void 0) { applyArgs = null; }\n            if (source === void 0) { source = null; }\n            _currentZoneFrame = new ZoneFrame(_currentZoneFrame, this);\n            try {\n                try {\n                    return this._zoneDelegate.invoke(this, callback, applyThis, applyArgs, source);\n                }\n                catch (error) {\n                    if (this._zoneDelegate.handleError(this, error)) {\n                        throw error;\n                    }\n                }\n            }\n            finally {\n                _currentZoneFrame = _currentZoneFrame.parent;\n            }\n        };\n        Zone.prototype.runTask = function (task, applyThis, applyArgs) {\n            task.runCount++;\n            if (task.zone != this)\n                throw new Error('A task can only be run in the zone which created it! (Creation: ' + task.zone.name +\n                    '; Execution: ' + this.name + ')');\n            var previousTask = _currentTask;\n            _currentTask = task;\n            _currentZoneFrame = new ZoneFrame(_currentZoneFrame, this);\n            try {\n                if (task.type == 'macroTask' && task.data && !task.data.isPeriodic) {\n                    task.cancelFn = null;\n                }\n                try {\n                    return this._zoneDelegate.invokeTask(this, task, applyThis, applyArgs);\n                }\n                catch (error) {\n                    if (this._zoneDelegate.handleError(this, error)) {\n                        throw error;\n                    }\n                }\n            }\n            finally {\n                _currentZoneFrame = _currentZoneFrame.parent;\n                _currentTask = previousTask;\n            }\n        };\n        Zone.prototype.scheduleMicroTask = function (source, callback, data, customSchedule) {\n            return this._zoneDelegate.scheduleTask(this, new ZoneTask('microTask', this, source, callback, data, customSchedule, null));\n        };\n        Zone.prototype.scheduleMacroTask = function (source, callback, data, customSchedule, customCancel) {\n            return this._zoneDelegate.scheduleTask(this, new ZoneTask('macroTask', this, source, callback, data, customSchedule, customCancel));\n        };\n        Zone.prototype.scheduleEventTask = function (source, callback, data, customSchedule, customCancel) {\n            return this._zoneDelegate.scheduleTask(this, new ZoneTask('eventTask', this, source, callback, data, customSchedule, customCancel));\n        };\n        Zone.prototype.cancelTask = function (task) {\n            var value = this._zoneDelegate.cancelTask(this, task);\n            task.runCount = -1;\n            task.cancelFn = null;\n            return value;\n        };\n        return Zone;\n    }());\n    Zone.__symbol__ = __symbol__;\n    \n    var ZoneDelegate = (function () {\n        function ZoneDelegate(zone, parentDelegate, zoneSpec) {\n            this._taskCounts = { microTask: 0, macroTask: 0, eventTask: 0 };\n            this.zone = zone;\n            this._parentDelegate = parentDelegate;\n            this._forkZS = zoneSpec && (zoneSpec && zoneSpec.onFork ? zoneSpec : parentDelegate._forkZS);\n            this._forkDlgt = zoneSpec && (zoneSpec.onFork ? parentDelegate : parentDelegate._forkDlgt);\n            this._forkCurrZone = zoneSpec && (zoneSpec.onFork ? this.zone : parentDelegate.zone);\n            this._interceptZS =\n                zoneSpec && (zoneSpec.onIntercept ? zoneSpec : parentDelegate._interceptZS);\n            this._interceptDlgt =\n                zoneSpec && (zoneSpec.onIntercept ? parentDelegate : parentDelegate._interceptDlgt);\n            this._interceptCurrZone =\n                zoneSpec && (zoneSpec.onIntercept ? this.zone : parentDelegate.zone);\n            this._invokeZS = zoneSpec && (zoneSpec.onInvoke ? zoneSpec : parentDelegate._invokeZS);\n            this._invokeDlgt =\n                zoneSpec && (zoneSpec.onInvoke ? parentDelegate : parentDelegate._invokeDlgt);\n            this._invokeCurrZone = zoneSpec && (zoneSpec.onInvoke ? this.zone : parentDelegate.zone);\n            this._handleErrorZS =\n                zoneSpec && (zoneSpec.onHandleError ? zoneSpec : parentDelegate._handleErrorZS);\n            this._handleErrorDlgt =\n                zoneSpec && (zoneSpec.onHandleError ? parentDelegate : parentDelegate._handleErrorDlgt);\n            this._handleErrorCurrZone =\n                zoneSpec && (zoneSpec.onHandleError ? this.zone : parentDelegate.zone);\n            this._scheduleTaskZS =\n                zoneSpec && (zoneSpec.onScheduleTask ? zoneSpec : parentDelegate._scheduleTaskZS);\n            this._scheduleTaskDlgt =\n                zoneSpec && (zoneSpec.onScheduleTask ? parentDelegate : parentDelegate._scheduleTaskDlgt);\n            this._scheduleTaskCurrZone =\n                zoneSpec && (zoneSpec.onScheduleTask ? this.zone : parentDelegate.zone);\n            this._invokeTaskZS =\n                zoneSpec && (zoneSpec.onInvokeTask ? zoneSpec : parentDelegate._invokeTaskZS);\n            this._invokeTaskDlgt =\n                zoneSpec && (zoneSpec.onInvokeTask ? parentDelegate : parentDelegate._invokeTaskDlgt);\n            this._invokeTaskCurrZone =\n                zoneSpec && (zoneSpec.onInvokeTask ? this.zone : parentDelegate.zone);\n            this._cancelTaskZS =\n                zoneSpec && (zoneSpec.onCancelTask ? zoneSpec : parentDelegate._cancelTaskZS);\n            this._cancelTaskDlgt =\n                zoneSpec && (zoneSpec.onCancelTask ? parentDelegate : parentDelegate._cancelTaskDlgt);\n            this._cancelTaskCurrZone =\n                zoneSpec && (zoneSpec.onCancelTask ? this.zone : parentDelegate.zone);\n            this._hasTaskZS = zoneSpec && (zoneSpec.onHasTask ? zoneSpec : parentDelegate._hasTaskZS);\n            this._hasTaskDlgt =\n                zoneSpec && (zoneSpec.onHasTask ? parentDelegate : parentDelegate._hasTaskDlgt);\n            this._hasTaskCurrZone = zoneSpec && (zoneSpec.onHasTask ? this.zone : parentDelegate.zone);\n        }\n        ZoneDelegate.prototype.fork = function (targetZone, zoneSpec) {\n            return this._forkZS ? this._forkZS.onFork(this._forkDlgt, this.zone, targetZone, zoneSpec) :\n                new Zone(targetZone, zoneSpec);\n        };\n        ZoneDelegate.prototype.intercept = function (targetZone, callback, source) {\n            return this._interceptZS ?\n                this._interceptZS.onIntercept(this._interceptDlgt, this._interceptCurrZone, targetZone, callback, source) :\n                callback;\n        };\n        ZoneDelegate.prototype.invoke = function (targetZone, callback, applyThis, applyArgs, source) {\n            return this._invokeZS ?\n                this._invokeZS.onInvoke(this._invokeDlgt, this._invokeCurrZone, targetZone, callback, applyThis, applyArgs, source) :\n                callback.apply(applyThis, applyArgs);\n        };\n        ZoneDelegate.prototype.handleError = function (targetZone, error) {\n            return this._handleErrorZS ?\n                this._handleErrorZS.onHandleError(this._handleErrorDlgt, this._handleErrorCurrZone, targetZone, error) :\n                true;\n        };\n        ZoneDelegate.prototype.scheduleTask = function (targetZone, task) {\n            try {\n                if (this._scheduleTaskZS) {\n                    return this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt, this._scheduleTaskCurrZone, targetZone, task);\n                }\n                else if (task.scheduleFn) {\n                    task.scheduleFn(task);\n                }\n                else if (task.type == 'microTask') {\n                    scheduleMicroTask(task);\n                }\n                else {\n                    throw new Error('Task is missing scheduleFn.');\n                }\n                return task;\n            }\n            finally {\n                if (targetZone == this.zone) {\n                    this._updateTaskCount(task.type, 1);\n                }\n            }\n        };\n        ZoneDelegate.prototype.invokeTask = function (targetZone, task, applyThis, applyArgs) {\n            try {\n                return this._invokeTaskZS ?\n                    this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt, this._invokeTaskCurrZone, targetZone, task, applyThis, applyArgs) :\n                    task.callback.apply(applyThis, applyArgs);\n            }\n            finally {\n                if (targetZone == this.zone && (task.type != 'eventTask') &&\n                    !(task.data && task.data.isPeriodic)) {\n                    this._updateTaskCount(task.type, -1);\n                }\n            }\n        };\n        ZoneDelegate.prototype.cancelTask = function (targetZone, task) {\n            var value;\n            if (this._cancelTaskZS) {\n                value = this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt, this._cancelTaskCurrZone, targetZone, task);\n            }\n            else if (!task.cancelFn) {\n                throw new Error('Task does not support cancellation, or is already canceled.');\n            }\n            else {\n                value = task.cancelFn(task);\n            }\n            if (targetZone == this.zone) {\n                // this should not be in the finally block, because exceptions assume not canceled.\n                this._updateTaskCount(task.type, -1);\n            }\n            return value;\n        };\n        ZoneDelegate.prototype.hasTask = function (targetZone, isEmpty) {\n            return this._hasTaskZS &&\n                this._hasTaskZS.onHasTask(this._hasTaskDlgt, this._hasTaskCurrZone, targetZone, isEmpty);\n        };\n        ZoneDelegate.prototype._updateTaskCount = function (type, count) {\n            var counts = this._taskCounts;\n            var prev = counts[type];\n            var next = counts[type] = prev + count;\n            if (next < 0) {\n                throw new Error('More tasks executed then were scheduled.');\n            }\n            if (prev == 0 || next == 0) {\n                var isEmpty = {\n                    microTask: counts.microTask > 0,\n                    macroTask: counts.macroTask > 0,\n                    eventTask: counts.eventTask > 0,\n                    change: type\n                };\n                try {\n                    this.hasTask(this.zone, isEmpty);\n                }\n                finally {\n                    if (this._parentDelegate) {\n                        this._parentDelegate._updateTaskCount(type, count);\n                    }\n                }\n            }\n        };\n        return ZoneDelegate;\n    }());\n    var ZoneTask = (function () {\n        function ZoneTask(type, zone, source, callback, options, scheduleFn, cancelFn) {\n            this.runCount = 0;\n            this.type = type;\n            this.zone = zone;\n            this.source = source;\n            this.data = options;\n            this.scheduleFn = scheduleFn;\n            this.cancelFn = cancelFn;\n            this.callback = callback;\n            var self = this;\n            this.invoke = function () {\n                _numberOfNestedTaskFrames++;\n                try {\n                    return zone.runTask(self, this, arguments);\n                }\n                finally {\n                    if (_numberOfNestedTaskFrames == 1) {\n                        drainMicroTaskQueue();\n                    }\n                    _numberOfNestedTaskFrames--;\n                }\n            };\n        }\n        ZoneTask.prototype.toString = function () {\n            if (this.data && typeof this.data.handleId !== 'undefined') {\n                return this.data.handleId;\n            }\n            else {\n                return Object.prototype.toString.call(this);\n            }\n        };\n        // add toJSON method to prevent cyclic error when\n        // call JSON.stringify(zoneTask)\n        ZoneTask.prototype.toJSON = function () {\n            return {\n                type: this.type,\n                source: this.source,\n                data: this.data,\n                zone: this.zone.name,\n                invoke: this.invoke,\n                scheduleFn: this.scheduleFn,\n                cancelFn: this.cancelFn,\n                runCount: this.runCount,\n                callback: this.callback\n            };\n        };\n        return ZoneTask;\n    }());\n    var ZoneFrame = (function () {\n        function ZoneFrame(parent, zone) {\n            this.parent = parent;\n            this.zone = zone;\n        }\n        return ZoneFrame;\n    }());\n    function __symbol__(name) {\n        return '__zone_symbol__' + name;\n    }\n    \n    var symbolSetTimeout = __symbol__('setTimeout');\n    var symbolPromise = __symbol__('Promise');\n    var symbolThen = __symbol__('then');\n    var _currentZoneFrame = new ZoneFrame(null, new Zone(null, null));\n    var _currentTask = null;\n    var _microTaskQueue = [];\n    var _isDrainingMicrotaskQueue = false;\n    var _uncaughtPromiseErrors = [];\n    var _numberOfNestedTaskFrames = 0;\n    function scheduleQueueDrain() {\n        // if we are not running in any task, and there has not been anything scheduled\n        // we must bootstrap the initial task creation by manually scheduling the drain\n        if (_numberOfNestedTaskFrames === 0 && _microTaskQueue.length === 0) {\n            // We are not running in Task, so we need to kickstart the microtask queue.\n            if (global[symbolPromise]) {\n                global[symbolPromise].resolve(0)[symbolThen](drainMicroTaskQueue);\n            }\n            else {\n                global[symbolSetTimeout](drainMicroTaskQueue, 0);\n            }\n        }\n    }\n    function scheduleMicroTask(task) {\n        scheduleQueueDrain();\n        _microTaskQueue.push(task);\n    }\n    function consoleError(e) {\n        var rejection = e && e.rejection;\n        if (rejection) {\n            console.error('Unhandled Promise rejection:', rejection instanceof Error ? rejection.message : rejection, '; Zone:', e.zone.name, '; Task:', e.task && e.task.source, '; Value:', rejection, rejection instanceof Error ? rejection.stack : undefined);\n        }\n        console.error(e);\n    }\n    function drainMicroTaskQueue() {\n        if (!_isDrainingMicrotaskQueue) {\n            _isDrainingMicrotaskQueue = true;\n            while (_microTaskQueue.length) {\n                var queue = _microTaskQueue;\n                _microTaskQueue = [];\n                for (var i = 0; i < queue.length; i++) {\n                    var task = queue[i];\n                    try {\n                        task.zone.runTask(task, null, null);\n                    }\n                    catch (e) {\n                        consoleError(e);\n                    }\n                }\n            }\n            while (_uncaughtPromiseErrors.length) {\n                var _loop_1 = function () {\n                    var uncaughtPromiseError = _uncaughtPromiseErrors.shift();\n                    try {\n                        uncaughtPromiseError.zone.runGuarded(function () {\n                            throw uncaughtPromiseError;\n                        });\n                    }\n                    catch (e) {\n                        consoleError(e);\n                    }\n                };\n                while (_uncaughtPromiseErrors.length) {\n                    _loop_1();\n                }\n            }\n            _isDrainingMicrotaskQueue = false;\n        }\n    }\n    function isThenable(value) {\n        return value && value.then;\n    }\n    function forwardResolution(value) {\n        return value;\n    }\n    function forwardRejection(rejection) {\n        return ZoneAwarePromise.reject(rejection);\n    }\n    var symbolState = __symbol__('state');\n    var symbolValue = __symbol__('value');\n    var source = 'Promise.then';\n    var UNRESOLVED = null;\n    var RESOLVED = true;\n    var REJECTED = false;\n    var REJECTED_NO_CATCH = 0;\n    function makeResolver(promise, state) {\n        return function (v) {\n            resolvePromise(promise, state, v);\n            // Do not return value or you will break the Promise spec.\n        };\n    }\n    function resolvePromise(promise, state, value) {\n        if (promise[symbolState] === UNRESOLVED) {\n            if (value instanceof ZoneAwarePromise && value.hasOwnProperty(symbolState) &&\n                value.hasOwnProperty(symbolValue) && value[symbolState] !== UNRESOLVED) {\n                clearRejectedNoCatch(value);\n                resolvePromise(promise, value[symbolState], value[symbolValue]);\n            }\n            else if (isThenable(value)) {\n                value.then(makeResolver(promise, state), makeResolver(promise, false));\n            }\n            else {\n                promise[symbolState] = state;\n                var queue = promise[symbolValue];\n                promise[symbolValue] = value;\n                for (var i = 0; i < queue.length;) {\n                    scheduleResolveOrReject(promise, queue[i++], queue[i++], queue[i++], queue[i++]);\n                }\n                if (queue.length == 0 && state == REJECTED) {\n                    promise[symbolState] = REJECTED_NO_CATCH;\n                    try {\n                        throw new Error('Uncaught (in promise): ' + value +\n                            (value && value.stack ? '\\n' + value.stack : ''));\n                    }\n                    catch (e) {\n                        var error_1 = e;\n                        error_1.rejection = value;\n                        error_1.promise = promise;\n                        error_1.zone = Zone.current;\n                        error_1.task = Zone.currentTask;\n                        _uncaughtPromiseErrors.push(error_1);\n                        scheduleQueueDrain();\n                    }\n                }\n            }\n        }\n        // Resolving an already resolved promise is a noop.\n        return promise;\n    }\n    function clearRejectedNoCatch(promise) {\n        if (promise[symbolState] === REJECTED_NO_CATCH) {\n            promise[symbolState] = REJECTED;\n            for (var i = 0; i < _uncaughtPromiseErrors.length; i++) {\n                if (promise === _uncaughtPromiseErrors[i].promise) {\n                    _uncaughtPromiseErrors.splice(i, 1);\n                    break;\n                }\n            }\n        }\n    }\n    function scheduleResolveOrReject(promise, zone, chainPromise, onFulfilled, onRejected) {\n        clearRejectedNoCatch(promise);\n        var delegate = promise[symbolState] ? onFulfilled || forwardResolution : onRejected || forwardRejection;\n        zone.scheduleMicroTask(source, function () {\n            try {\n                resolvePromise(chainPromise, true, zone.run(delegate, null, [promise[symbolValue]]));\n            }\n            catch (error) {\n                resolvePromise(chainPromise, false, error);\n            }\n        });\n    }\n    var ZoneAwarePromise = (function () {\n        function ZoneAwarePromise(executor) {\n            var promise = this;\n            if (!(promise instanceof ZoneAwarePromise)) {\n                throw new Error('Must be an instanceof Promise.');\n            }\n            promise[symbolState] = UNRESOLVED;\n            promise[symbolValue] = []; // queue;\n            try {\n                executor && executor(makeResolver(promise, RESOLVED), makeResolver(promise, REJECTED));\n            }\n            catch (e) {\n                resolvePromise(promise, false, e);\n            }\n        }\n        ZoneAwarePromise.toString = function () {\n            return 'function ZoneAwarePromise() { [native code] }';\n        };\n        ZoneAwarePromise.resolve = function (value) {\n            return resolvePromise(new this(null), RESOLVED, value);\n        };\n        ZoneAwarePromise.reject = function (error) {\n            return resolvePromise(new this(null), REJECTED, error);\n        };\n        ZoneAwarePromise.race = function (values) {\n            var resolve;\n            var reject;\n            var promise = new this(function (res, rej) {\n                _a = [res, rej], resolve = _a[0], reject = _a[1];\n                var _a;\n            });\n            function onResolve(value) {\n                promise && (promise = null || resolve(value));\n            }\n            function onReject(error) {\n                promise && (promise = null || reject(error));\n            }\n            for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\n                var value = values_1[_i];\n                if (!isThenable(value)) {\n                    value = this.resolve(value);\n                }\n                value.then(onResolve, onReject);\n            }\n            return promise;\n        };\n        ZoneAwarePromise.all = function (values) {\n            var resolve;\n            var reject;\n            var promise = new this(function (res, rej) {\n                resolve = res;\n                reject = rej;\n            });\n            var count = 0;\n            var resolvedValues = [];\n            for (var _i = 0, values_2 = values; _i < values_2.length; _i++) {\n                var value = values_2[_i];\n                if (!isThenable(value)) {\n                    value = this.resolve(value);\n                }\n                value.then((function (index) { return function (value) {\n                    resolvedValues[index] = value;\n                    count--;\n                    if (!count) {\n                        resolve(resolvedValues);\n                    }\n                }; })(count), reject);\n                count++;\n            }\n            if (!count)\n                resolve(resolvedValues);\n            return promise;\n        };\n        ZoneAwarePromise.prototype.then = function (onFulfilled, onRejected) {\n            var chainPromise = new this.constructor(null);\n            var zone = Zone.current;\n            if (this[symbolState] == UNRESOLVED) {\n                this[symbolValue].push(zone, chainPromise, onFulfilled, onRejected);\n            }\n            else {\n                scheduleResolveOrReject(this, zone, chainPromise, onFulfilled, onRejected);\n            }\n            return chainPromise;\n        };\n        ZoneAwarePromise.prototype.catch = function (onRejected) {\n            return this.then(null, onRejected);\n        };\n        return ZoneAwarePromise;\n    }());\n    // Protect against aggressive optimizers dropping seemingly unused properties.\n    // E.g. Closure Compiler in advanced mode.\n    ZoneAwarePromise['resolve'] = ZoneAwarePromise.resolve;\n    ZoneAwarePromise['reject'] = ZoneAwarePromise.reject;\n    ZoneAwarePromise['race'] = ZoneAwarePromise.race;\n    ZoneAwarePromise['all'] = ZoneAwarePromise.all;\n    var NativePromise = global[__symbol__('Promise')] = global['Promise'];\n    global['Promise'] = ZoneAwarePromise;\n    function patchThen(NativePromise) {\n        var NativePromiseProtototype = NativePromise.prototype;\n        var NativePromiseThen = NativePromiseProtototype[__symbol__('then')] =\n            NativePromiseProtototype.then;\n        NativePromiseProtototype.then = function (onResolve, onReject) {\n            var nativePromise = this;\n            return new ZoneAwarePromise(function (resolve, reject) {\n                NativePromiseThen.call(nativePromise, resolve, reject);\n            })\n                .then(onResolve, onReject);\n        };\n    }\n    if (NativePromise) {\n        patchThen(NativePromise);\n        if (typeof global['fetch'] !== 'undefined') {\n            var fetchPromise = void 0;\n            try {\n                // In MS Edge this throws\n                fetchPromise = global['fetch']();\n            }\n            catch (e) {\n                // In Chrome this throws instead.\n                fetchPromise = global['fetch']('about:blank');\n            }\n            // ignore output to prevent error;\n            fetchPromise.then(function () { return null; }, function () { return null; });\n            if (fetchPromise.constructor != NativePromise &&\n                fetchPromise.constructor != ZoneAwarePromise) {\n                patchThen(fetchPromise.constructor);\n            }\n        }\n    }\n    // This is not part of public API, but it is usefull for tests, so we expose it.\n    Promise[Zone.__symbol__('uncaughtPromiseErrors')] = _uncaughtPromiseErrors;\n    /*\n     * This code patches Error so that:\n     *   - It ignores un-needed stack frames.\n     *   - It Shows the associated Zone for reach frame.\n     */\n    var FrameType;\n    (function (FrameType) {\n        /// Skip this frame when printing out stack\n        FrameType[FrameType[\"blackList\"] = 0] = \"blackList\";\n        /// This frame marks zone transition\n        FrameType[FrameType[\"transition\"] = 1] = \"transition\";\n    })(FrameType || (FrameType = {}));\n    var NativeError = global[__symbol__('Error')] = global.Error;\n    // Store the frames which should be removed from the stack frames\n    var blackListedStackFrames = {};\n    // We must find the frame where Error was created, otherwise we assume we don't understand stack\n    var zoneAwareFrame;\n    global.Error = ZoneAwareError;\n    // How should the stack frames be parsed.\n    var frameParserStrategy = null;\n    var stackRewrite = 'stackRewrite';\n    // fix #595, create property descriptor\n    // for error properties\n    var createProperty = function (props, key) {\n        // if property is already defined, skip it.\n        if (props[key]) {\n            return;\n        }\n        // define a local property\n        // in case error property is not settable\n        var name = __symbol__(key);\n        props[key] = {\n            configurable: true,\n            enumerable: true,\n            get: function () {\n                // if local property has no value\n                // use internal error's property value\n                if (!this[name]) {\n                    var error_2 = this[__symbol__('error')];\n                    if (error_2) {\n                        this[name] = error_2[key];\n                    }\n                }\n                return this[name];\n            },\n            set: function (value) {\n                // setter will set value to local property value\n                this[name] = value;\n            }\n        };\n    };\n    // fix #595, create property descriptor\n    // for error method properties\n    var createMethodProperty = function (props, key) {\n        if (props[key]) {\n            return;\n        }\n        props[key] = {\n            configurable: true,\n            enumerable: true,\n            writable: true,\n            value: function () {\n                var error = this[__symbol__('error')];\n                var errorMethod = (error && error[key]) || this[key];\n                if (errorMethod) {\n                    return errorMethod.apply(error, arguments);\n                }\n            }\n        };\n    };\n    var createErrorProperties = function () {\n        var props = Object.create(null);\n        var error = new NativeError();\n        var keys = Object.getOwnPropertyNames(error);\n        for (var i = 0; i < keys.length; i++) {\n            var key = keys[i];\n            // Avoid bugs when hasOwnProperty is shadowed\n            if (Object.prototype.hasOwnProperty.call(error, key)) {\n                createProperty(props, key);\n            }\n        }\n        var proto = NativeError.prototype;\n        if (proto) {\n            var pKeys = Object.getOwnPropertyNames(proto);\n            for (var i = 0; i < pKeys.length; i++) {\n                var key = pKeys[i];\n                // skip constructor\n                if (key !== 'constructor' && key !== 'toString' && key !== 'toSource') {\n                    createProperty(props, key);\n                }\n            }\n        }\n        // some other properties are not\n        // in NativeError\n        createProperty(props, 'originalStack');\n        createProperty(props, 'zoneAwareStack');\n        // define toString, toSource as method property\n        createMethodProperty(props, 'toString');\n        createMethodProperty(props, 'toSource');\n        return props;\n    };\n    var errorProperties = createErrorProperties();\n    // for derived Error class which extends ZoneAwareError\n    // we should not override the derived class's property\n    // so we create a new props object only copy the properties\n    // from errorProperties which not exist in derived Error's prototype\n    var getErrorPropertiesForPrototype = function (prototype) {\n        // if the prototype is ZoneAwareError.prototype\n        // we just return the prebuilt errorProperties.\n        if (prototype === ZoneAwareError.prototype) {\n            return errorProperties;\n        }\n        var newProps = Object.create(null);\n        var cKeys = Object.getOwnPropertyNames(errorProperties);\n        var keys = Object.getOwnPropertyNames(prototype);\n        cKeys.forEach(function (cKey) {\n            if (keys.filter(function (key) {\n                return key === cKey;\n            })\n                .length === 0) {\n                newProps[cKey] = errorProperties[cKey];\n            }\n        });\n        return newProps;\n    };\n    /**\n     * This is ZoneAwareError which processes the stack frame and cleans up extra frames as well as\n     * adds zone information to it.\n     */\n    function ZoneAwareError() {\n        // make sure we have a valid this\n        // if this is undefined(call Error without new) or this is global\n        // or this is some other objects, we should force to create a\n        // valid ZoneAwareError by call Object.create()\n        if (!(this instanceof ZoneAwareError)) {\n            return ZoneAwareError.apply(Object.create(ZoneAwareError.prototype), arguments);\n        }\n        // Create an Error.\n        var error = NativeError.apply(this, arguments);\n        this[__symbol__('error')] = error;\n        // Save original stack trace\n        error.originalStack = error.stack;\n        // Process the stack trace and rewrite the frames.\n        if (ZoneAwareError[stackRewrite] && error.originalStack) {\n            var frames_1 = error.originalStack.split('\\n');\n            var zoneFrame = _currentZoneFrame;\n            var i = 0;\n            // Find the first frame\n            while (frames_1[i] !== zoneAwareFrame && i < frames_1.length) {\n                i++;\n            }\n            for (; i < frames_1.length && zoneFrame; i++) {\n                var frame = frames_1[i];\n                if (frame.trim()) {\n                    var frameType = blackListedStackFrames.hasOwnProperty(frame) && blackListedStackFrames[frame];\n                    if (frameType === FrameType.blackList) {\n                        frames_1.splice(i, 1);\n                        i--;\n                    }\n                    else if (frameType === FrameType.transition) {\n                        if (zoneFrame.parent) {\n                            // This is the special frame where zone changed. Print and process it accordingly\n                            frames_1[i] += \" [\" + zoneFrame.parent.zone.name + \" => \" + zoneFrame.zone.name + \"]\";\n                            zoneFrame = zoneFrame.parent;\n                        }\n                        else {\n                            zoneFrame = null;\n                        }\n                    }\n                    else {\n                        frames_1[i] += \" [\" + zoneFrame.zone.name + \"]\";\n                    }\n                }\n            }\n            error.stack = error.zoneAwareStack = frames_1.join('\\n');\n        }\n        // use defineProperties here instead of copy property value\n        // because of issue #595 which will break angular2.\n        Object.defineProperties(this, getErrorPropertiesForPrototype(Object.getPrototypeOf(this)));\n        return this;\n    }\n    // Copy the prototype so that instanceof operator works as expected\n    ZoneAwareError.prototype = NativeError.prototype;\n    ZoneAwareError[Zone.__symbol__('blacklistedStackFrames')] = blackListedStackFrames;\n    ZoneAwareError[stackRewrite] = false;\n    if (NativeError.hasOwnProperty('stackTraceLimit')) {\n        // Extend default stack limit as we will be removing few frames.\n        NativeError.stackTraceLimit = Math.max(NativeError.stackTraceLimit, 15);\n        // make sure that ZoneAwareError has the same property which forwards to NativeError.\n        Object.defineProperty(ZoneAwareError, 'stackTraceLimit', {\n            get: function () {\n                return NativeError.stackTraceLimit;\n            },\n            set: function (value) {\n                return NativeError.stackTraceLimit = value;\n            }\n        });\n    }\n    if (NativeError.hasOwnProperty('captureStackTrace')) {\n        Object.defineProperty(ZoneAwareError, 'captureStackTrace', {\n            // add named function here because we need to remove this\n            // stack frame when prepareStackTrace below\n            value: function zoneCaptureStackTrace(targetObject, constructorOpt) {\n                NativeError.captureStackTrace(targetObject, constructorOpt);\n            }\n        });\n    }\n    Object.defineProperty(ZoneAwareError, 'prepareStackTrace', {\n        get: function () {\n            return NativeError.prepareStackTrace;\n        },\n        set: function (value) {\n            if (!value || typeof value !== 'function') {\n                return NativeError.prepareStackTrace = value;\n            }\n            return NativeError.prepareStackTrace = function (error, structuredStackTrace) {\n                // remove additional stack information from ZoneAwareError.captureStackTrace\n                if (structuredStackTrace) {\n                    for (var i = 0; i < structuredStackTrace.length; i++) {\n                        var st = structuredStackTrace[i];\n                        // remove the first function which name is zoneCaptureStackTrace\n                        if (st.getFunctionName() === 'zoneCaptureStackTrace') {\n                            structuredStackTrace.splice(i, 1);\n                            break;\n                        }\n                    }\n                }\n                return value.apply(this, [error, structuredStackTrace]);\n            };\n        }\n    });\n    // Now we need to populet the `blacklistedStackFrames` as well as find the\n    // run/runGuraded/runTask frames. This is done by creating a detect zone and then threading\n    // the execution through all of the above methods so that we can look at the stack trace and\n    // find the frames of interest.\n    var detectZone = Zone.current.fork({\n        name: 'detect',\n        onInvoke: function (parentZoneDelegate, currentZone, targetZone, delegate, applyThis, applyArgs, source) {\n            // Here only so that it will show up in the stack frame so that it can be black listed.\n            return parentZoneDelegate.invoke(targetZone, delegate, applyThis, applyArgs, source);\n        },\n        onHandleError: function (parentZD, current, target, error) {\n            if (error.originalStack && Error === ZoneAwareError) {\n                var frames_2 = error.originalStack.split(/\\n/);\n                var runFrame = false, runGuardedFrame = false, runTaskFrame = false;\n                while (frames_2.length) {\n                    var frame = frames_2.shift();\n                    // On safari it is possible to have stack frame with no line number.\n                    // This check makes sure that we don't filter frames on name only (must have\n                    // linenumber)\n                    if (/:\\d+:\\d+/.test(frame)) {\n                        // Get rid of the path so that we don't accidintely find function name in path.\n                        // In chrome the seperator is `(` and `@` in FF and safari\n                        // Chrome: at Zone.run (zone.js:100)\n                        // Chrome: at Zone.run (http://localhost:9876/base/build/lib/zone.js:100:24)\n                        // FireFox: Zone.prototype.run@http://localhost:9876/base/build/lib/zone.js:101:24\n                        // Safari: run@http://localhost:9876/base/build/lib/zone.js:101:24\n                        var fnName = frame.split('(')[0].split('@')[0];\n                        var frameType = FrameType.transition;\n                        if (fnName.indexOf('ZoneAwareError') !== -1) {\n                            zoneAwareFrame = frame;\n                        }\n                        if (fnName.indexOf('runGuarded') !== -1) {\n                            runGuardedFrame = true;\n                        }\n                        else if (fnName.indexOf('runTask') !== -1) {\n                            runTaskFrame = true;\n                        }\n                        else if (fnName.indexOf('run') !== -1) {\n                            runFrame = true;\n                        }\n                        else {\n                            frameType = FrameType.blackList;\n                        }\n                        blackListedStackFrames[frame] = frameType;\n                        // Once we find all of the frames we can stop looking.\n                        if (runFrame && runGuardedFrame && runTaskFrame) {\n                            ZoneAwareError[stackRewrite] = true;\n                            break;\n                        }\n                    }\n                }\n            }\n            return false;\n        }\n    });\n    // carefully constructor a stack frame which contains all of the frames of interest which\n    // need to be detected and blacklisted.\n    var detectRunFn = function () {\n        detectZone.run(function () {\n            detectZone.runGuarded(function () {\n                throw new Error('blacklistStackFrames');\n            });\n        });\n    };\n    // Cause the error to extract the stack frames.\n    detectZone.runTask(detectZone.scheduleMacroTask('detect', detectRunFn, null, function () { return null; }, null));\n    return global['Zone'] = Zone;\n})(typeof window === 'object' && window || typeof self === 'object' && self || global);\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Suppress closure compiler errors about unknown 'Zone' variable\n * @fileoverview\n * @suppress {undefinedVars}\n */\nvar zoneSymbol = function (n) { return \"__zone_symbol__\" + n; };\nvar _global$1 = typeof window === 'object' && window || typeof self === 'object' && self || global;\nfunction bindArguments(args, source) {\n    for (var i = args.length - 1; i >= 0; i--) {\n        if (typeof args[i] === 'function') {\n            args[i] = Zone.current.wrap(args[i], source + '_' + i);\n        }\n    }\n    return args;\n}\n\n\nvar isNode = (!('nw' in _global$1) && typeof process !== 'undefined' &&\n    {}.toString.call(process) === '[object process]');\n\n\n\n\n\nvar EVENT_TASKS = zoneSymbol('eventTasks');\n// For EventTarget\nvar ADD_EVENT_LISTENER = 'addEventListener';\nvar REMOVE_EVENT_LISTENER = 'removeEventListener';\nfunction findExistingRegisteredTask(target, handler, name, capture, remove) {\n    var eventTasks = target[EVENT_TASKS];\n    if (eventTasks) {\n        for (var i = 0; i < eventTasks.length; i++) {\n            var eventTask = eventTasks[i];\n            var data = eventTask.data;\n            var listener = data.handler;\n            if ((data.handler === handler || listener.listener === handler) &&\n                data.useCapturing === capture && data.eventName === name) {\n                if (remove) {\n                    eventTasks.splice(i, 1);\n                }\n                return eventTask;\n            }\n        }\n    }\n    return null;\n}\nfunction findAllExistingRegisteredTasks(target, name, capture, remove) {\n    var eventTasks = target[EVENT_TASKS];\n    if (eventTasks) {\n        var result = [];\n        for (var i = eventTasks.length - 1; i >= 0; i--) {\n            var eventTask = eventTasks[i];\n            var data = eventTask.data;\n            if (data.eventName === name && data.useCapturing === capture) {\n                result.push(eventTask);\n                if (remove) {\n                    eventTasks.splice(i, 1);\n                }\n            }\n        }\n        return result;\n    }\n    return null;\n}\nfunction attachRegisteredEvent(target, eventTask, isPrepend) {\n    var eventTasks = target[EVENT_TASKS];\n    if (!eventTasks) {\n        eventTasks = target[EVENT_TASKS] = [];\n    }\n    if (isPrepend) {\n        eventTasks.unshift(eventTask);\n    }\n    else {\n        eventTasks.push(eventTask);\n    }\n}\nvar defaultListenerMetaCreator = function (self, args) {\n    return {\n        useCapturing: args[2],\n        eventName: args[0],\n        handler: args[1],\n        target: self || _global$1,\n        name: args[0],\n        invokeAddFunc: function (addFnSymbol, delegate) {\n            if (delegate && delegate.invoke) {\n                return this.target[addFnSymbol](this.eventName, delegate.invoke, this.useCapturing);\n            }\n            else {\n                return this.target[addFnSymbol](this.eventName, delegate, this.useCapturing);\n            }\n        },\n        invokeRemoveFunc: function (removeFnSymbol, delegate) {\n            if (delegate && delegate.invoke) {\n                return this.target[removeFnSymbol](this.eventName, delegate.invoke, this.useCapturing);\n            }\n            else {\n                return this.target[removeFnSymbol](this.eventName, delegate, this.useCapturing);\n            }\n        }\n    };\n};\nfunction makeZoneAwareAddListener(addFnName, removeFnName, useCapturingParam, allowDuplicates, isPrepend, metaCreator) {\n    if (useCapturingParam === void 0) { useCapturingParam = true; }\n    if (allowDuplicates === void 0) { allowDuplicates = false; }\n    if (isPrepend === void 0) { isPrepend = false; }\n    if (metaCreator === void 0) { metaCreator = defaultListenerMetaCreator; }\n    var addFnSymbol = zoneSymbol(addFnName);\n    var removeFnSymbol = zoneSymbol(removeFnName);\n    var defaultUseCapturing = useCapturingParam ? false : undefined;\n    function scheduleEventListener(eventTask) {\n        var meta = eventTask.data;\n        attachRegisteredEvent(meta.target, eventTask, isPrepend);\n        return meta.invokeAddFunc(addFnSymbol, eventTask);\n    }\n    function cancelEventListener(eventTask) {\n        var meta = eventTask.data;\n        findExistingRegisteredTask(meta.target, eventTask.invoke, meta.eventName, meta.useCapturing, true);\n        return meta.invokeRemoveFunc(removeFnSymbol, eventTask);\n    }\n    return function zoneAwareAddListener(self, args) {\n        var data = metaCreator(self, args);\n        data.useCapturing = data.useCapturing || defaultUseCapturing;\n        // - Inside a Web Worker, `this` is undefined, the context is `global`\n        // - When `addEventListener` is called on the global context in strict mode, `this` is undefined\n        // see https://github.com/angular/zone.js/issues/190\n        var delegate = null;\n        if (typeof data.handler == 'function') {\n            delegate = data.handler;\n        }\n        else if (data.handler && data.handler.handleEvent) {\n            delegate = function (event) { return data.handler.handleEvent(event); };\n        }\n        var validZoneHandler = false;\n        try {\n            // In cross site contexts (such as WebDriver frameworks like Selenium),\n            // accessing the handler object here will cause an exception to be thrown which\n            // will fail tests prematurely.\n            validZoneHandler = data.handler && data.handler.toString() === '[object FunctionWrapper]';\n        }\n        catch (e) {\n            // Returning nothing here is fine, because objects in a cross-site context are unusable\n            return;\n        }\n        // Ignore special listeners of IE11 & Edge dev tools, see\n        // https://github.com/angular/zone.js/issues/150\n        if (!delegate || validZoneHandler) {\n            return data.invokeAddFunc(addFnSymbol, data.handler);\n        }\n        if (!allowDuplicates) {\n            var eventTask = findExistingRegisteredTask(data.target, data.handler, data.eventName, data.useCapturing, false);\n            if (eventTask) {\n                // we already registered, so this will have noop.\n                return data.invokeAddFunc(addFnSymbol, eventTask);\n            }\n        }\n        var zone = Zone.current;\n        var source = data.target.constructor['name'] + '.' + addFnName + ':' + data.eventName;\n        zone.scheduleEventTask(source, delegate, data, scheduleEventListener, cancelEventListener);\n    };\n}\nfunction makeZoneAwareRemoveListener(fnName, useCapturingParam, metaCreator) {\n    if (useCapturingParam === void 0) { useCapturingParam = true; }\n    if (metaCreator === void 0) { metaCreator = defaultListenerMetaCreator; }\n    var symbol = zoneSymbol(fnName);\n    var defaultUseCapturing = useCapturingParam ? false : undefined;\n    return function zoneAwareRemoveListener(self, args) {\n        var data = metaCreator(self, args);\n        data.useCapturing = data.useCapturing || defaultUseCapturing;\n        // - Inside a Web Worker, `this` is undefined, the context is `global`\n        // - When `addEventListener` is called on the global context in strict mode, `this` is undefined\n        // see https://github.com/angular/zone.js/issues/190\n        var eventTask = findExistingRegisteredTask(data.target, data.handler, data.eventName, data.useCapturing, true);\n        if (eventTask) {\n            eventTask.zone.cancelTask(eventTask);\n        }\n        else {\n            data.invokeRemoveFunc(symbol, data.handler);\n        }\n    };\n}\nfunction makeZoneAwareRemoveAllListeners(fnName, useCapturingParam) {\n    if (useCapturingParam === void 0) { useCapturingParam = true; }\n    var symbol = zoneSymbol(fnName);\n    var defaultUseCapturing = useCapturingParam ? false : undefined;\n    return function zoneAwareRemoveAllListener(self, args) {\n        var target = self || _global$1;\n        if (args.length === 0) {\n            // remove all listeners without eventName\n            target[EVENT_TASKS] = [];\n            // we don't cancel Task either, because call native eventEmitter.removeAllListeners will\n            // will do remove listener(cancelTask) for us\n            target[symbol]();\n            return;\n        }\n        var eventName = args[0];\n        var useCapturing = args[1] || defaultUseCapturing;\n        // call this function just remove the related eventTask from target[EVENT_TASKS]\n        findAllExistingRegisteredTasks(target, eventName, useCapturing, true);\n        // we don't need useCapturing here because useCapturing is just for DOM, and\n        // removeAllListeners should only be called by node eventEmitter\n        // and we don't cancel Task either, because call native eventEmitter.removeAllListeners will\n        // will do remove listener(cancelTask) for us\n        target[symbol](eventName);\n    };\n}\nfunction makeZoneAwareListeners(fnName) {\n    var symbol = zoneSymbol(fnName);\n    return function zoneAwareEventListeners(self, args) {\n        var eventName = args[0];\n        var target = self || _global$1;\n        if (!target[EVENT_TASKS]) {\n            return [];\n        }\n        return target[EVENT_TASKS]\n            .filter(function (task) { return task.data.eventName === eventName; })\n            .map(function (task) { return task.data.handler; });\n    };\n}\nvar zoneAwareAddEventListener = makeZoneAwareAddListener(ADD_EVENT_LISTENER, REMOVE_EVENT_LISTENER);\nvar zoneAwareRemoveEventListener = makeZoneAwareRemoveListener(REMOVE_EVENT_LISTENER);\n\nvar originalInstanceKey = zoneSymbol('originalInstance');\n// wrap some native API on `window`\n\n\nfunction createNamedFn(name, delegate) {\n    try {\n        return (Function('f', \"return function \" + name + \"(){return f(this, arguments)}\"))(delegate);\n    }\n    catch (e) {\n        // if we fail, we must be CSP, just return delegate.\n        return function () {\n            return delegate(this, arguments);\n        };\n    }\n}\nfunction patchMethod(target, name, patchFn) {\n    var proto = target;\n    while (proto && Object.getOwnPropertyNames(proto).indexOf(name) === -1) {\n        proto = Object.getPrototypeOf(proto);\n    }\n    if (!proto && target[name]) {\n        // somehow we did not find it, but we can see it. This happens on IE for Window properties.\n        proto = target;\n    }\n    var delegateName = zoneSymbol(name);\n    var delegate;\n    if (proto && !(delegate = proto[delegateName])) {\n        delegate = proto[delegateName] = proto[name];\n        proto[name] = createNamedFn(name, patchFn(delegate, delegateName, name));\n    }\n    return delegate;\n}\n// TODO: support cancel task later if necessary\nfunction patchMacroTask(obj, funcName, metaCreator) {\n    var setNative = null;\n    function scheduleTask(task) {\n        var data = task.data;\n        data.args[data.callbackIndex] = function () {\n            task.invoke.apply(this, arguments);\n        };\n        setNative.apply(data.target, data.args);\n        return task;\n    }\n    setNative = patchMethod(obj, funcName, function (delegate) { return function (self, args) {\n        var meta = metaCreator(self, args);\n        if (meta.callbackIndex >= 0 && typeof args[meta.callbackIndex] === 'function') {\n            var task = Zone.current.scheduleMacroTask(meta.name, args[meta.callbackIndex], meta, scheduleTask, null);\n            return task;\n        }\n        else {\n            // cause an error by calling it directly.\n            return delegate.apply(self, args);\n        }\n    }; });\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar callAndReturnFirstParam = function (fn) {\n    return function (self, args) {\n        fn(self, args);\n        return self;\n    };\n};\n// For EventEmitter\nvar EE_ADD_LISTENER = 'addListener';\nvar EE_PREPEND_LISTENER = 'prependListener';\nvar EE_REMOVE_LISTENER = 'removeListener';\nvar EE_REMOVE_ALL_LISTENER = 'removeAllListeners';\nvar EE_LISTENERS = 'listeners';\nvar EE_ON = 'on';\nvar zoneAwareAddListener$1 = callAndReturnFirstParam(makeZoneAwareAddListener(EE_ADD_LISTENER, EE_REMOVE_LISTENER, false, true, false));\nvar zoneAwarePrependListener = callAndReturnFirstParam(makeZoneAwareAddListener(EE_PREPEND_LISTENER, EE_REMOVE_LISTENER, false, true, true));\nvar zoneAwareRemoveListener$1 = callAndReturnFirstParam(makeZoneAwareRemoveListener(EE_REMOVE_LISTENER, false));\nvar zoneAwareRemoveAllListeners = callAndReturnFirstParam(makeZoneAwareRemoveAllListeners(EE_REMOVE_ALL_LISTENER, false));\nvar zoneAwareListeners = makeZoneAwareListeners(EE_LISTENERS);\nfunction patchEventEmitterMethods(obj) {\n    if (obj && obj.addListener) {\n        patchMethod(obj, EE_ADD_LISTENER, function () { return zoneAwareAddListener$1; });\n        patchMethod(obj, EE_PREPEND_LISTENER, function () { return zoneAwarePrependListener; });\n        patchMethod(obj, EE_REMOVE_LISTENER, function () { return zoneAwareRemoveListener$1; });\n        patchMethod(obj, EE_REMOVE_ALL_LISTENER, function () { return zoneAwareRemoveAllListeners; });\n        patchMethod(obj, EE_LISTENERS, function () { return zoneAwareListeners; });\n        obj[EE_ON] = obj[EE_ADD_LISTENER];\n        return true;\n    }\n    else {\n        return false;\n    }\n}\n// EventEmitter\nvar events;\ntry {\n    events = require('events');\n}\ncatch (err) {\n}\nif (events && events.EventEmitter) {\n    patchEventEmitterMethods(events.EventEmitter.prototype);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar fs;\ntry {\n    fs = require('fs');\n}\ncatch (err) {\n}\n// watch, watchFile, unwatchFile has been patched\n// because EventEmitter has been patched\nvar TO_PATCH_MACROTASK_METHODS = [\n    'access', 'appendFile', 'chmod', 'chown', 'close', 'exists', 'fchmod',\n    'fchown', 'fdatasync', 'fstat', 'fsync', 'ftruncate', 'futimes', 'lchmod',\n    'lchown', 'link', 'lstat', 'mkdir', 'mkdtemp', 'open', 'read',\n    'readdir', 'readFile', 'readlink', 'realpath', 'rename', 'rmdir', 'stat',\n    'symlink', 'truncate', 'unlink', 'utimes', 'write', 'writeFile',\n];\nif (fs) {\n    TO_PATCH_MACROTASK_METHODS.filter(function (name) { return !!fs[name] && typeof fs[name] === 'function'; })\n        .forEach(function (name) {\n        patchMacroTask(fs, name, function (self, args) {\n            return {\n                name: 'fs.' + name,\n                args: args,\n                callbackIndex: args.length > 0 ? args.length - 1 : -1,\n                target: self\n            };\n        });\n    });\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction patchTimer(window, setName, cancelName, nameSuffix) {\n    var setNative = null;\n    var clearNative = null;\n    setName += nameSuffix;\n    cancelName += nameSuffix;\n    var tasksByHandleId = {};\n    function scheduleTask(task) {\n        var data = task.data;\n        data.args[0] = function () {\n            task.invoke.apply(this, arguments);\n            delete tasksByHandleId[data.handleId];\n        };\n        data.handleId = setNative.apply(window, data.args);\n        tasksByHandleId[data.handleId] = task;\n        return task;\n    }\n    function clearTask(task) {\n        delete tasksByHandleId[task.data.handleId];\n        return clearNative(task.data.handleId);\n    }\n    setNative =\n        patchMethod(window, setName, function (delegate) { return function (self, args) {\n            if (typeof args[0] === 'function') {\n                var zone = Zone.current;\n                var options = {\n                    handleId: null,\n                    isPeriodic: nameSuffix === 'Interval',\n                    delay: (nameSuffix === 'Timeout' || nameSuffix === 'Interval') ? args[1] || 0 : null,\n                    args: args\n                };\n                var task = zone.scheduleMacroTask(setName, args[0], options, scheduleTask, clearTask);\n                if (!task) {\n                    return task;\n                }\n                // Node.js must additionally support the ref and unref functions.\n                var handle = task.data.handleId;\n                if (handle.ref && handle.unref) {\n                    task.ref = handle.ref.bind(handle);\n                    task.unref = handle.unref.bind(handle);\n                }\n                return task;\n            }\n            else {\n                // cause an error by calling it directly.\n                return delegate.apply(window, args);\n            }\n        }; });\n    clearNative =\n        patchMethod(window, cancelName, function (delegate) { return function (self, args) {\n            var task = typeof args[0] === 'number' ? tasksByHandleId[args[0]] : args[0];\n            if (task && typeof task.type === 'string') {\n                if (task.cancelFn && task.data.isPeriodic || task.runCount === 0) {\n                    // Do not cancel already canceled functions\n                    task.zone.cancelTask(task);\n                }\n            }\n            else {\n                // cause an error by calling it directly.\n                delegate.apply(window, args);\n            }\n        }; });\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar set = 'set';\nvar clear = 'clear';\nvar _global = typeof window === 'object' && window || typeof self === 'object' && self || global;\n// Timers\nvar timers = require('timers');\npatchTimer(timers, set, clear, 'Timeout');\npatchTimer(timers, set, clear, 'Interval');\npatchTimer(timers, set, clear, 'Immediate');\nvar shouldPatchGlobalTimers = global.setTimeout !== timers.setTimeout;\nif (shouldPatchGlobalTimers) {\n    patchTimer(_global, set, clear, 'Timeout');\n    patchTimer(_global, set, clear, 'Interval');\n    patchTimer(_global, set, clear, 'Immediate');\n}\npatchNextTick();\n// Crypto\nvar crypto;\ntry {\n    crypto = require('crypto');\n}\ncatch (err) {\n}\n// TODO(gdi2290): implement a better way to patch these methods\nif (crypto) {\n    var nativeRandomBytes_1 = crypto.randomBytes;\n    crypto.randomBytes = function randomBytesZone(size, callback) {\n        if (!callback) {\n            return nativeRandomBytes_1(size);\n        }\n        else {\n            var zone = Zone.current;\n            var source = crypto.constructor.name + '.randomBytes';\n            return nativeRandomBytes_1(size, zone.wrap(callback, source));\n        }\n    }.bind(crypto);\n    var nativePbkdf2_1 = crypto.pbkdf2;\n    crypto.pbkdf2 = function pbkdf2Zone() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var fn = args[args.length - 1];\n        if (typeof fn === 'function') {\n            var zone = Zone.current;\n            var source = crypto.constructor.name + '.pbkdf2';\n            args[args.length - 1] = zone.wrap(fn, source);\n            return nativePbkdf2_1.apply(void 0, args);\n        }\n        else {\n            return nativePbkdf2_1.apply(void 0, args);\n        }\n    }.bind(crypto);\n}\n// HTTP Client\nvar httpClient;\ntry {\n    httpClient = require('_http_client');\n}\ncatch (err) {\n}\nif (httpClient && httpClient.ClientRequest) {\n    var ClientRequest_1 = httpClient.ClientRequest.bind(httpClient);\n    httpClient.ClientRequest = function (options, callback) {\n        if (!callback) {\n            return new ClientRequest_1(options);\n        }\n        else {\n            var zone = Zone.current;\n            return new ClientRequest_1(options, zone.wrap(callback, 'http.ClientRequest'));\n        }\n    };\n}\nfunction patchNextTick() {\n    var setNative = null;\n    function scheduleTask(task) {\n        var args = task.data;\n        args[0] = function () {\n            task.invoke.apply(this, arguments);\n        };\n        setNative.apply(process, args);\n        return task;\n    }\n    setNative =\n        patchMethod(process, 'nextTick', function (delegate) { return function (self, args) {\n            if (typeof args[0] === 'function') {\n                var zone = Zone.current;\n                var task = zone.scheduleMicroTask('nextTick', args[0], args, scheduleTask);\n                return task;\n            }\n            else {\n                // cause an error by calling it directly.\n                return delegate.apply(process, args);\n            }\n        }; });\n}\n\n})));\n","module.exports = require(\"timers\");","module.exports = require(\"_http_client\");","\"use strict\";\r\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\r\nvar AutoCollectConsole = (function () {\r\n    function AutoCollectConsole(client) {\r\n        if (!!AutoCollectConsole.INSTANCE) {\r\n            throw new Error(\"Console logging adapter tracking should be configured from the applicationInsights object\");\r\n        }\r\n        this._client = client;\r\n        AutoCollectConsole.INSTANCE = this;\r\n    }\r\n    AutoCollectConsole.prototype.enable = function (isEnabled, collectConsoleLog) {\r\n        if (DiagChannel.IsInitialized) {\r\n            require(\"./diagnostic-channel/console.sub\").enable(isEnabled && collectConsoleLog, this._client);\r\n            require(\"./diagnostic-channel/bunyan.sub\").enable(isEnabled, this._client);\r\n            require(\"./diagnostic-channel/winston.sub\").enable(isEnabled, this._client);\r\n        }\r\n    };\r\n    AutoCollectConsole.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    AutoCollectConsole.prototype.dispose = function () {\r\n        AutoCollectConsole.INSTANCE = null;\r\n        this.enable(false, false);\r\n    };\r\n    AutoCollectConsole._methodNames = [\"debug\", \"info\", \"log\", \"warn\", \"error\"];\r\n    return AutoCollectConsole;\r\n}());\r\nmodule.exports = AutoCollectConsole;\r\n//# sourceMappingURL=Console.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nvar subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        // Message can have a trailing newline\r\n        var message = event.data.message;\r\n        if (message.lastIndexOf(\"\\n\") == message.length - 1) {\r\n            message = message.substring(0, message.length - 1);\r\n        }\r\n        client.trackTrace({ message: message, severity: (event.data.stderr ? Contracts_1.SeverityLevel.Warning : Contracts_1.SeverityLevel.Information) });\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"console\", subscriber);\r\n        }\r\n        ;\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"console\", subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=console.sub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Generated_1 = require(\"./Generated\");\r\nvar RemoteDependencyDataConstants = (function () {\r\n    function RemoteDependencyDataConstants() {\r\n    }\r\n    RemoteDependencyDataConstants.TYPE_HTTP = \"Http\";\r\n    RemoteDependencyDataConstants.TYPE_AI = \"Http (tracked component)\";\r\n    return RemoteDependencyDataConstants;\r\n}());\r\nexports.RemoteDependencyDataConstants = RemoteDependencyDataConstants;\r\nfunction domainSupportsProperties(domain) {\r\n    return \"properties\" in domain ||\r\n        domain instanceof Generated_1.EventData ||\r\n        domain instanceof Generated_1.ExceptionData ||\r\n        domain instanceof Generated_1.MessageData ||\r\n        domain instanceof Generated_1.MetricData ||\r\n        domain instanceof Generated_1.PageViewData ||\r\n        domain instanceof Generated_1.RemoteDependencyData ||\r\n        domain instanceof Generated_1.RequestData;\r\n}\r\nexports.domainSupportsProperties = domainSupportsProperties;\r\n//# sourceMappingURL=Constants.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * Instances of AvailabilityData represent the result of executing an availability test.\r\n */\r\nvar AvailabilityData = (function (_super) {\r\n    __extends(AvailabilityData, _super);\r\n    function AvailabilityData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return AvailabilityData;\r\n}(Domain));\r\nmodule.exports = AvailabilityData;\r\n//# sourceMappingURL=AvailabilityData.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\nvar ContextTagKeys = (function () {\r\n    function ContextTagKeys() {\r\n        this.applicationVersion = \"ai.application.ver\";\r\n        this.deviceId = \"ai.device.id\";\r\n        this.deviceLocale = \"ai.device.locale\";\r\n        this.deviceModel = \"ai.device.model\";\r\n        this.deviceOEMName = \"ai.device.oemName\";\r\n        this.deviceOSVersion = \"ai.device.osVersion\";\r\n        this.deviceType = \"ai.device.type\";\r\n        this.locationIp = \"ai.location.ip\";\r\n        this.operationId = \"ai.operation.id\";\r\n        this.operationName = \"ai.operation.name\";\r\n        this.operationParentId = \"ai.operation.parentId\";\r\n        this.operationSyntheticSource = \"ai.operation.syntheticSource\";\r\n        this.operationCorrelationVector = \"ai.operation.correlationVector\";\r\n        this.sessionId = \"ai.session.id\";\r\n        this.sessionIsFirst = \"ai.session.isFirst\";\r\n        this.userAccountId = \"ai.user.accountId\";\r\n        this.userId = \"ai.user.id\";\r\n        this.userAuthUserId = \"ai.user.authUserId\";\r\n        this.cloudRole = \"ai.cloud.role\";\r\n        this.cloudRoleInstance = \"ai.cloud.roleInstance\";\r\n        this.internalSdkVersion = \"ai.internal.sdkVersion\";\r\n        this.internalAgentVersion = \"ai.internal.agentVersion\";\r\n        this.internalNodeName = \"ai.internal.nodeName\";\r\n    }\r\n    return ContextTagKeys;\r\n}());\r\nmodule.exports = ContextTagKeys;\r\n//# sourceMappingURL=ContextTagKeys.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Base = require(\"./Base\");\r\n\"use strict\";\r\n/**\r\n * Data struct to contain both B and C sections.\r\n */\r\nvar Data = (function (_super) {\r\n    __extends(Data, _super);\r\n    function Data() {\r\n        return _super.call(this) || this;\r\n    }\r\n    return Data;\r\n}(Base));\r\nmodule.exports = Data;\r\n//# sourceMappingURL=Data.js.map","\"use strict\";\r\n// THIS FILE WAS AUTOGENERATED\r\nvar DataPointType = require(\"./DataPointType\");\r\n\"use strict\";\r\n/**\r\n * Metric data single measurement.\r\n */\r\nvar DataPoint = (function () {\r\n    function DataPoint() {\r\n        this.kind = DataPointType.Measurement;\r\n    }\r\n    return DataPoint;\r\n}());\r\nmodule.exports = DataPoint;\r\n//# sourceMappingURL=DataPoint.js.map","\"use strict\";\r\n/**\r\n * System variables for a telemetry item.\r\n */\r\nvar Envelope = (function () {\r\n    function Envelope() {\r\n        this.ver = 1;\r\n        this.sampleRate = 100.0;\r\n        this.tags = {};\r\n    }\r\n    return Envelope;\r\n}());\r\nmodule.exports = Envelope;\r\n//# sourceMappingURL=Envelope.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * An instance of Exception represents a handled or unhandled exception that occurred during execution of the monitored application.\r\n */\r\nvar ExceptionData = (function (_super) {\r\n    __extends(ExceptionData, _super);\r\n    function ExceptionData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.exceptions = [];\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return ExceptionData;\r\n}(Domain));\r\nmodule.exports = ExceptionData;\r\n//# sourceMappingURL=ExceptionData.js.map","\"use strict\";\r\n/**\r\n * Exception details of the exception in a chain.\r\n */\r\nvar ExceptionDetails = (function () {\r\n    function ExceptionDetails() {\r\n        this.hasFullStack = true;\r\n        this.parsedStack = [];\r\n    }\r\n    return ExceptionDetails;\r\n}());\r\nmodule.exports = ExceptionDetails;\r\n//# sourceMappingURL=ExceptionDetails.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * Instances of Message represent printf-like trace statements that are text-searched. Log4Net, NLog and other text-based log file entries are translated into intances of this type. The message does not have measurements.\r\n */\r\nvar MessageData = (function (_super) {\r\n    __extends(MessageData, _super);\r\n    function MessageData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.properties = {};\r\n        return _this;\r\n    }\r\n    return MessageData;\r\n}(Domain));\r\nmodule.exports = MessageData;\r\n//# sourceMappingURL=MessageData.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * An instance of the Metric item is a list of measurements (single data points) and/or aggregations.\r\n */\r\nvar MetricData = (function (_super) {\r\n    __extends(MetricData, _super);\r\n    function MetricData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.metrics = [];\r\n        _this.properties = {};\r\n        return _this;\r\n    }\r\n    return MetricData;\r\n}(Domain));\r\nmodule.exports = MetricData;\r\n//# sourceMappingURL=MetricData.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar EventData = require(\"./EventData\");\r\n\"use strict\";\r\n/**\r\n * An instance of PageView represents a generic action on a page like a button click. It is also the base type for PageView.\r\n */\r\nvar PageViewData = (function (_super) {\r\n    __extends(PageViewData, _super);\r\n    function PageViewData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return PageViewData;\r\n}(EventData));\r\nmodule.exports = PageViewData;\r\n//# sourceMappingURL=PageViewData.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * An instance of Remote Dependency represents an interaction of the monitored component with a remote component/service like SQL or an HTTP endpoint.\r\n */\r\nvar RemoteDependencyData = (function (_super) {\r\n    __extends(RemoteDependencyData, _super);\r\n    function RemoteDependencyData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.success = true;\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return RemoteDependencyData;\r\n}(Domain));\r\nmodule.exports = RemoteDependencyData;\r\n//# sourceMappingURL=RemoteDependencyData.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * An instance of Request represents completion of an external request to the application to do work and contains a summary of that request execution and the results.\r\n */\r\nvar RequestData = (function (_super) {\r\n    __extends(RequestData, _super);\r\n    function RequestData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return RequestData;\r\n}(Domain));\r\nmodule.exports = RequestData;\r\n//# sourceMappingURL=RequestData.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\n/**\r\n * Defines the level of severity for the event.\r\n */\r\nvar SeverityLevel;\r\n(function (SeverityLevel) {\r\n    SeverityLevel[SeverityLevel[\"Verbose\"] = 0] = \"Verbose\";\r\n    SeverityLevel[SeverityLevel[\"Information\"] = 1] = \"Information\";\r\n    SeverityLevel[SeverityLevel[\"Warning\"] = 2] = \"Warning\";\r\n    SeverityLevel[SeverityLevel[\"Error\"] = 3] = \"Error\";\r\n    SeverityLevel[SeverityLevel[\"Critical\"] = 4] = \"Critical\";\r\n})(SeverityLevel || (SeverityLevel = {}));\r\nmodule.exports = SeverityLevel;\r\n//# sourceMappingURL=SeverityLevel.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\n/**\r\n * Stack frame information.\r\n */\r\nvar StackFrame = (function () {\r\n    function StackFrame() {\r\n    }\r\n    return StackFrame;\r\n}());\r\nmodule.exports = StackFrame;\r\n//# sourceMappingURL=StackFrame.js.map","\"use strict\";\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(require(\"./TelemetryType\"));\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Converts the user-friendly enumeration TelemetryType to the underlying schema baseType value\r\n * @param type Type to convert to BaseData string\r\n */\r\nfunction telemetryTypeToBaseType(type) {\r\n    switch (type) {\r\n        case TelemetryType.Event:\r\n            return \"EventData\";\r\n        case TelemetryType.Exception:\r\n            return \"ExceptionData\";\r\n        case TelemetryType.Trace:\r\n            return \"MessageData\";\r\n        case TelemetryType.Metric:\r\n            return \"MetricData\";\r\n        case TelemetryType.Request:\r\n            return \"RequestData\";\r\n        case TelemetryType.Dependency:\r\n            return \"RemoteDependencyData\";\r\n    }\r\n    return undefined;\r\n}\r\nexports.telemetryTypeToBaseType = telemetryTypeToBaseType;\r\n/**\r\n * Converts the schema baseType value to the user-friendly enumeration TelemetryType\r\n * @param baseType BaseData string to convert to TelemetryType\r\n */\r\nfunction baseTypeToTelemetryType(baseType) {\r\n    switch (baseType) {\r\n        case \"EventData\":\r\n            return TelemetryType.Event;\r\n        case \"ExceptionData\":\r\n            return TelemetryType.Exception;\r\n        case \"MessageData\":\r\n            return TelemetryType.Trace;\r\n        case \"MetricData\":\r\n            return TelemetryType.Metric;\r\n        case \"RequestData\":\r\n            return TelemetryType.Request;\r\n        case \"RemoteDependencyData\":\r\n            return TelemetryType.Dependency;\r\n    }\r\n    return undefined;\r\n}\r\nexports.baseTypeToTelemetryType = baseTypeToTelemetryType;\r\n/**\r\n * Telemetry types supported by this SDK\r\n */\r\nvar TelemetryType;\r\n(function (TelemetryType) {\r\n    TelemetryType[TelemetryType[\"Event\"] = 0] = \"Event\";\r\n    TelemetryType[TelemetryType[\"Exception\"] = 1] = \"Exception\";\r\n    TelemetryType[TelemetryType[\"Trace\"] = 2] = \"Trace\";\r\n    TelemetryType[TelemetryType[\"Metric\"] = 3] = \"Metric\";\r\n    TelemetryType[TelemetryType[\"Request\"] = 4] = \"Request\";\r\n    TelemetryType[TelemetryType[\"Dependency\"] = 5] = \"Dependency\";\r\n})(TelemetryType = exports.TelemetryType || (exports.TelemetryType = {}));\r\n//# sourceMappingURL=TelemetryType.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\n// Mapping from bunyan levels defined at https://github.com/trentm/node-bunyan/blob/master/lib/bunyan.js#L256\r\nvar bunyanToAILevelMap = {\r\n    10: Contracts_1.SeverityLevel.Verbose,\r\n    20: Contracts_1.SeverityLevel.Verbose,\r\n    30: Contracts_1.SeverityLevel.Information,\r\n    40: Contracts_1.SeverityLevel.Warning,\r\n    50: Contracts_1.SeverityLevel.Error,\r\n    60: Contracts_1.SeverityLevel.Critical,\r\n};\r\nvar subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        var AIlevel = bunyanToAILevelMap[event.data.level];\r\n        client.trackTrace({ message: event.data.result, severity: AIlevel });\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"bunyan\", subscriber);\r\n        }\r\n        ;\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"bunyan\", subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=bunyan.sub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nvar winstonToAILevelMap = {\r\n    syslog: function (og) {\r\n        var map = {\r\n            emerg: Contracts_1.SeverityLevel.Critical,\r\n            alert: Contracts_1.SeverityLevel.Critical,\r\n            crit: Contracts_1.SeverityLevel.Critical,\r\n            error: Contracts_1.SeverityLevel.Error,\r\n            warning: Contracts_1.SeverityLevel.Warning,\r\n            notice: Contracts_1.SeverityLevel.Information,\r\n            info: Contracts_1.SeverityLevel.Information,\r\n            debug: Contracts_1.SeverityLevel.Verbose\r\n        };\r\n        return map[og] === undefined ? Contracts_1.SeverityLevel.Information : map[og];\r\n    },\r\n    npm: function (og) {\r\n        var map = {\r\n            error: Contracts_1.SeverityLevel.Error,\r\n            warn: Contracts_1.SeverityLevel.Warning,\r\n            info: Contracts_1.SeverityLevel.Information,\r\n            verbose: Contracts_1.SeverityLevel.Verbose,\r\n            debug: Contracts_1.SeverityLevel.Verbose,\r\n            silly: Contracts_1.SeverityLevel.Verbose\r\n        };\r\n        return map[og] === undefined ? Contracts_1.SeverityLevel.Information : map[og];\r\n    },\r\n    unknown: function (og) {\r\n        return Contracts_1.SeverityLevel.Information;\r\n    }\r\n};\r\nvar subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        var AIlevel = winstonToAILevelMap[event.data.levelKind](event.data.level);\r\n        client.trackTrace({\r\n            message: event.data.message,\r\n            severity: AIlevel,\r\n            properties: event.data.meta\r\n        });\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"winston\", subscriber);\r\n        }\r\n        ;\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"winston\", subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=winston.sub.js.map","\"use strict\";\r\nvar AutoCollectExceptions = (function () {\r\n    function AutoCollectExceptions(client) {\r\n        if (!!AutoCollectExceptions.INSTANCE) {\r\n            throw new Error(\"Exception tracking should be configured from the applicationInsights object\");\r\n        }\r\n        AutoCollectExceptions.INSTANCE = this;\r\n        this._client = client;\r\n    }\r\n    Object.defineProperty(AutoCollectExceptions, \"UNCAUGHT_EXCEPTION_HANDLER_NAME\", {\r\n        get: function () { return \"uncaughtException\"; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AutoCollectExceptions, \"UNHANDLED_REJECTION_HANDLER_NAME\", {\r\n        get: function () { return \"unhandledRejection\"; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AutoCollectExceptions.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    AutoCollectExceptions.prototype.enable = function (isEnabled) {\r\n        var _this = this;\r\n        if (isEnabled) {\r\n            this._isInitialized = true;\r\n            var self = this;\r\n            if (!this._exceptionListenerHandle) {\r\n                var handle = function (reThrow, error) {\r\n                    _this._client.trackException({ exception: error });\r\n                    _this._client.flush({ isAppCrashing: true });\r\n                    if (reThrow) {\r\n                        var THIS_IS_APPLICATION_INSIGHTS_RETHROWING_YOUR_EXCEPTION = error;\r\n                        throw THIS_IS_APPLICATION_INSIGHTS_RETHROWING_YOUR_EXCEPTION; // Error originated somewhere else in your app\r\n                    }\r\n                };\r\n                this._exceptionListenerHandle = handle.bind(this, true);\r\n                this._rejectionListenerHandle = handle.bind(this, false);\r\n                process.on(AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME, this._exceptionListenerHandle);\r\n                process.on(AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME, this._rejectionListenerHandle);\r\n            }\r\n        }\r\n        else {\r\n            if (this._exceptionListenerHandle) {\r\n                process.removeListener(AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME, this._exceptionListenerHandle);\r\n                process.removeListener(AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME, this._rejectionListenerHandle);\r\n                this._exceptionListenerHandle = undefined;\r\n                this._rejectionListenerHandle = undefined;\r\n                delete this._exceptionListenerHandle;\r\n                delete this._rejectionListenerHandle;\r\n            }\r\n        }\r\n    };\r\n    AutoCollectExceptions.prototype.dispose = function () {\r\n        AutoCollectExceptions.INSTANCE = null;\r\n        this.enable(false);\r\n        this._isInitialized = false;\r\n    };\r\n    AutoCollectExceptions.INSTANCE = null;\r\n    return AutoCollectExceptions;\r\n}());\r\nmodule.exports = AutoCollectExceptions;\r\n//# sourceMappingURL=Exceptions.js.map","module.exports = require(\"constants\");","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar url = require(\"url\");\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Util = require(\"../Library/Util\");\r\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\r\nvar RequestParser = require(\"./RequestParser\");\r\nvar CorrelationIdManager = require(\"../Library/CorrelationIdManager\");\r\n/**\r\n * Helper class to read data from the requst/response objects and convert them into the telemetry contract\r\n */\r\nvar HttpDependencyParser = (function (_super) {\r\n    __extends(HttpDependencyParser, _super);\r\n    function HttpDependencyParser(requestOptions, request) {\r\n        var _this = _super.call(this) || this;\r\n        if (request && request.method && requestOptions) {\r\n            // The ClientRequest.method property isn't documented, but is always there.\r\n            _this.method = request.method;\r\n            _this.url = HttpDependencyParser._getUrlFromRequestOptions(requestOptions, request);\r\n            _this.startTime = +new Date();\r\n        }\r\n        return _this;\r\n    }\r\n    /**\r\n     * Called when the ClientRequest emits an error event.\r\n     */\r\n    HttpDependencyParser.prototype.onError = function (error) {\r\n        this._setStatus(undefined, error);\r\n    };\r\n    /**\r\n     * Called when the ClientRequest emits a response event.\r\n     */\r\n    HttpDependencyParser.prototype.onResponse = function (response) {\r\n        this._setStatus(response.statusCode, undefined);\r\n        this.correlationId = Util.getCorrelationContextTarget(response, RequestResponseHeaders.requestContextTargetKey);\r\n    };\r\n    /**\r\n     * Gets a dependency data contract object for a completed ClientRequest.\r\n     */\r\n    HttpDependencyParser.prototype.getDependencyTelemetry = function (baseTelemetry, dependencyId) {\r\n        var urlObject = url.parse(this.url);\r\n        urlObject.search = undefined;\r\n        urlObject.hash = undefined;\r\n        var dependencyName = this.method.toUpperCase() + \" \" + urlObject.pathname;\r\n        var remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_HTTP;\r\n        var remoteDependencyTarget = urlObject.hostname;\r\n        if (this.correlationId) {\r\n            remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_AI;\r\n            if (this.correlationId !== CorrelationIdManager.correlationIdPrefix) {\r\n                remoteDependencyTarget = urlObject.hostname + \" | \" + this.correlationId;\r\n            }\r\n        }\r\n        else {\r\n            remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_HTTP;\r\n        }\r\n        var dependencyTelemetry = {\r\n            id: dependencyId,\r\n            name: dependencyName,\r\n            data: this.url,\r\n            duration: this.duration,\r\n            success: this._isSuccess(),\r\n            resultCode: this.statusCode ? this.statusCode.toString() : null,\r\n            properties: this.properties || {},\r\n            dependencyTypeName: remoteDependencyType,\r\n            target: remoteDependencyTarget\r\n        };\r\n        // We should keep any parameters the user passed in\r\n        // Except the fields defined above in requestTelemetry, which take priority\r\n        // Except the properties field, where they're merged instead, with baseTelemetry taking priority\r\n        if (baseTelemetry) {\r\n            // Copy missing fields\r\n            for (var key in baseTelemetry) {\r\n                if (!dependencyTelemetry[key]) {\r\n                    dependencyTelemetry[key] = baseTelemetry[key];\r\n                }\r\n            }\r\n            // Merge properties\r\n            if (baseTelemetry.properties) {\r\n                for (var key in baseTelemetry.properties) {\r\n                    dependencyTelemetry.properties[key] = baseTelemetry.properties[key];\r\n                }\r\n            }\r\n        }\r\n        return dependencyTelemetry;\r\n    };\r\n    /**\r\n     * Builds a URL from request options, using the same logic as http.request(). This is\r\n     * necessary because a ClientRequest object does not expose a url property.\r\n     */\r\n    HttpDependencyParser._getUrlFromRequestOptions = function (options, request) {\r\n        if (typeof options === 'string') {\r\n            options = url.parse(options);\r\n        }\r\n        else {\r\n            // Avoid modifying the original options object.\r\n            var originalOptions_1 = options;\r\n            options = {};\r\n            if (originalOptions_1) {\r\n                Object.keys(originalOptions_1).forEach(function (key) {\r\n                    options[key] = originalOptions_1[key];\r\n                });\r\n            }\r\n        }\r\n        // Oddly, url.format ignores path and only uses pathname and search,\r\n        // so create them from the path, if path was specified\r\n        if (options.path) {\r\n            var parsedQuery = url.parse(options.path);\r\n            options.pathname = parsedQuery.pathname;\r\n            options.search = parsedQuery.search;\r\n        }\r\n        // Simiarly, url.format ignores hostname and port if host is specified,\r\n        // even if host doesn't have the port, but http.request does not work\r\n        // this way. It will use the port if one is not specified in host,\r\n        // effectively treating host as hostname, but will use the port specified\r\n        // in host if it exists.\r\n        if (options.host && options.port) {\r\n            // Force a protocol so it will parse the host as the host, not path.\r\n            // It is discarded and not used, so it doesn't matter if it doesn't match\r\n            var parsedHost = url.parse(\"http://\" + options.host);\r\n            if (!parsedHost.port && options.port) {\r\n                options.hostname = options.host;\r\n                delete options.host;\r\n            }\r\n        }\r\n        // Mix in default values used by http.request and others\r\n        options.protocol = options.protocol || (request.agent && request.agent.protocol) || undefined;\r\n        options.hostname = options.hostname || 'localhost';\r\n        return url.format(options);\r\n    };\r\n    return HttpDependencyParser;\r\n}(RequestParser));\r\nmodule.exports = HttpDependencyParser;\r\n//# sourceMappingURL=HttpDependencyParser.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nexports.subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        var dbName = (event.data.startedData && event.data.startedData.databaseName) || \"Unknown database\";\r\n        client.trackDependency({\r\n            target: dbName,\r\n            data: event.data.event.commandName,\r\n            name: event.data.event.commandName,\r\n            duration: event.data.event.duration,\r\n            success: event.data.succeeded,\r\n            /* TODO: transmit result code from mongo */\r\n            resultCode: event.data.succeeded ? \"0\" : \"1\",\r\n            dependencyTypeName: 'mongodb'\r\n        });\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"mongodb\", exports.subscriber);\r\n        }\r\n        ;\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"mongodb\", exports.subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=mongodb.sub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nexports.subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        var queryObj = event.data.query || {};\r\n        var sqlString = queryObj.sql || \"Unknown query\";\r\n        var success = !event.data.err;\r\n        var connection = queryObj._connection || {};\r\n        var connectionConfig = connection.config || {};\r\n        var dbName = connectionConfig.socketPath ? connectionConfig.socketPath : (connectionConfig.host || \"localhost\") + \":\" + connectionConfig.port;\r\n        client.trackDependency({\r\n            target: dbName,\r\n            data: sqlString,\r\n            name: sqlString,\r\n            duration: event.data.duration,\r\n            success: success,\r\n            /* TODO: transmit result code from mysql */\r\n            resultCode: success ? \"0\" : \"1\",\r\n            dependencyTypeName: \"mysql\"\r\n        });\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"mysql\", exports.subscriber);\r\n        }\r\n        ;\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"mysql\", exports.subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=mysql.sub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nexports.subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        if (event.data.commandObj.command === \"info\") {\r\n            // We don't want to report 'info', it's irrelevant\r\n            return;\r\n        }\r\n        client.trackDependency({\r\n            target: event.data.address,\r\n            name: event.data.commandObj.command,\r\n            data: event.data.commandObj.command,\r\n            duration: event.data.duration,\r\n            success: !event.data.err,\r\n            /* TODO: transmit result code from redis */\r\n            resultCode: event.data.err ? \"1\" : \"0\",\r\n            dependencyTypeName: \"redis\"\r\n        });\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"redis\", exports.subscriber);\r\n        }\r\n        ;\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"redis\", exports.subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=redis.sub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nexports.subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        var q = event.data.query;\r\n        var sql = (q.preparable && q.preparable.text) || q.plan || q.text || \"unknown query\";\r\n        var success = !event.data.error;\r\n        var conn = event.data.database.host + \":\" + event.data.database.port;\r\n        client.trackDependency({\r\n            target: conn,\r\n            data: sql,\r\n            name: sql,\r\n            duration: event.data.duration,\r\n            success: success,\r\n            resultCode: success ? \"0\" : \"1\",\r\n            dependencyTypeName: \"postgres\"\r\n        });\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"postgres\", exports.subscriber);\r\n        }\r\n        ;\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"postgres\", exports.subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=postgres.sub.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar url = require(\"url\");\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Util = require(\"../Library/Util\");\r\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\r\nvar RequestParser = require(\"./RequestParser\");\r\nvar CorrelationIdManager = require(\"../Library/CorrelationIdManager\");\r\n/**\r\n * Helper class to read data from the requst/response objects and convert them into the telemetry contract\r\n */\r\nvar HttpRequestParser = (function (_super) {\r\n    __extends(HttpRequestParser, _super);\r\n    function HttpRequestParser(request, requestId) {\r\n        var _this = _super.call(this) || this;\r\n        if (request) {\r\n            _this.method = request.method;\r\n            _this.url = _this._getAbsoluteUrl(request);\r\n            _this.startTime = +new Date();\r\n            _this.socketRemoteAddress = request.socket && request.socket.remoteAddress;\r\n            _this.parseHeaders(request, requestId);\r\n            if (request.connection) {\r\n                _this.connectionRemoteAddress = request.connection.remoteAddress;\r\n                _this.legacySocketRemoteAddress = request.connection[\"socket\"] && request.connection[\"socket\"].remoteAddress;\r\n            }\r\n        }\r\n        return _this;\r\n    }\r\n    HttpRequestParser.prototype.onError = function (error, ellapsedMilliseconds) {\r\n        this._setStatus(undefined, error);\r\n        // This parameter is only for overrides. setStatus handles this internally for the autocollected case\r\n        if (ellapsedMilliseconds) {\r\n            this.duration = ellapsedMilliseconds;\r\n        }\r\n    };\r\n    HttpRequestParser.prototype.onResponse = function (response, ellapsedMilliseconds) {\r\n        this._setStatus(response.statusCode, undefined);\r\n        // This parameter is only for overrides. setStatus handles this internally for the autocollected case\r\n        if (ellapsedMilliseconds) {\r\n            this.duration = ellapsedMilliseconds;\r\n        }\r\n    };\r\n    HttpRequestParser.prototype.getRequestTelemetry = function (baseTelemetry) {\r\n        var requestTelemetry = {\r\n            id: this.requestId,\r\n            name: this.method + \" \" + url.parse(this.url).pathname,\r\n            url: this.url,\r\n            /*\r\n            See https://github.com/Microsoft/ApplicationInsights-dotnet-server/blob/25d695e6a906fbe977f67be3966d25dbf1c50a79/Src/Web/Web.Shared.Net/RequestTrackingTelemetryModule.cs#L250\r\n            for reference\r\n            */\r\n            source: this.sourceCorrelationId,\r\n            duration: this.duration,\r\n            resultCode: this.statusCode ? this.statusCode.toString() : null,\r\n            success: this._isSuccess(),\r\n            properties: this.properties\r\n        };\r\n        // We should keep any parameters the user passed in\r\n        // Except the fields defined above in requestTelemetry, which take priority\r\n        // Except the properties field, where they're merged instead, with baseTelemetry taking priority\r\n        if (baseTelemetry) {\r\n            // Copy missing fields\r\n            for (var key in baseTelemetry) {\r\n                if (!requestTelemetry[key]) {\r\n                    requestTelemetry[key] = baseTelemetry[key];\r\n                }\r\n            }\r\n            // Merge properties\r\n            if (baseTelemetry.properties) {\r\n                for (var key in baseTelemetry.properties) {\r\n                    requestTelemetry.properties[key] = baseTelemetry.properties[key];\r\n                }\r\n            }\r\n        }\r\n        return requestTelemetry;\r\n    };\r\n    HttpRequestParser.prototype.getRequestTags = function (tags) {\r\n        // create a copy of the context for requests since client info will be used here\r\n        var newTags = {};\r\n        for (var key in tags) {\r\n            newTags[key] = tags[key];\r\n        }\r\n        // don't override tags if they are already set\r\n        newTags[HttpRequestParser.keys.locationIp] = tags[HttpRequestParser.keys.locationIp] || this._getIp();\r\n        newTags[HttpRequestParser.keys.sessionId] = tags[HttpRequestParser.keys.sessionId] || this._getId(\"ai_session\");\r\n        newTags[HttpRequestParser.keys.userId] = tags[HttpRequestParser.keys.userId] || this._getId(\"ai_user\");\r\n        newTags[HttpRequestParser.keys.userAuthUserId] = tags[HttpRequestParser.keys.userAuthUserId] || this._getId(\"ai_authUser\");\r\n        newTags[HttpRequestParser.keys.operationName] = this.getOperationName(tags);\r\n        newTags[HttpRequestParser.keys.operationParentId] = this.getOperationParentId(tags);\r\n        newTags[HttpRequestParser.keys.operationId] = this.getOperationId(tags);\r\n        return newTags;\r\n    };\r\n    HttpRequestParser.prototype.getOperationId = function (tags) {\r\n        return tags[HttpRequestParser.keys.operationId] || this.operationId;\r\n    };\r\n    HttpRequestParser.prototype.getOperationParentId = function (tags) {\r\n        return tags[HttpRequestParser.keys.operationParentId] || this.parentId || this.getOperationId(tags);\r\n    };\r\n    HttpRequestParser.prototype.getOperationName = function (tags) {\r\n        return tags[HttpRequestParser.keys.operationName] || this.method + \" \" + url.parse(this.url).pathname;\r\n    };\r\n    HttpRequestParser.prototype.getRequestId = function () {\r\n        return this.requestId;\r\n    };\r\n    HttpRequestParser.prototype.getCorrelationContextHeader = function () {\r\n        return this.correlationContextHeader;\r\n    };\r\n    HttpRequestParser.prototype._getAbsoluteUrl = function (request) {\r\n        if (!request.headers) {\r\n            return request.url;\r\n        }\r\n        var encrypted = request.connection ? request.connection.encrypted : null;\r\n        var requestUrl = url.parse(request.url);\r\n        var pathName = requestUrl.pathname;\r\n        var search = requestUrl.search;\r\n        var absoluteUrl = url.format({\r\n            protocol: encrypted ? \"https\" : \"http\",\r\n            host: request.headers.host,\r\n            pathname: pathName,\r\n            search: search\r\n        });\r\n        return absoluteUrl;\r\n    };\r\n    HttpRequestParser.prototype._getIp = function () {\r\n        // regex to match ipv4 without port\r\n        // Note: including the port would cause the payload to be rejected by the data collector\r\n        var ipMatch = /[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}/;\r\n        var check = function (str) {\r\n            var results = ipMatch.exec(str);\r\n            if (results) {\r\n                return results[0];\r\n            }\r\n        };\r\n        var ip = check(this.rawHeaders[\"x-forwarded-for\"])\r\n            || check(this.rawHeaders[\"x-client-ip\"])\r\n            || check(this.rawHeaders[\"x-real-ip\"])\r\n            || check(this.connectionRemoteAddress)\r\n            || check(this.socketRemoteAddress)\r\n            || check(this.legacySocketRemoteAddress);\r\n        // node v12 returns this if the address is \"localhost\"\r\n        if (!ip\r\n            && this.connectionRemoteAddress\r\n            && this.connectionRemoteAddress.substr\r\n            && this.connectionRemoteAddress.substr(0, 2) === \"::\") {\r\n            ip = \"127.0.0.1\";\r\n        }\r\n        return ip;\r\n    };\r\n    HttpRequestParser.prototype._getId = function (name) {\r\n        var cookie = (this.rawHeaders && this.rawHeaders[\"cookie\"] &&\r\n            typeof this.rawHeaders[\"cookie\"] === 'string' && this.rawHeaders[\"cookie\"]) || \"\";\r\n        var value = HttpRequestParser.parseId(Util.getCookie(name, cookie));\r\n        return value;\r\n    };\r\n    HttpRequestParser.prototype.parseHeaders = function (request, requestId) {\r\n        this.rawHeaders = request.headers || request.rawHeaders;\r\n        this.userAgent = request.headers && request.headers[\"user-agent\"];\r\n        this.sourceCorrelationId = Util.getCorrelationContextTarget(request, RequestResponseHeaders.requestContextSourceKey);\r\n        if (request.headers) {\r\n            this.correlationContextHeader = request.headers[RequestResponseHeaders.correlationContextHeader];\r\n            if (request.headers[RequestResponseHeaders.requestIdHeader]) {\r\n                this.parentId = request.headers[RequestResponseHeaders.requestIdHeader];\r\n                this.requestId = CorrelationIdManager.generateRequestId(this.parentId);\r\n                this.correlationContextHeader = request.headers[RequestResponseHeaders.correlationContextHeader];\r\n            }\r\n            else {\r\n                // Legacy fallback\r\n                var rootId = request.headers[RequestResponseHeaders.rootIdHeader];\r\n                this.parentId = request.headers[RequestResponseHeaders.parentIdHeader];\r\n                this.requestId = CorrelationIdManager.generateRequestId(rootId || this.parentId);\r\n                this.correlationContextHeader = null;\r\n            }\r\n            if (requestId) {\r\n                // For the scenarios that don't guarantee an AI-created context,\r\n                // override the requestId with the provided one.\r\n                this.requestId = requestId;\r\n            }\r\n            this.operationId = CorrelationIdManager.getRootId(this.requestId);\r\n        }\r\n    };\r\n    HttpRequestParser.parseId = function (cookieValue) {\r\n        return cookieValue.substr(0, cookieValue.indexOf('|'));\r\n    };\r\n    HttpRequestParser.keys = new Contracts.ContextTagKeys();\r\n    return HttpRequestParser;\r\n}(RequestParser));\r\nmodule.exports = HttpRequestParser;\r\n//# sourceMappingURL=HttpRequestParser.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar TelemetryClient = require(\"./TelemetryClient\");\r\nvar ServerRequestTracking = require(\"../AutoCollection/HttpRequests\");\r\nvar ClientRequestTracking = require(\"../AutoCollection/HttpDependencies\");\r\nvar Logging = require(\"./Logging\");\r\n/**\r\n * Application Insights Telemetry Client for Node.JS. Provides the Application Insights TelemetryClient API\r\n * in addition to Node-specific helper functions.\r\n * Construct a new TelemetryClient to have an instance with a different configuration than the default client.\r\n * In most cases, `appInsights.defaultClient` should be used instead.\r\n */\r\nvar NodeClient = (function (_super) {\r\n    __extends(NodeClient, _super);\r\n    function NodeClient() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * Log RequestTelemetry from HTTP request and response. This method will log immediately without waitng for request completion\r\n     * and it requires duration parameter to be specified on NodeHttpRequestTelemetry object.\r\n     * Use trackNodeHttpRequest function to log the telemetry after request completion\r\n     * @param telemetry Object encapsulating incoming request, response and duration information\r\n     */\r\n    NodeClient.prototype.trackNodeHttpRequestSync = function (telemetry) {\r\n        if (telemetry && telemetry.request && telemetry.response && telemetry.duration) {\r\n            ServerRequestTracking.trackRequestSync(this, telemetry);\r\n        }\r\n        else {\r\n            Logging.warn(\"trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.\");\r\n        }\r\n    };\r\n    /**\r\n     * Log RequestTelemetry from HTTP request and response. This method will `follow` the request to completion.\r\n     * Use trackNodeHttpRequestSync function to log telemetry immediately without waiting for request completion\r\n     * @param telemetry Object encapsulating incoming request and response information\r\n     */\r\n    NodeClient.prototype.trackNodeHttpRequest = function (telemetry) {\r\n        if (telemetry.duration || telemetry.error) {\r\n            Logging.warn(\"trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects.\");\r\n        }\r\n        if (telemetry && telemetry.request && telemetry.response) {\r\n            ServerRequestTracking.trackRequest(this, telemetry);\r\n        }\r\n        else {\r\n            Logging.warn(\"trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.\");\r\n        }\r\n    };\r\n    /**\r\n     * Log DependencyTelemetry from outgoing HTTP request. This method will instrument the outgoing request and append\r\n     * the specified headers and will log the telemetry when outgoing request is complete\r\n     * @param telemetry Object encapsulating outgoing request information\r\n     */\r\n    NodeClient.prototype.trackNodeHttpDependency = function (telemetry) {\r\n        if (telemetry && telemetry.request) {\r\n            ClientRequestTracking.trackRequest(this, telemetry);\r\n        }\r\n        else {\r\n            Logging.warn(\"trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.\");\r\n        }\r\n    };\r\n    return NodeClient;\r\n}(TelemetryClient));\r\nmodule.exports = NodeClient;\r\n//# sourceMappingURL=NodeClient.js.map","\"use strict\";\r\nvar url = require(\"url\");\r\nvar Config = require(\"./Config\");\r\nvar Context = require(\"./Context\");\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Channel = require(\"./Channel\");\r\nvar TelemetryProcessors = require(\"../TelemetryProcessors\");\r\nvar CorrelationContextManager_1 = require(\"../AutoCollection/CorrelationContextManager\");\r\nvar Sender = require(\"./Sender\");\r\nvar Util = require(\"./Util\");\r\nvar Logging = require(\"./Logging\");\r\nvar EnvelopeFactory = require(\"./EnvelopeFactory\");\r\n/**\r\n * Application Insights telemetry client provides interface to track telemetry items, register telemetry initializers and\r\n * and manually trigger immediate sending (flushing)\r\n */\r\nvar TelemetryClient = (function () {\r\n    /**\r\n     * Constructs a new client of the client\r\n     * @param iKey the instrumentation key to use (read from environment variable if not specified)\r\n     */\r\n    function TelemetryClient(iKey) {\r\n        this._telemetryProcessors = [];\r\n        var config = new Config(iKey);\r\n        this.config = config;\r\n        this.context = new Context();\r\n        this.commonProperties = {};\r\n        var sender = new Sender(this.config);\r\n        this.channel = new Channel(function () { return config.disableAppInsights; }, function () { return config.maxBatchSize; }, function () { return config.maxBatchIntervalMs; }, sender);\r\n    }\r\n    /**\r\n     * Log a trace message\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackTrace = function (telemetry) {\r\n        this.track(telemetry, Contracts.TelemetryType.Trace);\r\n    };\r\n    /**\r\n     * Log a numeric value that is not associated with a specific event. Typically used to send regular reports of performance indicators.\r\n     * To send a single measurement, use just the first two parameters. If you take measurements very frequently, you can reduce the\r\n     * telemetry bandwidth by aggregating multiple measurements and sending the resulting average at intervals.\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackMetric = function (telemetry) {\r\n        this.track(telemetry, Contracts.TelemetryType.Metric);\r\n    };\r\n    /**\r\n     * Log an exception\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackException = function (telemetry) {\r\n        if (telemetry && telemetry.exception && !Util.isError(telemetry.exception)) {\r\n            telemetry.exception = new Error(telemetry.exception.toString());\r\n        }\r\n        this.track(telemetry, Contracts.TelemetryType.Exception);\r\n    };\r\n    /**\r\n     * Log a user action or other occurrence.\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackEvent = function (telemetry) {\r\n        this.track(telemetry, Contracts.TelemetryType.Event);\r\n    };\r\n    /**\r\n     * Log a request. Note that the default client will attempt to collect HTTP requests automatically so only use this for requests\r\n     * that aren't automatically captured or if you've disabled automatic request collection.\r\n     *\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackRequest = function (telemetry) {\r\n        this.track(telemetry, Contracts.TelemetryType.Request);\r\n    };\r\n    /**\r\n     * Log a dependency. Note that the default client will attempt to collect dependencies automatically so only use this for dependencies\r\n     * that aren't automatically captured or if you've disabled automatic dependency collection.\r\n     *\r\n     * @param telemetry      Object encapsulating tracking option\r\n     * */\r\n    TelemetryClient.prototype.trackDependency = function (telemetry) {\r\n        if (telemetry && !telemetry.target && telemetry.data) {\r\n            // url.parse().host returns null for non-urls,\r\n            // making this essentially a no-op in those cases\r\n            // If this logic is moved, update jsdoc in DependencyTelemetry.target\r\n            telemetry.target = url.parse(telemetry.data).host;\r\n        }\r\n        this.track(telemetry, Contracts.TelemetryType.Dependency);\r\n    };\r\n    /**\r\n     * Immediately send all queued telemetry.\r\n     * @param options Flush options, including indicator whether app is crashing and callback\r\n     */\r\n    TelemetryClient.prototype.flush = function (options) {\r\n        this.channel.triggerSend(options ? !!options.isAppCrashing : false, options ? options.callback : undefined);\r\n    };\r\n    /**\r\n     * Generic track method for all telemetry types\r\n     * @param data the telemetry to send\r\n     * @param telemetryType specify the type of telemetry you are tracking from the list of Contracts.DataTypes\r\n     */\r\n    TelemetryClient.prototype.track = function (telemetry, telemetryType) {\r\n        if (telemetry && Contracts.telemetryTypeToBaseType(telemetryType)) {\r\n            var envelope = EnvelopeFactory.createEnvelope(telemetry, telemetryType, this.commonProperties, this.context, this.config);\r\n            // Set time on the envelope if it was set on the telemetry item\r\n            if (telemetry.time) {\r\n                envelope.time = telemetry.time.toISOString();\r\n            }\r\n            var accepted = this.runTelemetryProcessors(envelope, telemetry.contextObjects);\r\n            // Ideally we would have a central place for \"internal\" telemetry processors and users can configure which ones are in use.\r\n            // This will do for now. Otherwise clearTelemetryProcessors() would be problematic.\r\n            accepted = accepted && TelemetryProcessors.samplingTelemetryProcessor(envelope, { correlationContext: CorrelationContextManager_1.CorrelationContextManager.getCurrentContext() });\r\n            if (accepted) {\r\n                this.channel.send(envelope);\r\n            }\r\n        }\r\n        else {\r\n            Logging.warn(\"track() requires telemetry object and telemetryType to be specified.\");\r\n        }\r\n    };\r\n    /**\r\n     * Adds telemetry processor to the collection. Telemetry processors will be called one by one\r\n     * before telemetry item is pushed for sending and in the order they were added.\r\n     *\r\n     * @param telemetryProcessor function, takes Envelope, and optional context object and returns boolean\r\n     */\r\n    TelemetryClient.prototype.addTelemetryProcessor = function (telemetryProcessor) {\r\n        this._telemetryProcessors.push(telemetryProcessor);\r\n    };\r\n    /*\r\n     * Removes all telemetry processors\r\n     */\r\n    TelemetryClient.prototype.clearTelemetryProcessors = function () {\r\n        this._telemetryProcessors = [];\r\n    };\r\n    TelemetryClient.prototype.runTelemetryProcessors = function (envelope, contextObjects) {\r\n        var accepted = true;\r\n        var telemetryProcessorsCount = this._telemetryProcessors.length;\r\n        if (telemetryProcessorsCount === 0) {\r\n            return accepted;\r\n        }\r\n        contextObjects = contextObjects || {};\r\n        contextObjects['correlationContext'] = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        for (var i = 0; i < telemetryProcessorsCount; ++i) {\r\n            try {\r\n                var processor = this._telemetryProcessors[i];\r\n                if (processor) {\r\n                    if (processor.apply(null, [envelope, contextObjects]) === false) {\r\n                        accepted = false;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            catch (error) {\r\n                accepted = true;\r\n                Logging.warn(\"One of telemetry processors failed, telemetry item will be sent.\", error, envelope);\r\n            }\r\n        }\r\n        return accepted;\r\n    };\r\n    return TelemetryClient;\r\n}());\r\nmodule.exports = TelemetryClient;\r\n//# sourceMappingURL=TelemetryClient.js.map","\"use strict\";\r\nvar CorrelationIdManager = require(\"./CorrelationIdManager\");\r\nvar Config = (function () {\r\n    function Config(instrumentationKey) {\r\n        var _this = this;\r\n        this.endpointBase = \"https://dc.services.visualstudio.com\";\r\n        this.instrumentationKey = instrumentationKey || Config._getInstrumentationKey();\r\n        this.endpointUrl = this.endpointBase + \"/v2/track\";\r\n        this.maxBatchSize = 250;\r\n        this.maxBatchIntervalMs = 15000;\r\n        this.disableAppInsights = false;\r\n        this.samplingPercentage = 100;\r\n        this.correlationIdRetryIntervalMs = 30 * 1000;\r\n        this.correlationHeaderExcludedDomains = [\r\n            \"*.core.windows.net\",\r\n            \"*.core.chinacloudapi.cn\",\r\n            \"*.core.cloudapi.de\",\r\n            \"*.core.usgovcloudapi.net\"\r\n        ];\r\n        this.setCorrelationId = function (correlationId) { return _this.correlationId = correlationId; };\r\n        this.profileQueryEndpoint = process.env[Config.ENV_profileQueryEndpoint] || this.endpointBase;\r\n        this.proxyHttpUrl = process.env[Config.ENV_http_proxy] || undefined;\r\n        this.proxyHttpsUrl = process.env[Config.ENV_https_proxy] || undefined;\r\n        this.httpAgent = undefined;\r\n        this.httpsAgent = undefined;\r\n    }\r\n    Object.defineProperty(Config.prototype, \"profileQueryEndpoint\", {\r\n        get: function () {\r\n            return this._profileQueryEndpoint;\r\n        },\r\n        set: function (endpoint) {\r\n            CorrelationIdManager.cancelCorrelationIdQuery(this, this.setCorrelationId);\r\n            this._profileQueryEndpoint = endpoint;\r\n            this.correlationId = CorrelationIdManager.correlationIdPrefix; // Reset the correlationId while we wait for the new query\r\n            CorrelationIdManager.queryCorrelationId(this, this.setCorrelationId);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Config._getInstrumentationKey = function () {\r\n        // check for both the documented env variable and the azure-prefixed variable\r\n        var iKey = process.env[Config.ENV_iKey]\r\n            || process.env[Config.ENV_azurePrefix + Config.ENV_iKey]\r\n            || process.env[Config.legacy_ENV_iKey]\r\n            || process.env[Config.ENV_azurePrefix + Config.legacy_ENV_iKey];\r\n        if (!iKey || iKey == \"\") {\r\n            throw new Error(\"Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server\");\r\n        }\r\n        return iKey;\r\n    };\r\n    // Azure adds this prefix to all environment variables\r\n    Config.ENV_azurePrefix = \"APPSETTING_\";\r\n    // This key is provided in the readme\r\n    Config.ENV_iKey = \"APPINSIGHTS_INSTRUMENTATIONKEY\";\r\n    Config.legacy_ENV_iKey = \"APPINSIGHTS_INSTRUMENTATION_KEY\";\r\n    Config.ENV_profileQueryEndpoint = \"APPINSIGHTS_PROFILE_QUERY_ENDPOINT\";\r\n    Config.ENV_http_proxy = \"http_proxy\";\r\n    Config.ENV_https_proxy = \"https_proxy\";\r\n    return Config;\r\n}());\r\nmodule.exports = Config;\r\n//# sourceMappingURL=Config.js.map","\"use strict\";\r\nvar os = require(\"os\");\r\nvar fs = require(\"fs\");\r\nvar path = require(\"path\");\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Logging = require(\"./Logging\");\r\nvar Context = (function () {\r\n    function Context(packageJsonPath) {\r\n        this.keys = new Contracts.ContextTagKeys();\r\n        this.tags = {};\r\n        this._loadApplicationContext();\r\n        this._loadDeviceContext();\r\n        this._loadInternalContext();\r\n    }\r\n    Context.prototype._loadApplicationContext = function (packageJsonPath) {\r\n        // note: this should return the host package.json\r\n        packageJsonPath = packageJsonPath || path.resolve(__dirname, \"../../../../package.json\");\r\n        if (!Context.appVersion[packageJsonPath]) {\r\n            Context.appVersion[packageJsonPath] = \"unknown\";\r\n            try {\r\n                var packageJson = JSON.parse(fs.readFileSync(packageJsonPath, \"utf8\"));\r\n                if (packageJson && typeof packageJson.version === \"string\") {\r\n                    Context.appVersion[packageJsonPath] = packageJson.version;\r\n                }\r\n            }\r\n            catch (exception) {\r\n                Logging.info(\"unable to read app version: \", exception);\r\n            }\r\n        }\r\n        this.tags[this.keys.applicationVersion] = Context.appVersion[packageJsonPath];\r\n    };\r\n    Context.prototype._loadDeviceContext = function () {\r\n        this.tags[this.keys.deviceId] = \"\";\r\n        this.tags[this.keys.cloudRoleInstance] = os && os.hostname();\r\n        this.tags[this.keys.deviceOSVersion] = os && (os.type() + \" \" + os.release());\r\n        this.tags[this.keys.cloudRole] = Context.DefaultRoleName;\r\n        // not yet supported tags\r\n        this.tags[\"ai.device.osArchitecture\"] = os && os.arch();\r\n        this.tags[\"ai.device.osPlatform\"] = os && os.platform();\r\n    };\r\n    Context.prototype._loadInternalContext = function () {\r\n        // note: this should return the sdk package.json\r\n        var packageJsonPath = path.resolve(__dirname, \"../../package.json\");\r\n        if (!Context.sdkVersion) {\r\n            Context.sdkVersion = \"unknown\";\r\n            try {\r\n                var packageJson = JSON.parse(fs.readFileSync(packageJsonPath, \"utf8\"));\r\n                if (packageJson && typeof packageJson.version === \"string\") {\r\n                    Context.sdkVersion = packageJson.version;\r\n                }\r\n            }\r\n            catch (exception) {\r\n                Logging.info(\"unable to read app version: \", exception);\r\n            }\r\n        }\r\n        this.tags[this.keys.internalSdkVersion] = \"node:\" + Context.sdkVersion;\r\n    };\r\n    Context.DefaultRoleName = \"Web\";\r\n    Context.appVersion = {};\r\n    Context.sdkVersion = null;\r\n    return Context;\r\n}());\r\nmodule.exports = Context;\r\n//# sourceMappingURL=Context.js.map","\"use strict\";\r\nvar Logging = require(\"./Logging\");\r\nvar Channel = (function () {\r\n    function Channel(isDisabled, getBatchSize, getBatchIntervalMs, sender) {\r\n        this._buffer = [];\r\n        this._lastSend = 0;\r\n        this._isDisabled = isDisabled;\r\n        this._getBatchSize = getBatchSize;\r\n        this._getBatchIntervalMs = getBatchIntervalMs;\r\n        this._sender = sender;\r\n    }\r\n    /**\r\n     * Enable or disable disk-backed retry caching to cache events when client is offline (enabled by default)\r\n     * These cached events are stored in your system or user's temporary directory and access restricted to your user when possible.\r\n     * @param value if true events that occured while client is offline will be cached on disk\r\n     * @param resendInterval The wait interval for resending cached events.\r\n     * @param maxBytesOnDisk The maximum size (in bytes) that the created temporary directory for cache events can grow to, before caching is disabled.\r\n     * @returns {Configuration} this class\r\n     */\r\n    Channel.prototype.setUseDiskRetryCaching = function (value, resendInterval, maxBytesOnDisk) {\r\n        this._sender.setDiskRetryMode(value, resendInterval, maxBytesOnDisk);\r\n    };\r\n    /**\r\n     * Add a telemetry item to the send buffer\r\n     */\r\n    Channel.prototype.send = function (envelope) {\r\n        var _this = this;\r\n        // if master off switch is set, don't send any data\r\n        if (this._isDisabled()) {\r\n            // Do not send/save data\r\n            return;\r\n        }\r\n        // validate input\r\n        if (!envelope) {\r\n            Logging.warn(\"Cannot send null/undefined telemetry\");\r\n            return;\r\n        }\r\n        // check if the incoming payload is too large, truncate if necessary\r\n        var payload = this._stringify(envelope);\r\n        if (typeof payload !== \"string\") {\r\n            return;\r\n        }\r\n        // enqueue the payload\r\n        this._buffer.push(payload);\r\n        // flush if we would exceed the max-size limit by adding this item\r\n        if (this._buffer.length >= this._getBatchSize()) {\r\n            this.triggerSend(false);\r\n            return;\r\n        }\r\n        // ensure an invocation timeout is set if anything is in the buffer\r\n        if (!this._timeoutHandle && this._buffer.length > 0) {\r\n            this._timeoutHandle = setTimeout(function () {\r\n                _this._timeoutHandle = null;\r\n                _this.triggerSend(false);\r\n            }, this._getBatchIntervalMs());\r\n        }\r\n    };\r\n    /**\r\n     * Immediately send buffered data\r\n     */\r\n    Channel.prototype.triggerSend = function (isNodeCrashing, callback) {\r\n        var bufferIsEmpty = this._buffer.length < 1;\r\n        if (!bufferIsEmpty) {\r\n            // compose an array of payloads\r\n            var batch = this._buffer.join(\"\\n\");\r\n            // invoke send\r\n            if (isNodeCrashing) {\r\n                this._sender.saveOnCrash(batch);\r\n                if (typeof callback === \"function\") {\r\n                    callback(\"data saved on crash\");\r\n                }\r\n            }\r\n            else {\r\n                this._sender.send(Buffer.from ? Buffer.from(batch) : new Buffer(batch), callback);\r\n            }\r\n        }\r\n        // update lastSend time to enable throttling\r\n        this._lastSend = +new Date;\r\n        // clear buffer\r\n        this._buffer.length = 0;\r\n        clearTimeout(this._timeoutHandle);\r\n        this._timeoutHandle = null;\r\n        if (bufferIsEmpty && typeof callback === \"function\") {\r\n            callback(\"no data to send\");\r\n        }\r\n    };\r\n    Channel.prototype._stringify = function (envelope) {\r\n        try {\r\n            return JSON.stringify(envelope);\r\n        }\r\n        catch (error) {\r\n            Logging.warn(\"Failed to serialize payload\", error, envelope);\r\n        }\r\n    };\r\n    return Channel;\r\n}());\r\nmodule.exports = Channel;\r\n//# sourceMappingURL=Channel.js.map","\"use strict\";\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(require(\"./SamplingTelemetryProcessor\"));\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\n/**\r\n *  A telemetry processor that handles sampling.\r\n */\r\nfunction samplingTelemetryProcessor(envelope, contextObjects) {\r\n    var samplingPercentage = envelope.sampleRate; // Set for us in Client.getEnvelope\r\n    var isSampledIn = false;\r\n    if (samplingPercentage === null || samplingPercentage === undefined || samplingPercentage >= 100) {\r\n        return true;\r\n    }\r\n    else if (envelope.data && Contracts.TelemetryType.Metric === Contracts.baseTypeToTelemetryType(envelope.data.baseType)) {\r\n        // Exclude MetricData telemetry from sampling\r\n        return true;\r\n    }\r\n    else if (contextObjects.correlationContext && contextObjects.correlationContext.operation) {\r\n        // If we're using dependency correlation, sampling should retain all telemetry from a given request \r\n        isSampledIn = getSamplingHashCode(contextObjects.correlationContext.operation.id) < samplingPercentage;\r\n    }\r\n    else {\r\n        // If we're not using dependency correlation, sampling should use a random distribution on each item\r\n        isSampledIn = (Math.random() * 100) < samplingPercentage;\r\n    }\r\n    return isSampledIn;\r\n}\r\nexports.samplingTelemetryProcessor = samplingTelemetryProcessor;\r\n/** Ported from AI .NET SDK */\r\nfunction getSamplingHashCode(input) {\r\n    var csharpMin = -2147483648;\r\n    var csharpMax = 2147483647;\r\n    var hash = 5381;\r\n    if (!input) {\r\n        return 0;\r\n    }\r\n    while (input.length < 8) {\r\n        input = input + input;\r\n    }\r\n    for (var i = 0; i < input.length; i++) {\r\n        // JS doesn't respond to integer overflow by wrapping around. Simulate it with bitwise operators ( | 0)\r\n        hash = ((((hash << 5) + hash) | 0) + input.charCodeAt(i) | 0);\r\n    }\r\n    hash = hash <= csharpMin ? csharpMax : Math.abs(hash);\r\n    return (hash / csharpMax) * 100;\r\n}\r\nexports.getSamplingHashCode = getSamplingHashCode;\r\n//# sourceMappingURL=SamplingTelemetryProcessor.js.map","\"use strict\";\r\nvar fs = require(\"fs\");\r\nvar os = require(\"os\");\r\nvar path = require(\"path\");\r\nvar zlib = require(\"zlib\");\r\nvar child_process = require(\"child_process\");\r\nvar Logging = require(\"./Logging\");\r\nvar AutoCollectHttpDependencies = require(\"../AutoCollection/HttpDependencies\");\r\nvar Util = require(\"./Util\");\r\nvar Sender = (function () {\r\n    function Sender(config, onSuccess, onError) {\r\n        this._config = config;\r\n        this._onSuccess = onSuccess;\r\n        this._onError = onError;\r\n        this._enableDiskRetryMode = false;\r\n        this._resendInterval = Sender.WAIT_BETWEEN_RESEND;\r\n        this._maxBytesOnDisk = Sender.MAX_BYTES_ON_DISK;\r\n        this._numConsecutiveFailures = 0;\r\n        if (!Sender.OS_PROVIDES_FILE_PROTECTION) {\r\n            // Node's chmod levels do not appropriately restrict file access on Windows\r\n            // Use the built-in command line tool ICACLS on Windows to properly restrict\r\n            // access to the temporary directory used for disk retry mode.\r\n            if (Sender.USE_ICACLS) {\r\n                // This should be async - but it's currently safer to have this synchronous\r\n                // This guarantees we can immediately fail setDiskRetryMode if we need to\r\n                try {\r\n                    Sender.OS_PROVIDES_FILE_PROTECTION = fs.existsSync(Sender.ICACLS_PATH);\r\n                }\r\n                catch (e) { }\r\n                if (!Sender.OS_PROVIDES_FILE_PROTECTION) {\r\n                    Logging.warn(Sender.TAG, \"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.\");\r\n                }\r\n            }\r\n            else {\r\n                // chmod works everywhere else\r\n                Sender.OS_PROVIDES_FILE_PROTECTION = true;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n    * Enable or disable offline mode\r\n    */\r\n    Sender.prototype.setDiskRetryMode = function (value, resendInterval, maxBytesOnDisk) {\r\n        this._enableDiskRetryMode = Sender.OS_PROVIDES_FILE_PROTECTION && value;\r\n        if (typeof resendInterval === 'number' && resendInterval >= 0) {\r\n            this._resendInterval = Math.floor(resendInterval);\r\n        }\r\n        if (typeof maxBytesOnDisk === 'number' && maxBytesOnDisk >= 0) {\r\n            this._maxBytesOnDisk = Math.floor(maxBytesOnDisk);\r\n        }\r\n        if (value && !Sender.OS_PROVIDES_FILE_PROTECTION) {\r\n            this._enableDiskRetryMode = false;\r\n            Logging.warn(Sender.TAG, \"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.\");\r\n        }\r\n    };\r\n    Sender.prototype.send = function (payload, callback) {\r\n        var _this = this;\r\n        var endpointUrl = this._config.endpointUrl;\r\n        // todo: investigate specifying an agent here: https://nodejs.org/api/http.html#http_class_http_agent\r\n        var options = {\r\n            method: \"POST\",\r\n            withCredentials: false,\r\n            headers: {\r\n                \"Content-Type\": \"application/x-json-stream\"\r\n            }\r\n        };\r\n        zlib.gzip(payload, function (err, buffer) {\r\n            var dataToSend = buffer;\r\n            if (err) {\r\n                Logging.warn(err);\r\n                dataToSend = payload; // something went wrong so send without gzip\r\n                options.headers[\"Content-Length\"] = payload.length.toString();\r\n            }\r\n            else {\r\n                options.headers[\"Content-Encoding\"] = \"gzip\";\r\n                options.headers[\"Content-Length\"] = buffer.length;\r\n            }\r\n            Logging.info(Sender.TAG, options);\r\n            // Ensure this request is not captured by auto-collection.\r\n            options[AutoCollectHttpDependencies.disableCollectionRequestOption] = true;\r\n            var requestCallback = function (res) {\r\n                res.setEncoding(\"utf-8\");\r\n                //returns empty if the data is accepted\r\n                var responseString = \"\";\r\n                res.on(\"data\", function (data) {\r\n                    responseString += data;\r\n                });\r\n                res.on(\"end\", function () {\r\n                    _this._numConsecutiveFailures = 0;\r\n                    Logging.info(Sender.TAG, responseString);\r\n                    if (typeof _this._onSuccess === \"function\") {\r\n                        _this._onSuccess(responseString);\r\n                    }\r\n                    if (typeof callback === \"function\") {\r\n                        callback(responseString);\r\n                    }\r\n                    if (_this._enableDiskRetryMode) {\r\n                        // try to send any cached events if the user is back online\r\n                        if (res.statusCode === 200) {\r\n                            setTimeout(function () { return _this._sendFirstFileOnDisk(); }, _this._resendInterval);\r\n                            // store to disk in case of burst throttling\r\n                        }\r\n                        else if (res.statusCode === 408 ||\r\n                            res.statusCode === 429 ||\r\n                            res.statusCode === 439 ||\r\n                            res.statusCode === 500 ||\r\n                            res.statusCode === 503) {\r\n                            // TODO: Do not support partial success (206) until _sendFirstFileOnDisk checks payload age\r\n                            _this._storeToDisk(payload);\r\n                        }\r\n                    }\r\n                });\r\n            };\r\n            var req = Util.makeRequest(_this._config, endpointUrl, options, requestCallback);\r\n            req.on(\"error\", function (error) {\r\n                // todo: handle error codes better (group to recoverable/non-recoverable and persist)\r\n                _this._numConsecutiveFailures++;\r\n                // Only use warn level if retries are disabled or we've had some number of consecutive failures sending data\r\n                // This is because warn level is printed in the console by default, and we don't want to be noisy for transient and self-recovering errors\r\n                // Continue informing on each failure if verbose logging is being used\r\n                if (!_this._enableDiskRetryMode || _this._numConsecutiveFailures > 0 && _this._numConsecutiveFailures % Sender.MAX_CONNECTION_FAILURES_BEFORE_WARN === 0) {\r\n                    var notice = \"Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:\";\r\n                    if (_this._enableDiskRetryMode) {\r\n                        notice = \"Ingestion endpoint could not be reached \" + _this._numConsecutiveFailures + \" consecutive times. There may be resulting telemetry loss. Most recent error:\";\r\n                    }\r\n                    Logging.warn(Sender.TAG, notice, error);\r\n                }\r\n                else {\r\n                    var notice = \"Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:\";\r\n                    Logging.info(Sender.TAG, notice, error);\r\n                }\r\n                _this._onErrorHelper(error);\r\n                if (typeof callback === \"function\") {\r\n                    var errorMessage = \"error sending telemetry\";\r\n                    if (error && (typeof error.toString === \"function\")) {\r\n                        errorMessage = error.toString();\r\n                    }\r\n                    callback(errorMessage);\r\n                }\r\n                if (_this._enableDiskRetryMode) {\r\n                    _this._storeToDisk(payload);\r\n                }\r\n            });\r\n            req.write(dataToSend);\r\n            req.end();\r\n        });\r\n    };\r\n    Sender.prototype.saveOnCrash = function (payload) {\r\n        if (this._enableDiskRetryMode) {\r\n            this._storeToDiskSync(payload);\r\n        }\r\n    };\r\n    Sender.prototype._runICACLS = function (args, callback) {\r\n        var aclProc = child_process.spawn(Sender.ICACLS_PATH, args, { windowsHide: true });\r\n        aclProc.on(\"error\", function (e) { return callback(e); });\r\n        aclProc.on(\"close\", function (code, signal) {\r\n            return callback(code === 0 ? null : new Error(\"Setting ACL restrictions did not succeed (ICACLS returned code \" + code + \")\"));\r\n        });\r\n    };\r\n    Sender.prototype._runICACLSSync = function (args) {\r\n        // Some very old versions of Node (< 0.11) don't have this\r\n        if (child_process.spawnSync) {\r\n            var aclProc = child_process.spawnSync(Sender.ICACLS_PATH, args, { windowsHide: true });\r\n            if (aclProc.error) {\r\n                throw aclProc.error;\r\n            }\r\n            else if (aclProc.status !== 0) {\r\n                throw new Error(\"Setting ACL restrictions did not succeed (ICACLS returned code \" + aclProc.status + \")\");\r\n            }\r\n        }\r\n        else {\r\n            throw new Error(\"Could not synchronously call ICACLS under current version of Node.js\");\r\n        }\r\n    };\r\n    Sender.prototype._getACLIdentity = function (callback) {\r\n        if (Sender.ACL_IDENTITY) {\r\n            return callback(null, Sender.ACL_IDENTITY);\r\n        }\r\n        var psProc = child_process.spawn(Sender.POWERSHELL_PATH, [\"-Command\", \"[System.Security.Principal.WindowsIdentity]::GetCurrent().Name\"], {\r\n            windowsHide: true,\r\n            stdio: ['ignore', 'pipe', 'pipe'] // Needed to prevent hanging on Win 7\r\n        });\r\n        var data = \"\";\r\n        psProc.stdout.on(\"data\", function (d) { return data += d; });\r\n        psProc.on(\"error\", function (e) { return callback(e, null); });\r\n        psProc.on(\"close\", function (code, signal) {\r\n            Sender.ACL_IDENTITY = data && data.trim();\r\n            return callback(code === 0 ? null : new Error(\"Getting ACL identity did not succeed (PS returned code \" + code + \")\"), Sender.ACL_IDENTITY);\r\n        });\r\n    };\r\n    Sender.prototype._getACLIdentitySync = function () {\r\n        if (Sender.ACL_IDENTITY) {\r\n            return Sender.ACL_IDENTITY;\r\n        }\r\n        // Some very old versions of Node (< 0.11) don't have this\r\n        if (child_process.spawnSync) {\r\n            var psProc = child_process.spawnSync(Sender.POWERSHELL_PATH, [\"-Command\", \"[System.Security.Principal.WindowsIdentity]::GetCurrent().Name\"], {\r\n                windowsHide: true,\r\n                stdio: ['ignore', 'pipe', 'pipe'] // Needed to prevent hanging on Win 7\r\n            });\r\n            if (psProc.error) {\r\n                throw psProc.error;\r\n            }\r\n            else if (psProc.status !== 0) {\r\n                throw new Error(\"Getting ACL identity did not succeed (PS returned code \" + psProc.status + \")\");\r\n            }\r\n            Sender.ACL_IDENTITY = psProc.stdout && psProc.stdout.toString().trim();\r\n            return Sender.ACL_IDENTITY;\r\n        }\r\n        else {\r\n            throw new Error(\"Could not synchronously get ACL identity under current version of Node.js\");\r\n        }\r\n    };\r\n    Sender.prototype._getACLArguments = function (directory, identity) {\r\n        return [directory,\r\n            \"/grant\", \"*S-1-5-32-544:(OI)(CI)F\",\r\n            \"/grant\", identity + \":(OI)(CI)F\",\r\n            \"/inheritance:r\"]; // Remove all inherited permissions\r\n    };\r\n    Sender.prototype._applyACLRules = function (directory, callback) {\r\n        var _this = this;\r\n        if (!Sender.USE_ICACLS) {\r\n            return callback(null);\r\n        }\r\n        // For performance, only run ACL rules if we haven't already during this session\r\n        if (Sender.ACLED_DIRECTORIES[directory] === undefined) {\r\n            // Avoid multiple calls race condition by setting ACLED_DIRECTORIES to false for this directory immediately\r\n            // If batches are being failed faster than the processes spawned below return, some data won't be stored to disk\r\n            // This is better than the alternative of potentially infinitely spawned processes\r\n            Sender.ACLED_DIRECTORIES[directory] = false;\r\n            // Restrict this directory to only current user and administrator access\r\n            this._getACLIdentity(function (err, identity) {\r\n                if (err) {\r\n                    Sender.ACLED_DIRECTORIES[directory] = false; // false is used to cache failed (vs undefined which is \"not yet tried\")\r\n                    return callback(err);\r\n                }\r\n                else {\r\n                    _this._runICACLS(_this._getACLArguments(directory, identity), function (err) {\r\n                        Sender.ACLED_DIRECTORIES[directory] = !err;\r\n                        return callback(err);\r\n                    });\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            return callback(Sender.ACLED_DIRECTORIES[directory] ? null :\r\n                new Error(\"Setting ACL restrictions did not succeed (cached result)\"));\r\n        }\r\n    };\r\n    Sender.prototype._applyACLRulesSync = function (directory) {\r\n        if (Sender.USE_ICACLS) {\r\n            // For performance, only run ACL rules if we haven't already during this session\r\n            if (Sender.ACLED_DIRECTORIES[directory] === undefined) {\r\n                this._runICACLSSync(this._getACLArguments(directory, this._getACLIdentitySync()));\r\n                Sender.ACLED_DIRECTORIES[directory] = true; // If we get here, it succeeded. _runIACLSSync will throw on failures\r\n                return;\r\n            }\r\n            else if (!Sender.ACLED_DIRECTORIES[directory]) {\r\n                throw new Error(\"Setting ACL restrictions did not succeed (cached result)\");\r\n            }\r\n        }\r\n    };\r\n    Sender.prototype._confirmDirExists = function (directory, callback) {\r\n        var _this = this;\r\n        fs.lstat(directory, function (err, stats) {\r\n            if (err && err.code === 'ENOENT') {\r\n                fs.mkdir(directory, function (err) {\r\n                    if (err && err.code !== 'EEXIST') {\r\n                        callback(err);\r\n                    }\r\n                    else {\r\n                        _this._applyACLRules(directory, callback);\r\n                    }\r\n                });\r\n            }\r\n            else if (!err && stats.isDirectory()) {\r\n                _this._applyACLRules(directory, callback);\r\n            }\r\n            else {\r\n                callback(err || new Error(\"Path existed but was not a directory\"));\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Computes the size (in bytes) of all files in a directory at the root level. Asynchronously.\r\n     */\r\n    Sender.prototype._getShallowDirectorySize = function (directory, callback) {\r\n        // Get the directory listing\r\n        fs.readdir(directory, function (err, files) {\r\n            if (err) {\r\n                return callback(err, -1);\r\n            }\r\n            var error = null;\r\n            var totalSize = 0;\r\n            var count = 0;\r\n            if (files.length === 0) {\r\n                callback(null, 0);\r\n                return;\r\n            }\r\n            // Query all file sizes\r\n            for (var i = 0; i < files.length; i++) {\r\n                fs.stat(path.join(directory, files[i]), function (err, fileStats) {\r\n                    count++;\r\n                    if (err) {\r\n                        error = err;\r\n                    }\r\n                    else {\r\n                        if (fileStats.isFile()) {\r\n                            totalSize += fileStats.size;\r\n                        }\r\n                    }\r\n                    if (count === files.length) {\r\n                        // Did we get an error?\r\n                        if (error) {\r\n                            callback(error, -1);\r\n                        }\r\n                        else {\r\n                            callback(error, totalSize);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Computes the size (in bytes) of all files in a directory at the root level. Synchronously.\r\n     */\r\n    Sender.prototype._getShallowDirectorySizeSync = function (directory) {\r\n        var files = fs.readdirSync(directory);\r\n        var totalSize = 0;\r\n        for (var i = 0; i < files.length; i++) {\r\n            totalSize += fs.statSync(path.join(directory, files[i])).size;\r\n        }\r\n        return totalSize;\r\n    };\r\n    /**\r\n     * Stores the payload as a json file on disk in the temp directory\r\n     */\r\n    Sender.prototype._storeToDisk = function (payload) {\r\n        var _this = this;\r\n        // tmpdir is /tmp for *nix and USERDIR/AppData/Local/Temp for Windows\r\n        var directory = path.join(os.tmpdir(), Sender.TEMPDIR_PREFIX + this._config.instrumentationKey);\r\n        // This will create the dir if it does not exist\r\n        // Default permissions on *nix are directory listing from other users but no file creations\r\n        Logging.info(Sender.TAG, \"Checking existance of data storage directory: \" + directory);\r\n        this._confirmDirExists(directory, function (error) {\r\n            if (error) {\r\n                Logging.warn(Sender.TAG, \"Error while checking/creating directory: \" + (error && error.message));\r\n                _this._onErrorHelper(error);\r\n                return;\r\n            }\r\n            _this._getShallowDirectorySize(directory, function (err, size) {\r\n                if (err || size < 0) {\r\n                    Logging.warn(Sender.TAG, \"Error while checking directory size: \" + (err && err.message));\r\n                    _this._onErrorHelper(err);\r\n                    return;\r\n                }\r\n                else if (size > _this._maxBytesOnDisk) {\r\n                    Logging.warn(Sender.TAG, \"Not saving data due to max size limit being met. Directory size in bytes is: \" + size);\r\n                    return;\r\n                }\r\n                //create file - file name for now is the timestamp, a better approach would be a UUID but that\r\n                //would require an external dependency\r\n                var fileName = new Date().getTime() + \".ai.json\";\r\n                var fileFullPath = path.join(directory, fileName);\r\n                // Mode 600 is w/r for creator and no read access for others (only applies on *nix)\r\n                // For Windows, ACL rules are applied to the entire directory (see logic in _confirmDirExists and _applyACLRules)\r\n                Logging.info(Sender.TAG, \"saving data to disk at: \" + fileFullPath);\r\n                fs.writeFile(fileFullPath, payload, { mode: 384 }, function (error) { return _this._onErrorHelper(error); });\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Stores the payload as a json file on disk using sync file operations\r\n     * this is used when storing data before crashes\r\n     */\r\n    Sender.prototype._storeToDiskSync = function (payload) {\r\n        // tmpdir is /tmp for *nix and USERDIR/AppData/Local/Temp for Windows\r\n        var directory = path.join(os.tmpdir(), Sender.TEMPDIR_PREFIX + this._config.instrumentationKey);\r\n        try {\r\n            Logging.info(Sender.TAG, \"Checking existance of data storage directory: \" + directory);\r\n            if (!fs.existsSync(directory)) {\r\n                fs.mkdirSync(directory);\r\n            }\r\n            // Make sure permissions are valid\r\n            this._applyACLRulesSync(directory);\r\n            var dirSize = this._getShallowDirectorySizeSync(directory);\r\n            if (dirSize > this._maxBytesOnDisk) {\r\n                Logging.info(Sender.TAG, \"Not saving data due to max size limit being met. Directory size in bytes is: \" + dirSize);\r\n                return;\r\n            }\r\n            //create file - file name for now is the timestamp, a better approach would be a UUID but that\r\n            //would require an external dependency\r\n            var fileName = new Date().getTime() + \".ai.json\";\r\n            var fileFullPath = path.join(directory, fileName);\r\n            // Mode 600 is w/r for creator and no access for anyone else (only applies on *nix)\r\n            Logging.info(Sender.TAG, \"saving data before crash to disk at: \" + fileFullPath);\r\n            fs.writeFileSync(fileFullPath, payload, { mode: 384 });\r\n        }\r\n        catch (error) {\r\n            Logging.warn(Sender.TAG, \"Error while saving data to disk: \" + (error && error.message));\r\n            this._onErrorHelper(error);\r\n        }\r\n    };\r\n    /**\r\n     * Check for temp telemetry files\r\n     * reads the first file if exist, deletes it and tries to send its load\r\n     */\r\n    Sender.prototype._sendFirstFileOnDisk = function () {\r\n        var _this = this;\r\n        var tempDir = path.join(os.tmpdir(), Sender.TEMPDIR_PREFIX + this._config.instrumentationKey);\r\n        fs.exists(tempDir, function (exists) {\r\n            if (exists) {\r\n                fs.readdir(tempDir, function (error, files) {\r\n                    if (!error) {\r\n                        files = files.filter(function (f) { return path.basename(f).indexOf(\".ai.json\") > -1; });\r\n                        if (files.length > 0) {\r\n                            var firstFile = files[0];\r\n                            var filePath = path.join(tempDir, firstFile);\r\n                            fs.readFile(filePath, function (error, payload) {\r\n                                if (!error) {\r\n                                    // delete the file first to prevent double sending\r\n                                    fs.unlink(filePath, function (error) {\r\n                                        if (!error) {\r\n                                            _this.send(payload);\r\n                                        }\r\n                                        else {\r\n                                            _this._onErrorHelper(error);\r\n                                        }\r\n                                    });\r\n                                }\r\n                                else {\r\n                                    _this._onErrorHelper(error);\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                    else {\r\n                        _this._onErrorHelper(error);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    };\r\n    Sender.prototype._onErrorHelper = function (error) {\r\n        if (typeof this._onError === \"function\") {\r\n            this._onError(error);\r\n        }\r\n    };\r\n    Sender.TAG = \"Sender\";\r\n    Sender.ICACLS_PATH = process.env.systemdrive + \"/windows/system32/icacls.exe\";\r\n    Sender.POWERSHELL_PATH = process.env.systemdrive + \"/windows/system32/windowspowershell/v1.0/powershell.exe\";\r\n    Sender.ACLED_DIRECTORIES = {};\r\n    Sender.ACL_IDENTITY = null;\r\n    // the amount of time the SDK will wait between resending cached data, this buffer is to avoid any throtelling from the service side\r\n    Sender.WAIT_BETWEEN_RESEND = 60 * 1000;\r\n    Sender.MAX_BYTES_ON_DISK = 50 * 1000 * 1000;\r\n    Sender.MAX_CONNECTION_FAILURES_BEFORE_WARN = 5;\r\n    Sender.TEMPDIR_PREFIX = \"appInsights-node\";\r\n    Sender.OS_PROVIDES_FILE_PROTECTION = false;\r\n    Sender.USE_ICACLS = os.type() === \"Windows_NT\";\r\n    return Sender;\r\n}());\r\nmodule.exports = Sender;\r\n//# sourceMappingURL=Sender.js.map","module.exports = require(\"child_process\");","\"use strict\";\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Util = require(\"./Util\");\r\nvar CorrelationContextManager_1 = require(\"../AutoCollection/CorrelationContextManager\");\r\n/**\r\n * Manages the logic of creating envelopes from Telemetry objects\r\n */\r\nvar EnvelopeFactory = (function () {\r\n    function EnvelopeFactory() {\r\n    }\r\n    /**\r\n     * Creates envelope ready to be sent by Channel\r\n     * @param telemetry Telemetry data\r\n     * @param telemetryType Type of telemetry\r\n     * @param commonProperties Bag of custom common properties to be added to the envelope\r\n     * @param context Client context\r\n     * @param config Client configuration\r\n     */\r\n    EnvelopeFactory.createEnvelope = function (telemetry, telemetryType, commonProperties, context, config) {\r\n        var data = null;\r\n        switch (telemetryType) {\r\n            case Contracts.TelemetryType.Trace:\r\n                data = EnvelopeFactory.createTraceData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.Dependency:\r\n                data = EnvelopeFactory.createDependencyData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.Event:\r\n                data = EnvelopeFactory.createEventData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.Exception:\r\n                data = EnvelopeFactory.createExceptionData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.Request:\r\n                data = EnvelopeFactory.createRequestData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.Metric:\r\n                data = EnvelopeFactory.createMetricData(telemetry);\r\n                break;\r\n        }\r\n        if (commonProperties && Contracts.domainSupportsProperties(data.baseData)) {\r\n            if (data && data.baseData) {\r\n                // if no properties are specified just add the common ones\r\n                if (!data.baseData.properties) {\r\n                    data.baseData.properties = commonProperties;\r\n                }\r\n                else {\r\n                    // otherwise, check each of the common ones\r\n                    for (var name in commonProperties) {\r\n                        // only override if the property `name` has not been set on this item\r\n                        if (!data.baseData.properties[name]) {\r\n                            data.baseData.properties[name] = commonProperties[name];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            // sanitize properties\r\n            data.baseData.properties = Util.validateStringMap(data.baseData.properties);\r\n        }\r\n        var iKey = config ? config.instrumentationKey || \"\" : \"\";\r\n        var envelope = new Contracts.Envelope();\r\n        envelope.data = data;\r\n        envelope.iKey = iKey;\r\n        // this is kind of a hack, but the envelope name is always the same as the data name sans the chars \"data\"\r\n        envelope.name =\r\n            \"Microsoft.ApplicationInsights.\" +\r\n                iKey.replace(/-/g, \"\") +\r\n                \".\" +\r\n                data.baseType.substr(0, data.baseType.length - 4);\r\n        envelope.tags = this.getTags(context, telemetry.tagOverrides);\r\n        envelope.time = (new Date()).toISOString();\r\n        envelope.ver = 1;\r\n        envelope.sampleRate = config ? config.samplingPercentage : 100;\r\n        // Exclude metrics from sampling by default\r\n        if (telemetryType === Contracts.TelemetryType.Metric) {\r\n            envelope.sampleRate = 100;\r\n        }\r\n        return envelope;\r\n    };\r\n    EnvelopeFactory.createTraceData = function (telemetry) {\r\n        var trace = new Contracts.MessageData();\r\n        trace.message = telemetry.message;\r\n        trace.properties = telemetry.properties;\r\n        if (!isNaN(telemetry.severity)) {\r\n            trace.severityLevel = telemetry.severity;\r\n        }\r\n        else {\r\n            trace.severityLevel = Contracts.SeverityLevel.Information;\r\n        }\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Trace);\r\n        data.baseData = trace;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createDependencyData = function (telemetry) {\r\n        var remoteDependency = new Contracts.RemoteDependencyData();\r\n        remoteDependency.name = telemetry.name;\r\n        remoteDependency.data = telemetry.data;\r\n        remoteDependency.target = telemetry.target;\r\n        remoteDependency.duration = Util.msToTimeSpan(telemetry.duration);\r\n        remoteDependency.success = telemetry.success;\r\n        remoteDependency.type = telemetry.dependencyTypeName;\r\n        remoteDependency.properties = telemetry.properties;\r\n        remoteDependency.resultCode = (telemetry.resultCode ? telemetry.resultCode + '' : '');\r\n        if (telemetry.id) {\r\n            remoteDependency.id = telemetry.id;\r\n        }\r\n        else {\r\n            remoteDependency.id = Util.w3cTraceId();\r\n        }\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Dependency);\r\n        data.baseData = remoteDependency;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createEventData = function (telemetry) {\r\n        var event = new Contracts.EventData();\r\n        event.name = telemetry.name;\r\n        event.properties = telemetry.properties;\r\n        event.measurements = telemetry.measurements;\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Event);\r\n        data.baseData = event;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createExceptionData = function (telemetry) {\r\n        var exception = new Contracts.ExceptionData();\r\n        exception.properties = telemetry.properties;\r\n        exception.severityLevel = Contracts.SeverityLevel.Error;\r\n        exception.measurements = telemetry.measurements;\r\n        exception.exceptions = [];\r\n        var stack = telemetry.exception[\"stack\"];\r\n        var exceptionDetails = new Contracts.ExceptionDetails();\r\n        exceptionDetails.message = telemetry.exception.message;\r\n        exceptionDetails.typeName = telemetry.exception.name;\r\n        exceptionDetails.parsedStack = this.parseStack(stack);\r\n        exceptionDetails.hasFullStack = Util.isArray(exceptionDetails.parsedStack) && exceptionDetails.parsedStack.length > 0;\r\n        exception.exceptions.push(exceptionDetails);\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Exception);\r\n        data.baseData = exception;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createRequestData = function (telemetry) {\r\n        var requestData = new Contracts.RequestData();\r\n        if (telemetry.id) {\r\n            requestData.id = telemetry.id;\r\n        }\r\n        else {\r\n            requestData.id = Util.w3cTraceId();\r\n        }\r\n        requestData.name = telemetry.name;\r\n        requestData.url = telemetry.url;\r\n        requestData.source = telemetry.source;\r\n        requestData.duration = Util.msToTimeSpan(telemetry.duration);\r\n        requestData.responseCode = (telemetry.resultCode ? telemetry.resultCode + '' : '');\r\n        requestData.success = telemetry.success;\r\n        requestData.properties = telemetry.properties;\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Request);\r\n        data.baseData = requestData;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createMetricData = function (telemetry) {\r\n        var metrics = new Contracts.MetricData(); // todo: enable client-batching of these\r\n        metrics.metrics = [];\r\n        var metric = new Contracts.DataPoint();\r\n        metric.count = !isNaN(telemetry.count) ? telemetry.count : 1;\r\n        metric.kind = Contracts.DataPointType.Aggregation;\r\n        metric.max = !isNaN(telemetry.max) ? telemetry.max : telemetry.value;\r\n        metric.min = !isNaN(telemetry.min) ? telemetry.min : telemetry.value;\r\n        metric.name = telemetry.name;\r\n        metric.stdDev = !isNaN(telemetry.stdDev) ? telemetry.stdDev : 0;\r\n        metric.value = telemetry.value;\r\n        metrics.metrics.push(metric);\r\n        metrics.properties = telemetry.properties;\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Metric);\r\n        data.baseData = metrics;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.getTags = function (context, tagOverrides) {\r\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        // Make a copy of context tags so we don't alter the actual object\r\n        // Also perform tag overriding\r\n        var newTags = {};\r\n        if (context && context.tags) {\r\n            for (var key in context.tags) {\r\n                newTags[key] = context.tags[key];\r\n            }\r\n        }\r\n        if (tagOverrides) {\r\n            for (var key in tagOverrides) {\r\n                newTags[key] = tagOverrides[key];\r\n            }\r\n        }\r\n        // Fill in internally-populated values if not already set\r\n        if (correlationContext) {\r\n            newTags[context.keys.operationId] = newTags[context.keys.operationId] || correlationContext.operation.id;\r\n            newTags[context.keys.operationName] = newTags[context.keys.operationName] || correlationContext.operation.name;\r\n            newTags[context.keys.operationParentId] = newTags[context.keys.operationParentId] || correlationContext.operation.parentId;\r\n        }\r\n        return newTags;\r\n    };\r\n    EnvelopeFactory.parseStack = function (stack) {\r\n        var parsedStack = undefined;\r\n        if (typeof stack === \"string\") {\r\n            var frames = stack.split(\"\\n\");\r\n            parsedStack = [];\r\n            var level = 0;\r\n            var totalSizeInBytes = 0;\r\n            for (var i = 0; i <= frames.length; i++) {\r\n                var frame = frames[i];\r\n                if (_StackFrame.regex.test(frame)) {\r\n                    var parsedFrame = new _StackFrame(frames[i], level++);\r\n                    totalSizeInBytes += parsedFrame.sizeInBytes;\r\n                    parsedStack.push(parsedFrame);\r\n                }\r\n            }\r\n            // DP Constraint - exception parsed stack must be < 32KB\r\n            // remove frames from the middle to meet the threshold\r\n            var exceptionParsedStackThreshold = 32 * 1024;\r\n            if (totalSizeInBytes > exceptionParsedStackThreshold) {\r\n                var left = 0;\r\n                var right = parsedStack.length - 1;\r\n                var size = 0;\r\n                var acceptedLeft = left;\r\n                var acceptedRight = right;\r\n                while (left < right) {\r\n                    // check size\r\n                    var lSize = parsedStack[left].sizeInBytes;\r\n                    var rSize = parsedStack[right].sizeInBytes;\r\n                    size += lSize + rSize;\r\n                    if (size > exceptionParsedStackThreshold) {\r\n                        // remove extra frames from the middle\r\n                        var howMany = acceptedRight - acceptedLeft + 1;\r\n                        parsedStack.splice(acceptedLeft, howMany);\r\n                        break;\r\n                    }\r\n                    // update pointers\r\n                    acceptedLeft = left;\r\n                    acceptedRight = right;\r\n                    left++;\r\n                    right--;\r\n                }\r\n            }\r\n        }\r\n        return parsedStack;\r\n    };\r\n    return EnvelopeFactory;\r\n}());\r\nvar _StackFrame = (function () {\r\n    function _StackFrame(frame, level) {\r\n        this.sizeInBytes = 0;\r\n        this.level = level;\r\n        this.method = \"<no_method>\";\r\n        this.assembly = Util.trim(frame);\r\n        var matches = frame.match(_StackFrame.regex);\r\n        if (matches && matches.length >= 5) {\r\n            this.method = Util.trim(matches[2]) || this.method;\r\n            this.fileName = Util.trim(matches[4]) || \"<no_filename>\";\r\n            this.line = parseInt(matches[5]) || 0;\r\n        }\r\n        this.sizeInBytes += this.method.length;\r\n        this.sizeInBytes += this.fileName.length;\r\n        this.sizeInBytes += this.assembly.length;\r\n        // todo: these might need to be removed depending on how the back-end settles on their size calculation\r\n        this.sizeInBytes += _StackFrame.baseSize;\r\n        this.sizeInBytes += this.level.toString().length;\r\n        this.sizeInBytes += this.line.toString().length;\r\n    }\r\n    // regex to match stack frames from ie/chrome/ff\r\n    // methodName=$2, fileName=$4, lineNo=$5, column=$6\r\n    _StackFrame.regex = /^([\\s]+at)?(.*?)(\\@|\\s\\(|\\s)([^\\(\\@\\n]+):([0-9]+):([0-9]+)(\\)?)$/;\r\n    _StackFrame.baseSize = 58; //'{\"method\":\"\",\"level\":,\"assembly\":\"\",\"fileName\":\"\",\"line\":}'.length\r\n    return _StackFrame;\r\n}());\r\nmodule.exports = EnvelopeFactory;\r\n//# sourceMappingURL=EnvelopeFactory.js.map","import crypto from 'crypto';\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  return crypto.randomFillSync(rnds8);\n}","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction bytesToUuid(buf, offset_) {\n  const offset = offset_ || 0; // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n\n  return (byteToHex[buf[offset + 0]] + byteToHex[buf[offset + 1]] + byteToHex[buf[offset + 2]] + byteToHex[buf[offset + 3]] + '-' + byteToHex[buf[offset + 4]] + byteToHex[buf[offset + 5]] + '-' + byteToHex[buf[offset + 6]] + byteToHex[buf[offset + 7]] + '-' + byteToHex[buf[offset + 8]] + byteToHex[buf[offset + 9]] + '-' + byteToHex[buf[offset + 10]] + byteToHex[buf[offset + 11]] + byteToHex[buf[offset + 12]] + byteToHex[buf[offset + 13]] + byteToHex[buf[offset + 14]] + byteToHex[buf[offset + 15]]).toLowerCase();\n}\n\nexport default bytesToUuid;","import rng from './rng.js';\nimport bytesToUuid from './bytesToUuid.js'; // **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nlet _nodeId;\n\nlet _clockseq; // Previous uuid creation time\n\n\nlet _lastMSecs = 0;\nlet _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\nfunction v1(options, buf, offset) {\n  let i = buf && offset || 0;\n  const b = buf || new Array(16);\n  options = options || {};\n  let node = options.node || _nodeId;\n  let clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n\n  if (node == null || clockseq == null) {\n    const seedBytes = options.random || (options.rng || rng)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n  let msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n\n  let nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n  const dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n\n\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n  msecs += 12219292800000; // `time_low`\n\n  const tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff; // `time_mid`\n\n  const tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n  b[i++] = clockseq & 0xff; // `node`\n\n  for (let n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf || bytesToUuid(b);\n}\n\nexport default v1;","import bytesToUuid from './bytesToUuid.js';\n\nfunction uuidToBytes(uuid) {\n  // Note: We assume we're being passed a valid uuid string\n  const bytes = [];\n  uuid.replace(/[a-fA-F0-9]{2}/g, function (hex) {\n    bytes.push(parseInt(hex, 16));\n  });\n  return bytes;\n}\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  const bytes = [];\n\n  for (let i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n\n  return bytes;\n}\n\nexport const DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexport const URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexport default function (name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n\n    if (typeof namespace === 'string') {\n      namespace = uuidToBytes(namespace);\n    }\n\n    if (!Array.isArray(value)) {\n      throw TypeError('value must be an array of bytes');\n    }\n\n    if (!Array.isArray(namespace) || namespace.length !== 16) {\n      throw TypeError('namespace must be uuid string or an Array of 16 byte values');\n    } // Per 4.3\n\n\n    const bytes = hashfunc(namespace.concat(value));\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n\n    if (buf) {\n      offset = offset || 0;\n\n      for (let i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n\n      return buf;\n    }\n\n    return bytesToUuid(bytes);\n  } // Function#name is not settable on some platforms (#270)\n\n\n  try {\n    generateUUID.name = name; // eslint-disable-next-line no-empty\n  } catch (err) {} // For CommonJS default export support\n\n\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}","import v35 from './v35.js';\nimport md5 from './md5.js';\nconst v3 = v35('v3', 0x30, md5);\nexport default v3;","import crypto from 'crypto';\n\nfunction md5(bytes) {\n  if (Array.isArray(bytes)) {\n    bytes = Buffer.from(bytes);\n  } else if (typeof bytes === 'string') {\n    bytes = Buffer.from(bytes, 'utf8');\n  }\n\n  return crypto.createHash('md5').update(bytes).digest();\n}\n\nexport default md5;","import rng from './rng.js';\nimport bytesToUuid from './bytesToUuid.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return bytesToUuid(rnds);\n}\n\nexport default v4;","import v35 from './v35.js';\nimport sha1 from './sha1.js';\nconst v5 = v35('v5', 0x50, sha1);\nexport default v5;","import crypto from 'crypto';\n\nfunction sha1(bytes) {\n  if (Array.isArray(bytes)) {\n    bytes = Buffer.from(bytes);\n  } else if (typeof bytes === 'string') {\n    bytes = Buffer.from(bytes, 'utf8');\n  }\n\n  return crypto.createHash('sha1').update(bytes).digest();\n}\n\nexport default sha1;"],"sourceRoot":""}